<!DOCTYPE html>
<html xmlns="http://www.w3.org/1999/xhtml" lang="en" xml:lang="en"><head>

<meta charset="utf-8">
<meta name="generator" content="quarto-1.5.57">

<meta name="viewport" content="width=device-width, initial-scale=1.0, user-scalable=yes">


<title>2&nbsp; Exploratory Data Analysis – Introduction to Applied Machine Learning</title>
<style>
code{white-space: pre-wrap;}
span.smallcaps{font-variant: small-caps;}
div.columns{display: flex; gap: min(4vw, 1.5em);}
div.column{flex: auto; overflow-x: auto;}
div.hanging-indent{margin-left: 1.5em; text-indent: -1.5em;}
ul.task-list{list-style: none;}
ul.task-list li input[type="checkbox"] {
  width: 0.8em;
  margin: 0 0.8em 0.2em -1em; /* quarto-specific, see https://github.com/quarto-dev/quarto-cli/issues/4556 */ 
  vertical-align: middle;
}
/* CSS for syntax highlighting */
pre > code.sourceCode { white-space: pre; position: relative; }
pre > code.sourceCode > span { line-height: 1.25; }
pre > code.sourceCode > span:empty { height: 1.2em; }
.sourceCode { overflow: visible; }
code.sourceCode > span { color: inherit; text-decoration: inherit; }
div.sourceCode { margin: 1em 0; }
pre.sourceCode { margin: 0; }
@media screen {
div.sourceCode { overflow: auto; }
}
@media print {
pre > code.sourceCode { white-space: pre-wrap; }
pre > code.sourceCode > span { display: inline-block; text-indent: -5em; padding-left: 5em; }
}
pre.numberSource code
  { counter-reset: source-line 0; }
pre.numberSource code > span
  { position: relative; left: -4em; counter-increment: source-line; }
pre.numberSource code > span > a:first-child::before
  { content: counter(source-line);
    position: relative; left: -1em; text-align: right; vertical-align: baseline;
    border: none; display: inline-block;
    -webkit-touch-callout: none; -webkit-user-select: none;
    -khtml-user-select: none; -moz-user-select: none;
    -ms-user-select: none; user-select: none;
    padding: 0 4px; width: 4em;
  }
pre.numberSource { margin-left: 3em;  padding-left: 4px; }
div.sourceCode
  {   }
@media screen {
pre > code.sourceCode > span > a:first-child::before { text-decoration: underline; }
}
/* CSS for citations */
div.csl-bib-body { }
div.csl-entry {
  clear: both;
  margin-bottom: 0em;
}
.hanging-indent div.csl-entry {
  margin-left:2em;
  text-indent:-2em;
}
div.csl-left-margin {
  min-width:2em;
  float:left;
}
div.csl-right-inline {
  margin-left:2em;
  padding-left:1em;
}
div.csl-indent {
  margin-left: 2em;
}</style>


<script src="site_libs/quarto-nav/quarto-nav.js"></script>
<script src="site_libs/quarto-nav/headroom.min.js"></script>
<script src="site_libs/clipboard/clipboard.min.js"></script>
<script src="site_libs/quarto-search/autocomplete.umd.js"></script>
<script src="site_libs/quarto-search/fuse.min.js"></script>
<script src="site_libs/quarto-search/quarto-search.js"></script>
<meta name="quarto:offset" content="./">
<link href="./l03_regression.html" rel="next">
<link href="./l01_overview.html" rel="prev">
<script src="site_libs/quarto-html/quarto.js"></script>
<script src="site_libs/quarto-html/popper.min.js"></script>
<script src="site_libs/quarto-html/tippy.umd.min.js"></script>
<script src="site_libs/quarto-html/anchor.min.js"></script>
<link href="site_libs/quarto-html/tippy.css" rel="stylesheet">
<link href="site_libs/quarto-html/quarto-syntax-highlighting.css" rel="stylesheet" id="quarto-text-highlighting-styles">
<script src="site_libs/bootstrap/bootstrap.min.js"></script>
<link href="site_libs/bootstrap/bootstrap-icons.css" rel="stylesheet">
<link href="site_libs/bootstrap/bootstrap.min.css" rel="stylesheet" id="quarto-bootstrap" data-mode="light">
<script id="quarto-search-options" type="application/json">{
  "location": "sidebar",
  "copy-button": false,
  "collapse-after": 3,
  "panel-placement": "start",
  "type": "textbox",
  "limit": 50,
  "keyboard-shortcut": [
    "f",
    "/",
    "s"
  ],
  "show-item-context": false,
  "language": {
    "search-no-results-text": "No results",
    "search-matching-documents-text": "matching documents",
    "search-copy-link-title": "Copy link to search",
    "search-hide-matches-text": "Hide additional matches",
    "search-more-match-text": "more match in this document",
    "search-more-matches-text": "more matches in this document",
    "search-clear-button-title": "Clear",
    "search-text-placeholder": "",
    "search-detached-cancel-button-title": "Cancel",
    "search-submit-button-title": "Submit",
    "search-label": "Search"
  }
}</script>
<script src="site_libs/kePrint-0.0.1/kePrint.js"></script>

<link href="site_libs/lightable-0.0.1/lightable.css" rel="stylesheet">


  <script src="https://cdnjs.cloudflare.com/polyfill/v3/polyfill.min.js?features=es6"></script>
  <script src="https://cdn.jsdelivr.net/npm/mathjax@3/es5/tex-chtml-full.js" type="text/javascript"></script>

<script type="text/javascript">
const typesetMath = (el) => {
  if (window.MathJax) {
    // MathJax Typeset
    window.MathJax.typeset([el]);
  } else if (window.katex) {
    // KaTeX Render
    var mathElements = el.getElementsByClassName("math");
    var macros = [];
    for (var i = 0; i < mathElements.length; i++) {
      var texText = mathElements[i].firstChild;
      if (mathElements[i].tagName == "SPAN") {
        window.katex.render(texText.data, mathElements[i], {
          displayMode: mathElements[i].classList.contains('display'),
          throwOnError: false,
          macros: macros,
          fleqn: false
        });
      }
    }
  }
}
window.Quarto = {
  typesetMath
};
</script>

<link rel="stylesheet" href="book.css">
</head>

<body class="nav-sidebar floating">

<div id="quarto-search-results"></div>
  <header id="quarto-header" class="headroom fixed-top">
  <nav class="quarto-secondary-nav">
    <div class="container-fluid d-flex">
      <button type="button" class="quarto-btn-toggle btn" data-bs-toggle="collapse" role="button" data-bs-target=".quarto-sidebar-collapse-item" aria-controls="quarto-sidebar" aria-expanded="false" aria-label="Toggle sidebar navigation" onclick="if (window.quartoToggleHeadroom) { window.quartoToggleHeadroom(); }">
        <i class="bi bi-layout-text-sidebar-reverse"></i>
      </button>
        <nav class="quarto-page-breadcrumbs" aria-label="breadcrumb"><ol class="breadcrumb"><li class="breadcrumb-item"><a href="./l02_exploratory_data_analysis.html"><span class="chapter-number">2</span>&nbsp; <span class="chapter-title">Exploratory Data Analysis</span></a></li></ol></nav>
        <a class="flex-grow-1" role="navigation" data-bs-toggle="collapse" data-bs-target=".quarto-sidebar-collapse-item" aria-controls="quarto-sidebar" aria-expanded="false" aria-label="Toggle sidebar navigation" onclick="if (window.quartoToggleHeadroom) { window.quartoToggleHeadroom(); }">      
        </a>
      <button type="button" class="btn quarto-search-button" aria-label="Search" onclick="window.quartoOpenSearch();">
        <i class="bi bi-search"></i>
      </button>
    </div>
  </nav>
</header>
<!-- content -->
<div id="quarto-content" class="quarto-container page-columns page-rows-contents page-layout-article">
<!-- sidebar -->
  <nav id="quarto-sidebar" class="sidebar collapse collapse-horizontal quarto-sidebar-collapse-item sidebar-navigation floating overflow-auto">
    <div class="pt-lg-2 mt-2 text-left sidebar-header">
    <div class="sidebar-title mb-0 py-0">
      <a href="./">Introduction to Applied Machine Learning</a> 
        <div class="sidebar-tools-main">
    <a href="https://github.com/jjcurtin/book_iaml" title="Source Code" class="quarto-navigation-tool px-1" aria-label="Source Code"><i class="bi bi-github"></i></a>
  <a href="" class="quarto-reader-toggle quarto-navigation-tool px-1" onclick="window.quartoToggleReader(); return false;" title="Toggle reader mode">
  <div class="quarto-reader-toggle-btn">
  <i class="bi"></i>
  </div>
</a>
</div>
    </div>
      </div>
        <div class="mt-2 flex-shrink-0 align-items-center">
        <div class="sidebar-search">
        <div id="quarto-search" class="" title="Search"></div>
        </div>
        </div>
    <div class="sidebar-menu-container"> 
    <ul class="list-unstyled mt-1">
        <li class="sidebar-item">
  <div class="sidebar-item-container"> 
  <a href="./index.html" class="sidebar-item-text sidebar-link">
 <span class="menu-text">Course Syllabus</span></a>
  </div>
</li>
        <li class="sidebar-item">
  <div class="sidebar-item-container"> 
  <a href="./course_materials.html" class="sidebar-item-text sidebar-link">
 <span class="menu-text">Course Materials</span></a>
  </div>
</li>
        <li class="sidebar-item">
  <div class="sidebar-item-container"> 
  <a href="./l01_overview.html" class="sidebar-item-text sidebar-link">
 <span class="menu-text"><span class="chapter-number">1</span>&nbsp; <span class="chapter-title">Overview of Machine Learning</span></span></a>
  </div>
</li>
        <li class="sidebar-item">
  <div class="sidebar-item-container"> 
  <a href="./l02_exploratory_data_analysis.html" class="sidebar-item-text sidebar-link active">
 <span class="menu-text"><span class="chapter-number">2</span>&nbsp; <span class="chapter-title">Exploratory Data Analysis</span></span></a>
  </div>
</li>
        <li class="sidebar-item">
  <div class="sidebar-item-container"> 
  <a href="./l03_regression.html" class="sidebar-item-text sidebar-link">
 <span class="menu-text"><span class="chapter-number">3</span>&nbsp; <span class="chapter-title">Introduction to Regression Models</span></span></a>
  </div>
</li>
        <li class="sidebar-item">
  <div class="sidebar-item-container"> 
  <a href="./l04_classification.html" class="sidebar-item-text sidebar-link">
 <span class="menu-text"><span class="chapter-number">4</span>&nbsp; <span class="chapter-title">Introduction to Classification Models</span></span></a>
  </div>
</li>
        <li class="sidebar-item">
  <div class="sidebar-item-container"> 
  <a href="./l05_resampling.html" class="sidebar-item-text sidebar-link">
 <span class="menu-text"><span class="chapter-number">5</span>&nbsp; <span class="chapter-title">Resampling Methods for Model Selection and Evaluation</span></span></a>
  </div>
</li>
        <li class="sidebar-item">
  <div class="sidebar-item-container"> 
  <a href="./l06_regularization.html" class="sidebar-item-text sidebar-link">
 <span class="menu-text"><span class="chapter-number">6</span>&nbsp; <span class="chapter-title">Regularization and Penalized Models</span></span></a>
  </div>
</li>
        <li class="sidebar-item">
  <div class="sidebar-item-container"> 
  <a href="./l07_midterm.html" class="sidebar-item-text sidebar-link">
 <span class="menu-text"><span class="chapter-number">7</span>&nbsp; <span class="chapter-title">Midterm Exam</span></span></a>
  </div>
</li>
        <li class="sidebar-item">
  <div class="sidebar-item-container"> 
  <a href="./l08_advanced_performance_metrics.html" class="sidebar-item-text sidebar-link">
 <span class="menu-text"><span class="chapter-number">8</span>&nbsp; <span class="chapter-title">Advanced Performance Metrics</span></span></a>
  </div>
</li>
        <li class="sidebar-item">
  <div class="sidebar-item-container"> 
  <a href="./l09_random_forest.html" class="sidebar-item-text sidebar-link">
 <span class="menu-text"><span class="chapter-number">9</span>&nbsp; <span class="chapter-title">Advanced Models: Decision Trees, Bagging Trees, and Random Forest</span></span></a>
  </div>
</li>
        <li class="sidebar-item">
  <div class="sidebar-item-container"> 
  <a href="./l10_neural_networks.html" class="sidebar-item-text sidebar-link">
 <span class="menu-text"><span class="chapter-number">10</span>&nbsp; <span class="chapter-title">Advanced Models: Neural Networks</span></span></a>
  </div>
</li>
        <li class="sidebar-item sidebar-item-section">
      <div class="sidebar-item-container"> 
            <a class="sidebar-item-text sidebar-link text-start" data-bs-toggle="collapse" data-bs-target="#quarto-sidebar-section-1" role="navigation" aria-expanded="true">
 <span class="menu-text">Appendices</span></a>
          <a class="sidebar-item-toggle text-start" data-bs-toggle="collapse" data-bs-target="#quarto-sidebar-section-1" role="navigation" aria-expanded="true" aria-label="Toggle section">
            <i class="bi bi-chevron-right ms-2"></i>
          </a> 
      </div>
      <ul id="quarto-sidebar-section-1" class="collapse list-unstyled sidebar-section depth1 show">  
          <li class="sidebar-item">
  <div class="sidebar-item-container"> 
  <a href="./review_midterm.html" class="sidebar-item-text sidebar-link">
 <span class="menu-text">Review Midterm Concepts Exam</span></a>
  </div>
</li>
          <li class="sidebar-item">
  <div class="sidebar-item-container"> 
  <a href="./app_terminology.html" class="sidebar-item-text sidebar-link">
 <span class="menu-text">Key Terminology and Concepts</span></a>
  </div>
</li>
          <li class="sidebar-item">
  <div class="sidebar-item-container"> 
  <a href="./app_dummy_coding.html" class="sidebar-item-text sidebar-link">
 <span class="menu-text">Novel Levels in Held-Out Set(s)</span></a>
  </div>
</li>
          <li class="sidebar-item">
  <div class="sidebar-item-container"> 
  <a href="./app_resampling_with_map.html" class="sidebar-item-text sidebar-link">
 <span class="menu-text"><span class="chapter-number">11</span>&nbsp; <span class="chapter-title">Demonstration of using mapping to fit_resamples or tune_grid</span></span></a>
  </div>
</li>
          <li class="sidebar-item">
  <div class="sidebar-item-container"> 
  <a href="./app_pca.html" class="sidebar-item-text sidebar-link">
 <span class="menu-text">Principal Components Analysis</span></a>
  </div>
</li>
          <li class="sidebar-item">
  <div class="sidebar-item-container"> 
  <a href="./app_keras.html" class="sidebar-item-text sidebar-link">
 <span class="menu-text">Installing Keras for Neural Networks</span></a>
  </div>
</li>
          <li class="sidebar-item">
  <div class="sidebar-item-container"> 
  <a href="./app_shap.html" class="sidebar-item-text sidebar-link">
 <span class="menu-text">Appendix 3: Understanding Shapley Values from SHAP</span></a>
  </div>
</li>
          <li class="sidebar-item">
  <div class="sidebar-item-container"> 
  <a href="./app_bootstrapping.html" class="sidebar-item-text sidebar-link">
 <span class="menu-text">Appendix 4: Bootstrapping Standard Errors &amp; Confidence Intervals</span></a>
  </div>
</li>
          <li class="sidebar-item">
  <div class="sidebar-item-container"> 
  <a href="./app_test.html" class="sidebar-item-text sidebar-link">
 <span class="menu-text"><span class="chapter-number">12</span>&nbsp; <span class="chapter-title">Test</span></span></a>
  </div>
</li>
      </ul>
  </li>
    </ul>
    </div>
</nav>
<div id="quarto-sidebar-glass" class="quarto-sidebar-collapse-item" data-bs-toggle="collapse" data-bs-target=".quarto-sidebar-collapse-item"></div>
<!-- margin-sidebar -->
    <div id="quarto-margin-sidebar" class="sidebar margin-sidebar">
        <nav id="TOC" role="doc-toc" class="toc-active">
    <h2 id="toc-title">Table of contents</h2>
   
  <ul>
  <li><a href="#learning-objectives" id="toc-learning-objectives" class="nav-link active" data-scroll-target="#learning-objectives"><span class="header-section-number">2.1</span> Learning Objectives</a></li>
  <li><a href="#overview-of-exploratory-data-analysis" id="toc-overview-of-exploratory-data-analysis" class="nav-link" data-scroll-target="#overview-of-exploratory-data-analysis"><span class="header-section-number">2.2</span> Overview of Exploratory Data Analysis</a>
  <ul class="collapse">
  <li><a href="#stages-of-data-analysis-and-model-development" id="toc-stages-of-data-analysis-and-model-development" class="nav-link" data-scroll-target="#stages-of-data-analysis-and-model-development"><span class="header-section-number">2.2.1</span> Stages of Data Analysis and Model Development</a></li>
  </ul></li>
  <li><a href="#best-practices-and-other-recommendations" id="toc-best-practices-and-other-recommendations" class="nav-link" data-scroll-target="#best-practices-and-other-recommendations"><span class="header-section-number">2.3</span> Best Practices and Other Recommendations</a>
  <ul class="collapse">
  <li><a href="#data-file-formats" id="toc-data-file-formats" class="nav-link" data-scroll-target="#data-file-formats"><span class="header-section-number">2.3.1</span> Data file formats</a></li>
  <li><a href="#classing-variables" id="toc-classing-variables" class="nav-link" data-scroll-target="#classing-variables"><span class="header-section-number">2.3.2</span> Classing Variables</a></li>
  <li><a href="#data-dictionaries" id="toc-data-dictionaries" class="nav-link" data-scroll-target="#data-dictionaries"><span class="header-section-number">2.3.3</span> Data Dictionaries</a></li>
  <li><a href="#the-ames-housing-prices-dataset" id="toc-the-ames-housing-prices-dataset" class="nav-link" data-scroll-target="#the-ames-housing-prices-dataset"><span class="header-section-number">2.3.4</span> The Ames Housing Prices Dataset</a></li>
  <li><a href="#packages-and-conflicts" id="toc-packages-and-conflicts" class="nav-link" data-scroll-target="#packages-and-conflicts"><span class="header-section-number">2.3.5</span> Packages and Conflicts</a></li>
  <li><a href="#source-and-other-environment-settings" id="toc-source-and-other-environment-settings" class="nav-link" data-scroll-target="#source-and-other-environment-settings"><span class="header-section-number">2.3.6</span> Source and Other Environment Settings</a></li>
  <li><a href="#read-and-glimpse-dataframe" id="toc-read-and-glimpse-dataframe" class="nav-link" data-scroll-target="#read-and-glimpse-dataframe"><span class="header-section-number">2.3.7</span> Read and Glimpse Dataframe</a></li>
  </ul></li>
  <li><a href="#exploratory-data-analysis-for-data-cleaning" id="toc-exploratory-data-analysis-for-data-cleaning" class="nav-link" data-scroll-target="#exploratory-data-analysis-for-data-cleaning"><span class="header-section-number">2.4</span> Exploratory Data Analysis for Data Cleaning</a>
  <ul class="collapse">
  <li><a href="#data-leakage-issues" id="toc-data-leakage-issues" class="nav-link" data-scroll-target="#data-leakage-issues"><span class="header-section-number">2.4.1</span> Data Leakage Issues</a></li>
  <li><a href="#tidy-variable-names" id="toc-tidy-variable-names" class="nav-link" data-scroll-target="#tidy-variable-names"><span class="header-section-number">2.4.2</span> Tidy variable names</a></li>
  <li><a href="#explore-variable-classes" id="toc-explore-variable-classes" class="nav-link" data-scroll-target="#explore-variable-classes"><span class="header-section-number">2.4.3</span> Explore variable classes</a></li>
  <li><a href="#skimming-the-data" id="toc-skimming-the-data" class="nav-link" data-scroll-target="#skimming-the-data"><span class="header-section-number">2.4.4</span> Skimming the data</a></li>
  <li><a href="#missing-data---all-variables" id="toc-missing-data---all-variables" class="nav-link" data-scroll-target="#missing-data---all-variables"><span class="header-section-number">2.4.5</span> Missing Data - All variables</a></li>
  <li><a href="#explore-minmax-response-for-numeric-variables" id="toc-explore-minmax-response-for-numeric-variables" class="nav-link" data-scroll-target="#explore-minmax-response-for-numeric-variables"><span class="header-section-number">2.4.6</span> Explore Min/Max Response for Numeric Variables</a></li>
  <li><a href="#explore-all-responses-for-categorical-variables" id="toc-explore-all-responses-for-categorical-variables" class="nav-link" data-scroll-target="#explore-all-responses-for-categorical-variables"><span class="header-section-number">2.4.7</span> Explore All Responses for Categorical Variables</a></li>
  <li><a href="#tidy-responses-for-categorical-variables" id="toc-tidy-responses-for-categorical-variables" class="nav-link" data-scroll-target="#tidy-responses-for-categorical-variables"><span class="header-section-number">2.4.8</span> Tidy Responses for Categorical Variables</a></li>
  <li><a href="#trainvalidatetest-splits" id="toc-trainvalidatetest-splits" class="nav-link" data-scroll-target="#trainvalidatetest-splits"><span class="header-section-number">2.4.9</span> Train/Validate/Test Splits</a></li>
  </ul></li>
  <li><a href="#exploratory-data-analysis-for-modeling" id="toc-exploratory-data-analysis-for-modeling" class="nav-link" data-scroll-target="#exploratory-data-analysis-for-modeling"><span class="header-section-number">2.5</span> Exploratory Data Analysis for Modeling</a>
  <ul class="collapse">
  <li><a href="#overall-summary-of-feature-matrix" id="toc-overall-summary-of-feature-matrix" class="nav-link" data-scroll-target="#overall-summary-of-feature-matrix"><span class="header-section-number">2.5.1</span> Overall Summary of Feature Matrix</a></li>
  <li><a href="#univariate-distributions" id="toc-univariate-distributions" class="nav-link" data-scroll-target="#univariate-distributions"><span class="header-section-number">2.5.2</span> Univariate Distributions</a></li>
  <li><a href="#barplots-for-categorical-variables-univariate" id="toc-barplots-for-categorical-variables-univariate" class="nav-link" data-scroll-target="#barplots-for-categorical-variables-univariate"><span class="header-section-number">2.5.3</span> Barplots for Categorical Variables (Univariate)</a></li>
  <li><a href="#tables-for-categorical-variables-univariate" id="toc-tables-for-categorical-variables-univariate" class="nav-link" data-scroll-target="#tables-for-categorical-variables-univariate"><span class="header-section-number">2.5.4</span> Tables for Categorical Variables (Univariate)</a></li>
  <li><a href="#histograms-for-numeric-variables-univariate" id="toc-histograms-for-numeric-variables-univariate" class="nav-link" data-scroll-target="#histograms-for-numeric-variables-univariate"><span class="header-section-number">2.5.5</span> Histograms for Numeric Variables (Univariate)</a></li>
  <li><a href="#smoothed-frequency-polygons-for-numeric-variables-univariate" id="toc-smoothed-frequency-polygons-for-numeric-variables-univariate" class="nav-link" data-scroll-target="#smoothed-frequency-polygons-for-numeric-variables-univariate"><span class="header-section-number">2.5.6</span> Smoothed Frequency Polygons for Numeric Variables (Univariate)</a></li>
  <li><a href="#simple-boxplots-for-numeric-variables-univariate" id="toc-simple-boxplots-for-numeric-variables-univariate" class="nav-link" data-scroll-target="#simple-boxplots-for-numeric-variables-univariate"><span class="header-section-number">2.5.7</span> Simple Boxplots for Numeric Variables (Univariate)</a></li>
  <li><a href="#combined-boxplot-and-violin-plots-for-numeric-variables-univariate" id="toc-combined-boxplot-and-violin-plots-for-numeric-variables-univariate" class="nav-link" data-scroll-target="#combined-boxplot-and-violin-plots-for-numeric-variables-univariate"><span class="header-section-number">2.5.8</span> Combined Boxplot and Violin Plots for Numeric Variables (Univariate)</a></li>
  <li><a href="#summary-statistics-for-numeric-variables-univariate" id="toc-summary-statistics-for-numeric-variables-univariate" class="nav-link" data-scroll-target="#summary-statistics-for-numeric-variables-univariate"><span class="header-section-number">2.5.9</span> Summary Statistics for Numeric Variables (Univariate)</a></li>
  <li><a href="#bivariate-relationships-with-outcome" id="toc-bivariate-relationships-with-outcome" class="nav-link" data-scroll-target="#bivariate-relationships-with-outcome"><span class="header-section-number">2.5.10</span> Bivariate Relationships with Outcome</a></li>
  <li><a href="#scatterplots-for-numeric-variables-bivariate" id="toc-scatterplots-for-numeric-variables-bivariate" class="nav-link" data-scroll-target="#scatterplots-for-numeric-variables-bivariate"><span class="header-section-number">2.5.11</span> Scatterplots for Numeric Variables (Bivariate)</a></li>
  <li><a href="#correlations-correlation-plots-for-numeric-variables-bivariate" id="toc-correlations-correlation-plots-for-numeric-variables-bivariate" class="nav-link" data-scroll-target="#correlations-correlation-plots-for-numeric-variables-bivariate"><span class="header-section-number">2.5.12</span> Correlations &amp; Correlation Plots for Numeric Variables (Bivariate)</a></li>
  <li><a href="#grouped-box-violin-plots-for-categorical-and-numeric-bivariate" id="toc-grouped-box-violin-plots-for-categorical-and-numeric-bivariate" class="nav-link" data-scroll-target="#grouped-box-violin-plots-for-categorical-and-numeric-bivariate"><span class="header-section-number">2.5.13</span> Grouped Box + Violin Plots for Categorical and Numeric (Bivariate)</a></li>
  <li><a href="#stacked-barplots-for-categorical-bivariate" id="toc-stacked-barplots-for-categorical-bivariate" class="nav-link" data-scroll-target="#stacked-barplots-for-categorical-bivariate"><span class="header-section-number">2.5.14</span> Stacked Barplots for Categorical (Bivariate)</a></li>
  <li><a href="#tile-plot-for-ordinal-categorical-bivariate" id="toc-tile-plot-for-ordinal-categorical-bivariate" class="nav-link" data-scroll-target="#tile-plot-for-ordinal-categorical-bivariate"><span class="header-section-number">2.5.15</span> Tile Plot for Ordinal Categorical (Bivariate)</a></li>
  <li><a href="#two-way-tables-for-categorical-variables-bivariate" id="toc-two-way-tables-for-categorical-variables-bivariate" class="nav-link" data-scroll-target="#two-way-tables-for-categorical-variables-bivariate"><span class="header-section-number">2.5.16</span> Two-way Tables for Categorical Variables (Bivariate)</a></li>
  </ul></li>
  <li><a href="#working-with-recipes" id="toc-working-with-recipes" class="nav-link" data-scroll-target="#working-with-recipes"><span class="header-section-number">2.6</span> Working with Recipes</a>
  <ul class="collapse">
  <li><a href="#prepping-and-baking-a-recipe" id="toc-prepping-and-baking-a-recipe" class="nav-link" data-scroll-target="#prepping-and-baking-a-recipe"><span class="header-section-number">2.6.1</span> Prepping and Baking a Recipe</a></li>
  </ul></li>
  </ul>
<div class="toc-actions"><ul><li><a href="https://github.com/jjcurtin/book_iaml/edit/main/l02_exploratory_data_analysis.qmd" class="toc-action"><i class="bi bi-github"></i>Edit this page</a></li></ul></div></nav>
    </div>
<!-- main -->
<main class="content" id="quarto-document-content">

<header id="title-block-header" class="quarto-title-block default">
<div class="quarto-title">
<h1 class="title"><span class="chapter-number">2</span>&nbsp; <span class="chapter-title">Exploratory Data Analysis</span></h1>
</div>



<div class="quarto-title-meta">

    
  
    
  </div>
  


</header>


<section id="learning-objectives" class="level2" data-number="2.1">
<h2 data-number="2.1" class="anchored" data-anchor-id="learning-objectives"><span class="header-section-number">2.1</span> Learning Objectives</h2>
<ul>
<li>Stages of Analysis</li>
<li>Best practices for data storage, variable classing, data dictionaries</li>
<li>Problems and solutions regarding data leakage</li>
<li>Key goals and techniques cleaning EDA
<ul>
<li>Tidying names and response labels</li>
<li>Appropriate visualizations based on variable class</li>
<li>Summary statistics based on variable class</li>
</ul></li>
<li>Proper splitting for training/validation and test sets</li>
<li>Key goals and techniques modeling EDA
<ul>
<li>Appropriate visualizations based on variable class</li>
<li>Summary statistics based on variable class</li>
</ul></li>
<li>Introductory use of recipes for feature engineering</li>
</ul>
<hr>
</section>
<section id="overview-of-exploratory-data-analysis" class="level2" data-number="2.2">
<h2 data-number="2.2" class="anchored" data-anchor-id="overview-of-exploratory-data-analysis"><span class="header-section-number">2.2</span> Overview of Exploratory Data Analysis</h2>
<section id="stages-of-data-analysis-and-model-development" class="level3" data-number="2.2.1">
<h3 data-number="2.2.1" class="anchored" data-anchor-id="stages-of-data-analysis-and-model-development"><span class="header-section-number">2.2.1</span> Stages of Data Analysis and Model Development</h3>
<p>These are the main stages of data analysis for machine learning and the data that are used</p>
<ol type="1">
<li><p>EDA: Cleaning (full dataset)</p></li>
<li><p>EDA: Split data into training, validation and test set(s)</p></li>
<li><p>EDA: Modeling (training sets)</p></li>
<li><p>Model Development: Feature engineering (training sets)</p></li>
<li><p>Model Development: Fit many models configurations (training set)</p></li>
<li><p>Model Development: Calculate performance metric for many models configurations (validation sets)</p></li>
<li><p>Model Development: Select final/best model configuration based on performance metric (validation sets)</p></li>
<li><p>Final Model Evaluation: Fit best model configuration (use both training and validation sets)</p></li>
<li><p>Final Model Evaluation: Evaluate final model configuration using performance metric (test sets)</p></li>
<li><p>Implementation: Fit best model configuration to ALL data (training, validation, and test sets) if you plan to use it for applications.</p></li>
</ol>
<hr>
<p>The earlier stages are highly iterative:</p>
<ul>
<li>You may iterate some through EDA stages 1-3 if you find further errors to clean in stage 3 [<strong>But make sure you resplit into the same sets</strong>]</li>
<li>You will iterate many times though stages 3-6 as you learn more about your data both through EDA for modeling and evaluating actual models in validation</li>
</ul>
<p>You will NOT iterate back to earlier stages after you select a final model configuration in Stage 7</p>
<ul>
<li>Stages 7 - 10 are performed ONLY ONCE</li>
<li>Only one model configuration is selected and re-fit and only that model is brought into test for evaluation</li>
<li>Any more than this is essentially equivalent to p-hacking in traditional analyses</li>
<li>Step 10 only happens if you plan to implement the model in some application</li>
</ul>
<hr>
</section>
</section>
<section id="best-practices-and-other-recommendations" class="level2" data-number="2.3">
<h2 data-number="2.3" class="anchored" data-anchor-id="best-practices-and-other-recommendations"><span class="header-section-number">2.3</span> Best Practices and Other Recommendations</h2>
<section id="data-file-formats" class="level3" data-number="2.3.1">
<h3 data-number="2.3.1" class="anchored" data-anchor-id="data-file-formats"><span class="header-section-number">2.3.1</span> Data file formats</h3>
<p>We generally store data as CSV [comma-separated value] files</p>
<ul>
<li>Easy to <strong>view directly</strong> in a text editor</li>
<li>Easy to <strong>share</strong> because others can use/import into any data analysis platform</li>
<li>Works with <strong>version control</strong> (e.g.&nbsp;git, svn)</li>
<li>use <code>read_csv()</code> and <code>write_csv()</code></li>
</ul>
<p>Exceptions include:</p>
<ul>
<li>We <strong>may</strong> consider binary (.rds) format for very big files because read/write can be slow for csv files.<br>
</li>
<li>Binary file format provides a very modest additional protection for sensitive data (which we also don’t share)</li>
<li>use <code>read_rds()</code> and <code>write_rds()</code></li>
</ul>
<p>See <a href="https://r4ds.hadley.nz/data-import">chapter 7 - Data Import</a> in <span class="citation" data-cites="RDS">Wickham, Çetinkaya-Rundel, and Grolemund (<a href="#ref-RDS" role="doc-biblioref">2023</a>)</span> for more details and advanced techniques for importing data using <code>read_csv()</code></p>
<hr>
</section>
<section id="classing-variables" class="level3" data-number="2.3.2">
<h3 data-number="2.3.2" class="anchored" data-anchor-id="classing-variables"><span class="header-section-number">2.3.2</span> Classing Variables</h3>
<p>We store and class variables in R based on their data type (level of measurement).</p>
<ul>
<li>See Wikipedia definitions for <a href="https://en.wikipedia.org/wiki/Level_of_measurement">levels of measurement</a> for a bit more precision that we will provide here.</li>
</ul>
<p>Coarsely, there are four levels:</p>
<ul>
<li>nominal: qualitative categories, no inherent order (e.g., marital status, sex, car color)</li>
<li>ordinal: qualitative categories (sometimes uses number), inherent order but not equidistant spacing (e.g., Likert scale; education level)</li>
<li>interval and ratio (generally treated the same in social sciences): quantitative scores, ordered, equidistant spacing. Ratio has true 0. (e.g., temperature in Celsius vs.&nbsp;Kelvin scales)</li>
</ul>
<p>We generally refer to nominal and ordinal variables as categorical and interval/ratio as quantitative or numeric</p>
<hr>
<p>For <strong>nominal</strong> variables</p>
<ul>
<li>We store (in csv files) these variables as character class with descriptive text labels for the levels
<ul>
<li>Easier to share/document</li>
<li>Reduces errors</li>
</ul></li>
<li>We class these variables in R as factors when we load them (using <code>read_csv()</code>)</li>
<li>In some cases, we should pay attention to the order of the levels of the variable. e.g.,
<ul>
<li>For a dichotomous outcome variable, the positive/event level of dichotomous factor outcome should be first level of the factor</li>
<li>The order of levels may also matter for factor predictors (e.g., <code>step_dummy()</code> uses first level as reference).</li>
</ul></li>
</ul>
<hr>
<p>For <strong>ordinal</strong> variables:</p>
<ul>
<li>We store (in csv files) these variables as character class with descriptive text labels for the levels
<ul>
<li>Easier to share/document</li>
<li>Reduces errors</li>
</ul></li>
<li>We class these variables in R as factors (just like nominal variables)
<ul>
<li>It is easier to do EDA with these variables classes as factors</li>
<li>We use standard factors (not ordered)</li>
</ul></li>
<li>Confirm that the order of the levels is set up correctly. This is very important for ordinal variables.</li>
<li>During feature engineering stage, we can then either
<ul>
<li>Treat as a nominal variable and create features using <code>step_dummy()</code></li>
<li>Treat as an interval variable using <code>step_ordinalscore()</code></li>
</ul></li>
</ul>
<p>Similar EDA approaches are used with both nominal and ordinal variable</p>
<p>Ordinal variables may show non-linear relations b/c they may not be evenly spaced. In these instances, we can use feature engineering approaches that are also used for nominal variables</p>
<hr>
<p>For <strong>interval and ratio</strong> variables:</p>
<ul>
<li>We store these variables as numeric</li>
<li>We class these variables as numeric (either integer or double - let R decide) during the read and clean stage (They are typically already in this class when read in)</li>
</ul>
<p>Similar EDA approaches are used with both interval and ratio variables</p>
<p>Similar feature engineering approaches are used with both</p>
<hr>
</section>
<section id="data-dictionaries" class="level3" data-number="2.3.3">
<h3 data-number="2.3.3" class="anchored" data-anchor-id="data-dictionaries"><span class="header-section-number">2.3.3</span> Data Dictionaries</h3>
<p>You should always make a data dictionary for use with your data files.</p>
<ul>
<li>Ideally, these are created during the planning phase of your study, prior to the start of data collection</li>
<li>Still useful if created at the start of data analysis</li>
</ul>
<p>Data dictionaries:</p>
<ul>
<li>Help you keep track of your variables and their characteristics (e.g., valid ranges, valid responses)</li>
<li>Can be used by you to check your data during EDA</li>
<li>Can be provided to others when you share your data (data are not generally useful to others without a data dictionary)</li>
</ul>
<p>We will see a variety of data dictionaries throughout the course. Many are not great as you will learn.</p>
<hr>
</section>
<section id="the-ames-housing-prices-dataset" class="level3" data-number="2.3.4">
<h3 data-number="2.3.4" class="anchored" data-anchor-id="the-ames-housing-prices-dataset"><span class="header-section-number">2.3.4</span> The Ames Housing Prices Dataset</h3>
<p>We will use the Ames Housing Prices dataset as a running example this unit (and some future units and application assignments as well)</p>
<ul>
<li><p>You can <a href="http://jse.amstat.org/v19n3/decock.pdf">read more</a> about the original dataset created by Dean DeCock</p></li>
<li><p>The data set contains data from home sales of individual residential property in Ames, Iowa from 2006 to 2010</p></li>
<li><p>The original data set includes 2930 observations of sales price and a large number of explanatory variables (23 nominal, 23 ordinal, 14 discrete, and 20 continuous)</p></li>
<li><p>This is the <a href="data/ames_data_dictionary.pdf">original data dictionary</a></p></li>
<li><p>The challenge with this dataset is to build the best possible prediction model for the sale price of the homes.</p></li>
</ul>
<hr>
</section>
<section id="packages-and-conflicts" class="level3" data-number="2.3.5">
<h3 data-number="2.3.5" class="anchored" data-anchor-id="packages-and-conflicts"><span class="header-section-number">2.3.5</span> Packages and Conflicts</h3>
<p>First, lets set up our environment with functions from important packages. I strongly recommend reviewing our recommendations for best practices regarding <a href="https://jjcurtin.github.io/book_dwvt/conflicts.html">managing function conflicts</a> now. It will save you a lot of headaches in the future.</p>
<ul>
<li>We set a conflicts policy that will produce errors if we have unanticipated conflicts.</li>
<li>We source a library of functions that we use for common tasks in machine learning.
<ul>
<li>This includes a function (<code>tidymodels_conflictRules()</code>) that sets conflict rules to allow us to attach <code>tidymodels</code> functions without conflicts with <code>tidyverse</code> functions.<br>
</li>
<li>You can <a href="https://github.com/jjcurtin/lab_support/blob/main/fun_ml.R?raw=true">review</a> that function to see what it does (search for that function name at the link)</li>
</ul></li>
<li>Then we use that function</li>
</ul>
<div class="cell">
<details open="" class="code-fold">
<summary>Code</summary>
<div class="sourceCode cell-code" id="cb1"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb1-1"><a href="#cb1-1" aria-hidden="true" tabindex="-1"></a><span class="fu">options</span>(<span class="at">conflicts.policy =</span> <span class="st">"depends.ok"</span>)</span>
<span id="cb1-2"><a href="#cb1-2" aria-hidden="true" tabindex="-1"></a>devtools<span class="sc">::</span><span class="fu">source_url</span>(<span class="st">"https://github.com/jjcurtin/lab_support/blob/main/fun_ml.R?raw=true"</span>)</span>
<span id="cb1-3"><a href="#cb1-3" aria-hidden="true" tabindex="-1"></a><span class="fu">tidymodels_conflictRules</span>()</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
</details>
</div>
<hr>
<p>Next we load packages for functions that we will use regularly. There are five things to note RE best practices</p>
<ol type="1">
<li>If we will use a lot of functions from a package (e.g., <code>tidyverse</code>, <code>tidymodels</code>), we attach the full package</li>
<li>If we will use only several functions from a package (but plan to use them repeatedly), we use the <code>include.only</code> parameter to just attach those functions.</li>
<li>At times, if we plan to use a single function from a package only 1-2x times, we may not even attach that function at all. Instead, we just call it using its namespace (i.e.&nbsp;<code>packagename::functionname</code>)</li>
<li>If a package has a function that conflicts with our primary packages and we don’t plan to use that function, we load the package but exclude the function. If we really needed it, we can call it with its namespace as per option 3 above.</li>
<li>Pay attention to conflicts that were allowed to make sure you understand and accept them. (I left the package messages and warnings in the book this time to see them. I will hide them to avoid cluttering book in later units but you should always review them.)</li>
</ol>
<div class="cell">
<details open="" class="code-fold">
<summary>Code</summary>
<div class="sourceCode cell-code" id="annotated-cell-2"><pre class="sourceCode r code-annotation-code code-with-copy code-annotated"><code class="sourceCode r"><a class="code-annotation-anchor" data-target-cell="annotated-cell-2" data-target-annotation="1" onclick="event.preventDefault();">1</a><span id="annotated-cell-2-1" class="code-annotation-target"><a href="#annotated-cell-2-1" aria-hidden="true" tabindex="-1"></a><span class="fu">library</span>(janitor, <span class="at">include.only =</span> <span class="st">"clean_names"</span>)</span>
<a class="code-annotation-anchor" data-target-cell="annotated-cell-2" data-target-annotation="2" onclick="event.preventDefault();">2</a><span id="annotated-cell-2-2" class="code-annotation-target"><a href="#annotated-cell-2-2" aria-hidden="true" tabindex="-1"></a><span class="fu">library</span>(cowplot, <span class="at">include.only =</span> <span class="st">"plot_grid"</span>)</span>
<a class="code-annotation-anchor" data-target-cell="annotated-cell-2" data-target-annotation="3" onclick="event.preventDefault();">3</a><span id="annotated-cell-2-3" class="code-annotation-target"><a href="#annotated-cell-2-3" aria-hidden="true" tabindex="-1"></a><span class="fu">library</span>(kableExtra, <span class="at">exclude =</span> <span class="st">"group_rows"</span>)</span>
<span id="annotated-cell-2-4"><a href="#annotated-cell-2-4" aria-hidden="true" tabindex="-1"></a><span class="fu">library</span>(tidyverse) </span>
<a class="code-annotation-anchor" data-target-cell="annotated-cell-2" data-target-annotation="4" onclick="event.preventDefault();">4</a><span id="annotated-cell-2-5" class="code-annotation-target"><a href="#annotated-cell-2-5" aria-hidden="true" tabindex="-1"></a><span class="fu">library</span>(tidymodels)</span><div class="code-annotation-gutter-bg"></div><div class="code-annotation-gutter"></div></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
</details>
<div class="cell-annotation">
<dl class="code-annotation-container-grid">
<dt data-target-cell="annotated-cell-2" data-target-annotation="1">1</dt>
<dd>
<span data-code-cell="annotated-cell-2" data-code-lines="1" data-code-annotation="1">As an alternative, we could have skipped loading the package and instead called the function as <code>janitor::clean_names()</code></span>
</dd>
<dt data-target-cell="annotated-cell-2" data-target-annotation="2">2</dt>
<dd>
<span data-code-cell="annotated-cell-2" data-code-lines="2" data-code-annotation="2">Same is true for <code>cowplot</code> package</span>
</dd>
<dt data-target-cell="annotated-cell-2" data-target-annotation="3">3</dt>
<dd>
<span data-code-cell="annotated-cell-2" data-code-lines="3" data-code-annotation="3">When loading <code>kableExtra</code> (which we use often), you will always need to exclude <code>groups_rows()</code> to prevent a conflict with <code>dplyr</code> package in the tidyverse</span>
</dd>
<dt data-target-cell="annotated-cell-2" data-target-annotation="4">4</dt>
<dd>
<span data-code-cell="annotated-cell-2" data-code-lines="5" data-code-annotation="4">Loading tidymodels will produce conflicts unless you source and call my function <code>tidymodels_conflictRules()</code> (see above)</span>
</dd>
</dl>
</div>
</div>
<hr>
</section>
<section id="source-and-other-environment-settings" class="level3" data-number="2.3.6">
<h3 data-number="2.3.6" class="anchored" data-anchor-id="source-and-other-environment-settings"><span class="header-section-number">2.3.6</span> Source and Other Environment Settings</h3>
<p>We will also source (from github) two other libraries of functions that we use commonly for exploratory data analyses. You should review these function scripts (<a href="https://github.com/jjcurtin/lab_support/blob/main/fun_eda.R?raw=true">fun_eda.R</a>; <a href="https://github.com/jjcurtin/lab_support/blob/main/fun_plots.R?raw=true">fun_plots.R</a> to see the code for these functions.</p>
<div class="cell">
<details open="" class="code-fold">
<summary>Code</summary>
<div class="sourceCode cell-code" id="cb2"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb2-1"><a href="#cb2-1" aria-hidden="true" tabindex="-1"></a>devtools<span class="sc">::</span><span class="fu">source_url</span>(<span class="st">"https://github.com/jjcurtin/lab_support/blob/main/fun_eda.R?raw=true"</span>)</span>
<span id="cb2-2"><a href="#cb2-2" aria-hidden="true" tabindex="-1"></a>devtools<span class="sc">::</span><span class="fu">source_url</span>(<span class="st">"https://github.com/jjcurtin/lab_support/blob/main/fun_plots.R?raw=true"</span>)</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
</details>
</div>
<hr>
<p>Finally, we tune our environment a bit more by setting plot themes and print options that we prefer</p>
<div class="cell">
<details open="" class="code-fold">
<summary>Code</summary>
<div class="sourceCode cell-code" id="cb3"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb3-1"><a href="#cb3-1" aria-hidden="true" tabindex="-1"></a><span class="fu">theme_set</span>(<span class="fu">theme_classic</span>())</span>
<span id="cb3-2"><a href="#cb3-2" aria-hidden="true" tabindex="-1"></a><span class="fu">options</span>(<span class="at">tibble.width =</span> <span class="cn">Inf</span>, <span class="at">tibble.print_max =</span> <span class="cn">Inf</span>)</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
</details>
</div>
<p>And we set a relative path to our data. This assumes you are using an RStudio project with the path to the data relative to that project file. I’ve provided more detail <a href="https://jjcurtin.github.io/book_dwvt/file_and_path_management.html">elsewhere</a> on best practices for managing files and paths.</p>
<div class="cell">
<details open="" class="code-fold">
<summary>Code</summary>
<div class="sourceCode cell-code" id="cb4"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb4-1"><a href="#cb4-1" aria-hidden="true" tabindex="-1"></a>path_data <span class="ot">&lt;-</span> <span class="st">"data"</span></span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
</details>
</div>
<hr>
</section>
<section id="read-and-glimpse-dataframe" class="level3" data-number="2.3.7">
<h3 data-number="2.3.7" class="anchored" data-anchor-id="read-and-glimpse-dataframe"><span class="header-section-number">2.3.7</span> Read and Glimpse Dataframe</h3>
<p>Lets read in the data and glimpse the subset of observations we will work with in Units 2-3 and the first two application assignments.</p>
<div class="cell">
<details open="" class="code-fold">
<summary>Code</summary>
<div class="sourceCode cell-code" id="annotated-cell-6"><pre class="sourceCode r code-annotation-code code-with-copy code-annotated"><code class="sourceCode r"><a class="code-annotation-anchor" data-target-cell="annotated-cell-6" data-target-annotation="1" onclick="event.preventDefault();">1</a><span id="annotated-cell-6-1" class="code-annotation-target"><a href="#annotated-cell-6-1" aria-hidden="true" tabindex="-1"></a>data_all <span class="ot">&lt;-</span> <span class="fu">read_csv</span>(here<span class="sc">::</span><span class="fu">here</span>(path_data, <span class="st">"ames_raw_class.csv"</span>),</span>
<a class="code-annotation-anchor" data-target-cell="annotated-cell-6" data-target-annotation="2" onclick="event.preventDefault();">2</a><span id="annotated-cell-6-2" class="code-annotation-target"><a href="#annotated-cell-6-2" aria-hidden="true" tabindex="-1"></a>                     <span class="at">col_types =</span> <span class="fu">cols</span>()) <span class="sc">|&gt;</span></span>
<a class="code-annotation-anchor" data-target-cell="annotated-cell-6" data-target-annotation="3" onclick="event.preventDefault();">3</a><span id="annotated-cell-6-3" class="code-annotation-target"><a href="#annotated-cell-6-3" aria-hidden="true" tabindex="-1"></a>  <span class="fu">glimpse</span>()</span><div class="code-annotation-gutter-bg"></div><div class="code-annotation-gutter"></div></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
</details>
<div class="cell-annotation">
<dl class="code-annotation-container-grid">
<dt data-target-cell="annotated-cell-6" data-target-annotation="1">1</dt>
<dd>
<span data-code-cell="annotated-cell-6" data-code-lines="1" data-code-annotation="1">First we read data using a relative path and the <code>here::here()</code> function. This is a replacement for <code>file.path()</code> that works better for both interactive use and rendering in Quarto when using projects.</span>
</dd>
<dt data-target-cell="annotated-cell-6" data-target-annotation="2">2</dt>
<dd>
<span data-code-cell="annotated-cell-6" data-code-lines="2" data-code-annotation="2">We use <code>col_types = cols()</code> to let R guess the correct class for each column. This suppresses messages that aren’t important at this point prior to EDA.</span>
</dd>
<dt data-target-cell="annotated-cell-6" data-target-annotation="3">3</dt>
<dd>
<span data-code-cell="annotated-cell-6" data-code-lines="3" data-code-annotation="3">It is good practice to always <code>glimpse()</code> data after you read it.</span>
</dd>
</dl>
</div>
<div class="cell-output cell-output-stdout">
<pre><code>Rows: 1,955
Columns: 81
$ PID               &lt;chr&gt; "0526301100", "0526350040", "0526351010", "052710501…
$ `MS SubClass`     &lt;chr&gt; "020", "020", "020", "060", "120", "120", "120", "06…
$ `MS Zoning`       &lt;chr&gt; "RL", "RH", "RL", "RL", "RL", "RL", "RL", "RL", "RL"…
$ `Lot Frontage`    &lt;dbl&gt; 141, 80, 81, 74, 41, 43, 39, 60, 75, 63, 85, NA, 47,…
$ `Lot Area`        &lt;dbl&gt; 31770, 11622, 14267, 13830, 4920, 5005, 5389, 7500, …
$ Street            &lt;chr&gt; "Pave", "Pave", "Pave", "Pave", "Pave", "Pave", "Pav…
$ Alley             &lt;chr&gt; NA, NA, NA, NA, NA, NA, NA, NA, NA, NA, NA, NA, NA, …
$ `Lot Shape`       &lt;chr&gt; "IR1", "Reg", "IR1", "IR1", "Reg", "IR1", "IR1", "Re…
$ `Land Contour`    &lt;chr&gt; "Lvl", "Lvl", "Lvl", "Lvl", "Lvl", "HLS", "Lvl", "Lv…
$ Utilities         &lt;chr&gt; "AllPub", "AllPub", "AllPub", "AllPub", "AllPub", "A…
$ `Lot Config`      &lt;chr&gt; "Corner", "Inside", "Corner", "Inside", "Inside", "I…
$ `Land Slope`      &lt;chr&gt; "Gtl", "Gtl", "Gtl", "Gtl", "Gtl", "Gtl", "Gtl", "Gt…
$ Neighborhood      &lt;chr&gt; "NAmes", "NAmes", "NAmes", "Gilbert", "StoneBr", "St…
$ `Condition 1`     &lt;chr&gt; "Norm", "Feedr", "Norm", "Norm", "Norm", "Norm", "No…
$ `Condition 2`     &lt;chr&gt; "Norm", "Norm", "Norm", "Norm", "Norm", "Norm", "Nor…
$ `Bldg Type`       &lt;chr&gt; "1Fam", "1Fam", "1Fam", "1Fam", "TwnhsE", "TwnhsE", …
$ `House Style`     &lt;chr&gt; "1Story", "1Story", "1Story", "2Story", "1Story", "1…
$ `Overall Qual`    &lt;dbl&gt; 6, 5, 6, 5, 8, 8, 8, 7, 6, 6, 7, 8, 8, 8, 9, 4, 6, 6…
$ `Overall Cond`    &lt;dbl&gt; 5, 6, 6, 5, 5, 5, 5, 5, 5, 5, 5, 5, 5, 7, 2, 5, 6, 6…
$ `Year Built`      &lt;dbl&gt; 1960, 1961, 1958, 1997, 2001, 1992, 1995, 1999, 1993…
$ `Year Remod/Add`  &lt;dbl&gt; 1960, 1961, 1958, 1998, 2001, 1992, 1996, 1999, 1994…
$ `Roof Style`      &lt;chr&gt; "Hip", "Gable", "Hip", "Gable", "Gable", "Gable", "G…
$ `Roof Matl`       &lt;chr&gt; "CompShg", "CompShg", "CompShg", "CompShg", "CompShg…
$ `Exterior 1st`    &lt;chr&gt; "BrkFace", "VinylSd", "Wd Sdng", "VinylSd", "CemntBd…
$ `Exterior 2nd`    &lt;chr&gt; "Plywood", "VinylSd", "Wd Sdng", "VinylSd", "CmentBd…
$ `Mas Vnr Type`    &lt;chr&gt; "Stone", "None", "BrkFace", "None", "None", "None", …
$ `Mas Vnr Area`    &lt;dbl&gt; 112, 0, 108, 0, 0, 0, 0, 0, 0, 0, 0, 0, 603, 0, 350,…
$ `Exter Qual`      &lt;chr&gt; "TA", "TA", "TA", "TA", "Gd", "Gd", "Gd", "TA", "TA"…
$ `Exter Cond`      &lt;chr&gt; "TA", "TA", "TA", "TA", "TA", "TA", "TA", "TA", "TA"…
$ Foundation        &lt;chr&gt; "CBlock", "CBlock", "CBlock", "PConc", "PConc", "PCo…
$ `Bsmt Qual`       &lt;chr&gt; "TA", "TA", "TA", "Gd", "Gd", "Gd", "Gd", "TA", "Gd"…
$ `Bsmt Cond`       &lt;chr&gt; "Gd", "TA", "TA", "TA", "TA", "TA", "TA", "TA", "TA"…
$ `Bsmt Exposure`   &lt;chr&gt; "Gd", "No", "No", "No", "Mn", "No", "No", "No", "No"…
$ `BsmtFin Type 1`  &lt;chr&gt; "BLQ", "Rec", "ALQ", "GLQ", "GLQ", "ALQ", "GLQ", "Un…
$ `BsmtFin SF 1`    &lt;dbl&gt; 639, 468, 923, 791, 616, 263, 1180, 0, 0, 0, 637, 36…
$ `BsmtFin Type 2`  &lt;chr&gt; "Unf", "LwQ", "Unf", "Unf", "Unf", "Unf", "Unf", "Un…
$ `BsmtFin SF 2`    &lt;dbl&gt; 0, 144, 0, 0, 0, 0, 0, 0, 0, 0, 0, 1120, 0, 0, 0, 0,…
$ `Bsmt Unf SF`     &lt;dbl&gt; 441, 270, 406, 137, 722, 1017, 415, 994, 763, 789, 6…
$ `Total Bsmt SF`   &lt;dbl&gt; 1080, 882, 1329, 928, 1338, 1280, 1595, 994, 763, 78…
$ Heating           &lt;chr&gt; "GasA", "GasA", "GasA", "GasA", "GasA", "GasA", "Gas…
$ `Heating QC`      &lt;chr&gt; "Fa", "TA", "TA", "Gd", "Ex", "Ex", "Ex", "Gd", "Gd"…
$ `Central Air`     &lt;chr&gt; "Y", "Y", "Y", "Y", "Y", "Y", "Y", "Y", "Y", "Y", "Y…
$ Electrical        &lt;chr&gt; "SBrkr", "SBrkr", "SBrkr", "SBrkr", "SBrkr", "SBrkr"…
$ `1st Flr SF`      &lt;dbl&gt; 1656, 896, 1329, 928, 1338, 1280, 1616, 1028, 763, 7…
$ `2nd Flr SF`      &lt;dbl&gt; 0, 0, 0, 701, 0, 0, 0, 776, 892, 676, 0, 0, 1589, 67…
$ `Low Qual Fin SF` &lt;dbl&gt; 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0…
$ `Gr Liv Area`     &lt;dbl&gt; 1656, 896, 1329, 1629, 1338, 1280, 1616, 1804, 1655,…
$ `Bsmt Full Bath`  &lt;dbl&gt; 1, 0, 0, 0, 1, 0, 1, 0, 0, 0, 1, 1, 1, 0, 1, 0, 1, 0…
$ `Bsmt Half Bath`  &lt;dbl&gt; 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0…
$ `Full Bath`       &lt;dbl&gt; 1, 1, 1, 2, 2, 2, 2, 2, 2, 2, 1, 1, 3, 2, 1, 1, 2, 2…
$ `Half Bath`       &lt;dbl&gt; 0, 0, 1, 1, 0, 0, 0, 1, 1, 1, 1, 1, 1, 0, 1, 0, 0, 0…
$ `Bedroom AbvGr`   &lt;dbl&gt; 3, 2, 3, 3, 2, 2, 2, 3, 3, 3, 2, 1, 4, 4, 1, 2, 3, 3…
$ `Kitchen AbvGr`   &lt;dbl&gt; 1, 1, 1, 1, 1, 1, 1, 1, 1, 1, 1, 1, 1, 1, 1, 1, 1, 1…
$ `Kitchen Qual`    &lt;chr&gt; "TA", "TA", "Gd", "TA", "Gd", "Gd", "Gd", "Gd", "TA"…
$ `TotRms AbvGrd`   &lt;dbl&gt; 7, 5, 6, 6, 6, 5, 5, 7, 7, 7, 5, 4, 12, 8, 8, 4, 7, …
$ Functional        &lt;chr&gt; "Typ", "Typ", "Typ", "Typ", "Typ", "Typ", "Typ", "Ty…
$ Fireplaces        &lt;dbl&gt; 2, 0, 0, 1, 0, 0, 1, 1, 1, 1, 1, 0, 1, 0, 1, 0, 2, 1…
$ `Fireplace Qu`    &lt;chr&gt; "Gd", NA, NA, "TA", NA, NA, "TA", "TA", "TA", "Gd", …
$ `Garage Type`     &lt;chr&gt; "Attchd", "Attchd", "Attchd", "Attchd", "Attchd", "A…
$ `Garage Yr Blt`   &lt;dbl&gt; 1960, 1961, 1958, 1997, 2001, 1992, 1995, 1999, 1993…
$ `Garage Finish`   &lt;chr&gt; "Fin", "Unf", "Unf", "Fin", "Fin", "RFn", "RFn", "Fi…
$ `Garage Cars`     &lt;dbl&gt; 2, 1, 1, 2, 2, 2, 2, 2, 2, 2, 2, 2, 3, 2, 3, 2, 2, 2…
$ `Garage Area`     &lt;dbl&gt; 528, 730, 312, 482, 582, 506, 608, 442, 440, 393, 50…
$ `Garage Qual`     &lt;chr&gt; "TA", "TA", "TA", "TA", "TA", "TA", "TA", "TA", "TA"…
$ `Garage Cond`     &lt;chr&gt; "TA", "TA", "TA", "TA", "TA", "TA", "TA", "TA", "TA"…
$ `Paved Drive`     &lt;chr&gt; "P", "Y", "Y", "Y", "Y", "Y", "Y", "Y", "Y", "Y", "Y…
$ `Wood Deck SF`    &lt;dbl&gt; 210, 140, 393, 212, 0, 0, 237, 140, 157, 0, 192, 0, …
$ `Open Porch SF`   &lt;dbl&gt; 62, 0, 36, 34, 0, 82, 152, 60, 84, 75, 0, 54, 36, 12…
$ `Enclosed Porch`  &lt;dbl&gt; 0, 0, 0, 0, 170, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0,…
$ `3Ssn Porch`      &lt;dbl&gt; 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0…
$ `Screen Porch`    &lt;dbl&gt; 0, 120, 0, 0, 0, 144, 0, 0, 0, 0, 0, 140, 210, 0, 0,…
$ `Pool Area`       &lt;dbl&gt; 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0…
$ `Pool QC`         &lt;chr&gt; NA, NA, NA, NA, NA, NA, NA, NA, NA, NA, NA, NA, NA, …
$ Fence             &lt;chr&gt; NA, "MnPrv", NA, "MnPrv", NA, NA, NA, NA, NA, NA, NA…
$ `Misc Feature`    &lt;chr&gt; NA, NA, "Gar2", NA, NA, NA, NA, NA, NA, NA, NA, NA, …
$ `Misc Val`        &lt;dbl&gt; 0, 0, 12500, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, …
$ `Mo Sold`         &lt;dbl&gt; 5, 6, 6, 3, 4, 1, 3, 6, 4, 5, 2, 6, 6, 6, 6, 6, 2, 1…
$ `Yr Sold`         &lt;dbl&gt; 2010, 2010, 2010, 2010, 2010, 2010, 2010, 2010, 2010…
$ `Sale Type`       &lt;chr&gt; "WD", "WD", "WD", "WD", "WD", "WD", "WD", "WD", "WD"…
$ `Sale Condition`  &lt;chr&gt; "Normal", "Normal", "Normal", "Normal", "Normal", "N…
$ SalePrice         &lt;dbl&gt; 215000, 105000, 172000, 189900, 213500, 191500, 2365…</code></pre>
</div>
</div>
<hr>
<p>Dataset Notes:</p>
<ul>
<li><p>Dataset has N = 1955 rather than 2930.</p>
<ul>
<li>I have held out remaining observations to serve as a test set for a friendly competition in Unit 3</li>
<li>I will judge your models’ performance with this test set at that time!</li>
<li>More on the importance of held out test sets as we progress through the course</li>
</ul></li>
<li><p>This full dataset has 81 variables. For the lecture examples in units 2-3 we will only use a subset of the predictors</p></li>
<li><p>You will use different predictors in the next two application assignments</p></li>
</ul>
<hr>
<p>Here we select the variables we will use for lecture</p>
<div class="cell">
<details open="" class="code-fold">
<summary>Code</summary>
<div class="sourceCode cell-code" id="annotated-cell-7"><pre class="sourceCode r code-annotation-code code-with-copy code-annotated"><code class="sourceCode r"><span id="annotated-cell-7-1"><a href="#annotated-cell-7-1" aria-hidden="true" tabindex="-1"></a>data_all <span class="ot">&lt;-</span> data_all <span class="sc">|&gt;</span> </span>
<span id="annotated-cell-7-2"><a href="#annotated-cell-7-2" aria-hidden="true" tabindex="-1"></a>  <span class="fu">select</span>(SalePrice,</span>
<span id="annotated-cell-7-3"><a href="#annotated-cell-7-3" aria-hidden="true" tabindex="-1"></a>         <span class="st">`</span><span class="at">Gr Liv Area</span><span class="st">`</span>, </span>
<span id="annotated-cell-7-4"><a href="#annotated-cell-7-4" aria-hidden="true" tabindex="-1"></a>         <span class="st">`</span><span class="at">Lot Area</span><span class="st">`</span>, </span>
<span id="annotated-cell-7-5"><a href="#annotated-cell-7-5" aria-hidden="true" tabindex="-1"></a>         <span class="st">`</span><span class="at">Year Built</span><span class="st">`</span>, </span>
<span id="annotated-cell-7-6"><a href="#annotated-cell-7-6" aria-hidden="true" tabindex="-1"></a>         <span class="st">`</span><span class="at">Overall Qual</span><span class="st">`</span>, </span>
<span id="annotated-cell-7-7"><a href="#annotated-cell-7-7" aria-hidden="true" tabindex="-1"></a>         <span class="st">`</span><span class="at">Garage Cars</span><span class="st">`</span>,</span>
<span id="annotated-cell-7-8"><a href="#annotated-cell-7-8" aria-hidden="true" tabindex="-1"></a>         <span class="st">`</span><span class="at">Garage Qual</span><span class="st">`</span>,</span>
<span id="annotated-cell-7-9"><a href="#annotated-cell-7-9" aria-hidden="true" tabindex="-1"></a>         <span class="st">`</span><span class="at">MS Zoning</span><span class="st">`</span>,</span>
<span id="annotated-cell-7-10"><a href="#annotated-cell-7-10" aria-hidden="true" tabindex="-1"></a>         <span class="st">`</span><span class="at">Lot Config</span><span class="st">`</span> ,</span>
<a class="code-annotation-anchor" data-target-cell="annotated-cell-7" data-target-annotation="1" onclick="event.preventDefault();">1</a><span id="annotated-cell-7-11" class="code-annotation-target"><a href="#annotated-cell-7-11" aria-hidden="true" tabindex="-1"></a>         <span class="st">`</span><span class="at">Bldg Type</span><span class="st">`</span>) <span class="sc">|&gt;</span></span>
<span id="annotated-cell-7-12"><a href="#annotated-cell-7-12" aria-hidden="true" tabindex="-1"></a>  <span class="fu">glimpse</span>()</span><div class="code-annotation-gutter-bg"></div><div class="code-annotation-gutter"></div></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
</details>
<div class="cell-annotation">
<dl class="code-annotation-container-grid">
<dt data-target-cell="annotated-cell-7" data-target-annotation="1">1</dt>
<dd>
<span data-code-cell="annotated-cell-7" data-code-lines="11" data-code-annotation="1">Notice that the dataset used non-standard variable names that include spaces. We need to use back-ticks around the variable names to allow us reference those variables. We will fix this during the cleaning process and you should never use spaces in variable names when setting up your own data!!!</span>
</dd>
</dl>
</div>
<div class="cell-output cell-output-stdout">
<pre><code>Rows: 1,955
Columns: 10
$ SalePrice      &lt;dbl&gt; 215000, 105000, 172000, 189900, 213500, 191500, 236500,…
$ `Gr Liv Area`  &lt;dbl&gt; 1656, 896, 1329, 1629, 1338, 1280, 1616, 1804, 1655, 14…
$ `Lot Area`     &lt;dbl&gt; 31770, 11622, 14267, 13830, 4920, 5005, 5389, 7500, 100…
$ `Year Built`   &lt;dbl&gt; 1960, 1961, 1958, 1997, 2001, 1992, 1995, 1999, 1993, 1…
$ `Overall Qual` &lt;dbl&gt; 6, 5, 6, 5, 8, 8, 8, 7, 6, 6, 7, 8, 8, 8, 9, 4, 6, 6, 7…
$ `Garage Cars`  &lt;dbl&gt; 2, 1, 1, 2, 2, 2, 2, 2, 2, 2, 2, 2, 3, 2, 3, 2, 2, 2, 2…
$ `Garage Qual`  &lt;chr&gt; "TA", "TA", "TA", "TA", "TA", "TA", "TA", "TA", "TA", "…
$ `MS Zoning`    &lt;chr&gt; "RL", "RH", "RL", "RL", "RL", "RL", "RL", "RL", "RL", "…
$ `Lot Config`   &lt;chr&gt; "Corner", "Inside", "Corner", "Inside", "Inside", "Insi…
$ `Bldg Type`    &lt;chr&gt; "1Fam", "1Fam", "1Fam", "1Fam", "TwnhsE", "TwnhsE", "Tw…</code></pre>
</div>
</div>
<hr>
</section>
</section>
<section id="exploratory-data-analysis-for-data-cleaning" class="level2" data-number="2.4">
<h2 data-number="2.4" class="anchored" data-anchor-id="exploratory-data-analysis-for-data-cleaning"><span class="header-section-number">2.4</span> Exploratory Data Analysis for Data Cleaning</h2>
<p>EDA <em>could</em> be done using either <code>tidyverse</code> packages and functions or <code>tidymodels</code> (mostly using the <code>recipes</code> package.)</p>
<ul>
<li><p>We prefer to use the richer set of functions available in the tidyverse (and <code>dplyr</code> and <code>purrr</code> packages in particular).</p></li>
<li><p>We will reserve the use of recipes for feature engineering only when we are building features for models that we will fit in our training sets and evaluation in our validation and test sets.</p></li>
</ul>
<hr>
<section id="data-leakage-issues" class="level3" data-number="2.4.1">
<h3 data-number="2.4.1" class="anchored" data-anchor-id="data-leakage-issues"><span class="header-section-number">2.4.1</span> Data Leakage Issues</h3>
<p>Data leakage refers to a mistake made by the developer of a machine learning model in which they accidentally share information between their training set and held-out validation or test sets</p>
<ul>
<li><p>Training sets are used to fit models with different configurations</p></li>
<li><p>Validation sets are used to select the best model among those with different configurations (not needed if you only have one configuration)</p></li>
<li><p>Test sets are used to evaluate a best model</p></li>
<li><p>When splitting data-sets into training, validation and test sets, the goal is to ensure that no data (or information more broadly) are shared between the three sets</p>
<ul>
<li>No data or information from test should influence either fitting or selecting models</li>
<li>Test should only be used once to evaluate a best/final model</li>
<li>Train and validation set also must be segregated (although validation sets may be used to evaluate many model configurations)</li>
<li>Information necessary for transformations and other feature engineering (e.g., means/sds for centering/scaling, procedures for missing data imputation) must all be based only on training data.</li>
<li>Data leakage is common if you are not careful.</li>
</ul></li>
</ul>
<p>In particular, if we begin to use test data or information about test during model fitting</p>
<ul>
<li>We risk overfitting</li>
<li>This is essentially the equivalent of p-hacking in traditional analyses</li>
<li>Our estimate of model performance will be too optimistic, which could have harmful real-world consequences.</li>
</ul>
<hr>
</section>
<section id="tidy-variable-names" class="level3" data-number="2.4.2">
<h3 data-number="2.4.2" class="anchored" data-anchor-id="tidy-variable-names"><span class="header-section-number">2.4.2</span> Tidy variable names</h3>
<p>Use snake case for variable names</p>
<ul>
<li><code>clean_names()</code> from <code>janitor</code> package is useful for this.</li>
<li>May need to do further correction of variable names using <code>rename()</code></li>
<li>See more details about tidy names for objects (e.g., variables, dfs, functions) per <a href="https://style.tidyverse.org/syntax.html#object-names">Tidy Style Guide</a></li>
</ul>
<div class="cell">
<details open="" class="code-fold">
<summary>Code</summary>
<div class="sourceCode cell-code" id="cb7"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb7-1"><a href="#cb7-1" aria-hidden="true" tabindex="-1"></a>data_all <span class="ot">&lt;-</span> data_all <span class="sc">|&gt;</span> </span>
<span id="cb7-2"><a href="#cb7-2" aria-hidden="true" tabindex="-1"></a>  <span class="fu">clean_names</span>(<span class="st">"snake"</span>)</span>
<span id="cb7-3"><a href="#cb7-3" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb7-4"><a href="#cb7-4" aria-hidden="true" tabindex="-1"></a>data_all <span class="sc">|&gt;</span> <span class="fu">names</span>()</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
</details>
<div class="cell-output cell-output-stdout">
<pre><code> [1] "sale_price"   "gr_liv_area"  "lot_area"     "year_built"   "overall_qual"
 [6] "garage_cars"  "garage_qual"  "ms_zoning"    "lot_config"   "bldg_type"   </code></pre>
</div>
</div>
<hr>
</section>
<section id="explore-variable-classes" class="level3" data-number="2.4.3">
<h3 data-number="2.4.3" class="anchored" data-anchor-id="explore-variable-classes"><span class="header-section-number">2.4.3</span> Explore variable classes</h3>
<p>At this point, we should class all of our variables as either numeric or factor</p>
<ul>
<li>Interval and ratio variables use numeric classes (dbl or int)</li>
<li>Nominal and ordinal variable use factor class</li>
<li>Useful for variable selection later (e.g., <code>where(is.numeric)</code>, <code>where(is.factor)</code>)</li>
</ul>
<p>Subsequent cleaning steps are clearer if we have this established/confirmed now</p>
<hr>
<p>We have a number of nominal or ordinal variables that are classed as character.</p>
<p>We have one ordinal variable (<code>overall_qual</code>) that is classed as numeric (because the levels were coded with numbers rather than text)</p>
<ul>
<li><code>read_csv()</code> thought was numeric by the levels are coded using numbers</li>
<li>The data dictionary indicates that valid values range from 1 - 10.</li>
</ul>
<div class="cell">
<details open="" class="code-fold">
<summary>Code</summary>
<div class="sourceCode cell-code" id="cb9"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb9-1"><a href="#cb9-1" aria-hidden="true" tabindex="-1"></a>data_all <span class="sc">|&gt;</span> <span class="fu">glimpse</span>()</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
</details>
<div class="cell-output cell-output-stdout">
<pre><code>Rows: 1,955
Columns: 10
$ sale_price   &lt;dbl&gt; 215000, 105000, 172000, 189900, 213500, 191500, 236500, 1…
$ gr_liv_area  &lt;dbl&gt; 1656, 896, 1329, 1629, 1338, 1280, 1616, 1804, 1655, 1465…
$ lot_area     &lt;dbl&gt; 31770, 11622, 14267, 13830, 4920, 5005, 5389, 7500, 10000…
$ year_built   &lt;dbl&gt; 1960, 1961, 1958, 1997, 2001, 1992, 1995, 1999, 1993, 199…
$ overall_qual &lt;dbl&gt; 6, 5, 6, 5, 8, 8, 8, 7, 6, 6, 7, 8, 8, 8, 9, 4, 6, 6, 7, …
$ garage_cars  &lt;dbl&gt; 2, 1, 1, 2, 2, 2, 2, 2, 2, 2, 2, 2, 3, 2, 3, 2, 2, 2, 2, …
$ garage_qual  &lt;chr&gt; "TA", "TA", "TA", "TA", "TA", "TA", "TA", "TA", "TA", "TA…
$ ms_zoning    &lt;chr&gt; "RL", "RH", "RL", "RL", "RL", "RL", "RL", "RL", "RL", "RL…
$ lot_config   &lt;chr&gt; "Corner", "Inside", "Corner", "Inside", "Inside", "Inside…
$ bldg_type    &lt;chr&gt; "1Fam", "1Fam", "1Fam", "1Fam", "TwnhsE", "TwnhsE", "Twnh…</code></pre>
</div>
</div>
<hr>
<p>We can the recode <code>overall_qual</code> first and set its levels</p>
<p>We can recode all the character variables to factor in one step. Most are nominal. We will handle the order for <code>garage_qual</code> later.</p>
<div class="cell">
<details open="" class="code-fold">
<summary>Code</summary>
<div class="sourceCode cell-code" id="annotated-cell-10"><pre class="sourceCode r code-annotation-code code-with-copy code-annotated"><code class="sourceCode r"><a class="code-annotation-anchor" data-target-cell="annotated-cell-10" data-target-annotation="1" onclick="event.preventDefault();">1</a><span id="annotated-cell-10-1" class="code-annotation-target"><a href="#annotated-cell-10-1" aria-hidden="true" tabindex="-1"></a>oq_levels <span class="ot">&lt;-</span> <span class="dv">1</span><span class="sc">:</span><span class="dv">10</span></span>
<span id="annotated-cell-10-2"><a href="#annotated-cell-10-2" aria-hidden="true" tabindex="-1"></a></span>
<span id="annotated-cell-10-3"><a href="#annotated-cell-10-3" aria-hidden="true" tabindex="-1"></a>data_all <span class="ot">&lt;-</span>  data_all <span class="sc">|&gt;</span> </span>
<span id="annotated-cell-10-4"><a href="#annotated-cell-10-4" aria-hidden="true" tabindex="-1"></a>  <span class="fu">mutate</span>(<span class="at">overall_qual =</span> <span class="fu">factor</span>(overall_qual, </span>
<a class="code-annotation-anchor" data-target-cell="annotated-cell-10" data-target-annotation="2" onclick="event.preventDefault();">2</a><span id="annotated-cell-10-5" class="code-annotation-target"><a href="#annotated-cell-10-5" aria-hidden="true" tabindex="-1"></a>                               <span class="at">levels =</span> oq_levels)) <span class="sc">|&gt;</span></span>
<a class="code-annotation-anchor" data-target-cell="annotated-cell-10" data-target-annotation="3" onclick="event.preventDefault();">3</a><span id="annotated-cell-10-6" class="code-annotation-target"><a href="#annotated-cell-10-6" aria-hidden="true" tabindex="-1"></a>  <span class="fu">mutate</span>(<span class="fu">across</span>(<span class="fu">where</span>(is.character), factor)) <span class="sc">|&gt;</span></span>
<span id="annotated-cell-10-7"><a href="#annotated-cell-10-7" aria-hidden="true" tabindex="-1"></a>  <span class="fu">glimpse</span>()</span><div class="code-annotation-gutter-bg"></div><div class="code-annotation-gutter"></div></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
</details>
<div class="cell-annotation">
<dl class="code-annotation-container-grid">
<dt data-target-cell="annotated-cell-10" data-target-annotation="1">1</dt>
<dd>
<span data-code-cell="annotated-cell-10" data-code-lines="1" data-code-annotation="1">It is always best to explicitly set the levels of an ordinal factor in the order you prefer. It is not necessary here because <code>overall_qual</code> was numeric and therefore sorts in the expected order. However, if it had been numbers stored as characters, it could sort incorrectly (e.g., 1, 10, 2, 3, …). And obviously if the orders levels were names, the order would have to be specified.</span>
</dd>
<dt data-target-cell="annotated-cell-10" data-target-annotation="2">2</dt>
<dd>
<span data-code-cell="annotated-cell-10" data-code-lines="5" data-code-annotation="2">We indicate the levels here.</span>
</dd>
<dt data-target-cell="annotated-cell-10" data-target-annotation="3">3</dt>
<dd>
<span data-code-cell="annotated-cell-10" data-code-lines="6" data-code-annotation="3">We use a mutate to re-class all character data to factors. I prefer <code>factor()</code> to <code>forcats::fct()</code> because factor orders the levels alphabetically. Be aware that this <em>could</em> change if your code is used in a region of the world where this sorting is different. I still prefer this to the alternative (in <code>fct()</code>) that orders by the order the levels are found in your data.</span>
</dd>
</dl>
</div>
<div class="cell-output cell-output-stdout">
<pre><code>Rows: 1,955
Columns: 10
$ sale_price   &lt;dbl&gt; 215000, 105000, 172000, 189900, 213500, 191500, 236500, 1…
$ gr_liv_area  &lt;dbl&gt; 1656, 896, 1329, 1629, 1338, 1280, 1616, 1804, 1655, 1465…
$ lot_area     &lt;dbl&gt; 31770, 11622, 14267, 13830, 4920, 5005, 5389, 7500, 10000…
$ year_built   &lt;dbl&gt; 1960, 1961, 1958, 1997, 2001, 1992, 1995, 1999, 1993, 199…
$ overall_qual &lt;fct&gt; 6, 5, 6, 5, 8, 8, 8, 7, 6, 6, 7, 8, 8, 8, 9, 4, 6, 6, 7, …
$ garage_cars  &lt;dbl&gt; 2, 1, 1, 2, 2, 2, 2, 2, 2, 2, 2, 2, 3, 2, 3, 2, 2, 2, 2, …
$ garage_qual  &lt;fct&gt; TA, TA, TA, TA, TA, TA, TA, TA, TA, TA, TA, TA, TA, TA, T…
$ ms_zoning    &lt;fct&gt; RL, RH, RL, RL, RL, RL, RL, RL, RL, RL, RL, RL, RL, RL, R…
$ lot_config   &lt;fct&gt; Corner, Inside, Corner, Inside, Inside, Inside, Inside, I…
$ bldg_type    &lt;fct&gt; 1Fam, 1Fam, 1Fam, 1Fam, TwnhsE, TwnhsE, TwnhsE, 1Fam, 1Fa…</code></pre>
</div>
</div>
<hr>
</section>
<section id="skimming-the-data" class="level3" data-number="2.4.4">
<h3 data-number="2.4.4" class="anchored" data-anchor-id="skimming-the-data"><span class="header-section-number">2.4.4</span> Skimming the data</h3>
<p><code>skim()</code> from the <code>skimr</code> package is a wonderful and customizable function for summary statistics</p>
<ul>
<li>It is highly customizable so we can write our own versions for our own needs</li>
<li>We use different versions for cleaning and modeling EDA</li>
<li>For cleaning EDA, we just remove some stats that we don’t want to see at this time</li>
<li>We can get many of the summary stats for cleaning in one call</li>
<li>We have a custom skim defined in the <code>fun_eda.R</code> function library that we use regularly. Here is the code but you can use the function directly if you sourced <code>fun_eda.R</code> (as we did above)</li>
</ul>
<div class="cell">
<details open="" class="code-fold">
<summary>Code</summary>
<div class="sourceCode cell-code" id="cb12"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb12-1"><a href="#cb12-1" aria-hidden="true" tabindex="-1"></a>skim_some <span class="ot">&lt;-</span> <span class="fu">skim_with</span>(<span class="at">numeric =</span> <span class="fu">sfl</span>(<span class="at">mean =</span> <span class="cn">NULL</span>, <span class="at">sd =</span> <span class="cn">NULL</span>, <span class="at">p25 =</span> <span class="cn">NULL</span>, <span class="at">p50 =</span> <span class="cn">NULL</span>, <span class="at">p75 =</span> <span class="cn">NULL</span>, <span class="at">hist =</span> <span class="cn">NULL</span>))</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
</details>
</div>
<hr>
<p>Here is what we get with our new <code>skim_some()</code> function</p>
<ul>
<li>We will refer to this again for each characteristic we want to review for instructional purposes</li>
<li>We can already see that we can use <code>skim_some()</code> to confirm that we only have numeric and factor classes</li>
</ul>
<div class="cell">
<details open="" class="code-fold">
<summary>Code</summary>
<div class="sourceCode cell-code" id="cb13"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb13-1"><a href="#cb13-1" aria-hidden="true" tabindex="-1"></a>data_all <span class="sc">|&gt;</span> </span>
<span id="cb13-2"><a href="#cb13-2" aria-hidden="true" tabindex="-1"></a>  <span class="fu">skim_some</span>()</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
</details>
<div class="cell-output-display">
<table class="caption-top table table-sm table-striped small">
<caption>Data summary</caption>
<tbody>
<tr class="odd">
<td style="text-align: left;">Name</td>
<td style="text-align: left;">data_all</td>
</tr>
<tr class="even">
<td style="text-align: left;">Number of rows</td>
<td style="text-align: left;">1955</td>
</tr>
<tr class="odd">
<td style="text-align: left;">Number of columns</td>
<td style="text-align: left;">10</td>
</tr>
<tr class="even">
<td style="text-align: left;">_______________________</td>
<td style="text-align: left;"></td>
</tr>
<tr class="odd">
<td style="text-align: left;">Column type frequency:</td>
<td style="text-align: left;"></td>
</tr>
<tr class="even">
<td style="text-align: left;">factor</td>
<td style="text-align: left;">5</td>
</tr>
<tr class="odd">
<td style="text-align: left;">numeric</td>
<td style="text-align: left;">5</td>
</tr>
<tr class="even">
<td style="text-align: left;">________________________</td>
<td style="text-align: left;"></td>
</tr>
<tr class="odd">
<td style="text-align: left;">Group variables</td>
<td style="text-align: left;">None</td>
</tr>
</tbody>
</table>
<p><strong>Variable type: factor</strong></p>
<table class="caption-top table table-sm table-striped small">
<colgroup>
<col style="width: 14%">
<col style="width: 10%">
<col style="width: 14%">
<col style="width: 8%">
<col style="width: 9%">
<col style="width: 41%">
</colgroup>
<thead>
<tr class="header">
<th style="text-align: left;">skim_variable</th>
<th style="text-align: right;">n_missing</th>
<th style="text-align: right;">complete_rate</th>
<th style="text-align: left;">ordered</th>
<th style="text-align: right;">n_unique</th>
<th style="text-align: left;">top_counts</th>
</tr>
</thead>
<tbody>
<tr class="odd">
<td style="text-align: left;">overall_qual</td>
<td style="text-align: right;">0</td>
<td style="text-align: right;">1.00</td>
<td style="text-align: left;">FALSE</td>
<td style="text-align: right;">10</td>
<td style="text-align: left;">5: 556, 6: 487, 7: 403, 8: 233</td>
</tr>
<tr class="even">
<td style="text-align: left;">garage_qual</td>
<td style="text-align: right;">109</td>
<td style="text-align: right;">0.94</td>
<td style="text-align: left;">FALSE</td>
<td style="text-align: right;">5</td>
<td style="text-align: left;">TA: 1745, Fa: 79, Gd: 16, Po: 4</td>
</tr>
<tr class="odd">
<td style="text-align: left;">ms_zoning</td>
<td style="text-align: right;">0</td>
<td style="text-align: right;">1.00</td>
<td style="text-align: left;">FALSE</td>
<td style="text-align: right;">7</td>
<td style="text-align: left;">RL: 1530, RM: 297, FV: 91, C (: 19</td>
</tr>
<tr class="even">
<td style="text-align: left;">lot_config</td>
<td style="text-align: right;">0</td>
<td style="text-align: right;">1.00</td>
<td style="text-align: left;">FALSE</td>
<td style="text-align: right;">5</td>
<td style="text-align: left;">Ins: 1454, Cor: 328, Cul: 114, FR2: 55</td>
</tr>
<tr class="odd">
<td style="text-align: left;">bldg_type</td>
<td style="text-align: right;">0</td>
<td style="text-align: right;">1.00</td>
<td style="text-align: left;">FALSE</td>
<td style="text-align: right;">5</td>
<td style="text-align: left;">1Fa: 1631, Twn: 145, Dup: 77, Twn: 64</td>
</tr>
</tbody>
</table>
<p><strong>Variable type: numeric</strong></p>
<table class="caption-top table table-sm table-striped small">
<thead>
<tr class="header">
<th style="text-align: left;">skim_variable</th>
<th style="text-align: right;">n_missing</th>
<th style="text-align: right;">complete_rate</th>
<th style="text-align: right;">p0</th>
<th style="text-align: right;">p100</th>
</tr>
</thead>
<tbody>
<tr class="odd">
<td style="text-align: left;">sale_price</td>
<td style="text-align: right;">0</td>
<td style="text-align: right;">1</td>
<td style="text-align: right;">12789</td>
<td style="text-align: right;">745000</td>
</tr>
<tr class="even">
<td style="text-align: left;">gr_liv_area</td>
<td style="text-align: right;">0</td>
<td style="text-align: right;">1</td>
<td style="text-align: right;">438</td>
<td style="text-align: right;">5642</td>
</tr>
<tr class="odd">
<td style="text-align: left;">lot_area</td>
<td style="text-align: right;">0</td>
<td style="text-align: right;">1</td>
<td style="text-align: right;">1476</td>
<td style="text-align: right;">215245</td>
</tr>
<tr class="even">
<td style="text-align: left;">year_built</td>
<td style="text-align: right;">0</td>
<td style="text-align: right;">1</td>
<td style="text-align: right;">1875</td>
<td style="text-align: right;">2010</td>
</tr>
<tr class="odd">
<td style="text-align: left;">garage_cars</td>
<td style="text-align: right;">1</td>
<td style="text-align: right;">1</td>
<td style="text-align: right;">0</td>
<td style="text-align: right;">4</td>
</tr>
</tbody>
</table>
</div>
</div>
<hr>
<div class="callout callout-style-default callout-tip no-icon callout-titled">
<div class="callout-header d-flex align-content-center">
<div class="callout-icon-container">
<i class="callout-icon no-icon"></i>
</div>
<div class="callout-title-container flex-fill">
Coding sidebar 1
</div>
</div>
<div class="callout-body-container callout-body">
<ul>
<li>Write functions whenever you will repeat code often. You can now reuse <code>skim_some()</code></li>
<li><code>skim_with()</code> is an example of a function factory - a function that is used to create a new function
<ul>
<li><code>partial()</code> and <code>compose()</code> are two other function factories we will use at times</li>
<li>More details on function factories is available in <a href="https://adv-r.hadley.nz/function-factories.html">Advanced R</a></li>
</ul></li>
</ul>
</div>
</div>
<div class="callout callout-style-default callout-tip no-icon callout-titled">
<div class="callout-header d-flex align-content-center">
<div class="callout-icon-container">
<i class="callout-icon no-icon"></i>
</div>
<div class="callout-title-container flex-fill">
Coding sidebar 2
</div>
</div>
<div class="callout-body-container callout-body">
<ul>
<li>Gather useful functions together in a script that you can reuse.</li>
<li>All of the reusable functions in this and later units are available to you in one of my <a href="https://github.com/jjcurtin/lab_support">public github repositories</a>.</li>
<li>You can load these functions into your workspace directly from github using <code>devtools::source_url()</code>. For example: <code>devtools::source_url("https://github.com/jjcurtin/lab_support/blob/main/fun_modeling.R?raw=true")</code></li>
<li>You should start to gather your favorite custom functions together in your own script(s).<br>
</li>
<li>You can save your own scripts in a local file and load them into your workspace using <code>source()</code> or you can make your own github repo so you can begin to share your code with others!</li>
</ul>
</div>
</div>
<hr>
</section>
<section id="missing-data---all-variables" class="level3" data-number="2.4.5">
<h3 data-number="2.4.5" class="anchored" data-anchor-id="missing-data---all-variables"><span class="header-section-number">2.4.5</span> Missing Data - All variables</h3>
<p><code>skim_some()</code> provides us with missing data counts and complete data proportions for each variable</p>
<div class="cell">
<details open="" class="code-fold">
<summary>Code</summary>
<div class="sourceCode cell-code" id="annotated-cell-13"><pre class="sourceCode r code-annotation-code code-with-copy code-annotated"><code class="sourceCode r"><span id="annotated-cell-13-1"><a href="#annotated-cell-13-1" aria-hidden="true" tabindex="-1"></a>data_all <span class="sc">|&gt;</span> </span>
<span id="annotated-cell-13-2"><a href="#annotated-cell-13-2" aria-hidden="true" tabindex="-1"></a>  <span class="fu">skim_some</span>() <span class="sc">|&gt;</span> </span>
<a class="code-annotation-anchor" data-target-cell="annotated-cell-13" data-target-annotation="1" onclick="event.preventDefault();">1</a><span id="annotated-cell-13-3" class="code-annotation-target"><a href="#annotated-cell-13-3" aria-hidden="true" tabindex="-1"></a>  <span class="fu">select</span>(skim_variable, n_missing, complete_rate)</span><div class="code-annotation-gutter-bg"></div><div class="code-annotation-gutter"></div></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
</details>
<div class="cell-annotation">
<dl class="code-annotation-container-grid">
<dt data-target-cell="annotated-cell-13" data-target-annotation="1">1</dt>
<dd>
<span data-code-cell="annotated-cell-13" data-code-lines="3" data-code-annotation="1"><code>skim_some()</code> returns a dataframe so you can select only the subset of columns to focus its output on what you want. Or just print it all!</span>
</dd>
</dl>
</div>
<div class="cell-output cell-output-stdout">
<pre><code># A tibble: 10 × 3
   skim_variable n_missing complete_rate
   &lt;chr&gt;             &lt;int&gt;         &lt;dbl&gt;
 1 overall_qual          0         1    
 2 garage_qual         109         0.944
 3 ms_zoning             0         1    
 4 lot_config            0         1    
 5 bldg_type             0         1    
 6 sale_price            0         1    
 7 gr_liv_area           0         1    
 8 lot_area              0         1    
 9 year_built            0         1    
10 garage_cars           1         0.999</code></pre>
</div>
</div>
<hr>
<p>You likely should view the full observation for missing values</p>
<p>We will show you a few methods to do this in your rendered output</p>
<ul>
<li><code>print()</code> will print only 20 rows and the number of columns that will display for width of page
<ul>
<li>Set <code>options()</code> if you will do a lot of printing and want full dataframe printed</li>
</ul></li>
<li>Use <code>kbl()</code> from <code>kableExtra</code> package for formatted tables (two methods below)</li>
</ul>
<p>Don’t forget that you can also use <code>View()</code> interactively in R Studio</p>
<hr>
<p><strong>Option 1 (Simple)</strong>: Use print() with <code>options()</code></p>
<div class="cell">
<details open="" class="code-fold">
<summary>Code</summary>
<div class="sourceCode cell-code" id="annotated-cell-14"><pre class="sourceCode r code-annotation-code code-with-copy code-annotated"><code class="sourceCode r"><a class="code-annotation-anchor" data-target-cell="annotated-cell-14" data-target-annotation="1" onclick="event.preventDefault();">1</a><span id="annotated-cell-14-1" class="code-annotation-target"><a href="#annotated-cell-14-1" aria-hidden="true" tabindex="-1"></a><span class="fu">options</span>(<span class="at">tibble.width =</span> <span class="cn">Inf</span>, <span class="at">tibble.print_max =</span> <span class="cn">Inf</span>)</span>
<span id="annotated-cell-14-2"><a href="#annotated-cell-14-2" aria-hidden="true" tabindex="-1"></a></span>
<span id="annotated-cell-14-3"><a href="#annotated-cell-14-3" aria-hidden="true" tabindex="-1"></a>data_all <span class="sc">|&gt;</span> <span class="fu">filter</span>(<span class="fu">is.na</span>(garage_cars)) <span class="sc">|&gt;</span> </span>
<span id="annotated-cell-14-4"><a href="#annotated-cell-14-4" aria-hidden="true" tabindex="-1"></a>  <span class="fu">print</span>()</span><div class="code-annotation-gutter-bg"></div><div class="code-annotation-gutter"></div></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
</details>
<div class="cell-annotation">
<dl class="code-annotation-container-grid">
<dt data-target-cell="annotated-cell-14" data-target-annotation="1">1</dt>
<dd>
<span data-code-cell="annotated-cell-14" data-code-lines="1" data-code-annotation="1">This sets print to print all rows and columns. Note that we set these options at the start of the unit b.c. we like to see our full tibbles. If we want only a subset of the first (or last) rows, we use <code>head()</code> or <code>tail()</code></span>
</dd>
</dl>
</div>
<div class="cell-output cell-output-stdout">
<pre><code># A tibble: 1 × 10
  sale_price gr_liv_area lot_area year_built overall_qual garage_cars
       &lt;dbl&gt;       &lt;dbl&gt;    &lt;dbl&gt;      &lt;dbl&gt; &lt;fct&gt;              &lt;dbl&gt;
1     150909        1828     9060       1923 5                     NA
  garage_qual ms_zoning lot_config bldg_type
  &lt;fct&gt;       &lt;fct&gt;     &lt;fct&gt;      &lt;fct&gt;    
1 &lt;NA&gt;        RM        Inside     1Fam     </code></pre>
</div>
</div>
<hr>
<p>Here are some more advanced options using <code>kbl()</code> for the df with many rows</p>
<ul>
<li><code>kable()</code> tables from <code>knitr</code> package and <code>kableExtra</code> extensions (including <code>kbl()</code>) are very useful during EDA and also final publication quality tables</li>
<li>use <code>library(kableExtra)</code></li>
<li>see <a href="https://cran.r-project.org/web/packages/kableExtra/vignettes/awesome_table_in_html.html">vignettes for kableExtra</a></li>
</ul>
<p><strong>Option 2 (more advanced)</strong>: Use a function for kables that we created. Code is displayed here but the function is available to you if you source fun_eda.R from Github</p>
<div class="cell">
<details open="" class="code-fold">
<summary>Code</summary>
<div class="sourceCode cell-code" id="annotated-cell-15"><pre class="sourceCode r code-annotation-code code-with-copy code-annotated"><code class="sourceCode r"><span id="annotated-cell-15-1"><a href="#annotated-cell-15-1" aria-hidden="true" tabindex="-1"></a><span class="co"># Might want to use height = "100%" if only printing a few rows</span></span>
<a class="code-annotation-anchor" data-target-cell="annotated-cell-15" data-target-annotation="1" onclick="event.preventDefault();">1</a><span id="annotated-cell-15-2" class="code-annotation-target"><a href="#annotated-cell-15-2" aria-hidden="true" tabindex="-1"></a>print_kbl <span class="ot">&lt;-</span> <span class="cf">function</span>(data, <span class="at">height =</span> <span class="st">"500px"</span>) {</span>
<span id="annotated-cell-15-3"><a href="#annotated-cell-15-3" aria-hidden="true" tabindex="-1"></a>  data <span class="sc">|&gt;</span> </span>
<span id="annotated-cell-15-4"><a href="#annotated-cell-15-4" aria-hidden="true" tabindex="-1"></a>    <span class="fu">kbl</span>(<span class="at">align =</span> <span class="st">"r"</span>) <span class="sc">|&gt;</span> </span>
<span id="annotated-cell-15-5"><a href="#annotated-cell-15-5" aria-hidden="true" tabindex="-1"></a>    <span class="fu">kable_styling</span>(<span class="at">bootstrap_options =</span> <span class="fu">c</span>(<span class="st">"striped"</span>, <span class="st">"condensed"</span>)) <span class="sc">|&gt;</span> </span>
<a class="code-annotation-anchor" data-target-cell="annotated-cell-15" data-target-annotation="2" onclick="event.preventDefault();">2</a><span id="annotated-cell-15-6" class="code-annotation-target"><a href="#annotated-cell-15-6" aria-hidden="true" tabindex="-1"></a>    <span class="fu">scroll_box</span>(<span class="at">height =</span> height, <span class="at">width =</span> <span class="st">"100%"</span>)</span>
<span id="annotated-cell-15-7"><a href="#annotated-cell-15-7" aria-hidden="true" tabindex="-1"></a>}</span><div class="code-annotation-gutter-bg"></div><div class="code-annotation-gutter"></div></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
</details>
<div class="cell-annotation">
<dl class="code-annotation-container-grid">
<dt data-target-cell="annotated-cell-15" data-target-annotation="1">1</dt>
<dd>
<span data-code-cell="annotated-cell-15" data-code-lines="2" data-code-annotation="1">Defaults to a output box of height = “500px”. Can set to other values if preferred.</span>
</dd>
<dt data-target-cell="annotated-cell-15" data-target-annotation="2">2</dt>
<dd>
<span data-code-cell="annotated-cell-15" data-code-lines="6" data-code-annotation="2">Might want to use <code>height = "100%"</code> if only printing a few rows.</span>
</dd>
</dl>
</div>
</div>
<hr>
<p>Let’s use this function to see its output</p>
<div class="cell">
<details open="" class="code-fold">
<summary>Code</summary>
<div class="sourceCode cell-code" id="cb16"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb16-1"><a href="#cb16-1" aria-hidden="true" tabindex="-1"></a>data_all <span class="sc">|&gt;</span> <span class="fu">filter</span>(<span class="fu">is.na</span>(garage_qual)) <span class="sc">|&gt;</span> </span>
<span id="cb16-2"><a href="#cb16-2" aria-hidden="true" tabindex="-1"></a>  <span class="fu">print_kbl</span>()</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
</details>
<div class="cell-output-display">
<div style="border: 1px solid #ddd; padding: 0px; overflow-y: scroll; height:500px; overflow-x: scroll; width:100%; ">
<table class="table table-striped table-condensed caption-top table-sm small" data-quarto-postprocess="true">
<thead>
<tr class="header">
<th data-quarto-table-cell-role="th" style="text-align: right; position: sticky; top: 0; background-color: #FFFFFF;">sale_price</th>
<th data-quarto-table-cell-role="th" style="text-align: right; position: sticky; top: 0; background-color: #FFFFFF;">gr_liv_area</th>
<th data-quarto-table-cell-role="th" style="text-align: right; position: sticky; top: 0; background-color: #FFFFFF;">lot_area</th>
<th data-quarto-table-cell-role="th" style="text-align: right; position: sticky; top: 0; background-color: #FFFFFF;">year_built</th>
<th data-quarto-table-cell-role="th" style="text-align: right; position: sticky; top: 0; background-color: #FFFFFF;">overall_qual</th>
<th data-quarto-table-cell-role="th" style="text-align: right; position: sticky; top: 0; background-color: #FFFFFF;">garage_cars</th>
<th data-quarto-table-cell-role="th" style="text-align: right; position: sticky; top: 0; background-color: #FFFFFF;">garage_qual</th>
<th data-quarto-table-cell-role="th" style="text-align: right; position: sticky; top: 0; background-color: #FFFFFF;">ms_zoning</th>
<th data-quarto-table-cell-role="th" style="text-align: right; position: sticky; top: 0; background-color: #FFFFFF;">lot_config</th>
<th data-quarto-table-cell-role="th" style="text-align: right; position: sticky; top: 0; background-color: #FFFFFF;">bldg_type</th>
</tr>
</thead>
<tbody>
<tr class="odd">
<td style="text-align: right;">115000</td>
<td style="text-align: right;">864</td>
<td style="text-align: right;">10500</td>
<td style="text-align: right;">1971</td>
<td style="text-align: right;">4</td>
<td style="text-align: right;">0</td>
<td style="text-align: right;">NA</td>
<td style="text-align: right;">RL</td>
<td style="text-align: right;">FR2</td>
<td style="text-align: right;">1Fam</td>
</tr>
<tr class="even">
<td style="text-align: right;">128950</td>
<td style="text-align: right;">1225</td>
<td style="text-align: right;">9320</td>
<td style="text-align: right;">1959</td>
<td style="text-align: right;">4</td>
<td style="text-align: right;">0</td>
<td style="text-align: right;">NA</td>
<td style="text-align: right;">RL</td>
<td style="text-align: right;">Inside</td>
<td style="text-align: right;">1Fam</td>
</tr>
<tr class="odd">
<td style="text-align: right;">84900</td>
<td style="text-align: right;">1728</td>
<td style="text-align: right;">13260</td>
<td style="text-align: right;">1962</td>
<td style="text-align: right;">5</td>
<td style="text-align: right;">0</td>
<td style="text-align: right;">NA</td>
<td style="text-align: right;">RL</td>
<td style="text-align: right;">Inside</td>
<td style="text-align: right;">Duplex</td>
</tr>
<tr class="even">
<td style="text-align: right;">116500</td>
<td style="text-align: right;">858</td>
<td style="text-align: right;">7207</td>
<td style="text-align: right;">1958</td>
<td style="text-align: right;">5</td>
<td style="text-align: right;">0</td>
<td style="text-align: right;">NA</td>
<td style="text-align: right;">RL</td>
<td style="text-align: right;">Inside</td>
<td style="text-align: right;">1Fam</td>
</tr>
<tr class="odd">
<td style="text-align: right;">76500</td>
<td style="text-align: right;">1306</td>
<td style="text-align: right;">5350</td>
<td style="text-align: right;">1940</td>
<td style="text-align: right;">3</td>
<td style="text-align: right;">0</td>
<td style="text-align: right;">NA</td>
<td style="text-align: right;">RL</td>
<td style="text-align: right;">Inside</td>
<td style="text-align: right;">1Fam</td>
</tr>
<tr class="even">
<td style="text-align: right;">76500</td>
<td style="text-align: right;">2256</td>
<td style="text-align: right;">9045</td>
<td style="text-align: right;">1910</td>
<td style="text-align: right;">5</td>
<td style="text-align: right;">0</td>
<td style="text-align: right;">NA</td>
<td style="text-align: right;">RM</td>
<td style="text-align: right;">Inside</td>
<td style="text-align: right;">2fmCon</td>
</tr>
<tr class="odd">
<td style="text-align: right;">159900</td>
<td style="text-align: right;">1560</td>
<td style="text-align: right;">12900</td>
<td style="text-align: right;">1912</td>
<td style="text-align: right;">6</td>
<td style="text-align: right;">0</td>
<td style="text-align: right;">NA</td>
<td style="text-align: right;">RM</td>
<td style="text-align: right;">Inside</td>
<td style="text-align: right;">1Fam</td>
</tr>
<tr class="even">
<td style="text-align: right;">55000</td>
<td style="text-align: right;">1092</td>
<td style="text-align: right;">5600</td>
<td style="text-align: right;">1930</td>
<td style="text-align: right;">4</td>
<td style="text-align: right;">0</td>
<td style="text-align: right;">NA</td>
<td style="text-align: right;">RM</td>
<td style="text-align: right;">Inside</td>
<td style="text-align: right;">2fmCon</td>
</tr>
<tr class="odd">
<td style="text-align: right;">93369</td>
<td style="text-align: right;">1884</td>
<td style="text-align: right;">6449</td>
<td style="text-align: right;">1907</td>
<td style="text-align: right;">4</td>
<td style="text-align: right;">0</td>
<td style="text-align: right;">NA</td>
<td style="text-align: right;">C (all)</td>
<td style="text-align: right;">Inside</td>
<td style="text-align: right;">1Fam</td>
</tr>
<tr class="even">
<td style="text-align: right;">94000</td>
<td style="text-align: right;">1020</td>
<td style="text-align: right;">6342</td>
<td style="text-align: right;">1875</td>
<td style="text-align: right;">5</td>
<td style="text-align: right;">0</td>
<td style="text-align: right;">NA</td>
<td style="text-align: right;">RL</td>
<td style="text-align: right;">Inside</td>
<td style="text-align: right;">1Fam</td>
</tr>
<tr class="odd">
<td style="text-align: right;">136000</td>
<td style="text-align: right;">1832</td>
<td style="text-align: right;">10773</td>
<td style="text-align: right;">1967</td>
<td style="text-align: right;">4</td>
<td style="text-align: right;">0</td>
<td style="text-align: right;">NA</td>
<td style="text-align: right;">RL</td>
<td style="text-align: right;">Inside</td>
<td style="text-align: right;">Duplex</td>
</tr>
<tr class="even">
<td style="text-align: right;">100000</td>
<td style="text-align: right;">1664</td>
<td style="text-align: right;">9825</td>
<td style="text-align: right;">1965</td>
<td style="text-align: right;">5</td>
<td style="text-align: right;">0</td>
<td style="text-align: right;">NA</td>
<td style="text-align: right;">RL</td>
<td style="text-align: right;">Inside</td>
<td style="text-align: right;">Duplex</td>
</tr>
<tr class="odd">
<td style="text-align: right;">90000</td>
<td style="text-align: right;">960</td>
<td style="text-align: right;">6410</td>
<td style="text-align: right;">1958</td>
<td style="text-align: right;">4</td>
<td style="text-align: right;">0</td>
<td style="text-align: right;">NA</td>
<td style="text-align: right;">RL</td>
<td style="text-align: right;">Inside</td>
<td style="text-align: right;">1Fam</td>
</tr>
<tr class="even">
<td style="text-align: right;">100000</td>
<td style="text-align: right;">1666</td>
<td style="text-align: right;">9839</td>
<td style="text-align: right;">1931</td>
<td style="text-align: right;">5</td>
<td style="text-align: right;">0</td>
<td style="text-align: right;">NA</td>
<td style="text-align: right;">RL</td>
<td style="text-align: right;">Inside</td>
<td style="text-align: right;">1Fam</td>
</tr>
<tr class="odd">
<td style="text-align: right;">139000</td>
<td style="text-align: right;">1824</td>
<td style="text-align: right;">9400</td>
<td style="text-align: right;">1971</td>
<td style="text-align: right;">6</td>
<td style="text-align: right;">0</td>
<td style="text-align: right;">NA</td>
<td style="text-align: right;">RL</td>
<td style="text-align: right;">Corner</td>
<td style="text-align: right;">Duplex</td>
</tr>
<tr class="even">
<td style="text-align: right;">76000</td>
<td style="text-align: right;">1092</td>
<td style="text-align: right;">1476</td>
<td style="text-align: right;">1970</td>
<td style="text-align: right;">4</td>
<td style="text-align: right;">0</td>
<td style="text-align: right;">NA</td>
<td style="text-align: right;">RM</td>
<td style="text-align: right;">Inside</td>
<td style="text-align: right;">Twnhs</td>
</tr>
<tr class="odd">
<td style="text-align: right;">75500</td>
<td style="text-align: right;">630</td>
<td style="text-align: right;">1491</td>
<td style="text-align: right;">1972</td>
<td style="text-align: right;">4</td>
<td style="text-align: right;">0</td>
<td style="text-align: right;">NA</td>
<td style="text-align: right;">RM</td>
<td style="text-align: right;">Inside</td>
<td style="text-align: right;">TwnhsE</td>
</tr>
<tr class="even">
<td style="text-align: right;">88250</td>
<td style="text-align: right;">1092</td>
<td style="text-align: right;">1900</td>
<td style="text-align: right;">1970</td>
<td style="text-align: right;">4</td>
<td style="text-align: right;">0</td>
<td style="text-align: right;">NA</td>
<td style="text-align: right;">RM</td>
<td style="text-align: right;">Inside</td>
<td style="text-align: right;">TwnhsE</td>
</tr>
<tr class="odd">
<td style="text-align: right;">136000</td>
<td style="text-align: right;">1792</td>
<td style="text-align: right;">9000</td>
<td style="text-align: right;">1974</td>
<td style="text-align: right;">5</td>
<td style="text-align: right;">0</td>
<td style="text-align: right;">NA</td>
<td style="text-align: right;">RL</td>
<td style="text-align: right;">FR2</td>
<td style="text-align: right;">Duplex</td>
</tr>
<tr class="even">
<td style="text-align: right;">142000</td>
<td style="text-align: right;">1114</td>
<td style="text-align: right;">13072</td>
<td style="text-align: right;">2004</td>
<td style="text-align: right;">5</td>
<td style="text-align: right;">0</td>
<td style="text-align: right;">NA</td>
<td style="text-align: right;">RL</td>
<td style="text-align: right;">Inside</td>
<td style="text-align: right;">1Fam</td>
</tr>
<tr class="odd">
<td style="text-align: right;">82500</td>
<td style="text-align: right;">708</td>
<td style="text-align: right;">5330</td>
<td style="text-align: right;">1940</td>
<td style="text-align: right;">4</td>
<td style="text-align: right;">0</td>
<td style="text-align: right;">NA</td>
<td style="text-align: right;">RL</td>
<td style="text-align: right;">Inside</td>
<td style="text-align: right;">1Fam</td>
</tr>
<tr class="even">
<td style="text-align: right;">129000</td>
<td style="text-align: right;">1464</td>
<td style="text-align: right;">9900</td>
<td style="text-align: right;">1910</td>
<td style="text-align: right;">5</td>
<td style="text-align: right;">0</td>
<td style="text-align: right;">NA</td>
<td style="text-align: right;">RM</td>
<td style="text-align: right;">Corner</td>
<td style="text-align: right;">1Fam</td>
</tr>
<tr class="odd">
<td style="text-align: right;">94550</td>
<td style="text-align: right;">1701</td>
<td style="text-align: right;">7627</td>
<td style="text-align: right;">1920</td>
<td style="text-align: right;">4</td>
<td style="text-align: right;">0</td>
<td style="text-align: right;">NA</td>
<td style="text-align: right;">RM</td>
<td style="text-align: right;">Corner</td>
<td style="text-align: right;">2fmCon</td>
</tr>
<tr class="even">
<td style="text-align: right;">103000</td>
<td style="text-align: right;">1447</td>
<td style="text-align: right;">10134</td>
<td style="text-align: right;">1910</td>
<td style="text-align: right;">5</td>
<td style="text-align: right;">0</td>
<td style="text-align: right;">NA</td>
<td style="text-align: right;">RM</td>
<td style="text-align: right;">Inside</td>
<td style="text-align: right;">1Fam</td>
</tr>
<tr class="odd">
<td style="text-align: right;">37900</td>
<td style="text-align: right;">968</td>
<td style="text-align: right;">5925</td>
<td style="text-align: right;">1910</td>
<td style="text-align: right;">3</td>
<td style="text-align: right;">0</td>
<td style="text-align: right;">NA</td>
<td style="text-align: right;">RM</td>
<td style="text-align: right;">Inside</td>
<td style="text-align: right;">1Fam</td>
</tr>
<tr class="even">
<td style="text-align: right;">113000</td>
<td style="text-align: right;">1452</td>
<td style="text-align: right;">4456</td>
<td style="text-align: right;">1920</td>
<td style="text-align: right;">4</td>
<td style="text-align: right;">0</td>
<td style="text-align: right;">NA</td>
<td style="text-align: right;">RM</td>
<td style="text-align: right;">Inside</td>
<td style="text-align: right;">2fmCon</td>
</tr>
<tr class="odd">
<td style="text-align: right;">58500</td>
<td style="text-align: right;">816</td>
<td style="text-align: right;">3300</td>
<td style="text-align: right;">1910</td>
<td style="text-align: right;">4</td>
<td style="text-align: right;">0</td>
<td style="text-align: right;">NA</td>
<td style="text-align: right;">C (all)</td>
<td style="text-align: right;">Inside</td>
<td style="text-align: right;">1Fam</td>
</tr>
<tr class="even">
<td style="text-align: right;">34900</td>
<td style="text-align: right;">720</td>
<td style="text-align: right;">7879</td>
<td style="text-align: right;">1920</td>
<td style="text-align: right;">4</td>
<td style="text-align: right;">0</td>
<td style="text-align: right;">NA</td>
<td style="text-align: right;">C (all)</td>
<td style="text-align: right;">Inside</td>
<td style="text-align: right;">1Fam</td>
</tr>
<tr class="odd">
<td style="text-align: right;">60000</td>
<td style="text-align: right;">800</td>
<td style="text-align: right;">6120</td>
<td style="text-align: right;">1936</td>
<td style="text-align: right;">2</td>
<td style="text-align: right;">0</td>
<td style="text-align: right;">NA</td>
<td style="text-align: right;">RM</td>
<td style="text-align: right;">Inside</td>
<td style="text-align: right;">1Fam</td>
</tr>
<tr class="even">
<td style="text-align: right;">62500</td>
<td style="text-align: right;">2128</td>
<td style="text-align: right;">3000</td>
<td style="text-align: right;">1922</td>
<td style="text-align: right;">5</td>
<td style="text-align: right;">0</td>
<td style="text-align: right;">NA</td>
<td style="text-align: right;">RM</td>
<td style="text-align: right;">Inside</td>
<td style="text-align: right;">Duplex</td>
</tr>
<tr class="odd">
<td style="text-align: right;">97500</td>
<td style="text-align: right;">1864</td>
<td style="text-align: right;">5852</td>
<td style="text-align: right;">1902</td>
<td style="text-align: right;">7</td>
<td style="text-align: right;">0</td>
<td style="text-align: right;">NA</td>
<td style="text-align: right;">RM</td>
<td style="text-align: right;">Corner</td>
<td style="text-align: right;">2fmCon</td>
</tr>
<tr class="even">
<td style="text-align: right;">70000</td>
<td style="text-align: right;">892</td>
<td style="text-align: right;">5160</td>
<td style="text-align: right;">1923</td>
<td style="text-align: right;">4</td>
<td style="text-align: right;">0</td>
<td style="text-align: right;">NA</td>
<td style="text-align: right;">RM</td>
<td style="text-align: right;">Inside</td>
<td style="text-align: right;">1Fam</td>
</tr>
<tr class="odd">
<td style="text-align: right;">179000</td>
<td style="text-align: right;">1200</td>
<td style="text-align: right;">10800</td>
<td style="text-align: right;">1987</td>
<td style="text-align: right;">5</td>
<td style="text-align: right;">0</td>
<td style="text-align: right;">NA</td>
<td style="text-align: right;">RL</td>
<td style="text-align: right;">Inside</td>
<td style="text-align: right;">Duplex</td>
</tr>
<tr class="even">
<td style="text-align: right;">179000</td>
<td style="text-align: right;">1200</td>
<td style="text-align: right;">10800</td>
<td style="text-align: right;">1987</td>
<td style="text-align: right;">5</td>
<td style="text-align: right;">0</td>
<td style="text-align: right;">NA</td>
<td style="text-align: right;">RL</td>
<td style="text-align: right;">Inside</td>
<td style="text-align: right;">Duplex</td>
</tr>
<tr class="odd">
<td style="text-align: right;">61000</td>
<td style="text-align: right;">904</td>
<td style="text-align: right;">10020</td>
<td style="text-align: right;">1922</td>
<td style="text-align: right;">1</td>
<td style="text-align: right;">0</td>
<td style="text-align: right;">NA</td>
<td style="text-align: right;">RL</td>
<td style="text-align: right;">Inside</td>
<td style="text-align: right;">1Fam</td>
</tr>
<tr class="even">
<td style="text-align: right;">118000</td>
<td style="text-align: right;">698</td>
<td style="text-align: right;">9405</td>
<td style="text-align: right;">1947</td>
<td style="text-align: right;">5</td>
<td style="text-align: right;">0</td>
<td style="text-align: right;">NA</td>
<td style="text-align: right;">RL</td>
<td style="text-align: right;">Inside</td>
<td style="text-align: right;">1Fam</td>
</tr>
<tr class="odd">
<td style="text-align: right;">99900</td>
<td style="text-align: right;">864</td>
<td style="text-align: right;">4060</td>
<td style="text-align: right;">1922</td>
<td style="text-align: right;">5</td>
<td style="text-align: right;">0</td>
<td style="text-align: right;">NA</td>
<td style="text-align: right;">RL</td>
<td style="text-align: right;">Corner</td>
<td style="text-align: right;">1Fam</td>
</tr>
<tr class="even">
<td style="text-align: right;">119900</td>
<td style="text-align: right;">1678</td>
<td style="text-align: right;">10926</td>
<td style="text-align: right;">1959</td>
<td style="text-align: right;">5</td>
<td style="text-align: right;">0</td>
<td style="text-align: right;">NA</td>
<td style="text-align: right;">RL</td>
<td style="text-align: right;">Inside</td>
<td style="text-align: right;">Duplex</td>
</tr>
<tr class="odd">
<td style="text-align: right;">112000</td>
<td style="text-align: right;">833</td>
<td style="text-align: right;">8780</td>
<td style="text-align: right;">1985</td>
<td style="text-align: right;">5</td>
<td style="text-align: right;">0</td>
<td style="text-align: right;">NA</td>
<td style="text-align: right;">RL</td>
<td style="text-align: right;">Corner</td>
<td style="text-align: right;">1Fam</td>
</tr>
<tr class="even">
<td style="text-align: right;">141000</td>
<td style="text-align: right;">1080</td>
<td style="text-align: right;">7500</td>
<td style="text-align: right;">2004</td>
<td style="text-align: right;">7</td>
<td style="text-align: right;">0</td>
<td style="text-align: right;">NA</td>
<td style="text-align: right;">RL</td>
<td style="text-align: right;">Inside</td>
<td style="text-align: right;">1Fam</td>
</tr>
<tr class="odd">
<td style="text-align: right;">106250</td>
<td style="text-align: right;">1294</td>
<td style="text-align: right;">10800</td>
<td style="text-align: right;">1900</td>
<td style="text-align: right;">4</td>
<td style="text-align: right;">0</td>
<td style="text-align: right;">NA</td>
<td style="text-align: right;">RL</td>
<td style="text-align: right;">Inside</td>
<td style="text-align: right;">2fmCon</td>
</tr>
<tr class="even">
<td style="text-align: right;">130000</td>
<td style="text-align: right;">1800</td>
<td style="text-align: right;">8513</td>
<td style="text-align: right;">1961</td>
<td style="text-align: right;">5</td>
<td style="text-align: right;">0</td>
<td style="text-align: right;">NA</td>
<td style="text-align: right;">RL</td>
<td style="text-align: right;">Corner</td>
<td style="text-align: right;">Duplex</td>
</tr>
<tr class="odd">
<td style="text-align: right;">120000</td>
<td style="text-align: right;">1027</td>
<td style="text-align: right;">5400</td>
<td style="text-align: right;">1920</td>
<td style="text-align: right;">7</td>
<td style="text-align: right;">0</td>
<td style="text-align: right;">NA</td>
<td style="text-align: right;">RM</td>
<td style="text-align: right;">Inside</td>
<td style="text-align: right;">1Fam</td>
</tr>
<tr class="even">
<td style="text-align: right;">95000</td>
<td style="text-align: right;">1080</td>
<td style="text-align: right;">5914</td>
<td style="text-align: right;">1890</td>
<td style="text-align: right;">5</td>
<td style="text-align: right;">0</td>
<td style="text-align: right;">NA</td>
<td style="text-align: right;">RM</td>
<td style="text-align: right;">Inside</td>
<td style="text-align: right;">1Fam</td>
</tr>
<tr class="odd">
<td style="text-align: right;">65000</td>
<td style="text-align: right;">1588</td>
<td style="text-align: right;">12205</td>
<td style="text-align: right;">1949</td>
<td style="text-align: right;">3</td>
<td style="text-align: right;">0</td>
<td style="text-align: right;">NA</td>
<td style="text-align: right;">RM</td>
<td style="text-align: right;">Inside</td>
<td style="text-align: right;">1Fam</td>
</tr>
<tr class="even">
<td style="text-align: right;">129400</td>
<td style="text-align: right;">1540</td>
<td style="text-align: right;">6000</td>
<td style="text-align: right;">1905</td>
<td style="text-align: right;">5</td>
<td style="text-align: right;">0</td>
<td style="text-align: right;">NA</td>
<td style="text-align: right;">RM</td>
<td style="text-align: right;">Corner</td>
<td style="text-align: right;">1Fam</td>
</tr>
<tr class="odd">
<td style="text-align: right;">160000</td>
<td style="text-align: right;">1984</td>
<td style="text-align: right;">8094</td>
<td style="text-align: right;">1910</td>
<td style="text-align: right;">6</td>
<td style="text-align: right;">1</td>
<td style="text-align: right;">NA</td>
<td style="text-align: right;">RM</td>
<td style="text-align: right;">Inside</td>
<td style="text-align: right;">2fmCon</td>
</tr>
<tr class="even">
<td style="text-align: right;">89500</td>
<td style="text-align: right;">1406</td>
<td style="text-align: right;">7920</td>
<td style="text-align: right;">1920</td>
<td style="text-align: right;">6</td>
<td style="text-align: right;">0</td>
<td style="text-align: right;">NA</td>
<td style="text-align: right;">RM</td>
<td style="text-align: right;">Inside</td>
<td style="text-align: right;">1Fam</td>
</tr>
<tr class="odd">
<td style="text-align: right;">79900</td>
<td style="text-align: right;">1198</td>
<td style="text-align: right;">5586</td>
<td style="text-align: right;">1920</td>
<td style="text-align: right;">6</td>
<td style="text-align: right;">0</td>
<td style="text-align: right;">NA</td>
<td style="text-align: right;">RM</td>
<td style="text-align: right;">Inside</td>
<td style="text-align: right;">1Fam</td>
</tr>
<tr class="even">
<td style="text-align: right;">82375</td>
<td style="text-align: right;">1344</td>
<td style="text-align: right;">10320</td>
<td style="text-align: right;">1915</td>
<td style="text-align: right;">3</td>
<td style="text-align: right;">0</td>
<td style="text-align: right;">NA</td>
<td style="text-align: right;">RM</td>
<td style="text-align: right;">Inside</td>
<td style="text-align: right;">2fmCon</td>
</tr>
<tr class="odd">
<td style="text-align: right;">127500</td>
<td style="text-align: right;">1355</td>
<td style="text-align: right;">10106</td>
<td style="text-align: right;">1940</td>
<td style="text-align: right;">5</td>
<td style="text-align: right;">0</td>
<td style="text-align: right;">NA</td>
<td style="text-align: right;">RL</td>
<td style="text-align: right;">Inside</td>
<td style="text-align: right;">2fmCon</td>
</tr>
<tr class="even">
<td style="text-align: right;">80000</td>
<td style="text-align: right;">1006</td>
<td style="text-align: right;">9000</td>
<td style="text-align: right;">1959</td>
<td style="text-align: right;">5</td>
<td style="text-align: right;">0</td>
<td style="text-align: right;">NA</td>
<td style="text-align: right;">RL</td>
<td style="text-align: right;">Inside</td>
<td style="text-align: right;">1Fam</td>
</tr>
<tr class="odd">
<td style="text-align: right;">260000</td>
<td style="text-align: right;">1518</td>
<td style="text-align: right;">19550</td>
<td style="text-align: right;">1940</td>
<td style="text-align: right;">5</td>
<td style="text-align: right;">0</td>
<td style="text-align: right;">NA</td>
<td style="text-align: right;">RL</td>
<td style="text-align: right;">Inside</td>
<td style="text-align: right;">1Fam</td>
</tr>
<tr class="even">
<td style="text-align: right;">99600</td>
<td style="text-align: right;">864</td>
<td style="text-align: right;">9350</td>
<td style="text-align: right;">1975</td>
<td style="text-align: right;">5</td>
<td style="text-align: right;">0</td>
<td style="text-align: right;">NA</td>
<td style="text-align: right;">RL</td>
<td style="text-align: right;">Inside</td>
<td style="text-align: right;">Duplex</td>
</tr>
<tr class="odd">
<td style="text-align: right;">107500</td>
<td style="text-align: right;">1347</td>
<td style="text-align: right;">7000</td>
<td style="text-align: right;">1910</td>
<td style="text-align: right;">5</td>
<td style="text-align: right;">0</td>
<td style="text-align: right;">NA</td>
<td style="text-align: right;">RL</td>
<td style="text-align: right;">Inside</td>
<td style="text-align: right;">2fmCon</td>
</tr>
<tr class="even">
<td style="text-align: right;">79000</td>
<td style="text-align: right;">1096</td>
<td style="text-align: right;">9600</td>
<td style="text-align: right;">1924</td>
<td style="text-align: right;">6</td>
<td style="text-align: right;">0</td>
<td style="text-align: right;">NA</td>
<td style="text-align: right;">RL</td>
<td style="text-align: right;">Corner</td>
<td style="text-align: right;">1Fam</td>
</tr>
<tr class="odd">
<td style="text-align: right;">85000</td>
<td style="text-align: right;">796</td>
<td style="text-align: right;">8777</td>
<td style="text-align: right;">1910</td>
<td style="text-align: right;">5</td>
<td style="text-align: right;">0</td>
<td style="text-align: right;">NA</td>
<td style="text-align: right;">RL</td>
<td style="text-align: right;">Inside</td>
<td style="text-align: right;">1Fam</td>
</tr>
<tr class="even">
<td style="text-align: right;">145900</td>
<td style="text-align: right;">2200</td>
<td style="text-align: right;">8777</td>
<td style="text-align: right;">1900</td>
<td style="text-align: right;">5</td>
<td style="text-align: right;">0</td>
<td style="text-align: right;">NA</td>
<td style="text-align: right;">RL</td>
<td style="text-align: right;">Inside</td>
<td style="text-align: right;">Duplex</td>
</tr>
<tr class="odd">
<td style="text-align: right;">82000</td>
<td style="text-align: right;">1152</td>
<td style="text-align: right;">6040</td>
<td style="text-align: right;">1955</td>
<td style="text-align: right;">4</td>
<td style="text-align: right;">0</td>
<td style="text-align: right;">NA</td>
<td style="text-align: right;">RL</td>
<td style="text-align: right;">Inside</td>
<td style="text-align: right;">Duplex</td>
</tr>
<tr class="even">
<td style="text-align: right;">82000</td>
<td style="text-align: right;">1152</td>
<td style="text-align: right;">6012</td>
<td style="text-align: right;">1955</td>
<td style="text-align: right;">4</td>
<td style="text-align: right;">0</td>
<td style="text-align: right;">NA</td>
<td style="text-align: right;">RL</td>
<td style="text-align: right;">Corner</td>
<td style="text-align: right;">Duplex</td>
</tr>
<tr class="odd">
<td style="text-align: right;">118000</td>
<td style="text-align: right;">1440</td>
<td style="text-align: right;">12108</td>
<td style="text-align: right;">1955</td>
<td style="text-align: right;">4</td>
<td style="text-align: right;">0</td>
<td style="text-align: right;">NA</td>
<td style="text-align: right;">RL</td>
<td style="text-align: right;">Inside</td>
<td style="text-align: right;">Duplex</td>
</tr>
<tr class="even">
<td style="text-align: right;">82500</td>
<td style="text-align: right;">1152</td>
<td style="text-align: right;">6845</td>
<td style="text-align: right;">1955</td>
<td style="text-align: right;">4</td>
<td style="text-align: right;">0</td>
<td style="text-align: right;">NA</td>
<td style="text-align: right;">RL</td>
<td style="text-align: right;">Inside</td>
<td style="text-align: right;">Duplex</td>
</tr>
<tr class="odd">
<td style="text-align: right;">91900</td>
<td style="text-align: right;">784</td>
<td style="text-align: right;">6931</td>
<td style="text-align: right;">1955</td>
<td style="text-align: right;">4</td>
<td style="text-align: right;">0</td>
<td style="text-align: right;">NA</td>
<td style="text-align: right;">RL</td>
<td style="text-align: right;">Inside</td>
<td style="text-align: right;">2fmCon</td>
</tr>
<tr class="even">
<td style="text-align: right;">120000</td>
<td style="text-align: right;">1053</td>
<td style="text-align: right;">12180</td>
<td style="text-align: right;">1938</td>
<td style="text-align: right;">5</td>
<td style="text-align: right;">0</td>
<td style="text-align: right;">NA</td>
<td style="text-align: right;">RL</td>
<td style="text-align: right;">Inside</td>
<td style="text-align: right;">1Fam</td>
</tr>
<tr class="odd">
<td style="text-align: right;">96000</td>
<td style="text-align: right;">1137</td>
<td style="text-align: right;">8050</td>
<td style="text-align: right;">1947</td>
<td style="text-align: right;">5</td>
<td style="text-align: right;">0</td>
<td style="text-align: right;">NA</td>
<td style="text-align: right;">RL</td>
<td style="text-align: right;">Inside</td>
<td style="text-align: right;">1Fam</td>
</tr>
<tr class="even">
<td style="text-align: right;">98000</td>
<td style="text-align: right;">864</td>
<td style="text-align: right;">5604</td>
<td style="text-align: right;">1925</td>
<td style="text-align: right;">5</td>
<td style="text-align: right;">0</td>
<td style="text-align: right;">NA</td>
<td style="text-align: right;">RL</td>
<td style="text-align: right;">Inside</td>
<td style="text-align: right;">1Fam</td>
</tr>
<tr class="odd">
<td style="text-align: right;">67000</td>
<td style="text-align: right;">864</td>
<td style="text-align: right;">8248</td>
<td style="text-align: right;">1914</td>
<td style="text-align: right;">3</td>
<td style="text-align: right;">0</td>
<td style="text-align: right;">NA</td>
<td style="text-align: right;">RL</td>
<td style="text-align: right;">Inside</td>
<td style="text-align: right;">1Fam</td>
</tr>
<tr class="even">
<td style="text-align: right;">135900</td>
<td style="text-align: right;">1716</td>
<td style="text-align: right;">5687</td>
<td style="text-align: right;">1912</td>
<td style="text-align: right;">5</td>
<td style="text-align: right;">0</td>
<td style="text-align: right;">NA</td>
<td style="text-align: right;">RL</td>
<td style="text-align: right;">Inside</td>
<td style="text-align: right;">2fmCon</td>
</tr>
<tr class="odd">
<td style="text-align: right;">119000</td>
<td style="text-align: right;">1200</td>
<td style="text-align: right;">8155</td>
<td style="text-align: right;">1930</td>
<td style="text-align: right;">5</td>
<td style="text-align: right;">0</td>
<td style="text-align: right;">NA</td>
<td style="text-align: right;">RM</td>
<td style="text-align: right;">Inside</td>
<td style="text-align: right;">1Fam</td>
</tr>
<tr class="even">
<td style="text-align: right;">81000</td>
<td style="text-align: right;">630</td>
<td style="text-align: right;">1890</td>
<td style="text-align: right;">1972</td>
<td style="text-align: right;">4</td>
<td style="text-align: right;">0</td>
<td style="text-align: right;">NA</td>
<td style="text-align: right;">RM</td>
<td style="text-align: right;">Inside</td>
<td style="text-align: right;">Twnhs</td>
</tr>
<tr class="odd">
<td style="text-align: right;">146000</td>
<td style="text-align: right;">1100</td>
<td style="text-align: right;">7500</td>
<td style="text-align: right;">2006</td>
<td style="text-align: right;">6</td>
<td style="text-align: right;">0</td>
<td style="text-align: right;">NA</td>
<td style="text-align: right;">RL</td>
<td style="text-align: right;">Inside</td>
<td style="text-align: right;">1Fam</td>
</tr>
<tr class="even">
<td style="text-align: right;">64000</td>
<td style="text-align: right;">670</td>
<td style="text-align: right;">3500</td>
<td style="text-align: right;">1945</td>
<td style="text-align: right;">3</td>
<td style="text-align: right;">0</td>
<td style="text-align: right;">NA</td>
<td style="text-align: right;">RL</td>
<td style="text-align: right;">Inside</td>
<td style="text-align: right;">1Fam</td>
</tr>
<tr class="odd">
<td style="text-align: right;">103200</td>
<td style="text-align: right;">882</td>
<td style="text-align: right;">5500</td>
<td style="text-align: right;">1956</td>
<td style="text-align: right;">4</td>
<td style="text-align: right;">0</td>
<td style="text-align: right;">NA</td>
<td style="text-align: right;">RL</td>
<td style="text-align: right;">Inside</td>
<td style="text-align: right;">1Fam</td>
</tr>
<tr class="even">
<td style="text-align: right;">148000</td>
<td style="text-align: right;">1534</td>
<td style="text-align: right;">10800</td>
<td style="text-align: right;">1895</td>
<td style="text-align: right;">5</td>
<td style="text-align: right;">0</td>
<td style="text-align: right;">NA</td>
<td style="text-align: right;">RL</td>
<td style="text-align: right;">Inside</td>
<td style="text-align: right;">1Fam</td>
</tr>
<tr class="odd">
<td style="text-align: right;">110500</td>
<td style="text-align: right;">866</td>
<td style="text-align: right;">3880</td>
<td style="text-align: right;">1945</td>
<td style="text-align: right;">5</td>
<td style="text-align: right;">0</td>
<td style="text-align: right;">NA</td>
<td style="text-align: right;">RM</td>
<td style="text-align: right;">Inside</td>
<td style="text-align: right;">1Fam</td>
</tr>
<tr class="even">
<td style="text-align: right;">127000</td>
<td style="text-align: right;">1355</td>
<td style="text-align: right;">6882</td>
<td style="text-align: right;">1914</td>
<td style="text-align: right;">6</td>
<td style="text-align: right;">0</td>
<td style="text-align: right;">NA</td>
<td style="text-align: right;">RM</td>
<td style="text-align: right;">Inside</td>
<td style="text-align: right;">1Fam</td>
</tr>
<tr class="odd">
<td style="text-align: right;">200500</td>
<td style="text-align: right;">3086</td>
<td style="text-align: right;">18030</td>
<td style="text-align: right;">1946</td>
<td style="text-align: right;">5</td>
<td style="text-align: right;">0</td>
<td style="text-align: right;">NA</td>
<td style="text-align: right;">RL</td>
<td style="text-align: right;">Inside</td>
<td style="text-align: right;">1Fam</td>
</tr>
<tr class="even">
<td style="text-align: right;">150000</td>
<td style="text-align: right;">1440</td>
<td style="text-align: right;">7711</td>
<td style="text-align: right;">1977</td>
<td style="text-align: right;">4</td>
<td style="text-align: right;">0</td>
<td style="text-align: right;">NA</td>
<td style="text-align: right;">RL</td>
<td style="text-align: right;">Inside</td>
<td style="text-align: right;">Duplex</td>
</tr>
<tr class="odd">
<td style="text-align: right;">86000</td>
<td style="text-align: right;">605</td>
<td style="text-align: right;">9098</td>
<td style="text-align: right;">1920</td>
<td style="text-align: right;">4</td>
<td style="text-align: right;">0</td>
<td style="text-align: right;">NA</td>
<td style="text-align: right;">RL</td>
<td style="text-align: right;">Inside</td>
<td style="text-align: right;">1Fam</td>
</tr>
<tr class="even">
<td style="text-align: right;">123600</td>
<td style="text-align: right;">990</td>
<td style="text-align: right;">8070</td>
<td style="text-align: right;">1994</td>
<td style="text-align: right;">4</td>
<td style="text-align: right;">0</td>
<td style="text-align: right;">NA</td>
<td style="text-align: right;">RL</td>
<td style="text-align: right;">Inside</td>
<td style="text-align: right;">1Fam</td>
</tr>
<tr class="odd">
<td style="text-align: right;">98500</td>
<td style="text-align: right;">1195</td>
<td style="text-align: right;">8741</td>
<td style="text-align: right;">1946</td>
<td style="text-align: right;">5</td>
<td style="text-align: right;">0</td>
<td style="text-align: right;">NA</td>
<td style="text-align: right;">RL</td>
<td style="text-align: right;">Inside</td>
<td style="text-align: right;">Duplex</td>
</tr>
<tr class="even">
<td style="text-align: right;">79000</td>
<td style="text-align: right;">774</td>
<td style="text-align: right;">4270</td>
<td style="text-align: right;">1931</td>
<td style="text-align: right;">3</td>
<td style="text-align: right;">0</td>
<td style="text-align: right;">NA</td>
<td style="text-align: right;">RH</td>
<td style="text-align: right;">Inside</td>
<td style="text-align: right;">1Fam</td>
</tr>
<tr class="odd">
<td style="text-align: right;">200000</td>
<td style="text-align: right;">3395</td>
<td style="text-align: right;">10896</td>
<td style="text-align: right;">1914</td>
<td style="text-align: right;">6</td>
<td style="text-align: right;">0</td>
<td style="text-align: right;">NA</td>
<td style="text-align: right;">RH</td>
<td style="text-align: right;">Inside</td>
<td style="text-align: right;">2fmCon</td>
</tr>
<tr class="even">
<td style="text-align: right;">150000</td>
<td style="text-align: right;">2592</td>
<td style="text-align: right;">10890</td>
<td style="text-align: right;">1923</td>
<td style="text-align: right;">5</td>
<td style="text-align: right;">0</td>
<td style="text-align: right;">NA</td>
<td style="text-align: right;">RL</td>
<td style="text-align: right;">Inside</td>
<td style="text-align: right;">Duplex</td>
</tr>
<tr class="odd">
<td style="text-align: right;">115000</td>
<td style="text-align: right;">1517</td>
<td style="text-align: right;">8500</td>
<td style="text-align: right;">1919</td>
<td style="text-align: right;">5</td>
<td style="text-align: right;">0</td>
<td style="text-align: right;">NA</td>
<td style="text-align: right;">RM</td>
<td style="text-align: right;">Corner</td>
<td style="text-align: right;">1Fam</td>
</tr>
<tr class="even">
<td style="text-align: right;">150909</td>
<td style="text-align: right;">1828</td>
<td style="text-align: right;">9060</td>
<td style="text-align: right;">1923</td>
<td style="text-align: right;">5</td>
<td style="text-align: right;">NA</td>
<td style="text-align: right;">NA</td>
<td style="text-align: right;">RM</td>
<td style="text-align: right;">Inside</td>
<td style="text-align: right;">1Fam</td>
</tr>
<tr class="odd">
<td style="text-align: right;">119600</td>
<td style="text-align: right;">1991</td>
<td style="text-align: right;">8250</td>
<td style="text-align: right;">1895</td>
<td style="text-align: right;">5</td>
<td style="text-align: right;">0</td>
<td style="text-align: right;">NA</td>
<td style="text-align: right;">C (all)</td>
<td style="text-align: right;">Inside</td>
<td style="text-align: right;">2fmCon</td>
</tr>
<tr class="even">
<td style="text-align: right;">147000</td>
<td style="text-align: right;">1120</td>
<td style="text-align: right;">8402</td>
<td style="text-align: right;">2007</td>
<td style="text-align: right;">5</td>
<td style="text-align: right;">0</td>
<td style="text-align: right;">NA</td>
<td style="text-align: right;">RL</td>
<td style="text-align: right;">Inside</td>
<td style="text-align: right;">1Fam</td>
</tr>
<tr class="odd">
<td style="text-align: right;">93900</td>
<td style="text-align: right;">1092</td>
<td style="text-align: right;">1495</td>
<td style="text-align: right;">1970</td>
<td style="text-align: right;">4</td>
<td style="text-align: right;">0</td>
<td style="text-align: right;">NA</td>
<td style="text-align: right;">RM</td>
<td style="text-align: right;">Inside</td>
<td style="text-align: right;">TwnhsE</td>
</tr>
<tr class="even">
<td style="text-align: right;">84500</td>
<td style="text-align: right;">630</td>
<td style="text-align: right;">1936</td>
<td style="text-align: right;">1970</td>
<td style="text-align: right;">4</td>
<td style="text-align: right;">0</td>
<td style="text-align: right;">NA</td>
<td style="text-align: right;">RM</td>
<td style="text-align: right;">Inside</td>
<td style="text-align: right;">Twnhs</td>
</tr>
<tr class="odd">
<td style="text-align: right;">139500</td>
<td style="text-align: right;">1142</td>
<td style="text-align: right;">7733</td>
<td style="text-align: right;">2005</td>
<td style="text-align: right;">6</td>
<td style="text-align: right;">0</td>
<td style="text-align: right;">NA</td>
<td style="text-align: right;">RL</td>
<td style="text-align: right;">Inside</td>
<td style="text-align: right;">1Fam</td>
</tr>
<tr class="even">
<td style="text-align: right;">132000</td>
<td style="text-align: right;">1131</td>
<td style="text-align: right;">13072</td>
<td style="text-align: right;">2005</td>
<td style="text-align: right;">6</td>
<td style="text-align: right;">0</td>
<td style="text-align: right;">NA</td>
<td style="text-align: right;">RL</td>
<td style="text-align: right;">Inside</td>
<td style="text-align: right;">1Fam</td>
</tr>
<tr class="odd">
<td style="text-align: right;">85500</td>
<td style="text-align: right;">869</td>
<td style="text-align: right;">5900</td>
<td style="text-align: right;">1923</td>
<td style="text-align: right;">4</td>
<td style="text-align: right;">0</td>
<td style="text-align: right;">NA</td>
<td style="text-align: right;">RL</td>
<td style="text-align: right;">Inside</td>
<td style="text-align: right;">1Fam</td>
</tr>
<tr class="even">
<td style="text-align: right;">135000</td>
<td style="text-align: right;">1192</td>
<td style="text-align: right;">10800</td>
<td style="text-align: right;">1949</td>
<td style="text-align: right;">4</td>
<td style="text-align: right;">0</td>
<td style="text-align: right;">NA</td>
<td style="text-align: right;">RL</td>
<td style="text-align: right;">Inside</td>
<td style="text-align: right;">1Fam</td>
</tr>
<tr class="odd">
<td style="text-align: right;">119000</td>
<td style="text-align: right;">1556</td>
<td style="text-align: right;">8512</td>
<td style="text-align: right;">1960</td>
<td style="text-align: right;">5</td>
<td style="text-align: right;">0</td>
<td style="text-align: right;">NA</td>
<td style="text-align: right;">RL</td>
<td style="text-align: right;">Corner</td>
<td style="text-align: right;">Duplex</td>
</tr>
<tr class="even">
<td style="text-align: right;">124000</td>
<td style="text-align: right;">1025</td>
<td style="text-align: right;">7000</td>
<td style="text-align: right;">1962</td>
<td style="text-align: right;">5</td>
<td style="text-align: right;">0</td>
<td style="text-align: right;">NA</td>
<td style="text-align: right;">RL</td>
<td style="text-align: right;">Inside</td>
<td style="text-align: right;">2fmCon</td>
</tr>
<tr class="odd">
<td style="text-align: right;">64500</td>
<td style="text-align: right;">1020</td>
<td style="text-align: right;">4761</td>
<td style="text-align: right;">1918</td>
<td style="text-align: right;">3</td>
<td style="text-align: right;">0</td>
<td style="text-align: right;">NA</td>
<td style="text-align: right;">C (all)</td>
<td style="text-align: right;">Corner</td>
<td style="text-align: right;">1Fam</td>
</tr>
<tr class="even">
<td style="text-align: right;">100000</td>
<td style="text-align: right;">788</td>
<td style="text-align: right;">7446</td>
<td style="text-align: right;">1941</td>
<td style="text-align: right;">4</td>
<td style="text-align: right;">0</td>
<td style="text-align: right;">NA</td>
<td style="text-align: right;">RL</td>
<td style="text-align: right;">Corner</td>
<td style="text-align: right;">1Fam</td>
</tr>
<tr class="odd">
<td style="text-align: right;">80500</td>
<td style="text-align: right;">912</td>
<td style="text-align: right;">6240</td>
<td style="text-align: right;">1947</td>
<td style="text-align: right;">4</td>
<td style="text-align: right;">0</td>
<td style="text-align: right;">NA</td>
<td style="text-align: right;">RM</td>
<td style="text-align: right;">Inside</td>
<td style="text-align: right;">1Fam</td>
</tr>
<tr class="even">
<td style="text-align: right;">72000</td>
<td style="text-align: right;">819</td>
<td style="text-align: right;">9000</td>
<td style="text-align: right;">1919</td>
<td style="text-align: right;">5</td>
<td style="text-align: right;">0</td>
<td style="text-align: right;">NA</td>
<td style="text-align: right;">RM</td>
<td style="text-align: right;">Inside</td>
<td style="text-align: right;">1Fam</td>
</tr>
<tr class="odd">
<td style="text-align: right;">117250</td>
<td style="text-align: right;">914</td>
<td style="text-align: right;">8050</td>
<td style="text-align: right;">2002</td>
<td style="text-align: right;">6</td>
<td style="text-align: right;">0</td>
<td style="text-align: right;">NA</td>
<td style="text-align: right;">RL</td>
<td style="text-align: right;">Inside</td>
<td style="text-align: right;">1Fam</td>
</tr>
<tr class="even">
<td style="text-align: right;">81000</td>
<td style="text-align: right;">1184</td>
<td style="text-align: right;">8410</td>
<td style="text-align: right;">1910</td>
<td style="text-align: right;">5</td>
<td style="text-align: right;">0</td>
<td style="text-align: right;">NA</td>
<td style="text-align: right;">RL</td>
<td style="text-align: right;">FR2</td>
<td style="text-align: right;">1Fam</td>
</tr>
<tr class="odd">
<td style="text-align: right;">83000</td>
<td style="text-align: right;">1414</td>
<td style="text-align: right;">8248</td>
<td style="text-align: right;">1922</td>
<td style="text-align: right;">4</td>
<td style="text-align: right;">0</td>
<td style="text-align: right;">NA</td>
<td style="text-align: right;">RL</td>
<td style="text-align: right;">Inside</td>
<td style="text-align: right;">1Fam</td>
</tr>
<tr class="even">
<td style="text-align: right;">102000</td>
<td style="text-align: right;">1522</td>
<td style="text-align: right;">6000</td>
<td style="text-align: right;">1926</td>
<td style="text-align: right;">5</td>
<td style="text-align: right;">0</td>
<td style="text-align: right;">NA</td>
<td style="text-align: right;">RL</td>
<td style="text-align: right;">Inside</td>
<td style="text-align: right;">1Fam</td>
</tr>
<tr class="odd">
<td style="text-align: right;">72000</td>
<td style="text-align: right;">672</td>
<td style="text-align: right;">8534</td>
<td style="text-align: right;">1925</td>
<td style="text-align: right;">4</td>
<td style="text-align: right;">0</td>
<td style="text-align: right;">NA</td>
<td style="text-align: right;">RM</td>
<td style="text-align: right;">Inside</td>
<td style="text-align: right;">1Fam</td>
</tr>
<tr class="even">
<td style="text-align: right;">115000</td>
<td style="text-align: right;">1396</td>
<td style="text-align: right;">9000</td>
<td style="text-align: right;">1951</td>
<td style="text-align: right;">5</td>
<td style="text-align: right;">0</td>
<td style="text-align: right;">NA</td>
<td style="text-align: right;">C (all)</td>
<td style="text-align: right;">Inside</td>
<td style="text-align: right;">2fmCon</td>
</tr>
<tr class="odd">
<td style="text-align: right;">78000</td>
<td style="text-align: right;">936</td>
<td style="text-align: right;">8520</td>
<td style="text-align: right;">1916</td>
<td style="text-align: right;">3</td>
<td style="text-align: right;">0</td>
<td style="text-align: right;">NA</td>
<td style="text-align: right;">C (all)</td>
<td style="text-align: right;">Inside</td>
<td style="text-align: right;">1Fam</td>
</tr>
<tr class="even">
<td style="text-align: right;">92000</td>
<td style="text-align: right;">630</td>
<td style="text-align: right;">1533</td>
<td style="text-align: right;">1970</td>
<td style="text-align: right;">5</td>
<td style="text-align: right;">0</td>
<td style="text-align: right;">NA</td>
<td style="text-align: right;">RM</td>
<td style="text-align: right;">Inside</td>
<td style="text-align: right;">Twnhs</td>
</tr>
<tr class="odd">
<td style="text-align: right;">90500</td>
<td style="text-align: right;">1092</td>
<td style="text-align: right;">1936</td>
<td style="text-align: right;">1970</td>
<td style="text-align: right;">4</td>
<td style="text-align: right;">0</td>
<td style="text-align: right;">NA</td>
<td style="text-align: right;">RM</td>
<td style="text-align: right;">Inside</td>
<td style="text-align: right;">Twnhs</td>
</tr>
</tbody>
</table>
</div>

</div>
</div>
<hr>
<div class="callout callout-style-default callout-tip no-icon callout-titled">
<div class="callout-header d-flex align-content-center">
<div class="callout-icon-container">
<i class="callout-icon no-icon"></i>
</div>
<div class="callout-title-container flex-fill">
Coding sidebar
</div>
</div>
<div class="callout-body-container callout-body">
<ul>
<li>In the above example, we created a function (<code>print_kbl()</code>) from scratch (rather than using a function factory)</li>
<li>See <a href="https://r4ds.hadley.nz/functions.html">functions chapter</a> in <span class="citation" data-cites="RDS">Wickham, Çetinkaya-Rundel, and Grolemund (<a href="#ref-RDS" role="doc-biblioref">2023</a>)</span> for help.</li>
<li>See <a href="https://adv-r.hadley.nz/functionals.html">functionals chapter</a> in <span class="citation" data-cites="AR">Wickham (<a href="#ref-AR" role="doc-biblioref">2019</a>)</span>.</li>
</ul>
</div>
</div>
<hr>
<p><strong>Option 3 (Most advanced)</strong>: Line by line kable table. You can make this as complicated and customized as you like. We use kable (and kableExtra) for publication quality tables. This is a simple example of options</p>
<div class="cell">
<details open="" class="code-fold">
<summary>Code</summary>
<div class="sourceCode cell-code" id="cb17"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb17-1"><a href="#cb17-1" aria-hidden="true" tabindex="-1"></a>data_all <span class="sc">|&gt;</span> <span class="fu">filter</span>(<span class="fu">is.na</span>(garage_qual)) <span class="sc">|&gt;</span> </span>
<span id="cb17-2"><a href="#cb17-2" aria-hidden="true" tabindex="-1"></a>  <span class="fu">kbl</span>(<span class="at">align =</span> <span class="st">"r"</span>) <span class="sc">|&gt;</span> </span>
<span id="cb17-3"><a href="#cb17-3" aria-hidden="true" tabindex="-1"></a>  <span class="fu">kable_styling</span>(<span class="at">bootstrap_options =</span> <span class="fu">c</span>(<span class="st">"striped"</span>, <span class="st">"condensed"</span>)) <span class="sc">|&gt;</span> </span>
<span id="cb17-4"><a href="#cb17-4" aria-hidden="true" tabindex="-1"></a>  <span class="fu">scroll_box</span>(<span class="at">height =</span> <span class="st">"500px"</span>, <span class="at">width =</span> <span class="st">"100%"</span>)</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
</details>
<div class="cell-output-display">
<div style="border: 1px solid #ddd; padding: 0px; overflow-y: scroll; height:500px; overflow-x: scroll; width:100%; ">
<table class="table table-striped table-condensed caption-top table-sm small" data-quarto-postprocess="true">
<thead>
<tr class="header">
<th data-quarto-table-cell-role="th" style="text-align: right; position: sticky; top: 0; background-color: #FFFFFF;">sale_price</th>
<th data-quarto-table-cell-role="th" style="text-align: right; position: sticky; top: 0; background-color: #FFFFFF;">gr_liv_area</th>
<th data-quarto-table-cell-role="th" style="text-align: right; position: sticky; top: 0; background-color: #FFFFFF;">lot_area</th>
<th data-quarto-table-cell-role="th" style="text-align: right; position: sticky; top: 0; background-color: #FFFFFF;">year_built</th>
<th data-quarto-table-cell-role="th" style="text-align: right; position: sticky; top: 0; background-color: #FFFFFF;">overall_qual</th>
<th data-quarto-table-cell-role="th" style="text-align: right; position: sticky; top: 0; background-color: #FFFFFF;">garage_cars</th>
<th data-quarto-table-cell-role="th" style="text-align: right; position: sticky; top: 0; background-color: #FFFFFF;">garage_qual</th>
<th data-quarto-table-cell-role="th" style="text-align: right; position: sticky; top: 0; background-color: #FFFFFF;">ms_zoning</th>
<th data-quarto-table-cell-role="th" style="text-align: right; position: sticky; top: 0; background-color: #FFFFFF;">lot_config</th>
<th data-quarto-table-cell-role="th" style="text-align: right; position: sticky; top: 0; background-color: #FFFFFF;">bldg_type</th>
</tr>
</thead>
<tbody>
<tr class="odd">
<td style="text-align: right;">115000</td>
<td style="text-align: right;">864</td>
<td style="text-align: right;">10500</td>
<td style="text-align: right;">1971</td>
<td style="text-align: right;">4</td>
<td style="text-align: right;">0</td>
<td style="text-align: right;">NA</td>
<td style="text-align: right;">RL</td>
<td style="text-align: right;">FR2</td>
<td style="text-align: right;">1Fam</td>
</tr>
<tr class="even">
<td style="text-align: right;">128950</td>
<td style="text-align: right;">1225</td>
<td style="text-align: right;">9320</td>
<td style="text-align: right;">1959</td>
<td style="text-align: right;">4</td>
<td style="text-align: right;">0</td>
<td style="text-align: right;">NA</td>
<td style="text-align: right;">RL</td>
<td style="text-align: right;">Inside</td>
<td style="text-align: right;">1Fam</td>
</tr>
<tr class="odd">
<td style="text-align: right;">84900</td>
<td style="text-align: right;">1728</td>
<td style="text-align: right;">13260</td>
<td style="text-align: right;">1962</td>
<td style="text-align: right;">5</td>
<td style="text-align: right;">0</td>
<td style="text-align: right;">NA</td>
<td style="text-align: right;">RL</td>
<td style="text-align: right;">Inside</td>
<td style="text-align: right;">Duplex</td>
</tr>
<tr class="even">
<td style="text-align: right;">116500</td>
<td style="text-align: right;">858</td>
<td style="text-align: right;">7207</td>
<td style="text-align: right;">1958</td>
<td style="text-align: right;">5</td>
<td style="text-align: right;">0</td>
<td style="text-align: right;">NA</td>
<td style="text-align: right;">RL</td>
<td style="text-align: right;">Inside</td>
<td style="text-align: right;">1Fam</td>
</tr>
<tr class="odd">
<td style="text-align: right;">76500</td>
<td style="text-align: right;">1306</td>
<td style="text-align: right;">5350</td>
<td style="text-align: right;">1940</td>
<td style="text-align: right;">3</td>
<td style="text-align: right;">0</td>
<td style="text-align: right;">NA</td>
<td style="text-align: right;">RL</td>
<td style="text-align: right;">Inside</td>
<td style="text-align: right;">1Fam</td>
</tr>
<tr class="even">
<td style="text-align: right;">76500</td>
<td style="text-align: right;">2256</td>
<td style="text-align: right;">9045</td>
<td style="text-align: right;">1910</td>
<td style="text-align: right;">5</td>
<td style="text-align: right;">0</td>
<td style="text-align: right;">NA</td>
<td style="text-align: right;">RM</td>
<td style="text-align: right;">Inside</td>
<td style="text-align: right;">2fmCon</td>
</tr>
<tr class="odd">
<td style="text-align: right;">159900</td>
<td style="text-align: right;">1560</td>
<td style="text-align: right;">12900</td>
<td style="text-align: right;">1912</td>
<td style="text-align: right;">6</td>
<td style="text-align: right;">0</td>
<td style="text-align: right;">NA</td>
<td style="text-align: right;">RM</td>
<td style="text-align: right;">Inside</td>
<td style="text-align: right;">1Fam</td>
</tr>
<tr class="even">
<td style="text-align: right;">55000</td>
<td style="text-align: right;">1092</td>
<td style="text-align: right;">5600</td>
<td style="text-align: right;">1930</td>
<td style="text-align: right;">4</td>
<td style="text-align: right;">0</td>
<td style="text-align: right;">NA</td>
<td style="text-align: right;">RM</td>
<td style="text-align: right;">Inside</td>
<td style="text-align: right;">2fmCon</td>
</tr>
<tr class="odd">
<td style="text-align: right;">93369</td>
<td style="text-align: right;">1884</td>
<td style="text-align: right;">6449</td>
<td style="text-align: right;">1907</td>
<td style="text-align: right;">4</td>
<td style="text-align: right;">0</td>
<td style="text-align: right;">NA</td>
<td style="text-align: right;">C (all)</td>
<td style="text-align: right;">Inside</td>
<td style="text-align: right;">1Fam</td>
</tr>
<tr class="even">
<td style="text-align: right;">94000</td>
<td style="text-align: right;">1020</td>
<td style="text-align: right;">6342</td>
<td style="text-align: right;">1875</td>
<td style="text-align: right;">5</td>
<td style="text-align: right;">0</td>
<td style="text-align: right;">NA</td>
<td style="text-align: right;">RL</td>
<td style="text-align: right;">Inside</td>
<td style="text-align: right;">1Fam</td>
</tr>
<tr class="odd">
<td style="text-align: right;">136000</td>
<td style="text-align: right;">1832</td>
<td style="text-align: right;">10773</td>
<td style="text-align: right;">1967</td>
<td style="text-align: right;">4</td>
<td style="text-align: right;">0</td>
<td style="text-align: right;">NA</td>
<td style="text-align: right;">RL</td>
<td style="text-align: right;">Inside</td>
<td style="text-align: right;">Duplex</td>
</tr>
<tr class="even">
<td style="text-align: right;">100000</td>
<td style="text-align: right;">1664</td>
<td style="text-align: right;">9825</td>
<td style="text-align: right;">1965</td>
<td style="text-align: right;">5</td>
<td style="text-align: right;">0</td>
<td style="text-align: right;">NA</td>
<td style="text-align: right;">RL</td>
<td style="text-align: right;">Inside</td>
<td style="text-align: right;">Duplex</td>
</tr>
<tr class="odd">
<td style="text-align: right;">90000</td>
<td style="text-align: right;">960</td>
<td style="text-align: right;">6410</td>
<td style="text-align: right;">1958</td>
<td style="text-align: right;">4</td>
<td style="text-align: right;">0</td>
<td style="text-align: right;">NA</td>
<td style="text-align: right;">RL</td>
<td style="text-align: right;">Inside</td>
<td style="text-align: right;">1Fam</td>
</tr>
<tr class="even">
<td style="text-align: right;">100000</td>
<td style="text-align: right;">1666</td>
<td style="text-align: right;">9839</td>
<td style="text-align: right;">1931</td>
<td style="text-align: right;">5</td>
<td style="text-align: right;">0</td>
<td style="text-align: right;">NA</td>
<td style="text-align: right;">RL</td>
<td style="text-align: right;">Inside</td>
<td style="text-align: right;">1Fam</td>
</tr>
<tr class="odd">
<td style="text-align: right;">139000</td>
<td style="text-align: right;">1824</td>
<td style="text-align: right;">9400</td>
<td style="text-align: right;">1971</td>
<td style="text-align: right;">6</td>
<td style="text-align: right;">0</td>
<td style="text-align: right;">NA</td>
<td style="text-align: right;">RL</td>
<td style="text-align: right;">Corner</td>
<td style="text-align: right;">Duplex</td>
</tr>
<tr class="even">
<td style="text-align: right;">76000</td>
<td style="text-align: right;">1092</td>
<td style="text-align: right;">1476</td>
<td style="text-align: right;">1970</td>
<td style="text-align: right;">4</td>
<td style="text-align: right;">0</td>
<td style="text-align: right;">NA</td>
<td style="text-align: right;">RM</td>
<td style="text-align: right;">Inside</td>
<td style="text-align: right;">Twnhs</td>
</tr>
<tr class="odd">
<td style="text-align: right;">75500</td>
<td style="text-align: right;">630</td>
<td style="text-align: right;">1491</td>
<td style="text-align: right;">1972</td>
<td style="text-align: right;">4</td>
<td style="text-align: right;">0</td>
<td style="text-align: right;">NA</td>
<td style="text-align: right;">RM</td>
<td style="text-align: right;">Inside</td>
<td style="text-align: right;">TwnhsE</td>
</tr>
<tr class="even">
<td style="text-align: right;">88250</td>
<td style="text-align: right;">1092</td>
<td style="text-align: right;">1900</td>
<td style="text-align: right;">1970</td>
<td style="text-align: right;">4</td>
<td style="text-align: right;">0</td>
<td style="text-align: right;">NA</td>
<td style="text-align: right;">RM</td>
<td style="text-align: right;">Inside</td>
<td style="text-align: right;">TwnhsE</td>
</tr>
<tr class="odd">
<td style="text-align: right;">136000</td>
<td style="text-align: right;">1792</td>
<td style="text-align: right;">9000</td>
<td style="text-align: right;">1974</td>
<td style="text-align: right;">5</td>
<td style="text-align: right;">0</td>
<td style="text-align: right;">NA</td>
<td style="text-align: right;">RL</td>
<td style="text-align: right;">FR2</td>
<td style="text-align: right;">Duplex</td>
</tr>
<tr class="even">
<td style="text-align: right;">142000</td>
<td style="text-align: right;">1114</td>
<td style="text-align: right;">13072</td>
<td style="text-align: right;">2004</td>
<td style="text-align: right;">5</td>
<td style="text-align: right;">0</td>
<td style="text-align: right;">NA</td>
<td style="text-align: right;">RL</td>
<td style="text-align: right;">Inside</td>
<td style="text-align: right;">1Fam</td>
</tr>
<tr class="odd">
<td style="text-align: right;">82500</td>
<td style="text-align: right;">708</td>
<td style="text-align: right;">5330</td>
<td style="text-align: right;">1940</td>
<td style="text-align: right;">4</td>
<td style="text-align: right;">0</td>
<td style="text-align: right;">NA</td>
<td style="text-align: right;">RL</td>
<td style="text-align: right;">Inside</td>
<td style="text-align: right;">1Fam</td>
</tr>
<tr class="even">
<td style="text-align: right;">129000</td>
<td style="text-align: right;">1464</td>
<td style="text-align: right;">9900</td>
<td style="text-align: right;">1910</td>
<td style="text-align: right;">5</td>
<td style="text-align: right;">0</td>
<td style="text-align: right;">NA</td>
<td style="text-align: right;">RM</td>
<td style="text-align: right;">Corner</td>
<td style="text-align: right;">1Fam</td>
</tr>
<tr class="odd">
<td style="text-align: right;">94550</td>
<td style="text-align: right;">1701</td>
<td style="text-align: right;">7627</td>
<td style="text-align: right;">1920</td>
<td style="text-align: right;">4</td>
<td style="text-align: right;">0</td>
<td style="text-align: right;">NA</td>
<td style="text-align: right;">RM</td>
<td style="text-align: right;">Corner</td>
<td style="text-align: right;">2fmCon</td>
</tr>
<tr class="even">
<td style="text-align: right;">103000</td>
<td style="text-align: right;">1447</td>
<td style="text-align: right;">10134</td>
<td style="text-align: right;">1910</td>
<td style="text-align: right;">5</td>
<td style="text-align: right;">0</td>
<td style="text-align: right;">NA</td>
<td style="text-align: right;">RM</td>
<td style="text-align: right;">Inside</td>
<td style="text-align: right;">1Fam</td>
</tr>
<tr class="odd">
<td style="text-align: right;">37900</td>
<td style="text-align: right;">968</td>
<td style="text-align: right;">5925</td>
<td style="text-align: right;">1910</td>
<td style="text-align: right;">3</td>
<td style="text-align: right;">0</td>
<td style="text-align: right;">NA</td>
<td style="text-align: right;">RM</td>
<td style="text-align: right;">Inside</td>
<td style="text-align: right;">1Fam</td>
</tr>
<tr class="even">
<td style="text-align: right;">113000</td>
<td style="text-align: right;">1452</td>
<td style="text-align: right;">4456</td>
<td style="text-align: right;">1920</td>
<td style="text-align: right;">4</td>
<td style="text-align: right;">0</td>
<td style="text-align: right;">NA</td>
<td style="text-align: right;">RM</td>
<td style="text-align: right;">Inside</td>
<td style="text-align: right;">2fmCon</td>
</tr>
<tr class="odd">
<td style="text-align: right;">58500</td>
<td style="text-align: right;">816</td>
<td style="text-align: right;">3300</td>
<td style="text-align: right;">1910</td>
<td style="text-align: right;">4</td>
<td style="text-align: right;">0</td>
<td style="text-align: right;">NA</td>
<td style="text-align: right;">C (all)</td>
<td style="text-align: right;">Inside</td>
<td style="text-align: right;">1Fam</td>
</tr>
<tr class="even">
<td style="text-align: right;">34900</td>
<td style="text-align: right;">720</td>
<td style="text-align: right;">7879</td>
<td style="text-align: right;">1920</td>
<td style="text-align: right;">4</td>
<td style="text-align: right;">0</td>
<td style="text-align: right;">NA</td>
<td style="text-align: right;">C (all)</td>
<td style="text-align: right;">Inside</td>
<td style="text-align: right;">1Fam</td>
</tr>
<tr class="odd">
<td style="text-align: right;">60000</td>
<td style="text-align: right;">800</td>
<td style="text-align: right;">6120</td>
<td style="text-align: right;">1936</td>
<td style="text-align: right;">2</td>
<td style="text-align: right;">0</td>
<td style="text-align: right;">NA</td>
<td style="text-align: right;">RM</td>
<td style="text-align: right;">Inside</td>
<td style="text-align: right;">1Fam</td>
</tr>
<tr class="even">
<td style="text-align: right;">62500</td>
<td style="text-align: right;">2128</td>
<td style="text-align: right;">3000</td>
<td style="text-align: right;">1922</td>
<td style="text-align: right;">5</td>
<td style="text-align: right;">0</td>
<td style="text-align: right;">NA</td>
<td style="text-align: right;">RM</td>
<td style="text-align: right;">Inside</td>
<td style="text-align: right;">Duplex</td>
</tr>
<tr class="odd">
<td style="text-align: right;">97500</td>
<td style="text-align: right;">1864</td>
<td style="text-align: right;">5852</td>
<td style="text-align: right;">1902</td>
<td style="text-align: right;">7</td>
<td style="text-align: right;">0</td>
<td style="text-align: right;">NA</td>
<td style="text-align: right;">RM</td>
<td style="text-align: right;">Corner</td>
<td style="text-align: right;">2fmCon</td>
</tr>
<tr class="even">
<td style="text-align: right;">70000</td>
<td style="text-align: right;">892</td>
<td style="text-align: right;">5160</td>
<td style="text-align: right;">1923</td>
<td style="text-align: right;">4</td>
<td style="text-align: right;">0</td>
<td style="text-align: right;">NA</td>
<td style="text-align: right;">RM</td>
<td style="text-align: right;">Inside</td>
<td style="text-align: right;">1Fam</td>
</tr>
<tr class="odd">
<td style="text-align: right;">179000</td>
<td style="text-align: right;">1200</td>
<td style="text-align: right;">10800</td>
<td style="text-align: right;">1987</td>
<td style="text-align: right;">5</td>
<td style="text-align: right;">0</td>
<td style="text-align: right;">NA</td>
<td style="text-align: right;">RL</td>
<td style="text-align: right;">Inside</td>
<td style="text-align: right;">Duplex</td>
</tr>
<tr class="even">
<td style="text-align: right;">179000</td>
<td style="text-align: right;">1200</td>
<td style="text-align: right;">10800</td>
<td style="text-align: right;">1987</td>
<td style="text-align: right;">5</td>
<td style="text-align: right;">0</td>
<td style="text-align: right;">NA</td>
<td style="text-align: right;">RL</td>
<td style="text-align: right;">Inside</td>
<td style="text-align: right;">Duplex</td>
</tr>
<tr class="odd">
<td style="text-align: right;">61000</td>
<td style="text-align: right;">904</td>
<td style="text-align: right;">10020</td>
<td style="text-align: right;">1922</td>
<td style="text-align: right;">1</td>
<td style="text-align: right;">0</td>
<td style="text-align: right;">NA</td>
<td style="text-align: right;">RL</td>
<td style="text-align: right;">Inside</td>
<td style="text-align: right;">1Fam</td>
</tr>
<tr class="even">
<td style="text-align: right;">118000</td>
<td style="text-align: right;">698</td>
<td style="text-align: right;">9405</td>
<td style="text-align: right;">1947</td>
<td style="text-align: right;">5</td>
<td style="text-align: right;">0</td>
<td style="text-align: right;">NA</td>
<td style="text-align: right;">RL</td>
<td style="text-align: right;">Inside</td>
<td style="text-align: right;">1Fam</td>
</tr>
<tr class="odd">
<td style="text-align: right;">99900</td>
<td style="text-align: right;">864</td>
<td style="text-align: right;">4060</td>
<td style="text-align: right;">1922</td>
<td style="text-align: right;">5</td>
<td style="text-align: right;">0</td>
<td style="text-align: right;">NA</td>
<td style="text-align: right;">RL</td>
<td style="text-align: right;">Corner</td>
<td style="text-align: right;">1Fam</td>
</tr>
<tr class="even">
<td style="text-align: right;">119900</td>
<td style="text-align: right;">1678</td>
<td style="text-align: right;">10926</td>
<td style="text-align: right;">1959</td>
<td style="text-align: right;">5</td>
<td style="text-align: right;">0</td>
<td style="text-align: right;">NA</td>
<td style="text-align: right;">RL</td>
<td style="text-align: right;">Inside</td>
<td style="text-align: right;">Duplex</td>
</tr>
<tr class="odd">
<td style="text-align: right;">112000</td>
<td style="text-align: right;">833</td>
<td style="text-align: right;">8780</td>
<td style="text-align: right;">1985</td>
<td style="text-align: right;">5</td>
<td style="text-align: right;">0</td>
<td style="text-align: right;">NA</td>
<td style="text-align: right;">RL</td>
<td style="text-align: right;">Corner</td>
<td style="text-align: right;">1Fam</td>
</tr>
<tr class="even">
<td style="text-align: right;">141000</td>
<td style="text-align: right;">1080</td>
<td style="text-align: right;">7500</td>
<td style="text-align: right;">2004</td>
<td style="text-align: right;">7</td>
<td style="text-align: right;">0</td>
<td style="text-align: right;">NA</td>
<td style="text-align: right;">RL</td>
<td style="text-align: right;">Inside</td>
<td style="text-align: right;">1Fam</td>
</tr>
<tr class="odd">
<td style="text-align: right;">106250</td>
<td style="text-align: right;">1294</td>
<td style="text-align: right;">10800</td>
<td style="text-align: right;">1900</td>
<td style="text-align: right;">4</td>
<td style="text-align: right;">0</td>
<td style="text-align: right;">NA</td>
<td style="text-align: right;">RL</td>
<td style="text-align: right;">Inside</td>
<td style="text-align: right;">2fmCon</td>
</tr>
<tr class="even">
<td style="text-align: right;">130000</td>
<td style="text-align: right;">1800</td>
<td style="text-align: right;">8513</td>
<td style="text-align: right;">1961</td>
<td style="text-align: right;">5</td>
<td style="text-align: right;">0</td>
<td style="text-align: right;">NA</td>
<td style="text-align: right;">RL</td>
<td style="text-align: right;">Corner</td>
<td style="text-align: right;">Duplex</td>
</tr>
<tr class="odd">
<td style="text-align: right;">120000</td>
<td style="text-align: right;">1027</td>
<td style="text-align: right;">5400</td>
<td style="text-align: right;">1920</td>
<td style="text-align: right;">7</td>
<td style="text-align: right;">0</td>
<td style="text-align: right;">NA</td>
<td style="text-align: right;">RM</td>
<td style="text-align: right;">Inside</td>
<td style="text-align: right;">1Fam</td>
</tr>
<tr class="even">
<td style="text-align: right;">95000</td>
<td style="text-align: right;">1080</td>
<td style="text-align: right;">5914</td>
<td style="text-align: right;">1890</td>
<td style="text-align: right;">5</td>
<td style="text-align: right;">0</td>
<td style="text-align: right;">NA</td>
<td style="text-align: right;">RM</td>
<td style="text-align: right;">Inside</td>
<td style="text-align: right;">1Fam</td>
</tr>
<tr class="odd">
<td style="text-align: right;">65000</td>
<td style="text-align: right;">1588</td>
<td style="text-align: right;">12205</td>
<td style="text-align: right;">1949</td>
<td style="text-align: right;">3</td>
<td style="text-align: right;">0</td>
<td style="text-align: right;">NA</td>
<td style="text-align: right;">RM</td>
<td style="text-align: right;">Inside</td>
<td style="text-align: right;">1Fam</td>
</tr>
<tr class="even">
<td style="text-align: right;">129400</td>
<td style="text-align: right;">1540</td>
<td style="text-align: right;">6000</td>
<td style="text-align: right;">1905</td>
<td style="text-align: right;">5</td>
<td style="text-align: right;">0</td>
<td style="text-align: right;">NA</td>
<td style="text-align: right;">RM</td>
<td style="text-align: right;">Corner</td>
<td style="text-align: right;">1Fam</td>
</tr>
<tr class="odd">
<td style="text-align: right;">160000</td>
<td style="text-align: right;">1984</td>
<td style="text-align: right;">8094</td>
<td style="text-align: right;">1910</td>
<td style="text-align: right;">6</td>
<td style="text-align: right;">1</td>
<td style="text-align: right;">NA</td>
<td style="text-align: right;">RM</td>
<td style="text-align: right;">Inside</td>
<td style="text-align: right;">2fmCon</td>
</tr>
<tr class="even">
<td style="text-align: right;">89500</td>
<td style="text-align: right;">1406</td>
<td style="text-align: right;">7920</td>
<td style="text-align: right;">1920</td>
<td style="text-align: right;">6</td>
<td style="text-align: right;">0</td>
<td style="text-align: right;">NA</td>
<td style="text-align: right;">RM</td>
<td style="text-align: right;">Inside</td>
<td style="text-align: right;">1Fam</td>
</tr>
<tr class="odd">
<td style="text-align: right;">79900</td>
<td style="text-align: right;">1198</td>
<td style="text-align: right;">5586</td>
<td style="text-align: right;">1920</td>
<td style="text-align: right;">6</td>
<td style="text-align: right;">0</td>
<td style="text-align: right;">NA</td>
<td style="text-align: right;">RM</td>
<td style="text-align: right;">Inside</td>
<td style="text-align: right;">1Fam</td>
</tr>
<tr class="even">
<td style="text-align: right;">82375</td>
<td style="text-align: right;">1344</td>
<td style="text-align: right;">10320</td>
<td style="text-align: right;">1915</td>
<td style="text-align: right;">3</td>
<td style="text-align: right;">0</td>
<td style="text-align: right;">NA</td>
<td style="text-align: right;">RM</td>
<td style="text-align: right;">Inside</td>
<td style="text-align: right;">2fmCon</td>
</tr>
<tr class="odd">
<td style="text-align: right;">127500</td>
<td style="text-align: right;">1355</td>
<td style="text-align: right;">10106</td>
<td style="text-align: right;">1940</td>
<td style="text-align: right;">5</td>
<td style="text-align: right;">0</td>
<td style="text-align: right;">NA</td>
<td style="text-align: right;">RL</td>
<td style="text-align: right;">Inside</td>
<td style="text-align: right;">2fmCon</td>
</tr>
<tr class="even">
<td style="text-align: right;">80000</td>
<td style="text-align: right;">1006</td>
<td style="text-align: right;">9000</td>
<td style="text-align: right;">1959</td>
<td style="text-align: right;">5</td>
<td style="text-align: right;">0</td>
<td style="text-align: right;">NA</td>
<td style="text-align: right;">RL</td>
<td style="text-align: right;">Inside</td>
<td style="text-align: right;">1Fam</td>
</tr>
<tr class="odd">
<td style="text-align: right;">260000</td>
<td style="text-align: right;">1518</td>
<td style="text-align: right;">19550</td>
<td style="text-align: right;">1940</td>
<td style="text-align: right;">5</td>
<td style="text-align: right;">0</td>
<td style="text-align: right;">NA</td>
<td style="text-align: right;">RL</td>
<td style="text-align: right;">Inside</td>
<td style="text-align: right;">1Fam</td>
</tr>
<tr class="even">
<td style="text-align: right;">99600</td>
<td style="text-align: right;">864</td>
<td style="text-align: right;">9350</td>
<td style="text-align: right;">1975</td>
<td style="text-align: right;">5</td>
<td style="text-align: right;">0</td>
<td style="text-align: right;">NA</td>
<td style="text-align: right;">RL</td>
<td style="text-align: right;">Inside</td>
<td style="text-align: right;">Duplex</td>
</tr>
<tr class="odd">
<td style="text-align: right;">107500</td>
<td style="text-align: right;">1347</td>
<td style="text-align: right;">7000</td>
<td style="text-align: right;">1910</td>
<td style="text-align: right;">5</td>
<td style="text-align: right;">0</td>
<td style="text-align: right;">NA</td>
<td style="text-align: right;">RL</td>
<td style="text-align: right;">Inside</td>
<td style="text-align: right;">2fmCon</td>
</tr>
<tr class="even">
<td style="text-align: right;">79000</td>
<td style="text-align: right;">1096</td>
<td style="text-align: right;">9600</td>
<td style="text-align: right;">1924</td>
<td style="text-align: right;">6</td>
<td style="text-align: right;">0</td>
<td style="text-align: right;">NA</td>
<td style="text-align: right;">RL</td>
<td style="text-align: right;">Corner</td>
<td style="text-align: right;">1Fam</td>
</tr>
<tr class="odd">
<td style="text-align: right;">85000</td>
<td style="text-align: right;">796</td>
<td style="text-align: right;">8777</td>
<td style="text-align: right;">1910</td>
<td style="text-align: right;">5</td>
<td style="text-align: right;">0</td>
<td style="text-align: right;">NA</td>
<td style="text-align: right;">RL</td>
<td style="text-align: right;">Inside</td>
<td style="text-align: right;">1Fam</td>
</tr>
<tr class="even">
<td style="text-align: right;">145900</td>
<td style="text-align: right;">2200</td>
<td style="text-align: right;">8777</td>
<td style="text-align: right;">1900</td>
<td style="text-align: right;">5</td>
<td style="text-align: right;">0</td>
<td style="text-align: right;">NA</td>
<td style="text-align: right;">RL</td>
<td style="text-align: right;">Inside</td>
<td style="text-align: right;">Duplex</td>
</tr>
<tr class="odd">
<td style="text-align: right;">82000</td>
<td style="text-align: right;">1152</td>
<td style="text-align: right;">6040</td>
<td style="text-align: right;">1955</td>
<td style="text-align: right;">4</td>
<td style="text-align: right;">0</td>
<td style="text-align: right;">NA</td>
<td style="text-align: right;">RL</td>
<td style="text-align: right;">Inside</td>
<td style="text-align: right;">Duplex</td>
</tr>
<tr class="even">
<td style="text-align: right;">82000</td>
<td style="text-align: right;">1152</td>
<td style="text-align: right;">6012</td>
<td style="text-align: right;">1955</td>
<td style="text-align: right;">4</td>
<td style="text-align: right;">0</td>
<td style="text-align: right;">NA</td>
<td style="text-align: right;">RL</td>
<td style="text-align: right;">Corner</td>
<td style="text-align: right;">Duplex</td>
</tr>
<tr class="odd">
<td style="text-align: right;">118000</td>
<td style="text-align: right;">1440</td>
<td style="text-align: right;">12108</td>
<td style="text-align: right;">1955</td>
<td style="text-align: right;">4</td>
<td style="text-align: right;">0</td>
<td style="text-align: right;">NA</td>
<td style="text-align: right;">RL</td>
<td style="text-align: right;">Inside</td>
<td style="text-align: right;">Duplex</td>
</tr>
<tr class="even">
<td style="text-align: right;">82500</td>
<td style="text-align: right;">1152</td>
<td style="text-align: right;">6845</td>
<td style="text-align: right;">1955</td>
<td style="text-align: right;">4</td>
<td style="text-align: right;">0</td>
<td style="text-align: right;">NA</td>
<td style="text-align: right;">RL</td>
<td style="text-align: right;">Inside</td>
<td style="text-align: right;">Duplex</td>
</tr>
<tr class="odd">
<td style="text-align: right;">91900</td>
<td style="text-align: right;">784</td>
<td style="text-align: right;">6931</td>
<td style="text-align: right;">1955</td>
<td style="text-align: right;">4</td>
<td style="text-align: right;">0</td>
<td style="text-align: right;">NA</td>
<td style="text-align: right;">RL</td>
<td style="text-align: right;">Inside</td>
<td style="text-align: right;">2fmCon</td>
</tr>
<tr class="even">
<td style="text-align: right;">120000</td>
<td style="text-align: right;">1053</td>
<td style="text-align: right;">12180</td>
<td style="text-align: right;">1938</td>
<td style="text-align: right;">5</td>
<td style="text-align: right;">0</td>
<td style="text-align: right;">NA</td>
<td style="text-align: right;">RL</td>
<td style="text-align: right;">Inside</td>
<td style="text-align: right;">1Fam</td>
</tr>
<tr class="odd">
<td style="text-align: right;">96000</td>
<td style="text-align: right;">1137</td>
<td style="text-align: right;">8050</td>
<td style="text-align: right;">1947</td>
<td style="text-align: right;">5</td>
<td style="text-align: right;">0</td>
<td style="text-align: right;">NA</td>
<td style="text-align: right;">RL</td>
<td style="text-align: right;">Inside</td>
<td style="text-align: right;">1Fam</td>
</tr>
<tr class="even">
<td style="text-align: right;">98000</td>
<td style="text-align: right;">864</td>
<td style="text-align: right;">5604</td>
<td style="text-align: right;">1925</td>
<td style="text-align: right;">5</td>
<td style="text-align: right;">0</td>
<td style="text-align: right;">NA</td>
<td style="text-align: right;">RL</td>
<td style="text-align: right;">Inside</td>
<td style="text-align: right;">1Fam</td>
</tr>
<tr class="odd">
<td style="text-align: right;">67000</td>
<td style="text-align: right;">864</td>
<td style="text-align: right;">8248</td>
<td style="text-align: right;">1914</td>
<td style="text-align: right;">3</td>
<td style="text-align: right;">0</td>
<td style="text-align: right;">NA</td>
<td style="text-align: right;">RL</td>
<td style="text-align: right;">Inside</td>
<td style="text-align: right;">1Fam</td>
</tr>
<tr class="even">
<td style="text-align: right;">135900</td>
<td style="text-align: right;">1716</td>
<td style="text-align: right;">5687</td>
<td style="text-align: right;">1912</td>
<td style="text-align: right;">5</td>
<td style="text-align: right;">0</td>
<td style="text-align: right;">NA</td>
<td style="text-align: right;">RL</td>
<td style="text-align: right;">Inside</td>
<td style="text-align: right;">2fmCon</td>
</tr>
<tr class="odd">
<td style="text-align: right;">119000</td>
<td style="text-align: right;">1200</td>
<td style="text-align: right;">8155</td>
<td style="text-align: right;">1930</td>
<td style="text-align: right;">5</td>
<td style="text-align: right;">0</td>
<td style="text-align: right;">NA</td>
<td style="text-align: right;">RM</td>
<td style="text-align: right;">Inside</td>
<td style="text-align: right;">1Fam</td>
</tr>
<tr class="even">
<td style="text-align: right;">81000</td>
<td style="text-align: right;">630</td>
<td style="text-align: right;">1890</td>
<td style="text-align: right;">1972</td>
<td style="text-align: right;">4</td>
<td style="text-align: right;">0</td>
<td style="text-align: right;">NA</td>
<td style="text-align: right;">RM</td>
<td style="text-align: right;">Inside</td>
<td style="text-align: right;">Twnhs</td>
</tr>
<tr class="odd">
<td style="text-align: right;">146000</td>
<td style="text-align: right;">1100</td>
<td style="text-align: right;">7500</td>
<td style="text-align: right;">2006</td>
<td style="text-align: right;">6</td>
<td style="text-align: right;">0</td>
<td style="text-align: right;">NA</td>
<td style="text-align: right;">RL</td>
<td style="text-align: right;">Inside</td>
<td style="text-align: right;">1Fam</td>
</tr>
<tr class="even">
<td style="text-align: right;">64000</td>
<td style="text-align: right;">670</td>
<td style="text-align: right;">3500</td>
<td style="text-align: right;">1945</td>
<td style="text-align: right;">3</td>
<td style="text-align: right;">0</td>
<td style="text-align: right;">NA</td>
<td style="text-align: right;">RL</td>
<td style="text-align: right;">Inside</td>
<td style="text-align: right;">1Fam</td>
</tr>
<tr class="odd">
<td style="text-align: right;">103200</td>
<td style="text-align: right;">882</td>
<td style="text-align: right;">5500</td>
<td style="text-align: right;">1956</td>
<td style="text-align: right;">4</td>
<td style="text-align: right;">0</td>
<td style="text-align: right;">NA</td>
<td style="text-align: right;">RL</td>
<td style="text-align: right;">Inside</td>
<td style="text-align: right;">1Fam</td>
</tr>
<tr class="even">
<td style="text-align: right;">148000</td>
<td style="text-align: right;">1534</td>
<td style="text-align: right;">10800</td>
<td style="text-align: right;">1895</td>
<td style="text-align: right;">5</td>
<td style="text-align: right;">0</td>
<td style="text-align: right;">NA</td>
<td style="text-align: right;">RL</td>
<td style="text-align: right;">Inside</td>
<td style="text-align: right;">1Fam</td>
</tr>
<tr class="odd">
<td style="text-align: right;">110500</td>
<td style="text-align: right;">866</td>
<td style="text-align: right;">3880</td>
<td style="text-align: right;">1945</td>
<td style="text-align: right;">5</td>
<td style="text-align: right;">0</td>
<td style="text-align: right;">NA</td>
<td style="text-align: right;">RM</td>
<td style="text-align: right;">Inside</td>
<td style="text-align: right;">1Fam</td>
</tr>
<tr class="even">
<td style="text-align: right;">127000</td>
<td style="text-align: right;">1355</td>
<td style="text-align: right;">6882</td>
<td style="text-align: right;">1914</td>
<td style="text-align: right;">6</td>
<td style="text-align: right;">0</td>
<td style="text-align: right;">NA</td>
<td style="text-align: right;">RM</td>
<td style="text-align: right;">Inside</td>
<td style="text-align: right;">1Fam</td>
</tr>
<tr class="odd">
<td style="text-align: right;">200500</td>
<td style="text-align: right;">3086</td>
<td style="text-align: right;">18030</td>
<td style="text-align: right;">1946</td>
<td style="text-align: right;">5</td>
<td style="text-align: right;">0</td>
<td style="text-align: right;">NA</td>
<td style="text-align: right;">RL</td>
<td style="text-align: right;">Inside</td>
<td style="text-align: right;">1Fam</td>
</tr>
<tr class="even">
<td style="text-align: right;">150000</td>
<td style="text-align: right;">1440</td>
<td style="text-align: right;">7711</td>
<td style="text-align: right;">1977</td>
<td style="text-align: right;">4</td>
<td style="text-align: right;">0</td>
<td style="text-align: right;">NA</td>
<td style="text-align: right;">RL</td>
<td style="text-align: right;">Inside</td>
<td style="text-align: right;">Duplex</td>
</tr>
<tr class="odd">
<td style="text-align: right;">86000</td>
<td style="text-align: right;">605</td>
<td style="text-align: right;">9098</td>
<td style="text-align: right;">1920</td>
<td style="text-align: right;">4</td>
<td style="text-align: right;">0</td>
<td style="text-align: right;">NA</td>
<td style="text-align: right;">RL</td>
<td style="text-align: right;">Inside</td>
<td style="text-align: right;">1Fam</td>
</tr>
<tr class="even">
<td style="text-align: right;">123600</td>
<td style="text-align: right;">990</td>
<td style="text-align: right;">8070</td>
<td style="text-align: right;">1994</td>
<td style="text-align: right;">4</td>
<td style="text-align: right;">0</td>
<td style="text-align: right;">NA</td>
<td style="text-align: right;">RL</td>
<td style="text-align: right;">Inside</td>
<td style="text-align: right;">1Fam</td>
</tr>
<tr class="odd">
<td style="text-align: right;">98500</td>
<td style="text-align: right;">1195</td>
<td style="text-align: right;">8741</td>
<td style="text-align: right;">1946</td>
<td style="text-align: right;">5</td>
<td style="text-align: right;">0</td>
<td style="text-align: right;">NA</td>
<td style="text-align: right;">RL</td>
<td style="text-align: right;">Inside</td>
<td style="text-align: right;">Duplex</td>
</tr>
<tr class="even">
<td style="text-align: right;">79000</td>
<td style="text-align: right;">774</td>
<td style="text-align: right;">4270</td>
<td style="text-align: right;">1931</td>
<td style="text-align: right;">3</td>
<td style="text-align: right;">0</td>
<td style="text-align: right;">NA</td>
<td style="text-align: right;">RH</td>
<td style="text-align: right;">Inside</td>
<td style="text-align: right;">1Fam</td>
</tr>
<tr class="odd">
<td style="text-align: right;">200000</td>
<td style="text-align: right;">3395</td>
<td style="text-align: right;">10896</td>
<td style="text-align: right;">1914</td>
<td style="text-align: right;">6</td>
<td style="text-align: right;">0</td>
<td style="text-align: right;">NA</td>
<td style="text-align: right;">RH</td>
<td style="text-align: right;">Inside</td>
<td style="text-align: right;">2fmCon</td>
</tr>
<tr class="even">
<td style="text-align: right;">150000</td>
<td style="text-align: right;">2592</td>
<td style="text-align: right;">10890</td>
<td style="text-align: right;">1923</td>
<td style="text-align: right;">5</td>
<td style="text-align: right;">0</td>
<td style="text-align: right;">NA</td>
<td style="text-align: right;">RL</td>
<td style="text-align: right;">Inside</td>
<td style="text-align: right;">Duplex</td>
</tr>
<tr class="odd">
<td style="text-align: right;">115000</td>
<td style="text-align: right;">1517</td>
<td style="text-align: right;">8500</td>
<td style="text-align: right;">1919</td>
<td style="text-align: right;">5</td>
<td style="text-align: right;">0</td>
<td style="text-align: right;">NA</td>
<td style="text-align: right;">RM</td>
<td style="text-align: right;">Corner</td>
<td style="text-align: right;">1Fam</td>
</tr>
<tr class="even">
<td style="text-align: right;">150909</td>
<td style="text-align: right;">1828</td>
<td style="text-align: right;">9060</td>
<td style="text-align: right;">1923</td>
<td style="text-align: right;">5</td>
<td style="text-align: right;">NA</td>
<td style="text-align: right;">NA</td>
<td style="text-align: right;">RM</td>
<td style="text-align: right;">Inside</td>
<td style="text-align: right;">1Fam</td>
</tr>
<tr class="odd">
<td style="text-align: right;">119600</td>
<td style="text-align: right;">1991</td>
<td style="text-align: right;">8250</td>
<td style="text-align: right;">1895</td>
<td style="text-align: right;">5</td>
<td style="text-align: right;">0</td>
<td style="text-align: right;">NA</td>
<td style="text-align: right;">C (all)</td>
<td style="text-align: right;">Inside</td>
<td style="text-align: right;">2fmCon</td>
</tr>
<tr class="even">
<td style="text-align: right;">147000</td>
<td style="text-align: right;">1120</td>
<td style="text-align: right;">8402</td>
<td style="text-align: right;">2007</td>
<td style="text-align: right;">5</td>
<td style="text-align: right;">0</td>
<td style="text-align: right;">NA</td>
<td style="text-align: right;">RL</td>
<td style="text-align: right;">Inside</td>
<td style="text-align: right;">1Fam</td>
</tr>
<tr class="odd">
<td style="text-align: right;">93900</td>
<td style="text-align: right;">1092</td>
<td style="text-align: right;">1495</td>
<td style="text-align: right;">1970</td>
<td style="text-align: right;">4</td>
<td style="text-align: right;">0</td>
<td style="text-align: right;">NA</td>
<td style="text-align: right;">RM</td>
<td style="text-align: right;">Inside</td>
<td style="text-align: right;">TwnhsE</td>
</tr>
<tr class="even">
<td style="text-align: right;">84500</td>
<td style="text-align: right;">630</td>
<td style="text-align: right;">1936</td>
<td style="text-align: right;">1970</td>
<td style="text-align: right;">4</td>
<td style="text-align: right;">0</td>
<td style="text-align: right;">NA</td>
<td style="text-align: right;">RM</td>
<td style="text-align: right;">Inside</td>
<td style="text-align: right;">Twnhs</td>
</tr>
<tr class="odd">
<td style="text-align: right;">139500</td>
<td style="text-align: right;">1142</td>
<td style="text-align: right;">7733</td>
<td style="text-align: right;">2005</td>
<td style="text-align: right;">6</td>
<td style="text-align: right;">0</td>
<td style="text-align: right;">NA</td>
<td style="text-align: right;">RL</td>
<td style="text-align: right;">Inside</td>
<td style="text-align: right;">1Fam</td>
</tr>
<tr class="even">
<td style="text-align: right;">132000</td>
<td style="text-align: right;">1131</td>
<td style="text-align: right;">13072</td>
<td style="text-align: right;">2005</td>
<td style="text-align: right;">6</td>
<td style="text-align: right;">0</td>
<td style="text-align: right;">NA</td>
<td style="text-align: right;">RL</td>
<td style="text-align: right;">Inside</td>
<td style="text-align: right;">1Fam</td>
</tr>
<tr class="odd">
<td style="text-align: right;">85500</td>
<td style="text-align: right;">869</td>
<td style="text-align: right;">5900</td>
<td style="text-align: right;">1923</td>
<td style="text-align: right;">4</td>
<td style="text-align: right;">0</td>
<td style="text-align: right;">NA</td>
<td style="text-align: right;">RL</td>
<td style="text-align: right;">Inside</td>
<td style="text-align: right;">1Fam</td>
</tr>
<tr class="even">
<td style="text-align: right;">135000</td>
<td style="text-align: right;">1192</td>
<td style="text-align: right;">10800</td>
<td style="text-align: right;">1949</td>
<td style="text-align: right;">4</td>
<td style="text-align: right;">0</td>
<td style="text-align: right;">NA</td>
<td style="text-align: right;">RL</td>
<td style="text-align: right;">Inside</td>
<td style="text-align: right;">1Fam</td>
</tr>
<tr class="odd">
<td style="text-align: right;">119000</td>
<td style="text-align: right;">1556</td>
<td style="text-align: right;">8512</td>
<td style="text-align: right;">1960</td>
<td style="text-align: right;">5</td>
<td style="text-align: right;">0</td>
<td style="text-align: right;">NA</td>
<td style="text-align: right;">RL</td>
<td style="text-align: right;">Corner</td>
<td style="text-align: right;">Duplex</td>
</tr>
<tr class="even">
<td style="text-align: right;">124000</td>
<td style="text-align: right;">1025</td>
<td style="text-align: right;">7000</td>
<td style="text-align: right;">1962</td>
<td style="text-align: right;">5</td>
<td style="text-align: right;">0</td>
<td style="text-align: right;">NA</td>
<td style="text-align: right;">RL</td>
<td style="text-align: right;">Inside</td>
<td style="text-align: right;">2fmCon</td>
</tr>
<tr class="odd">
<td style="text-align: right;">64500</td>
<td style="text-align: right;">1020</td>
<td style="text-align: right;">4761</td>
<td style="text-align: right;">1918</td>
<td style="text-align: right;">3</td>
<td style="text-align: right;">0</td>
<td style="text-align: right;">NA</td>
<td style="text-align: right;">C (all)</td>
<td style="text-align: right;">Corner</td>
<td style="text-align: right;">1Fam</td>
</tr>
<tr class="even">
<td style="text-align: right;">100000</td>
<td style="text-align: right;">788</td>
<td style="text-align: right;">7446</td>
<td style="text-align: right;">1941</td>
<td style="text-align: right;">4</td>
<td style="text-align: right;">0</td>
<td style="text-align: right;">NA</td>
<td style="text-align: right;">RL</td>
<td style="text-align: right;">Corner</td>
<td style="text-align: right;">1Fam</td>
</tr>
<tr class="odd">
<td style="text-align: right;">80500</td>
<td style="text-align: right;">912</td>
<td style="text-align: right;">6240</td>
<td style="text-align: right;">1947</td>
<td style="text-align: right;">4</td>
<td style="text-align: right;">0</td>
<td style="text-align: right;">NA</td>
<td style="text-align: right;">RM</td>
<td style="text-align: right;">Inside</td>
<td style="text-align: right;">1Fam</td>
</tr>
<tr class="even">
<td style="text-align: right;">72000</td>
<td style="text-align: right;">819</td>
<td style="text-align: right;">9000</td>
<td style="text-align: right;">1919</td>
<td style="text-align: right;">5</td>
<td style="text-align: right;">0</td>
<td style="text-align: right;">NA</td>
<td style="text-align: right;">RM</td>
<td style="text-align: right;">Inside</td>
<td style="text-align: right;">1Fam</td>
</tr>
<tr class="odd">
<td style="text-align: right;">117250</td>
<td style="text-align: right;">914</td>
<td style="text-align: right;">8050</td>
<td style="text-align: right;">2002</td>
<td style="text-align: right;">6</td>
<td style="text-align: right;">0</td>
<td style="text-align: right;">NA</td>
<td style="text-align: right;">RL</td>
<td style="text-align: right;">Inside</td>
<td style="text-align: right;">1Fam</td>
</tr>
<tr class="even">
<td style="text-align: right;">81000</td>
<td style="text-align: right;">1184</td>
<td style="text-align: right;">8410</td>
<td style="text-align: right;">1910</td>
<td style="text-align: right;">5</td>
<td style="text-align: right;">0</td>
<td style="text-align: right;">NA</td>
<td style="text-align: right;">RL</td>
<td style="text-align: right;">FR2</td>
<td style="text-align: right;">1Fam</td>
</tr>
<tr class="odd">
<td style="text-align: right;">83000</td>
<td style="text-align: right;">1414</td>
<td style="text-align: right;">8248</td>
<td style="text-align: right;">1922</td>
<td style="text-align: right;">4</td>
<td style="text-align: right;">0</td>
<td style="text-align: right;">NA</td>
<td style="text-align: right;">RL</td>
<td style="text-align: right;">Inside</td>
<td style="text-align: right;">1Fam</td>
</tr>
<tr class="even">
<td style="text-align: right;">102000</td>
<td style="text-align: right;">1522</td>
<td style="text-align: right;">6000</td>
<td style="text-align: right;">1926</td>
<td style="text-align: right;">5</td>
<td style="text-align: right;">0</td>
<td style="text-align: right;">NA</td>
<td style="text-align: right;">RL</td>
<td style="text-align: right;">Inside</td>
<td style="text-align: right;">1Fam</td>
</tr>
<tr class="odd">
<td style="text-align: right;">72000</td>
<td style="text-align: right;">672</td>
<td style="text-align: right;">8534</td>
<td style="text-align: right;">1925</td>
<td style="text-align: right;">4</td>
<td style="text-align: right;">0</td>
<td style="text-align: right;">NA</td>
<td style="text-align: right;">RM</td>
<td style="text-align: right;">Inside</td>
<td style="text-align: right;">1Fam</td>
</tr>
<tr class="even">
<td style="text-align: right;">115000</td>
<td style="text-align: right;">1396</td>
<td style="text-align: right;">9000</td>
<td style="text-align: right;">1951</td>
<td style="text-align: right;">5</td>
<td style="text-align: right;">0</td>
<td style="text-align: right;">NA</td>
<td style="text-align: right;">C (all)</td>
<td style="text-align: right;">Inside</td>
<td style="text-align: right;">2fmCon</td>
</tr>
<tr class="odd">
<td style="text-align: right;">78000</td>
<td style="text-align: right;">936</td>
<td style="text-align: right;">8520</td>
<td style="text-align: right;">1916</td>
<td style="text-align: right;">3</td>
<td style="text-align: right;">0</td>
<td style="text-align: right;">NA</td>
<td style="text-align: right;">C (all)</td>
<td style="text-align: right;">Inside</td>
<td style="text-align: right;">1Fam</td>
</tr>
<tr class="even">
<td style="text-align: right;">92000</td>
<td style="text-align: right;">630</td>
<td style="text-align: right;">1533</td>
<td style="text-align: right;">1970</td>
<td style="text-align: right;">5</td>
<td style="text-align: right;">0</td>
<td style="text-align: right;">NA</td>
<td style="text-align: right;">RM</td>
<td style="text-align: right;">Inside</td>
<td style="text-align: right;">Twnhs</td>
</tr>
<tr class="odd">
<td style="text-align: right;">90500</td>
<td style="text-align: right;">1092</td>
<td style="text-align: right;">1936</td>
<td style="text-align: right;">1970</td>
<td style="text-align: right;">4</td>
<td style="text-align: right;">0</td>
<td style="text-align: right;">NA</td>
<td style="text-align: right;">RM</td>
<td style="text-align: right;">Inside</td>
<td style="text-align: right;">Twnhs</td>
</tr>
</tbody>
</table>
</div>

</div>
</div>
<hr>
<p>In this instance, if we consult our <a href="data/ames_data_dictionary.pdf">data dictionary</a>, we see that <code>NA</code> for <code>garage_qual</code> should be coded as “no garage”. We will correct this in our data set.</p>
<p>This is a pretty poor choice on the part of the researchers who created the dataset because it becomes impossible to distinguish between <code>NA</code> that means no garage vs.&nbsp;true NA for the variable. In fact, if you later do really careful EDA on the full data set with all variables, you will see this problem likely exists in this dataset</p>
<p>Anyway, let’s correct all the <code>NA</code> for <code>garage_qual</code> to “no_garage” using <code>mutate()</code></p>
<div class="cell">
<details open="" class="code-fold">
<summary>Code</summary>
<div class="sourceCode cell-code" id="annotated-cell-18"><pre class="sourceCode r code-annotation-code code-with-copy code-annotated"><code class="sourceCode r"><span id="annotated-cell-18-1"><a href="#annotated-cell-18-1" aria-hidden="true" tabindex="-1"></a>data_all <span class="ot">&lt;-</span> data_all <span class="sc">|&gt;</span> </span>
<a class="code-annotation-anchor" data-target-cell="annotated-cell-18" data-target-annotation="1" onclick="event.preventDefault();">1</a><span id="annotated-cell-18-2" class="code-annotation-target"><a href="#annotated-cell-18-2" aria-hidden="true" tabindex="-1"></a>  <span class="fu">mutate</span>(<span class="at">garage_qual =</span> <span class="fu">fct_expand</span>(garage_qual, <span class="st">"no_garage"</span>),</span>
<a class="code-annotation-anchor" data-target-cell="annotated-cell-18" data-target-annotation="2" onclick="event.preventDefault();">2</a><span id="annotated-cell-18-3" class="code-annotation-target"><a href="#annotated-cell-18-3" aria-hidden="true" tabindex="-1"></a>         <span class="at">garage_qual =</span> <span class="fu">replace_na</span>(garage_qual, <span class="st">"no_garage"</span>))</span><div class="code-annotation-gutter-bg"></div><div class="code-annotation-gutter"></div></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
</details>
<div class="cell-annotation">
<dl class="code-annotation-container-grid">
<dt data-target-cell="annotated-cell-18" data-target-annotation="1">1</dt>
<dd>
<span data-code-cell="annotated-cell-18" data-code-lines="2" data-code-annotation="1">First add a new level to the factor</span>
</dd>
<dt data-target-cell="annotated-cell-18" data-target-annotation="2">2</dt>
<dd>
<span data-code-cell="annotated-cell-18" data-code-lines="3" data-code-annotation="2">Then recode NA to that new level</span>
</dd>
</dl>
</div>
</div>
<p>We will leave the <code>NA</code> for <code>garage_cars</code> as <code>NA</code> because its not clear if that is truly missing or not, based on further EDA not shown here.</p>
<hr>
<p>We have one other issue with <code>garage_qual</code>. It is an ordinal variable but we never reviewed the order of its levels. The data dictionary indicates the levels are ordered (best to worst) as:</p>
<ul>
<li>Ex (excellent)</li>
<li>Gd (good)</li>
<li>TA (typical/average)</li>
<li>Fa (fair)</li>
<li>Po (poor)</li>
</ul>
<p>And we might assume that no garage is even worse than a poor garage. Lets see what they are.</p>
<div class="cell">
<details open="" class="code-fold">
<summary>Code</summary>
<div class="sourceCode cell-code" id="cb18"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb18-1"><a href="#cb18-1" aria-hidden="true" tabindex="-1"></a>data_all<span class="sc">$</span>garage_qual <span class="sc">|&gt;</span> <span class="fu">levels</span>()</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
</details>
<div class="cell-output cell-output-stdout">
<pre><code>[1] "Ex"        "Fa"        "Gd"        "Po"        "TA"        "no_garage"</code></pre>
</div>
</div>
<p>To fix this, we can use <code>forcats::fct_relevel()</code>.</p>
<div class="cell">
<details open="" class="code-fold">
<summary>Code</summary>
<div class="sourceCode cell-code" id="annotated-cell-20"><pre class="sourceCode r code-annotation-code code-with-copy code-annotated"><code class="sourceCode r"><a class="code-annotation-anchor" data-target-cell="annotated-cell-20" data-target-annotation="1" onclick="event.preventDefault();">1</a><span id="annotated-cell-20-1" class="code-annotation-target"><a href="#annotated-cell-20-1" aria-hidden="true" tabindex="-1"></a>gq_levels <span class="ot">&lt;-</span> <span class="fu">c</span>(<span class="st">"no_garage"</span>, <span class="st">"Po"</span>, <span class="st">"Fa"</span>, <span class="st">"TA"</span>, <span class="st">"Gd"</span>, <span class="st">"Ex"</span>)</span>
<span id="annotated-cell-20-2"><a href="#annotated-cell-20-2" aria-hidden="true" tabindex="-1"></a>data_all <span class="ot">&lt;-</span> data_all <span class="sc">|&gt;</span> </span>
<a class="code-annotation-anchor" data-target-cell="annotated-cell-20" data-target-annotation="2" onclick="event.preventDefault();">2</a><span id="annotated-cell-20-3" class="code-annotation-target"><a href="#annotated-cell-20-3" aria-hidden="true" tabindex="-1"></a>  <span class="fu">mutate</span>(<span class="at">garage_qual =</span> <span class="fu">fct_relevel</span>(garage_qual, gq_levels))</span>
<span id="annotated-cell-20-4"><a href="#annotated-cell-20-4" aria-hidden="true" tabindex="-1"></a></span>
<a class="code-annotation-anchor" data-target-cell="annotated-cell-20" data-target-annotation="3" onclick="event.preventDefault();">3</a><span id="annotated-cell-20-5" class="code-annotation-target"><a href="#annotated-cell-20-5" aria-hidden="true" tabindex="-1"></a>data_all<span class="sc">$</span>garage_qual <span class="sc">|&gt;</span> <span class="fu">levels</span>()</span><div class="code-annotation-gutter-bg"></div><div class="code-annotation-gutter"></div></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
</details>
<div class="cell-annotation">
<dl class="code-annotation-container-grid">
<dt data-target-cell="annotated-cell-20" data-target-annotation="1">1</dt>
<dd>
<span data-code-cell="annotated-cell-20" data-code-lines="1" data-code-annotation="1">Make a vector that indicates the valid levels in order</span>
</dd>
<dt data-target-cell="annotated-cell-20" data-target-annotation="2">2</dt>
<dd>
<span data-code-cell="annotated-cell-20" data-code-lines="3" data-code-annotation="2">Pass that into <code>fct_relevel()</code>. See <code>?fct_relevel</code> for other ways to adjust the levels of a factor.</span>
</dd>
<dt data-target-cell="annotated-cell-20" data-target-annotation="3">3</dt>
<dd>
<span data-code-cell="annotated-cell-20" data-code-lines="5" data-code-annotation="3">Confirm that the levels are now correct</span>
</dd>
</dl>
</div>
<div class="cell-output cell-output-stdout">
<pre><code>[1] "no_garage" "Po"        "Fa"        "TA"        "Gd"        "Ex"       </code></pre>
</div>
</div>
<hr>
</section>
<section id="explore-minmax-response-for-numeric-variables" class="level3" data-number="2.4.6">
<h3 data-number="2.4.6" class="anchored" data-anchor-id="explore-minmax-response-for-numeric-variables"><span class="header-section-number">2.4.6</span> Explore Min/Max Response for Numeric Variables</h3>
<p>We should explore mins and maxes for all numeric variables to detect out of valid range numeric responses</p>
<ul>
<li>Could also do this for ordinal variables that are coded with numbers
<ul>
<li>e.g., <code>overall_qual</code> (1-10) vs.&nbsp;<code>garage_qual</code> (no_garage, Po, Fa, TA, Gd, Ex)</li>
</ul></li>
<li>This is only a temporary mutation of <code>overall_qual</code> for this check. We don’t assign to new df to an object</li>
<li>We can use <code>skim_some()</code> again
<ul>
<li>p0 = min</li>
<li>p100 = max</li>
</ul></li>
</ul>
<div class="cell">
<details open="" class="code-fold">
<summary>Code</summary>
<div class="sourceCode cell-code" id="annotated-cell-21"><pre class="sourceCode r code-annotation-code code-with-copy code-annotated"><code class="sourceCode r"><span id="annotated-cell-21-1"><a href="#annotated-cell-21-1" aria-hidden="true" tabindex="-1"></a>data_all <span class="sc">|&gt;</span></span>
<span id="annotated-cell-21-2"><a href="#annotated-cell-21-2" aria-hidden="true" tabindex="-1"></a>  <span class="fu">mutate</span>(<span class="at">overall_qual =</span> <span class="fu">as.numeric</span>(overall_qual)) <span class="sc">|&gt;</span> </span>
<span id="annotated-cell-21-3"><a href="#annotated-cell-21-3" aria-hidden="true" tabindex="-1"></a>  <span class="fu">skim_some</span>() <span class="sc">|&gt;</span> </span>
<a class="code-annotation-anchor" data-target-cell="annotated-cell-21" data-target-annotation="1" onclick="event.preventDefault();">1</a><span id="annotated-cell-21-4" class="code-annotation-target"><a href="#annotated-cell-21-4" aria-hidden="true" tabindex="-1"></a>  <span class="fu">filter</span>(skim_type <span class="sc">==</span> <span class="st">"numeric"</span>) <span class="sc">|&gt;</span></span>
<a class="code-annotation-anchor" data-target-cell="annotated-cell-21" data-target-annotation="2" onclick="event.preventDefault();">2</a><span id="annotated-cell-21-5" class="code-annotation-target"><a href="#annotated-cell-21-5" aria-hidden="true" tabindex="-1"></a>  <span class="fu">select</span>(skim_variable, numeric.p0, numeric.p100)</span><div class="code-annotation-gutter-bg"></div><div class="code-annotation-gutter"></div></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
</details>
<div class="cell-annotation">
<dl class="code-annotation-container-grid">
<dt data-target-cell="annotated-cell-21" data-target-annotation="1">1</dt>
<dd>
<span data-code-cell="annotated-cell-21" data-code-lines="4" data-code-annotation="1">Select only numeric variables since min/max only apply to them</span>
</dd>
<dt data-target-cell="annotated-cell-21" data-target-annotation="2">2</dt>
<dd>
<span data-code-cell="annotated-cell-21" data-code-lines="5" data-code-annotation="2">Select relevant stats (min/max)</span>
</dd>
</dl>
</div>
<div class="cell-output cell-output-stdout">
<pre><code># A tibble: 6 × 3
  skim_variable numeric.p0 numeric.p100
  &lt;chr&gt;              &lt;dbl&gt;        &lt;dbl&gt;
1 sale_price         12789       745000
2 gr_liv_area          438         5642
3 lot_area            1476       215245
4 year_built          1875         2010
5 overall_qual           1           10
6 garage_cars            0            4</code></pre>
</div>
</div>
<hr>
</section>
<section id="explore-all-responses-for-categorical-variables" class="level3" data-number="2.4.7">
<h3 data-number="2.4.7" class="anchored" data-anchor-id="explore-all-responses-for-categorical-variables"><span class="header-section-number">2.4.7</span> Explore All Responses for Categorical Variables</h3>
<p>We should explore all unique responses for nominal variables</p>
<p>Might also do this for ordinal variables that are coded with labels vs.&nbsp;numbers.</p>
<div class="cell">
<details open="" class="code-fold">
<summary>Code</summary>
<div class="sourceCode cell-code" id="cb22"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb22-1"><a href="#cb22-1" aria-hidden="true" tabindex="-1"></a>data_all <span class="sc">|&gt;</span> </span>
<span id="cb22-2"><a href="#cb22-2" aria-hidden="true" tabindex="-1"></a>  <span class="fu">select</span>(<span class="fu">where</span>(is.factor)) <span class="sc">|&gt;</span></span>
<span id="cb22-3"><a href="#cb22-3" aria-hidden="true" tabindex="-1"></a>  <span class="fu">walk</span>(\(column) <span class="fu">print</span>(<span class="fu">levels</span>(column)))</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
</details>
<div class="cell-output cell-output-stdout">
<pre><code> [1] "1"  "2"  "3"  "4"  "5"  "6"  "7"  "8"  "9"  "10"
[1] "no_garage" "Po"        "Fa"        "TA"        "Gd"        "Ex"       
[1] "A (agr)" "C (all)" "FV"      "I (all)" "RH"      "RL"      "RM"     
[1] "Corner"  "CulDSac" "FR2"     "FR3"     "Inside" 
[1] "1Fam"   "2fmCon" "Duplex" "Twnhs"  "TwnhsE"</code></pre>
</div>
</div>
<div class="callout callout-style-default callout-tip no-icon callout-titled">
<div class="callout-header d-flex align-content-center">
<div class="callout-icon-container">
<i class="callout-icon no-icon"></i>
</div>
<div class="callout-title-container flex-fill">
Coding sidebar
</div>
</div>
<div class="callout-body-container callout-body">
<ul>
<li>On the previous page, we demonstrated the use of an anonymous function (<code>\(column) print(levels(column))</code>), which is a function we use once that we don’t bother to assign a name (since we won’t reuse it). We often use anonymous functions when using the functions from the <code>purrr</code> package (e.g., <code>map()</code>, <code>walk()</code>)</li>
<li>We use <code>walk()</code> from the <code>purrr</code> package to apply our anonymous function to all columns of the data frame at once</li>
<li>Just copy this code for now</li>
<li>We will see simpler uses later that will help you understand iteration with <code>purrr</code> functions</li>
<li>See the chapter on <a href="https://r4ds.hadley.nz/iteration">iteration</a> in <em>R for Data Science (2e)</em> for more info on <code>map()</code> and <code>walk()</code></li>
</ul>
</div>
</div>
<hr>
</section>
<section id="tidy-responses-for-categorical-variables" class="level3" data-number="2.4.8">
<h3 data-number="2.4.8" class="anchored" data-anchor-id="tidy-responses-for-categorical-variables"><span class="header-section-number">2.4.8</span> Tidy Responses for Categorical Variables</h3>
<p>Feature engineering with nominal and ordinal variables typically involves</p>
<ul>
<li>Converting to factors (already did this!)</li>
<li>Often creating dummy features from these factors</li>
</ul>
<p>This feature engineering will use response labels for naming new features</p>
<ul>
<li>Therefore, it is a good idea to have the responses snake-cased and cleaned up a bit so that these new feature names are clean/clear.</li>
</ul>
<p>Here is an easy way to convert responses for character variables to snake case using a function (<code>tidy_responses()</code>) we share in <code>fun_eda.R</code> (reproduced here).</p>
<ul>
<li>This uses regular expressions (regex), which will will learn about in a later unit on text processing.</li>
<li>You could expand this cleaning function if you encounter other issues that need to be cleaned in the factor levels.</li>
</ul>
<div class="cell">
<details open="" class="code-fold">
<summary>Code</summary>
<div class="sourceCode cell-code" id="cb24"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb24-1"><a href="#cb24-1" aria-hidden="true" tabindex="-1"></a>tidy_responses <span class="ot">&lt;-</span> <span class="cf">function</span>(column){</span>
<span id="cb24-2"><a href="#cb24-2" aria-hidden="true" tabindex="-1"></a>  <span class="co"># replace all non-alphanumeric with _</span></span>
<span id="cb24-3"><a href="#cb24-3" aria-hidden="true" tabindex="-1"></a>  column <span class="ot">&lt;-</span> <span class="fu">fct_relabel</span>(column, \(column) <span class="fu">str_replace_all</span>(column, <span class="st">"</span><span class="sc">\\</span><span class="st">W"</span>, <span class="st">"_"</span>))</span>
<span id="cb24-4"><a href="#cb24-4" aria-hidden="true" tabindex="-1"></a>  <span class="co"># replace whitespace with _</span></span>
<span id="cb24-5"><a href="#cb24-5" aria-hidden="true" tabindex="-1"></a>  column <span class="ot">&lt;-</span> <span class="fu">fct_relabel</span>(column, \(column) <span class="fu">str_replace_all</span>(column, <span class="st">"</span><span class="sc">\\</span><span class="st">s+"</span>, <span class="st">"_"</span>))</span>
<span id="cb24-6"><a href="#cb24-6" aria-hidden="true" tabindex="-1"></a>  <span class="co"># replace multiple _ with single _</span></span>
<span id="cb24-7"><a href="#cb24-7" aria-hidden="true" tabindex="-1"></a>  column <span class="ot">&lt;-</span> <span class="fu">fct_relabel</span>(column, \(column) <span class="fu">str_replace_all</span>(column, <span class="st">"</span><span class="sc">\\</span><span class="st">_+"</span>, <span class="st">"_"</span>))</span>
<span id="cb24-8"><a href="#cb24-8" aria-hidden="true" tabindex="-1"></a>  <span class="co">#remove _ at end of string</span></span>
<span id="cb24-9"><a href="#cb24-9" aria-hidden="true" tabindex="-1"></a>  column <span class="ot">&lt;-</span> <span class="fu">fct_relabel</span>(column, \(column) <span class="fu">str_replace_all</span>(column, <span class="st">"</span><span class="sc">\\</span><span class="st">_$"</span>, <span class="st">""</span>))</span>
<span id="cb24-10"><a href="#cb24-10" aria-hidden="true" tabindex="-1"></a>  <span class="co"># remove _ at start of string</span></span>
<span id="cb24-11"><a href="#cb24-11" aria-hidden="true" tabindex="-1"></a>  column <span class="ot">&lt;-</span> <span class="fu">fct_relabel</span>(column, \(column) <span class="fu">str_replace_all</span>(column, <span class="st">"</span><span class="sc">\\</span><span class="st">^_"</span>, <span class="st">""</span>))</span>
<span id="cb24-12"><a href="#cb24-12" aria-hidden="true" tabindex="-1"></a>  <span class="co"># convert to lowercase</span></span>
<span id="cb24-13"><a href="#cb24-13" aria-hidden="true" tabindex="-1"></a>  column <span class="ot">&lt;-</span> <span class="fu">fct_relabel</span>(column, tolower)</span>
<span id="cb24-14"><a href="#cb24-14" aria-hidden="true" tabindex="-1"></a>  <span class="fu">factor</span>(column)</span>
<span id="cb24-15"><a href="#cb24-15" aria-hidden="true" tabindex="-1"></a>}</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
</details>
</div>
<hr>
<p>Let’s use the function</p>
<div class="cell">
<details open="" class="code-fold">
<summary>Code</summary>
<div class="sourceCode cell-code" id="annotated-cell-24"><pre class="sourceCode r code-annotation-code code-with-copy code-annotated"><code class="sourceCode r"><span id="annotated-cell-24-1"><a href="#annotated-cell-24-1" aria-hidden="true" tabindex="-1"></a>data_all <span class="ot">&lt;-</span> data_all <span class="sc">|&gt;</span> </span>
<a class="code-annotation-anchor" data-target-cell="annotated-cell-24" data-target-annotation="1" onclick="event.preventDefault();">1</a><span id="annotated-cell-24-2" class="code-annotation-target"><a href="#annotated-cell-24-2" aria-hidden="true" tabindex="-1"></a>  <span class="fu">mutate</span>(<span class="fu">across</span>(<span class="fu">where</span>(is.factor), tidy_responses))</span><div class="code-annotation-gutter-bg"></div><div class="code-annotation-gutter"></div></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
</details>
<div class="cell-annotation">
<dl class="code-annotation-container-grid">
<dt data-target-cell="annotated-cell-24" data-target-annotation="1">1</dt>
<dd>
<span data-code-cell="annotated-cell-24" data-code-lines="2" data-code-annotation="1">We use the tidy selection helper function to limit our mutate to only factors. See <a href="https://tidyselect.r-lib.org/reference/language.html">more details</a> on the tidy selection helpers like <code>all_of()</code> and <code>where()</code></span>
</dd>
</dl>
</div>
</div>
<hr>
<p>Alas, these response labels were pretty poorly chosen so some didn’t convert well. And some are really hard to understand too.</p>
<ul>
<li>Avoid this problem and choose good response labels from the start for your own data</li>
<li>Here, we show you what we got from using <code>tidy_responses()</code></li>
</ul>
<div class="cell">
<details open="" class="code-fold">
<summary>Code</summary>
<div class="sourceCode cell-code" id="cb25"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb25-1"><a href="#cb25-1" aria-hidden="true" tabindex="-1"></a>data_all <span class="sc">|&gt;</span> </span>
<span id="cb25-2"><a href="#cb25-2" aria-hidden="true" tabindex="-1"></a>  <span class="fu">select</span>(<span class="fu">where</span>(is.factor)) <span class="sc">|&gt;</span></span>
<span id="cb25-3"><a href="#cb25-3" aria-hidden="true" tabindex="-1"></a>  <span class="fu">walk</span>(\(column) <span class="fu">print</span>(<span class="fu">levels</span>(column)))</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
</details>
<div class="cell-output cell-output-stdout">
<pre><code> [1] "1"  "2"  "3"  "4"  "5"  "6"  "7"  "8"  "9"  "10"
[1] "no_garage" "po"        "fa"        "ta"        "gd"        "ex"       
[1] "a_agr" "c_all" "fv"    "i_all" "rh"    "rl"    "rm"   
[1] "corner"  "culdsac" "fr2"     "fr3"     "inside" 
[1] "1fam"   "2fmcon" "duplex" "twnhs"  "twnhse"</code></pre>
</div>
</div>
<hr>
<p>Lets clean them up a bit more manually</p>
<div class="cell">
<details open="" class="code-fold">
<summary>Code</summary>
<div class="sourceCode cell-code" id="annotated-cell-26"><pre class="sourceCode r code-annotation-code code-with-copy code-annotated"><code class="sourceCode r"><span id="annotated-cell-26-1"><a href="#annotated-cell-26-1" aria-hidden="true" tabindex="-1"></a>data_all <span class="ot">&lt;-</span> data_all <span class="sc">|&gt;</span> </span>
<span id="annotated-cell-26-2"><a href="#annotated-cell-26-2" aria-hidden="true" tabindex="-1"></a>  <span class="fu">mutate</span>(<span class="at">ms_zoning =</span> <span class="fu">fct_recode</span>(ms_zoning,</span>
<span id="annotated-cell-26-3"><a href="#annotated-cell-26-3" aria-hidden="true" tabindex="-1"></a>                                <span class="at">res_low =</span> <span class="st">"rl"</span>,</span>
<span id="annotated-cell-26-4"><a href="#annotated-cell-26-4" aria-hidden="true" tabindex="-1"></a>                                <span class="at">res_med =</span> <span class="st">"rm"</span>,</span>
<span id="annotated-cell-26-5"><a href="#annotated-cell-26-5" aria-hidden="true" tabindex="-1"></a>                                <span class="at">res_high =</span> <span class="st">"rh"</span>,</span>
<span id="annotated-cell-26-6"><a href="#annotated-cell-26-6" aria-hidden="true" tabindex="-1"></a>                                <span class="at">float =</span> <span class="st">"fv"</span>,</span>
<span id="annotated-cell-26-7"><a href="#annotated-cell-26-7" aria-hidden="true" tabindex="-1"></a>                                <span class="at">agri =</span> <span class="st">"a_agr"</span>,</span>
<span id="annotated-cell-26-8"><a href="#annotated-cell-26-8" aria-hidden="true" tabindex="-1"></a>                                <span class="at">indus =</span> <span class="st">"i_all"</span>,</span>
<span id="annotated-cell-26-9"><a href="#annotated-cell-26-9" aria-hidden="true" tabindex="-1"></a>                                <span class="at">commer =</span> <span class="st">"c_all"</span>),</span>
<a class="code-annotation-anchor" data-target-cell="annotated-cell-26" data-target-annotation="1" onclick="event.preventDefault();">1</a><span id="annotated-cell-26-10" class="code-annotation-target"><a href="#annotated-cell-26-10" aria-hidden="true" tabindex="-1"></a>         <span class="at">bldg_type =</span> <span class="fu">fct_recode</span>(bldg_type,</span>
<span id="annotated-cell-26-11"><a href="#annotated-cell-26-11" aria-hidden="true" tabindex="-1"></a>                                <span class="at">one_fam =</span> <span class="st">"1fam"</span>,</span>
<span id="annotated-cell-26-12"><a href="#annotated-cell-26-12" aria-hidden="true" tabindex="-1"></a>                                <span class="at">two_fam =</span> <span class="st">"2fmcon"</span>,</span>
<span id="annotated-cell-26-13"><a href="#annotated-cell-26-13" aria-hidden="true" tabindex="-1"></a>                                <span class="at">town_end =</span> <span class="st">"twnhse"</span>,</span>
<span id="annotated-cell-26-14"><a href="#annotated-cell-26-14" aria-hidden="true" tabindex="-1"></a>                                <span class="at">town_inside =</span> <span class="st">"twnhs"</span>))</span><div class="code-annotation-gutter-bg"></div><div class="code-annotation-gutter"></div></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
</details>
<div class="cell-annotation">
<dl class="code-annotation-container-grid">
<dt data-target-cell="annotated-cell-26" data-target-annotation="1">1</dt>
<dd>
<span data-code-cell="annotated-cell-26" data-code-lines="10" data-code-annotation="1">Note that I did not need to list all levels in the recode. Only the levels I wanted to change.</span>
</dd>
</dl>
</div>
</div>
<p>The full dataset is now clean!</p>
<hr>
</section>
<section id="trainvalidatetest-splits" class="level3" data-number="2.4.9">
<h3 data-number="2.4.9" class="anchored" data-anchor-id="trainvalidatetest-splits"><span class="header-section-number">2.4.9</span> Train/Validate/Test Splits</h3>
<p>The final task we typically do as part of the data preparation process is to split the full dataset into training, validation and test sets.</p>
<ul>
<li>Test sets are “typically” between 20-30% of your full dataset
<ul>
<li>There are costs and benefits to larger test sets</li>
<li>We will learn about these costs/benefits in the unit on resampling</li>
<li>I have already held out the test set</li>
</ul></li>
<li>There are many approaches to validation sets
<ul>
<li>For now (until unit 5) we will use a single validation set approach</li>
<li>We will use 25% of the remaining data (after holding out the test set) as a validation set for this example</li>
</ul></li>
<li>It is typical to split data on the outcome within strata
<ul>
<li>For a categorical outcome, this makes the proportions of the response categories more balanced across the train, validation, and test sets</li>
<li>For a numeric outcome, we first break up the distribution into temporary bins (see <code>breaks = 4</code> below) and then we split within these bins</li>
</ul></li>
<li><strong>IMPORTANT</strong>: Set a seed so that you can reproduce these splits if you later do more cleaning</li>
</ul>
<div class="cell">
<details open="" class="code-fold">
<summary>Code</summary>
<div class="sourceCode cell-code" id="cb27"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb27-1"><a href="#cb27-1" aria-hidden="true" tabindex="-1"></a><span class="fu">set.seed</span>(<span class="dv">20110522</span>)</span>
<span id="cb27-2"><a href="#cb27-2" aria-hidden="true" tabindex="-1"></a>splits <span class="ot">&lt;-</span> data_all <span class="sc">|&gt;</span> </span>
<span id="cb27-3"><a href="#cb27-3" aria-hidden="true" tabindex="-1"></a>  <span class="fu">initial_split</span>(<span class="at">prop =</span> <span class="dv">3</span><span class="sc">/</span><span class="dv">4</span>, <span class="at">strata =</span> <span class="st">"sale_price"</span>, <span class="at">breaks =</span> <span class="dv">4</span>)</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
</details>
</div>
<div class="callout callout-style-default callout-tip no-icon callout-titled">
<div class="callout-header d-flex align-content-center">
<div class="callout-icon-container">
<i class="callout-icon no-icon"></i>
</div>
<div class="callout-title-container flex-fill">
Coding Note
</div>
</div>
<div class="callout-body-container callout-body">
<p><code>initial_split()</code> is used to create two resamples of your data. This was used here because we already had a test set held out (outside of the code presented). We use <code>analysis()</code> and <code>assessment()</code> to extract these two resamples.</p>
<p>We will later use <code>initial_validation_split()</code> to create 3 resamples: training, validation, and test. We will extract those three resamples using <code>training()</code>, <code>validation()</code>, and testing()`</p>
</div>
</div>
<hr>
<p>We then extract the training set from the splits and save it</p>
<ul>
<li>Training sets are used for “analysis”- hence the name of the function</li>
</ul>
<div class="cell">
<details open="" class="code-fold">
<summary>Code</summary>
<div class="sourceCode cell-code" id="annotated-cell-28"><pre class="sourceCode r code-annotation-code code-with-copy code-annotated"><code class="sourceCode r"><span id="annotated-cell-28-1"><a href="#annotated-cell-28-1" aria-hidden="true" tabindex="-1"></a>splits <span class="sc">|&gt;</span> </span>
<a class="code-annotation-anchor" data-target-cell="annotated-cell-28" data-target-annotation="1" onclick="event.preventDefault();">1</a><span id="annotated-cell-28-2" class="code-annotation-target"><a href="#annotated-cell-28-2" aria-hidden="true" tabindex="-1"></a>  <span class="fu">analysis</span>() <span class="sc">|&gt;</span></span>
<span id="annotated-cell-28-3"><a href="#annotated-cell-28-3" aria-hidden="true" tabindex="-1"></a>  <span class="fu">glimpse</span>() <span class="sc">|&gt;</span> </span>
<span id="annotated-cell-28-4"><a href="#annotated-cell-28-4" aria-hidden="true" tabindex="-1"></a>  <span class="fu">write_csv</span>(here<span class="sc">::</span><span class="fu">here</span>(path_data, <span class="st">"ames_clean_class_trn.csv"</span>))</span><div class="code-annotation-gutter-bg"></div><div class="code-annotation-gutter"></div></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
</details>
<div class="cell-annotation">
<dl class="code-annotation-container-grid">
<dt data-target-cell="annotated-cell-28" data-target-annotation="1">1</dt>
<dd>
<span data-code-cell="annotated-cell-28" data-code-lines="2" data-code-annotation="1"><code>analysis()</code> pulls out the training set from our splits of <code>data_all</code></span>
</dd>
</dl>
</div>
<div class="cell-output cell-output-stdout">
<pre><code>Rows: 1,465
Columns: 10
$ sale_price   &lt;dbl&gt; 105000, 126000, 115000, 120000, 99500, 112000, 122000, 12…
$ gr_liv_area  &lt;dbl&gt; 896, 882, 864, 836, 918, 1902, 900, 1225, 1728, 858, 1306…
$ lot_area     &lt;dbl&gt; 11622, 8400, 10500, 2280, 7892, 8930, 9819, 9320, 13260, …
$ year_built   &lt;dbl&gt; 1961, 1970, 1971, 1975, 1979, 1978, 1967, 1959, 1962, 195…
$ overall_qual &lt;fct&gt; 5, 4, 4, 7, 6, 6, 5, 4, 5, 5, 3, 5, 4, 5, 3, 5, 2, 6, 5, …
$ garage_cars  &lt;dbl&gt; 1, 2, 0, 1, 1, 2, 1, 0, 0, 0, 0, 1, 2, 2, 1, 1, 2, 2, 1, …
$ garage_qual  &lt;fct&gt; ta, ta, no_garage, ta, ta, ta, ta, no_garage, no_garage, …
$ ms_zoning    &lt;fct&gt; res_high, res_low, res_low, res_low, res_low, res_med, re…
$ lot_config   &lt;fct&gt; inside, corner, fr2, fr2, inside, inside, inside, inside,…
$ bldg_type    &lt;fct&gt; one_fam, one_fam, one_fam, town_inside, town_end, duplex,…</code></pre>
</div>
</div>
<hr>
<p>We will not need the validation set for modeling EDA</p>
<ul>
<li>It should NOT be used for anything other than calculating performance metrics for our many model configurations to select the best model configuration</li>
<li>We do NOT do Modeling EDA or Model Fitting with the validation set</li>
<li>Save it in this clean form for easy use when you need it</li>
<li>We use the validation set to “assess” (calculate performance metrics for selection) models that we have fit in training sets - hence the name of the function</li>
</ul>
<div class="cell">
<details open="" class="code-fold">
<summary>Code</summary>
<div class="sourceCode cell-code" id="annotated-cell-29"><pre class="sourceCode r code-annotation-code code-with-copy code-annotated"><code class="sourceCode r"><span id="annotated-cell-29-1"><a href="#annotated-cell-29-1" aria-hidden="true" tabindex="-1"></a>splits <span class="sc">|&gt;</span> </span>
<a class="code-annotation-anchor" data-target-cell="annotated-cell-29" data-target-annotation="1" onclick="event.preventDefault();">1</a><span id="annotated-cell-29-2" class="code-annotation-target"><a href="#annotated-cell-29-2" aria-hidden="true" tabindex="-1"></a>  <span class="fu">assessment</span>() <span class="sc">|&gt;</span></span>
<span id="annotated-cell-29-3"><a href="#annotated-cell-29-3" aria-hidden="true" tabindex="-1"></a>  <span class="fu">glimpse</span>() <span class="sc">|&gt;</span> </span>
<span id="annotated-cell-29-4"><a href="#annotated-cell-29-4" aria-hidden="true" tabindex="-1"></a>  <span class="fu">write_csv</span>(here<span class="sc">::</span><span class="fu">here</span>(path_data, <span class="st">"ames_clean_class_val.csv"</span>))</span><div class="code-annotation-gutter-bg"></div><div class="code-annotation-gutter"></div></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
</details>
<div class="cell-annotation">
<dl class="code-annotation-container-grid">
<dt data-target-cell="annotated-cell-29" data-target-annotation="1">1</dt>
<dd>
<span data-code-cell="annotated-cell-29" data-code-lines="2" data-code-annotation="1"><code>assessment()</code> pulls out the validation set from our splits of <code>data_all</code></span>
</dd>
</dl>
</div>
<div class="cell-output cell-output-stdout">
<pre><code>Rows: 490
Columns: 10
$ sale_price   &lt;dbl&gt; 215000, 189900, 189000, 171500, 212000, 164000, 394432, 1…
$ gr_liv_area  &lt;dbl&gt; 1656, 1629, 1804, 1341, 1502, 1752, 1856, 1004, 1092, 106…
$ lot_area     &lt;dbl&gt; 31770, 13830, 7500, 10176, 6820, 12134, 11394, 11241, 168…
$ year_built   &lt;dbl&gt; 1960, 1997, 1999, 1990, 1985, 1988, 2010, 1970, 1971, 197…
$ overall_qual &lt;fct&gt; 6, 5, 7, 7, 8, 8, 9, 6, 5, 6, 7, 9, 8, 8, 7, 8, 6, 5, 5, …
$ garage_cars  &lt;dbl&gt; 2, 2, 2, 2, 2, 2, 3, 2, 1, 2, 2, 2, 2, 3, 2, 3, 1, 1, 2, …
$ garage_qual  &lt;fct&gt; ta, ta, ta, ta, ta, ta, ta, ta, ta, ta, ta, ta, ta, ta, t…
$ ms_zoning    &lt;fct&gt; res_low, res_low, res_low, res_low, res_low, res_low, res…
$ lot_config   &lt;fct&gt; corner, inside, inside, inside, corner, inside, corner, c…
$ bldg_type    &lt;fct&gt; one_fam, one_fam, one_fam, one_fam, town_end, one_fam, on…</code></pre>
</div>
</div>
<hr>
</section>
</section>
<section id="exploratory-data-analysis-for-modeling" class="level2" data-number="2.5">
<h2 data-number="2.5" class="anchored" data-anchor-id="exploratory-data-analysis-for-modeling"><span class="header-section-number">2.5</span> Exploratory Data Analysis for Modeling</h2>
<p>Now let’s begin our Modeling EDA</p>
<p>We prefer to write separate scripts for Cleaning vs.&nbsp;Modeling EDA (but not displayed here)</p>
<ul>
<li>This keeps these two processes separate in our minds</li>
<li>Cleaning EDA is done with full dataset but Modeling EDA is only done with a training set - NEVER use validation or test set</li>
<li>You will use two separate scripts for the application assignment for this unit</li>
</ul>
<hr>
<p>Lets re-load (and glimpse) our training set to pretend we are at the start of a new script.</p>
<div class="cell">
<details open="" class="code-fold">
<summary>Code</summary>
<div class="sourceCode cell-code" id="cb30"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb30-1"><a href="#cb30-1" aria-hidden="true" tabindex="-1"></a> data_trn <span class="ot">&lt;-</span> <span class="fu">read_csv</span>(here<span class="sc">::</span><span class="fu">here</span>(path_data, <span class="st">"ames_clean_class_trn.csv"</span>)) <span class="sc">|&gt;</span> </span>
<span id="cb30-2"><a href="#cb30-2" aria-hidden="true" tabindex="-1"></a>  <span class="fu">glimpse</span>()</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
</details>
<div class="cell-output cell-output-stderr">
<pre><code>Rows: 1465 Columns: 10
── Column specification ────────────────────────────────────────────────────────
Delimiter: ","
chr (4): garage_qual, ms_zoning, lot_config, bldg_type
dbl (6): sale_price, gr_liv_area, lot_area, year_built, overall_qual, garage...

ℹ Use `spec()` to retrieve the full column specification for this data.
ℹ Specify the column types or set `show_col_types = FALSE` to quiet this message.</code></pre>
</div>
<div class="cell-output cell-output-stdout">
<pre><code>Rows: 1,465
Columns: 10
$ sale_price   &lt;dbl&gt; 105000, 126000, 115000, 120000, 99500, 112000, 122000, 12…
$ gr_liv_area  &lt;dbl&gt; 896, 882, 864, 836, 918, 1902, 900, 1225, 1728, 858, 1306…
$ lot_area     &lt;dbl&gt; 11622, 8400, 10500, 2280, 7892, 8930, 9819, 9320, 13260, …
$ year_built   &lt;dbl&gt; 1961, 1970, 1971, 1975, 1979, 1978, 1967, 1959, 1962, 195…
$ overall_qual &lt;dbl&gt; 5, 4, 4, 7, 6, 6, 5, 4, 5, 5, 3, 5, 4, 5, 3, 5, 2, 6, 5, …
$ garage_cars  &lt;dbl&gt; 1, 2, 0, 1, 1, 2, 1, 0, 0, 0, 0, 1, 2, 2, 1, 1, 2, 2, 1, …
$ garage_qual  &lt;chr&gt; "ta", "ta", "no_garage", "ta", "ta", "ta", "ta", "no_gara…
$ ms_zoning    &lt;chr&gt; "res_high", "res_low", "res_low", "res_low", "res_low", "…
$ lot_config   &lt;chr&gt; "inside", "corner", "fr2", "fr2", "inside", "inside", "in…
$ bldg_type    &lt;chr&gt; "one_fam", "one_fam", "one_fam", "town_inside", "town_end…</code></pre>
</div>
</div>
<hr>
<p>We have some work to do (again)</p>
<ul>
<li>Notice that <code>overall_qual</code> is back to being classed as numeric (dbl).<br>
</li>
<li>Notice that your factors are back to character
<ul>
<li>This is because csv files don’t save anything other than the values (labels for factors). They are the cleaned labels though!</li>
</ul></li>
<li>You should class all variables using the same approach as before (often just a copy/paste).</li>
</ul>
<div class="cell">
<details open="" class="code-fold">
<summary>Code</summary>
<div class="sourceCode cell-code" id="annotated-cell-31"><pre class="sourceCode r code-annotation-code code-with-copy code-annotated"><code class="sourceCode r"><span id="annotated-cell-31-1"><a href="#annotated-cell-31-1" aria-hidden="true" tabindex="-1"></a> data_trn <span class="ot">&lt;-</span> </span>
<span id="annotated-cell-31-2"><a href="#annotated-cell-31-2" aria-hidden="true" tabindex="-1"></a>  <span class="fu">read_csv</span>(here<span class="sc">::</span><span class="fu">here</span>(path_data, <span class="st">"ames_clean_class_trn.csv"</span>), </span>
<a class="code-annotation-anchor" data-target-cell="annotated-cell-31" data-target-annotation="1" onclick="event.preventDefault();">1</a><span id="annotated-cell-31-3" class="code-annotation-target"><a href="#annotated-cell-31-3" aria-hidden="true" tabindex="-1"></a>           <span class="at">col_types =</span> <span class="fu">cols</span>()) <span class="sc">|&gt;</span></span>
<a class="code-annotation-anchor" data-target-cell="annotated-cell-31" data-target-annotation="2" onclick="event.preventDefault();">2</a><span id="annotated-cell-31-4" class="code-annotation-target"><a href="#annotated-cell-31-4" aria-hidden="true" tabindex="-1"></a>  <span class="fu">mutate</span>(<span class="fu">across</span>(<span class="fu">where</span>(is.character), factor)) <span class="sc">|&gt;</span></span>
<a class="code-annotation-anchor" data-target-cell="annotated-cell-31" data-target-annotation="3" onclick="event.preventDefault();">3</a><span id="annotated-cell-31-5" class="code-annotation-target"><a href="#annotated-cell-31-5" aria-hidden="true" tabindex="-1"></a>  <span class="fu">mutate</span>(<span class="at">overall_qual =</span> <span class="fu">factor</span>(overall_qual, <span class="at">levels =</span> <span class="dv">1</span><span class="sc">:</span><span class="dv">10</span>),</span>
<span id="annotated-cell-31-6"><a href="#annotated-cell-31-6" aria-hidden="true" tabindex="-1"></a>         <span class="at">garage_qual =</span> <span class="fu">fct_relevel</span>(garage_qual, <span class="fu">c</span>(<span class="st">"no_garage"</span>, <span class="st">"po"</span>, <span class="st">"fa"</span>, </span>
<a class="code-annotation-anchor" data-target-cell="annotated-cell-31" data-target-annotation="4" onclick="event.preventDefault();">4</a><span id="annotated-cell-31-7" class="code-annotation-target"><a href="#annotated-cell-31-7" aria-hidden="true" tabindex="-1"></a>                                                  <span class="st">"ta"</span>, <span class="st">"gd"</span>, <span class="st">"ex"</span>))) <span class="sc">|&gt;</span></span>
<span id="annotated-cell-31-8"><a href="#annotated-cell-31-8" aria-hidden="true" tabindex="-1"></a>  <span class="fu">glimpse</span>()</span><div class="code-annotation-gutter-bg"></div><div class="code-annotation-gutter"></div></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
</details>
<div class="cell-annotation">
<dl class="code-annotation-container-grid">
<dt data-target-cell="annotated-cell-31" data-target-annotation="1">1</dt>
<dd>
<span data-code-cell="annotated-cell-31" data-code-lines="3" data-code-annotation="1">use col_types = cols() to suppress messages about default class assignments</span>
</dd>
<dt data-target-cell="annotated-cell-31" data-target-annotation="2">2</dt>
<dd>
<span data-code-cell="annotated-cell-31" data-code-lines="4" data-code-annotation="2">use <code>mutate()</code> with <code>across()</code> to change all character variables to factors</span>
</dd>
<dt data-target-cell="annotated-cell-31" data-target-annotation="3">3</dt>
<dd>
<span data-code-cell="annotated-cell-31" data-code-lines="5" data-code-annotation="3">use <code>mutate()</code> with <code>factor()</code> to change numeric variable to factor.</span>
</dd>
<dt data-target-cell="annotated-cell-31" data-target-annotation="4">4</dt>
<dd>
<span data-code-cell="annotated-cell-31" data-code-lines="7" data-code-annotation="4">use <code>mutate()</code> with <code>fct_relevel()</code> to explicitly set levels of an ordinal factor. Also notice the warning about the unknown level. Always explore warnings! In this instance, its fine. There were only two observations with ex and neither ended up in the training split. Still best to include this level to note it exists!</span>
</dd>
</dl>
</div>
<div class="cell-output cell-output-stdout">
<pre><code>Rows: 1,465
Columns: 10
$ sale_price   &lt;dbl&gt; 105000, 126000, 115000, 120000, 99500, 112000, 122000, 12…
$ gr_liv_area  &lt;dbl&gt; 896, 882, 864, 836, 918, 1902, 900, 1225, 1728, 858, 1306…
$ lot_area     &lt;dbl&gt; 11622, 8400, 10500, 2280, 7892, 8930, 9819, 9320, 13260, …
$ year_built   &lt;dbl&gt; 1961, 1970, 1971, 1975, 1979, 1978, 1967, 1959, 1962, 195…
$ overall_qual &lt;fct&gt; 5, 4, 4, 7, 6, 6, 5, 4, 5, 5, 3, 5, 4, 5, 3, 5, 2, 6, 5, …
$ garage_cars  &lt;dbl&gt; 1, 2, 0, 1, 1, 2, 1, 0, 0, 0, 0, 1, 2, 2, 1, 1, 2, 2, 1, …
$ garage_qual  &lt;fct&gt; ta, ta, no_garage, ta, ta, ta, ta, no_garage, no_garage, …
$ ms_zoning    &lt;fct&gt; res_high, res_low, res_low, res_low, res_low, res_med, re…
$ lot_config   &lt;fct&gt; inside, corner, fr2, fr2, inside, inside, inside, inside,…
$ bldg_type    &lt;fct&gt; one_fam, one_fam, one_fam, town_inside, town_end, duplex,…</code></pre>
</div>
</div>
<hr>
<div class="callout callout-style-default callout-tip no-icon callout-titled">
<div class="callout-header d-flex align-content-center">
<div class="callout-icon-container">
<i class="callout-icon no-icon"></i>
</div>
<div class="callout-title-container flex-fill">
Coding sidebar
</div>
</div>
<div class="callout-body-container callout-body">
<p>We will likely re-class the Ames dataset many times (for training, validation, test). We could copy/paste these mutates each time but whenever you do something more than twice, I recommend writing a function. We might write this one to re-class the ames variables</p>
</div>
</div>
<div class="cell">
<details open="" class="code-fold">
<summary>Code</summary>
<div class="sourceCode cell-code" id="cb34"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb34-1"><a href="#cb34-1" aria-hidden="true" tabindex="-1"></a>class_ames <span class="ot">&lt;-</span> <span class="cf">function</span>(df){</span>
<span id="cb34-2"><a href="#cb34-2" aria-hidden="true" tabindex="-1"></a>  </span>
<span id="cb34-3"><a href="#cb34-3" aria-hidden="true" tabindex="-1"></a>  df <span class="sc">|&gt;</span></span>
<span id="cb34-4"><a href="#cb34-4" aria-hidden="true" tabindex="-1"></a>    <span class="fu">mutate</span>(<span class="fu">across</span>(<span class="fu">where</span>(is.character), factor)) <span class="sc">|&gt;</span> </span>
<span id="cb34-5"><a href="#cb34-5" aria-hidden="true" tabindex="-1"></a>    <span class="fu">mutate</span>(<span class="at">overall_qual =</span> <span class="fu">factor</span>(overall_qual, <span class="at">levels =</span> <span class="dv">1</span><span class="sc">:</span><span class="dv">10</span>), </span>
<span id="cb34-6"><a href="#cb34-6" aria-hidden="true" tabindex="-1"></a>           <span class="at">garage_qual =</span> <span class="fu">fct_relevel</span>(garage_qual, <span class="fu">c</span>(<span class="st">"no_garage"</span>, <span class="st">"po"</span>, <span class="st">"fa"</span>, </span>
<span id="cb34-7"><a href="#cb34-7" aria-hidden="true" tabindex="-1"></a>                                                    <span class="st">"ta"</span>, <span class="st">"gd"</span>, <span class="st">"ex"</span>)))</span>
<span id="cb34-8"><a href="#cb34-8" aria-hidden="true" tabindex="-1"></a>}</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
</details>
</div>
<hr>
<p>Now we can use this function every time we read in one of the Ames datasets</p>
<div class="cell">
<details open="" class="code-fold">
<summary>Code</summary>
<div class="sourceCode cell-code" id="annotated-cell-33"><pre class="sourceCode r code-annotation-code code-with-copy code-annotated"><code class="sourceCode r"><span id="annotated-cell-33-1"><a href="#annotated-cell-33-1" aria-hidden="true" tabindex="-1"></a>data_trn <span class="ot">&lt;-</span> </span>
<span id="annotated-cell-33-2"><a href="#annotated-cell-33-2" aria-hidden="true" tabindex="-1"></a>  <span class="fu">read_csv</span>(here<span class="sc">::</span><span class="fu">here</span>(path_data, <span class="st">"ames_clean_class_trn.csv"</span>), </span>
<span id="annotated-cell-33-3"><a href="#annotated-cell-33-3" aria-hidden="true" tabindex="-1"></a>           <span class="at">col_types =</span> <span class="fu">cols</span>()) <span class="sc">|&gt;</span> </span>
<a class="code-annotation-anchor" data-target-cell="annotated-cell-33" data-target-annotation="1" onclick="event.preventDefault();">1</a><span id="annotated-cell-33-4" class="code-annotation-target"><a href="#annotated-cell-33-4" aria-hidden="true" tabindex="-1"></a>  <span class="fu">class_ames</span>() <span class="sc">|&gt;</span></span>
<span id="annotated-cell-33-5"><a href="#annotated-cell-33-5" aria-hidden="true" tabindex="-1"></a>  <span class="fu">glimpse</span>()</span><div class="code-annotation-gutter-bg"></div><div class="code-annotation-gutter"></div></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
</details>
<div class="cell-annotation">
<dl class="code-annotation-container-grid">
<dt data-target-cell="annotated-cell-33" data-target-annotation="1">1</dt>
<dd>
<span data-code-cell="annotated-cell-33" data-code-lines="4" data-code-annotation="1">Using our new function!</span>
</dd>
</dl>
</div>
<div class="cell-output cell-output-stdout">
<pre><code>Rows: 1,465
Columns: 10
$ sale_price   &lt;dbl&gt; 105000, 126000, 115000, 120000, 99500, 112000, 122000, 12…
$ gr_liv_area  &lt;dbl&gt; 896, 882, 864, 836, 918, 1902, 900, 1225, 1728, 858, 1306…
$ lot_area     &lt;dbl&gt; 11622, 8400, 10500, 2280, 7892, 8930, 9819, 9320, 13260, …
$ year_built   &lt;dbl&gt; 1961, 1970, 1971, 1975, 1979, 1978, 1967, 1959, 1962, 195…
$ overall_qual &lt;fct&gt; 5, 4, 4, 7, 6, 6, 5, 4, 5, 5, 3, 5, 4, 5, 3, 5, 2, 6, 5, …
$ garage_cars  &lt;dbl&gt; 1, 2, 0, 1, 1, 2, 1, 0, 0, 0, 0, 1, 2, 2, 1, 1, 2, 2, 1, …
$ garage_qual  &lt;fct&gt; ta, ta, no_garage, ta, ta, ta, ta, no_garage, no_garage, …
$ ms_zoning    &lt;fct&gt; res_high, res_low, res_low, res_low, res_low, res_med, re…
$ lot_config   &lt;fct&gt; inside, corner, fr2, fr2, inside, inside, inside, inside,…
$ bldg_type    &lt;fct&gt; one_fam, one_fam, one_fam, town_inside, town_end, duplex,…</code></pre>
</div>
</div>
<hr>
<p>There are 3 basic types of Modeling EDA you should always do</p>
<ol type="1">
<li>Explore missingness for predictors</li>
<li>Explore univariate distributions for outcome and predictors</li>
<li>Explore bivariate relationships between predictors and outcome</li>
</ol>
<p>As a result of this exploration, we will:</p>
<ul>
<li>Identify promising predictors</li>
<li>Determine appropriate feature engineering for those predictors (e.g., transformations)</li>
<li>Identify outliers and consider how to handle when model building</li>
<li>Consider how to handle imputation for missing data (if any)</li>
</ul>
<hr>
<section id="overall-summary-of-feature-matrix" class="level3" data-number="2.5.1">
<h3 data-number="2.5.1" class="anchored" data-anchor-id="overall-summary-of-feature-matrix"><span class="header-section-number">2.5.1</span> Overall Summary of Feature Matrix</h3>
<p>Before we dig into individual variables and their distributions and relationships with the outcome, it’s nice to start with a big picture of the dataset</p>
<ul>
<li>We use another customized version of <code>skim()</code> from the <code>skimr</code> package to provide this</li>
<li>Just needed to augment it with skewness and kurtosis statistics for numeric variables</li>
<li>and remove histogram b/c we don’t find that small histogram useful</li>
<li>included in <code>fun_eda.R</code> on github</li>
</ul>
<div class="cell">
<details open="" class="code-fold">
<summary>Code</summary>
<div class="sourceCode cell-code" id="cb36"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb36-1"><a href="#cb36-1" aria-hidden="true" tabindex="-1"></a>skew_na <span class="ot">&lt;-</span> <span class="fu">partial</span>(e1071<span class="sc">::</span>skewness, <span class="at">na.rm =</span> <span class="cn">TRUE</span>)</span>
<span id="cb36-2"><a href="#cb36-2" aria-hidden="true" tabindex="-1"></a>kurt_na <span class="ot">&lt;-</span> <span class="fu">partial</span>(e1071<span class="sc">::</span>kurtosis, <span class="at">na.rm =</span> <span class="cn">TRUE</span>)</span>
<span id="cb36-3"><a href="#cb36-3" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb36-4"><a href="#cb36-4" aria-hidden="true" tabindex="-1"></a>skim_all <span class="ot">&lt;-</span> skimr<span class="sc">::</span><span class="fu">skim_with</span>(<span class="at">numeric =</span> skimr<span class="sc">::</span><span class="fu">sfl</span>(<span class="at">skew =</span> skew_na, </span>
<span id="cb36-5"><a href="#cb36-5" aria-hidden="true" tabindex="-1"></a>                                                  <span class="at">kurtosis =</span> kurt_na, </span>
<span id="cb36-6"><a href="#cb36-6" aria-hidden="true" tabindex="-1"></a>                                                  <span class="at">hist =</span> <span class="cn">NULL</span>))</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
</details>
</div>
<hr>
<p>Careful review of this output provides a great orientation to our data</p>
<div class="cell">
<details open="" class="code-fold">
<summary>Code</summary>
<div class="sourceCode cell-code" id="cb37"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb37-1"><a href="#cb37-1" aria-hidden="true" tabindex="-1"></a>data_trn <span class="sc">|&gt;</span> </span>
<span id="cb37-2"><a href="#cb37-2" aria-hidden="true" tabindex="-1"></a>  <span class="fu">skim_all</span>()</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
</details>
<div class="cell-output-display">
<table class="caption-top table table-sm table-striped small">
<caption>Data summary</caption>
<tbody>
<tr class="odd">
<td style="text-align: left;">Name</td>
<td style="text-align: left;">data_trn</td>
</tr>
<tr class="even">
<td style="text-align: left;">Number of rows</td>
<td style="text-align: left;">1465</td>
</tr>
<tr class="odd">
<td style="text-align: left;">Number of columns</td>
<td style="text-align: left;">10</td>
</tr>
<tr class="even">
<td style="text-align: left;">_______________________</td>
<td style="text-align: left;"></td>
</tr>
<tr class="odd">
<td style="text-align: left;">Column type frequency:</td>
<td style="text-align: left;"></td>
</tr>
<tr class="even">
<td style="text-align: left;">factor</td>
<td style="text-align: left;">5</td>
</tr>
<tr class="odd">
<td style="text-align: left;">numeric</td>
<td style="text-align: left;">5</td>
</tr>
<tr class="even">
<td style="text-align: left;">________________________</td>
<td style="text-align: left;"></td>
</tr>
<tr class="odd">
<td style="text-align: left;">Group variables</td>
<td style="text-align: left;">None</td>
</tr>
</tbody>
</table>
<p><strong>Variable type: factor</strong></p>
<table class="caption-top table table-sm table-striped small">
<colgroup>
<col style="width: 16%">
<col style="width: 11%">
<col style="width: 16%">
<col style="width: 10%">
<col style="width: 44%">
</colgroup>
<thead>
<tr class="header">
<th style="text-align: left;">skim_variable</th>
<th style="text-align: right;">n_missing</th>
<th style="text-align: right;">complete_rate</th>
<th style="text-align: right;">n_unique</th>
<th style="text-align: left;">top_counts</th>
</tr>
</thead>
<tbody>
<tr class="odd">
<td style="text-align: left;">overall_qual</td>
<td style="text-align: right;">0</td>
<td style="text-align: right;">1</td>
<td style="text-align: right;">10</td>
<td style="text-align: left;">5: 424, 6: 350, 7: 304, 8: 176</td>
</tr>
<tr class="even">
<td style="text-align: left;">garage_qual</td>
<td style="text-align: right;">0</td>
<td style="text-align: right;">1</td>
<td style="text-align: right;">5</td>
<td style="text-align: left;">ta: 1312, no_: 81, fa: 57, gd: 13</td>
</tr>
<tr class="odd">
<td style="text-align: left;">ms_zoning</td>
<td style="text-align: right;">0</td>
<td style="text-align: right;">1</td>
<td style="text-align: right;">7</td>
<td style="text-align: left;">res: 1157, res: 217, flo: 66, com: 13</td>
</tr>
<tr class="even">
<td style="text-align: left;">lot_config</td>
<td style="text-align: right;">0</td>
<td style="text-align: right;">1</td>
<td style="text-align: right;">5</td>
<td style="text-align: left;">ins: 1095, cor: 248, cul: 81, fr2: 39</td>
</tr>
<tr class="odd">
<td style="text-align: left;">bldg_type</td>
<td style="text-align: right;">0</td>
<td style="text-align: right;">1</td>
<td style="text-align: right;">5</td>
<td style="text-align: left;">one: 1216, tow: 108, dup: 63, tow: 46</td>
</tr>
</tbody>
</table>
<p><strong>Variable type: numeric</strong></p>
<table class="caption-top table table-sm table-striped small">
<colgroup>
<col style="width: 13%">
<col style="width: 9%">
<col style="width: 13%">
<col style="width: 9%">
<col style="width: 8%">
<col style="width: 5%">
<col style="width: 6%">
<col style="width: 6%">
<col style="width: 6%">
<col style="width: 6%">
<col style="width: 5%">
<col style="width: 8%">
</colgroup>
<thead>
<tr class="header">
<th style="text-align: left;">skim_variable</th>
<th style="text-align: right;">n_missing</th>
<th style="text-align: right;">complete_rate</th>
<th style="text-align: right;">mean</th>
<th style="text-align: right;">sd</th>
<th style="text-align: right;">p0</th>
<th style="text-align: right;">p25</th>
<th style="text-align: right;">p50</th>
<th style="text-align: right;">p75</th>
<th style="text-align: right;">p100</th>
<th style="text-align: right;">skew</th>
<th style="text-align: right;">kurtosis</th>
</tr>
</thead>
<tbody>
<tr class="odd">
<td style="text-align: left;">sale_price</td>
<td style="text-align: right;">0</td>
<td style="text-align: right;">1</td>
<td style="text-align: right;">180696.15</td>
<td style="text-align: right;">78836.41</td>
<td style="text-align: right;">12789</td>
<td style="text-align: right;">129500</td>
<td style="text-align: right;">160000</td>
<td style="text-align: right;">213500</td>
<td style="text-align: right;">745000</td>
<td style="text-align: right;">1.64</td>
<td style="text-align: right;">4.60</td>
</tr>
<tr class="even">
<td style="text-align: left;">gr_liv_area</td>
<td style="text-align: right;">0</td>
<td style="text-align: right;">1</td>
<td style="text-align: right;">1506.84</td>
<td style="text-align: right;">511.44</td>
<td style="text-align: right;">438</td>
<td style="text-align: right;">1128</td>
<td style="text-align: right;">1450</td>
<td style="text-align: right;">1759</td>
<td style="text-align: right;">5642</td>
<td style="text-align: right;">1.43</td>
<td style="text-align: right;">5.19</td>
</tr>
<tr class="odd">
<td style="text-align: left;">lot_area</td>
<td style="text-align: right;">0</td>
<td style="text-align: right;">1</td>
<td style="text-align: right;">10144.16</td>
<td style="text-align: right;">8177.55</td>
<td style="text-align: right;">1476</td>
<td style="text-align: right;">7500</td>
<td style="text-align: right;">9375</td>
<td style="text-align: right;">11362</td>
<td style="text-align: right;">164660</td>
<td style="text-align: right;">11.20</td>
<td style="text-align: right;">182.91</td>
</tr>
<tr class="even">
<td style="text-align: left;">year_built</td>
<td style="text-align: right;">0</td>
<td style="text-align: right;">1</td>
<td style="text-align: right;">1971.35</td>
<td style="text-align: right;">29.65</td>
<td style="text-align: right;">1880</td>
<td style="text-align: right;">1953</td>
<td style="text-align: right;">1972</td>
<td style="text-align: right;">2000</td>
<td style="text-align: right;">2010</td>
<td style="text-align: right;">-0.54</td>
<td style="text-align: right;">-0.62</td>
</tr>
<tr class="odd">
<td style="text-align: left;">garage_cars</td>
<td style="text-align: right;">1</td>
<td style="text-align: right;">1</td>
<td style="text-align: right;">1.78</td>
<td style="text-align: right;">0.76</td>
<td style="text-align: right;">0</td>
<td style="text-align: right;">1</td>
<td style="text-align: right;">2</td>
<td style="text-align: right;">2</td>
<td style="text-align: right;">4</td>
<td style="text-align: right;">-0.26</td>
<td style="text-align: right;">0.10</td>
</tr>
</tbody>
</table>
</div>
</div>
<hr>
</section>
<section id="univariate-distributions" class="level3" data-number="2.5.2">
<h3 data-number="2.5.2" class="anchored" data-anchor-id="univariate-distributions"><span class="header-section-number">2.5.2</span> Univariate Distributions</h3>
<p>Exploration of univariate distributions are useful to</p>
<ul>
<li>Understand variation and distributional shape</li>
<li>May suggest need to consider transformations as part of feature engineering</li>
<li>Can identify univariate outliers (valid but disconnected from distribution so not detected in cleaning)</li>
</ul>
<p>We generally select different visualizations and summary statistics for categorical vs.&nbsp;numeric variables</p>
<hr>
</section>
<section id="barplots-for-categorical-variables-univariate" class="level3" data-number="2.5.3">
<h3 data-number="2.5.3" class="anchored" data-anchor-id="barplots-for-categorical-variables-univariate"><span class="header-section-number">2.5.3</span> Barplots for Categorical Variables (Univariate)</h3>
<p>The primary visualization for categorical variables is the bar plot</p>
<ul>
<li>We use it for both nominal and ordinal variables</li>
<li>Define and customize it within a function for repeated use.<br>
</li>
<li>We share this and all the remaining plots used in this unit in <code>fun_plot.R</code>. Source it to use them without having to re-code each time</li>
</ul>
<div class="cell">
<details open="" class="code-fold">
<summary>Code</summary>
<div class="sourceCode cell-code" id="cb38"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb38-1"><a href="#cb38-1" aria-hidden="true" tabindex="-1"></a>plot_bar <span class="ot">&lt;-</span> <span class="cf">function</span>(df, x){</span>
<span id="cb38-2"><a href="#cb38-2" aria-hidden="true" tabindex="-1"></a>  x_label_size <span class="ot">&lt;-</span> <span class="fu">if_else</span>(skimr<span class="sc">::</span><span class="fu">n_unique</span>(df[[x]]) <span class="sc">&lt;</span> <span class="dv">7</span>, <span class="dv">11</span>, <span class="dv">7</span>)</span>
<span id="cb38-3"><a href="#cb38-3" aria-hidden="true" tabindex="-1"></a>  </span>
<span id="cb38-4"><a href="#cb38-4" aria-hidden="true" tabindex="-1"></a>  df <span class="sc">|&gt;</span></span>
<span id="cb38-5"><a href="#cb38-5" aria-hidden="true" tabindex="-1"></a>    <span class="fu">ggplot</span>(<span class="fu">aes</span>(<span class="at">x =</span> .data[[x]])) <span class="sc">+</span></span>
<span id="cb38-6"><a href="#cb38-6" aria-hidden="true" tabindex="-1"></a>    <span class="fu">geom_bar</span>() <span class="sc">+</span></span>
<span id="cb38-7"><a href="#cb38-7" aria-hidden="true" tabindex="-1"></a>    <span class="fu">theme</span>(<span class="at">axis.text.x =</span> <span class="fu">element_text</span>(<span class="at">angle =</span> <span class="dv">90</span>, <span class="at">size =</span> x_label_size, <span class="at">vjust =</span> <span class="fl">0.5</span>, <span class="at">hjust =</span> <span class="dv">1</span>),</span>
<span id="cb38-8"><a href="#cb38-8" aria-hidden="true" tabindex="-1"></a>          <span class="at">axis.text.y =</span> <span class="fu">element_text</span>(<span class="at">size =</span> <span class="dv">11</span>))</span>
<span id="cb38-9"><a href="#cb38-9" aria-hidden="true" tabindex="-1"></a>}</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
</details>
</div>
<hr>
<div class="callout callout-style-default callout-tip no-icon callout-titled">
<div class="callout-header d-flex align-content-center">
<div class="callout-icon-container">
<i class="callout-icon no-icon"></i>
</div>
<div class="callout-title-container flex-fill">
Coding sidebar
</div>
</div>
<div class="callout-body-container callout-body">
<p>When defining functions, generally put data as first argument so you can pipe in data using tidy pipelines</p>
<p>There are pros and cons to writing functions that accept variable names that are quoted vs.&nbsp;unquoted</p>
<ul>
<li>It depends a bit on how you will use them.</li>
<li>.data[[argument]] is used in functions with quoted arguments</li>
<li>embracing {{}} is used for unquoted arguments</li>
<li>For these plot functions, I use quoted variable names and then pipe those into <code>map()</code> to make multiple plots (see below)</li>
<li>see <code>?vignette("programming")</code> or info on <a href="https://r4ds.hadley.nz/functions.html#indirection-and-tidy-evaluation">tidy evaluation</a> in <span class="citation" data-cites="RDS">Wickham, Çetinkaya-Rundel, and Grolemund (<a href="#ref-RDS" role="doc-biblioref">2023</a>)</span> for more details</li>
</ul>
</div>
</div>
<hr>
<p>Bar plots reveal low frequency responses for nominal and ordinal variables</p>
<ul>
<li>See <code>bldg_type</code></li>
</ul>
<div class="cell">
<details open="" class="code-fold">
<summary>Code</summary>
<div class="sourceCode cell-code" id="cb39"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb39-1"><a href="#cb39-1" aria-hidden="true" tabindex="-1"></a>data_trn <span class="sc">|&gt;</span> <span class="fu">plot_bar</span>(<span class="st">"bldg_type"</span>)</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
</details>
<div class="cell-output-display">
<div>
<figure class="figure">
<p><img src="l02_exploratory_data_analysis_files/figure-html/unnamed-chunk-37-1.png" class="img-fluid figure-img" width="672"></p>
</figure>
</div>
</div>
</div>
<hr>
<p>Bar plots can display distributional shape for ordinal variables. May suggest the need for transformations if we later treat the ordinal variable as numeric</p>
<ul>
<li>See <code>overall_qual</code>. Though it is not very skewed.</li>
</ul>
<div class="cell">
<details open="" class="code-fold">
<summary>Code</summary>
<div class="sourceCode cell-code" id="cb40"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb40-1"><a href="#cb40-1" aria-hidden="true" tabindex="-1"></a>data_trn <span class="sc">|&gt;</span> <span class="fu">plot_bar</span>(<span class="st">"overall_qual"</span>)</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
</details>
<div class="cell-output-display">
<div>
<figure class="figure">
<p><img src="l02_exploratory_data_analysis_files/figure-html/unnamed-chunk-38-1.png" class="img-fluid figure-img" width="672"></p>
</figure>
</div>
</div>
</div>
<hr>
<div class="callout callout-style-default callout-tip no-icon callout-titled">
<div class="callout-header d-flex align-content-center">
<div class="callout-icon-container">
<i class="callout-icon no-icon"></i>
</div>
<div class="callout-title-container flex-fill">
Coding sidebar
</div>
</div>
<div class="callout-body-container callout-body">
<p>We can make all of our plots iteratively using <code>map()</code> from the <code>purrr</code> package.</p>
<div class="cell">
<details open="" class="code-fold">
<summary>Code</summary>
<div class="sourceCode cell-code" id="annotated-cell-98"><pre class="sourceCode r code-annotation-code code-with-copy code-annotated"><code class="sourceCode r"><span id="annotated-cell-98-1"><a href="#annotated-cell-98-1" aria-hidden="true" tabindex="-1"></a>data_trn <span class="sc">|&gt;</span> </span>
<a class="code-annotation-anchor" data-target-cell="annotated-cell-98" data-target-annotation="1" onclick="event.preventDefault();">1</a><span id="annotated-cell-98-2" class="code-annotation-target"><a href="#annotated-cell-98-2" aria-hidden="true" tabindex="-1"></a>  <span class="fu">select</span>(<span class="fu">where</span>(is.factor)) <span class="sc">|&gt;</span></span>
<a class="code-annotation-anchor" data-target-cell="annotated-cell-98" data-target-annotation="2" onclick="event.preventDefault();">2</a><span id="annotated-cell-98-3" class="code-annotation-target"><a href="#annotated-cell-98-3" aria-hidden="true" tabindex="-1"></a>  <span class="fu">names</span>() <span class="sc">|&gt;</span></span>
<a class="code-annotation-anchor" data-target-cell="annotated-cell-98" data-target-annotation="3" onclick="event.preventDefault();">3</a><span id="annotated-cell-98-4" class="code-annotation-target"><a href="#annotated-cell-98-4" aria-hidden="true" tabindex="-1"></a>  <span class="fu">map</span>(\(name) <span class="fu">plot_bar</span>(<span class="at">df =</span> data_trn, <span class="at">x =</span> name)) <span class="sc">|&gt;</span></span>
<a class="code-annotation-anchor" data-target-cell="annotated-cell-98" data-target-annotation="4" onclick="event.preventDefault();">4</a><span id="annotated-cell-98-5" class="code-annotation-target"><a href="#annotated-cell-98-5" aria-hidden="true" tabindex="-1"></a>  <span class="fu">plot_grid</span>(<span class="at">plotlist =</span> _, <span class="at">ncol =</span> <span class="dv">2</span>)</span><div class="code-annotation-gutter-bg"></div><div class="code-annotation-gutter"></div></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
</details>
<div class="cell-annotation">
<dl class="code-annotation-container-grid">
<dt data-target-cell="annotated-cell-98" data-target-annotation="1">1</dt>
<dd>
<span data-code-cell="annotated-cell-98" data-code-lines="2" data-code-annotation="1">Select only the factor columns</span>
</dd>
<dt data-target-cell="annotated-cell-98" data-target-annotation="2">2</dt>
<dd>
<span data-code-cell="annotated-cell-98" data-code-lines="3" data-code-annotation="2">Get their names as strings (that is why we use quoted variables in these plot functions</span>
</dd>
<dt data-target-cell="annotated-cell-98" data-target-annotation="3">3</dt>
<dd>
<span data-code-cell="annotated-cell-98" data-code-lines="4" data-code-annotation="3">Use <code>map()</code> to iterative <code>plot_bar()</code> over every column. (see <a href="https://r4ds.hadley.nz/iteration.html">iteration</a> in <span class="citation" data-cites="RDS">Wickham, Çetinkaya-Rundel, and Grolemund (<a href="#ref-RDS" role="doc-biblioref">2023</a>)</span>)</span>
</dd>
<dt data-target-cell="annotated-cell-98" data-target-annotation="4">4</dt>
<dd>
<span data-code-cell="annotated-cell-98" data-code-lines="5" data-code-annotation="4">Use <code>plot_grid()</code> from <code>cowplot</code> package to display the list of plots in a grid</span>
</dd>
</dl>
</div>
<div class="cell-output-display">
<div>
<figure class="figure">
<p><img src="l02_exploratory_data_analysis_files/figure-html/unnamed-chunk-39-1.png" class="img-fluid figure-img" width="672"></p>
</figure>
</div>
</div>
</div>
</div>
</div>
<hr>
</section>
<section id="tables-for-categorical-variables-univariate" class="level3" data-number="2.5.4">
<h3 data-number="2.5.4" class="anchored" data-anchor-id="tables-for-categorical-variables-univariate"><span class="header-section-number">2.5.4</span> Tables for Categorical Variables (Univariate)</h3>
<p>We tend to prefer visualizations vs.&nbsp;summary statistics for EDA. However, tables can be useful.</p>
<p>Here is a function that was described in <span class="citation" data-cites="RDS">Wickham, Çetinkaya-Rundel, and Grolemund (<a href="#ref-RDS" role="doc-biblioref">2023</a>)</span> that we like because</p>
<ul>
<li>It includes counts and proportions</li>
<li>It includes NA as a category</li>
</ul>
<p>We have included it in <code>fun_eda.R</code> for your use.</p>
<div class="cell">
<details open="" class="code-fold">
<summary>Code</summary>
<div class="sourceCode cell-code" id="cb41"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb41-1"><a href="#cb41-1" aria-hidden="true" tabindex="-1"></a>tab <span class="ot">&lt;-</span> <span class="cf">function</span>(df, var, <span class="at">sort =</span> <span class="cn">FALSE</span>) {</span>
<span id="cb41-2"><a href="#cb41-2" aria-hidden="true" tabindex="-1"></a>  df <span class="sc">|&gt;</span>  dplyr<span class="sc">::</span><span class="fu">count</span>({{ var }}, <span class="at">sort =</span> sort) <span class="sc">|&gt;</span> </span>
<span id="cb41-3"><a href="#cb41-3" aria-hidden="true" tabindex="-1"></a>    dplyr<span class="sc">::</span><span class="fu">mutate</span>(<span class="at">prop =</span> n <span class="sc">/</span> <span class="fu">sum</span>(n))</span>
<span id="cb41-4"><a href="#cb41-4" aria-hidden="true" tabindex="-1"></a>} </span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
</details>
</div>
<hr>
<p>Tables can be used to identify responses that have very low frequency and to think about the need to handle missing values</p>
<ul>
<li>See <code>ms_zoning</code></li>
<li>May want to collapse low frequency (or low percentage) categories to reduce the number of features needed to represent the predictor</li>
</ul>
<div class="cell">
<details open="" class="code-fold">
<summary>Code</summary>
<div class="sourceCode cell-code" id="cb42"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb42-1"><a href="#cb42-1" aria-hidden="true" tabindex="-1"></a>data_trn <span class="sc">|&gt;</span> <span class="fu">tab</span>(ms_zoning)</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
</details>
<div class="cell-output cell-output-stdout">
<pre><code># A tibble: 7 × 3
  ms_zoning     n     prop
  &lt;fct&gt;     &lt;int&gt;    &lt;dbl&gt;
1 agri          2 0.00137 
2 commer       13 0.00887 
3 float        66 0.0451  
4 indus         1 0.000683
5 res_high      9 0.00614 
6 res_low    1157 0.790   
7 res_med     217 0.148   </code></pre>
</div>
</div>
<hr>
<ul>
<li>We could also view the table sorted if we prefer</li>
</ul>
<div class="cell">
<details open="" class="code-fold">
<summary>Code</summary>
<div class="sourceCode cell-code" id="cb44"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb44-1"><a href="#cb44-1" aria-hidden="true" tabindex="-1"></a>data_trn <span class="sc">|&gt;</span> <span class="fu">tab</span>(ms_zoning, <span class="at">sort =</span> <span class="cn">TRUE</span>)</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
</details>
<div class="cell-output cell-output-stdout">
<pre><code># A tibble: 7 × 3
  ms_zoning     n     prop
  &lt;fct&gt;     &lt;int&gt;    &lt;dbl&gt;
1 res_low    1157 0.790   
2 res_med     217 0.148   
3 float        66 0.0451  
4 commer       13 0.00887 
5 res_high      9 0.00614 
6 agri          2 0.00137 
7 indus         1 0.000683</code></pre>
</div>
</div>
<hr>
<p>but could see all this detail with plot as well</p>
<div class="cell">
<details open="" class="code-fold">
<summary>Code</summary>
<div class="sourceCode cell-code" id="cb46"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb46-1"><a href="#cb46-1" aria-hidden="true" tabindex="-1"></a>data_trn <span class="sc">|&gt;</span> <span class="fu">plot_bar</span>(<span class="st">"ms_zoning"</span>)</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
</details>
<div class="cell-output-display">
<div>
<figure class="figure">
<p><img src="l02_exploratory_data_analysis_files/figure-html/unnamed-chunk-43-1.png" class="img-fluid figure-img" width="672"></p>
</figure>
</div>
</div>
</div>
<hr>
</section>
<section id="histograms-for-numeric-variables-univariate" class="level3" data-number="2.5.5">
<h3 data-number="2.5.5" class="anchored" data-anchor-id="histograms-for-numeric-variables-univariate"><span class="header-section-number">2.5.5</span> Histograms for Numeric Variables (Univariate)</h3>
<p>Histograms are a useful/common visualization for numeric variables</p>
<p>Let’s define a histogram function (included in <code>fun_plots.r</code>)</p>
<ul>
<li>Bin size should be explored a bit to find best representation</li>
<li>Somewhat dependent on n (my default here is based on this training set)</li>
<li>This is one of the limitations of histograms</li>
</ul>
<div class="cell">
<details open="" class="code-fold">
<summary>Code</summary>
<div class="sourceCode cell-code" id="cb47"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb47-1"><a href="#cb47-1" aria-hidden="true" tabindex="-1"></a>plot_hist <span class="ot">&lt;-</span> <span class="cf">function</span>(df, x, <span class="at">bins =</span> <span class="dv">100</span>){</span>
<span id="cb47-2"><a href="#cb47-2" aria-hidden="true" tabindex="-1"></a>  df <span class="sc">|&gt;</span></span>
<span id="cb47-3"><a href="#cb47-3" aria-hidden="true" tabindex="-1"></a>    <span class="fu">ggplot</span>(<span class="fu">aes</span>(<span class="at">x =</span> .data[[x]])) <span class="sc">+</span></span>
<span id="cb47-4"><a href="#cb47-4" aria-hidden="true" tabindex="-1"></a>    <span class="fu">geom_histogram</span>(<span class="at">bins =</span> bins) <span class="sc">+</span></span>
<span id="cb47-5"><a href="#cb47-5" aria-hidden="true" tabindex="-1"></a>    <span class="fu">theme</span>(<span class="at">axis.text.x =</span> <span class="fu">element_text</span>(<span class="at">size =</span> <span class="dv">11</span>),</span>
<span id="cb47-6"><a href="#cb47-6" aria-hidden="true" tabindex="-1"></a>          <span class="at">axis.text.y =</span> <span class="fu">element_text</span>(<span class="at">size =</span> <span class="dv">11</span>))</span>
<span id="cb47-7"><a href="#cb47-7" aria-hidden="true" tabindex="-1"></a>}</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
</details>
</div>
<hr>
<p>Let’s look at <code>sale_price</code></p>
<ul>
<li>It is positively skewed</li>
<li>May suggest units (dollars) are not interval in nature (makes sense)</li>
<li>Could cause problems for some algorithms (e.g., lm) when features are normal</li>
</ul>
<div class="cell">
<details open="" class="code-fold">
<summary>Code</summary>
<div class="sourceCode cell-code" id="cb48"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb48-1"><a href="#cb48-1" aria-hidden="true" tabindex="-1"></a>data_trn <span class="sc">|&gt;</span> <span class="fu">plot_hist</span>(<span class="st">"sale_price"</span>)</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
</details>
<div class="cell-output-display">
<div>
<figure class="figure">
<p><img src="l02_exploratory_data_analysis_files/figure-html/unnamed-chunk-45-1.png" class="img-fluid figure-img" width="672"></p>
</figure>
</div>
</div>
</div>
<hr>
</section>
<section id="smoothed-frequency-polygons-for-numeric-variables-univariate" class="level3" data-number="2.5.6">
<h3 data-number="2.5.6" class="anchored" data-anchor-id="smoothed-frequency-polygons-for-numeric-variables-univariate"><span class="header-section-number">2.5.6</span> Smoothed Frequency Polygons for Numeric Variables (Univariate)</h3>
<p>Frequency polygons are also commonly used</p>
<ul>
<li>Define a frequency polygon function and use it (included in <code>fun_plots.r</code>)</li>
</ul>
<div class="cell">
<details open="" class="code-fold">
<summary>Code</summary>
<div class="sourceCode cell-code" id="cb49"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb49-1"><a href="#cb49-1" aria-hidden="true" tabindex="-1"></a>plot_freqpoly <span class="ot">&lt;-</span> <span class="cf">function</span>(df, x, <span class="at">bins =</span> <span class="dv">50</span>){</span>
<span id="cb49-2"><a href="#cb49-2" aria-hidden="true" tabindex="-1"></a>  df <span class="sc">|&gt;</span></span>
<span id="cb49-3"><a href="#cb49-3" aria-hidden="true" tabindex="-1"></a>    <span class="fu">ggplot</span>(<span class="fu">aes</span>(<span class="at">x =</span> .data[[x]])) <span class="sc">+</span></span>
<span id="cb49-4"><a href="#cb49-4" aria-hidden="true" tabindex="-1"></a>    <span class="fu">geom_freqpoly</span>(<span class="at">bins =</span> bins) <span class="sc">+</span></span>
<span id="cb49-5"><a href="#cb49-5" aria-hidden="true" tabindex="-1"></a>    <span class="fu">theme</span>(<span class="at">axis.text.x =</span> <span class="fu">element_text</span>(<span class="at">size =</span> <span class="dv">11</span>),</span>
<span id="cb49-6"><a href="#cb49-6" aria-hidden="true" tabindex="-1"></a>          <span class="at">axis.text.y =</span> <span class="fu">element_text</span>(<span class="at">size =</span> <span class="dv">11</span>))</span>
<span id="cb49-7"><a href="#cb49-7" aria-hidden="true" tabindex="-1"></a>}</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
</details>
</div>
<hr>
<ul>
<li>Bins may matter again</li>
</ul>
<div class="cell">
<details open="" class="code-fold">
<summary>Code</summary>
<div class="sourceCode cell-code" id="cb50"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb50-1"><a href="#cb50-1" aria-hidden="true" tabindex="-1"></a>data_trn <span class="sc">|&gt;</span> <span class="fu">plot_freqpoly</span>(<span class="st">"sale_price"</span>)</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
</details>
<div class="cell-output-display">
<div>
<figure class="figure">
<p><img src="l02_exploratory_data_analysis_files/figure-html/unnamed-chunk-47-1.png" class="img-fluid figure-img" width="672"></p>
</figure>
</div>
</div>
</div>
<hr>
</section>
<section id="simple-boxplots-for-numeric-variables-univariate" class="level3" data-number="2.5.7">
<h3 data-number="2.5.7" class="anchored" data-anchor-id="simple-boxplots-for-numeric-variables-univariate"><span class="header-section-number">2.5.7</span> Simple Boxplots for Numeric Variables (Univariate)</h3>
<p>Boxplots display</p>
<ul>
<li>Median as line</li>
<li>25%ile and 75%ile as hinges</li>
<li>Highest and lowest points within 1.5 * IQR (interquartile-range: difference between scores at 25% and 75%iles)</li>
<li>Outliers outside of 1.5 * IQR</li>
</ul>
<p>Define a boxplot function and use it (included in <code>fun_plots.r</code>)</p>
<div class="cell">
<details open="" class="code-fold">
<summary>Code</summary>
<div class="sourceCode cell-code" id="cb51"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb51-1"><a href="#cb51-1" aria-hidden="true" tabindex="-1"></a>plot_boxplot <span class="ot">&lt;-</span> <span class="cf">function</span>(df, x){</span>
<span id="cb51-2"><a href="#cb51-2" aria-hidden="true" tabindex="-1"></a>  x_label_size <span class="ot">&lt;-</span> <span class="fu">if_else</span>(skimr<span class="sc">::</span><span class="fu">n_unique</span>(df[[x]]) <span class="sc">&lt;</span> <span class="dv">7</span>, <span class="dv">11</span>, <span class="dv">7</span>)</span>
<span id="cb51-3"><a href="#cb51-3" aria-hidden="true" tabindex="-1"></a>  </span>
<span id="cb51-4"><a href="#cb51-4" aria-hidden="true" tabindex="-1"></a>  df <span class="sc">|&gt;</span></span>
<span id="cb51-5"><a href="#cb51-5" aria-hidden="true" tabindex="-1"></a>    <span class="fu">ggplot</span>(<span class="fu">aes</span>(<span class="at">x =</span> .data[[x]])) <span class="sc">+</span></span>
<span id="cb51-6"><a href="#cb51-6" aria-hidden="true" tabindex="-1"></a>    <span class="fu">geom_boxplot</span>() <span class="sc">+</span></span>
<span id="cb51-7"><a href="#cb51-7" aria-hidden="true" tabindex="-1"></a>    <span class="fu">theme</span>(<span class="at">axis.text.y =</span> <span class="fu">element_blank</span>(),</span>
<span id="cb51-8"><a href="#cb51-8" aria-hidden="true" tabindex="-1"></a>          <span class="at">axis.ticks.y =</span> <span class="fu">element_blank</span>(),</span>
<span id="cb51-9"><a href="#cb51-9" aria-hidden="true" tabindex="-1"></a>          <span class="at">axis.text.x =</span> <span class="fu">element_text</span>(<span class="at">angle =</span> <span class="dv">90</span>, <span class="at">size =</span> x_label_size, <span class="at">vjust =</span> <span class="fl">0.5</span>, <span class="at">hjust =</span> <span class="dv">1</span>))</span>
<span id="cb51-10"><a href="#cb51-10" aria-hidden="true" tabindex="-1"></a>}</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
</details>
</div>
<hr>
<p>Here is the plot for <code>sale_price</code></p>
<div class="cell">
<details open="" class="code-fold">
<summary>Code</summary>
<div class="sourceCode cell-code" id="cb52"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb52-1"><a href="#cb52-1" aria-hidden="true" tabindex="-1"></a>data_trn <span class="sc">|&gt;</span> <span class="fu">plot_boxplot</span>(<span class="st">"sale_price"</span>)</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
</details>
<div class="cell-output-display">
<div>
<figure class="figure">
<p><img src="l02_exploratory_data_analysis_files/figure-html/unnamed-chunk-49-1.png" class="img-fluid figure-img" width="672"></p>
</figure>
</div>
</div>
</div>
<hr>
</section>
<section id="combined-boxplot-and-violin-plots-for-numeric-variables-univariate" class="level3" data-number="2.5.8">
<h3 data-number="2.5.8" class="anchored" data-anchor-id="combined-boxplot-and-violin-plots-for-numeric-variables-univariate"><span class="header-section-number">2.5.8</span> Combined Boxplot and Violin Plots for Numeric Variables (Univariate)</h3>
<p>The combination of a boxplot and violin plot is particularly useful</p>
<ul>
<li>This is our favorite</li>
<li>Get all the benefits of the boxplot</li>
<li>Can clearly see shape of distribution given the violin plot overlay</li>
<li>Can also clearly see the tails</li>
</ul>
<p>Define a combined plot (included in <code>fun_plots.r</code>)</p>
<div class="cell">
<details open="" class="code-fold">
<summary>Code</summary>
<div class="sourceCode cell-code" id="cb53"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb53-1"><a href="#cb53-1" aria-hidden="true" tabindex="-1"></a>plot_box_violin <span class="ot">&lt;-</span> <span class="cf">function</span>(df, x){</span>
<span id="cb53-2"><a href="#cb53-2" aria-hidden="true" tabindex="-1"></a>  x_label_size <span class="ot">&lt;-</span> <span class="fu">if_else</span>(skimr<span class="sc">::</span><span class="fu">n_unique</span>(df[[x]]) <span class="sc">&lt;</span> <span class="dv">7</span>, <span class="dv">11</span>, <span class="dv">7</span>)</span>
<span id="cb53-3"><a href="#cb53-3" aria-hidden="true" tabindex="-1"></a>  </span>
<span id="cb53-4"><a href="#cb53-4" aria-hidden="true" tabindex="-1"></a>  df <span class="sc">|&gt;</span></span>
<span id="cb53-5"><a href="#cb53-5" aria-hidden="true" tabindex="-1"></a>    <span class="fu">ggplot</span>(<span class="fu">aes</span>(<span class="at">x =</span> .data[[x]])) <span class="sc">+</span></span>
<span id="cb53-6"><a href="#cb53-6" aria-hidden="true" tabindex="-1"></a>    <span class="fu">geom_violin</span>(<span class="fu">aes</span>(<span class="at">y =</span> <span class="dv">0</span>), <span class="at">fill =</span> <span class="st">"green"</span>, <span class="at">color =</span> <span class="cn">NA</span>) <span class="sc">+</span></span>
<span id="cb53-7"><a href="#cb53-7" aria-hidden="true" tabindex="-1"></a>    <span class="fu">geom_boxplot</span>(<span class="at">width =</span> .<span class="dv">1</span>, <span class="at">fill =</span> <span class="cn">NA</span>, <span class="at">lwd =</span> <span class="fl">1.1</span>, <span class="at">fatten =</span> <span class="fl">1.1</span>) <span class="sc">+</span></span>
<span id="cb53-8"><a href="#cb53-8" aria-hidden="true" tabindex="-1"></a>    <span class="fu">theme</span>(<span class="at">axis.text.y =</span> <span class="fu">element_blank</span>(),</span>
<span id="cb53-9"><a href="#cb53-9" aria-hidden="true" tabindex="-1"></a>          <span class="at">axis.ticks.y =</span> <span class="fu">element_blank</span>(),</span>
<span id="cb53-10"><a href="#cb53-10" aria-hidden="true" tabindex="-1"></a>          <span class="at">axis.title.y =</span> <span class="fu">element_blank</span>(),</span>
<span id="cb53-11"><a href="#cb53-11" aria-hidden="true" tabindex="-1"></a>          <span class="at">axis.text.x =</span> <span class="fu">element_text</span>(<span class="at">angle =</span> <span class="dv">90</span>, <span class="at">size =</span> x_label_size, <span class="at">vjust =</span> <span class="fl">0.5</span>, <span class="at">hjust =</span> <span class="dv">1</span>))</span>
<span id="cb53-12"><a href="#cb53-12" aria-hidden="true" tabindex="-1"></a>}</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
</details>
</div>
<hr>
<p>Here is the plot for <code>sale_price</code></p>
<ul>
<li>In this instance, the skew is NOT due to only a few outliers</li>
</ul>
<div class="cell">
<details open="" class="code-fold">
<summary>Code</summary>
<div class="sourceCode cell-code" id="cb54"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb54-1"><a href="#cb54-1" aria-hidden="true" tabindex="-1"></a>data_trn <span class="sc">|&gt;</span> <span class="fu">plot_box_violin</span>(<span class="st">"sale_price"</span>)</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
</details>
<div class="cell-output-display">
<div>
<figure class="figure">
<p><img src="l02_exploratory_data_analysis_files/figure-html/unnamed-chunk-51-1.png" class="img-fluid figure-img" width="672"></p>
</figure>
</div>
</div>
</div>
<hr>
<div class="callout callout-style-default callout-tip no-icon callout-titled">
<div class="callout-header d-flex align-content-center">
<div class="callout-icon-container">
<i class="callout-icon no-icon"></i>
</div>
<div class="callout-title-container flex-fill">
Coding sidebar
</div>
</div>
<div class="callout-body-container callout-body">
<ul>
<li>You can make figures for all numeric variables at once using <code>select()</code> and <code>map()</code> as before</li>
</ul>
<div class="cell">
<details open="" class="code-fold">
<summary>Code</summary>
<div class="sourceCode cell-code" id="annotated-cell-101"><pre class="sourceCode r code-annotation-code code-with-copy code-annotated"><code class="sourceCode r"><span id="annotated-cell-101-1"><a href="#annotated-cell-101-1" aria-hidden="true" tabindex="-1"></a>data_trn <span class="sc">|&gt;</span> </span>
<a class="code-annotation-anchor" data-target-cell="annotated-cell-101" data-target-annotation="1" onclick="event.preventDefault();">1</a><span id="annotated-cell-101-2" class="code-annotation-target"><a href="#annotated-cell-101-2" aria-hidden="true" tabindex="-1"></a>  <span class="fu">select</span>(<span class="fu">where</span>(is.numeric)) <span class="sc">|&gt;</span></span>
<span id="annotated-cell-101-3"><a href="#annotated-cell-101-3" aria-hidden="true" tabindex="-1"></a>  <span class="fu">names</span>() <span class="sc">|&gt;</span> </span>
<span id="annotated-cell-101-4"><a href="#annotated-cell-101-4" aria-hidden="true" tabindex="-1"></a>  <span class="fu">map</span>(\(name) <span class="fu">plot_box_violin</span>(<span class="at">df =</span> data_trn, <span class="at">x =</span> name)) <span class="sc">|&gt;</span> </span>
<span id="annotated-cell-101-5"><a href="#annotated-cell-101-5" aria-hidden="true" tabindex="-1"></a>  <span class="fu">plot_grid</span>(<span class="at">plotlist =</span> _, <span class="at">ncol =</span> <span class="dv">2</span>)</span><div class="code-annotation-gutter-bg"></div><div class="code-annotation-gutter"></div></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
</details>
<div class="cell-annotation">
<dl class="code-annotation-container-grid">
<dt data-target-cell="annotated-cell-101" data-target-annotation="1">1</dt>
<dd>
<span data-code-cell="annotated-cell-101" data-code-lines="2" data-code-annotation="1">Now select numeric rather than factor but otherwise same as previous example</span>
</dd>
</dl>
</div>
<div class="cell-output-display">
<div>
<figure class="figure">
<p><img src="l02_exploratory_data_analysis_files/figure-html/unnamed-chunk-52-1.png" class="img-fluid figure-img" width="672"></p>
</figure>
</div>
</div>
</div>
</div>
</div>
<hr>
</section>
<section id="summary-statistics-for-numeric-variables-univariate" class="level3" data-number="2.5.9">
<h3 data-number="2.5.9" class="anchored" data-anchor-id="summary-statistics-for-numeric-variables-univariate"><span class="header-section-number">2.5.9</span> Summary Statistics for Numeric Variables (Univariate)</h3>
<p><code>skim_all()</code> provided all the summary statistics you likely needed for numeric variables</p>
<ul>
<li>mean &amp; median (p50)</li>
<li>sd &amp; IQR (see difference between p25 and p75)</li>
<li>skew &amp; kurtosis</li>
</ul>
<p>You can get skim of only numeric variables if you like</p>
<div class="cell">
<details open="" class="code-fold">
<summary>Code</summary>
<div class="sourceCode cell-code" id="cb55"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb55-1"><a href="#cb55-1" aria-hidden="true" tabindex="-1"></a>data_trn <span class="sc">|&gt;</span> </span>
<span id="cb55-2"><a href="#cb55-2" aria-hidden="true" tabindex="-1"></a>  <span class="fu">skim_all</span>() <span class="sc">|&gt;</span> </span>
<span id="cb55-3"><a href="#cb55-3" aria-hidden="true" tabindex="-1"></a>  <span class="fu">filter</span>(skim_type <span class="sc">==</span> <span class="st">"numeric"</span>)</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
</details>
<div class="cell-output-display">
<table class="caption-top table table-sm table-striped small">
<caption>Data summary</caption>
<tbody>
<tr class="odd">
<td style="text-align: left;">Name</td>
<td style="text-align: left;">data_trn</td>
</tr>
<tr class="even">
<td style="text-align: left;">Number of rows</td>
<td style="text-align: left;">1465</td>
</tr>
<tr class="odd">
<td style="text-align: left;">Number of columns</td>
<td style="text-align: left;">10</td>
</tr>
<tr class="even">
<td style="text-align: left;">_______________________</td>
<td style="text-align: left;"></td>
</tr>
<tr class="odd">
<td style="text-align: left;">Column type frequency:</td>
<td style="text-align: left;"></td>
</tr>
<tr class="even">
<td style="text-align: left;">numeric</td>
<td style="text-align: left;">5</td>
</tr>
<tr class="odd">
<td style="text-align: left;">________________________</td>
<td style="text-align: left;"></td>
</tr>
<tr class="even">
<td style="text-align: left;">Group variables</td>
<td style="text-align: left;">None</td>
</tr>
</tbody>
</table>
<p><strong>Variable type: numeric</strong></p>
<table class="caption-top table table-sm table-striped small">
<colgroup>
<col style="width: 13%">
<col style="width: 9%">
<col style="width: 13%">
<col style="width: 9%">
<col style="width: 8%">
<col style="width: 5%">
<col style="width: 6%">
<col style="width: 6%">
<col style="width: 6%">
<col style="width: 6%">
<col style="width: 5%">
<col style="width: 8%">
</colgroup>
<thead>
<tr class="header">
<th style="text-align: left;">skim_variable</th>
<th style="text-align: right;">n_missing</th>
<th style="text-align: right;">complete_rate</th>
<th style="text-align: right;">mean</th>
<th style="text-align: right;">sd</th>
<th style="text-align: right;">p0</th>
<th style="text-align: right;">p25</th>
<th style="text-align: right;">p50</th>
<th style="text-align: right;">p75</th>
<th style="text-align: right;">p100</th>
<th style="text-align: right;">skew</th>
<th style="text-align: right;">kurtosis</th>
</tr>
</thead>
<tbody>
<tr class="odd">
<td style="text-align: left;">sale_price</td>
<td style="text-align: right;">0</td>
<td style="text-align: right;">1</td>
<td style="text-align: right;">180696.15</td>
<td style="text-align: right;">78836.41</td>
<td style="text-align: right;">12789</td>
<td style="text-align: right;">129500</td>
<td style="text-align: right;">160000</td>
<td style="text-align: right;">213500</td>
<td style="text-align: right;">745000</td>
<td style="text-align: right;">1.64</td>
<td style="text-align: right;">4.60</td>
</tr>
<tr class="even">
<td style="text-align: left;">gr_liv_area</td>
<td style="text-align: right;">0</td>
<td style="text-align: right;">1</td>
<td style="text-align: right;">1506.84</td>
<td style="text-align: right;">511.44</td>
<td style="text-align: right;">438</td>
<td style="text-align: right;">1128</td>
<td style="text-align: right;">1450</td>
<td style="text-align: right;">1759</td>
<td style="text-align: right;">5642</td>
<td style="text-align: right;">1.43</td>
<td style="text-align: right;">5.19</td>
</tr>
<tr class="odd">
<td style="text-align: left;">lot_area</td>
<td style="text-align: right;">0</td>
<td style="text-align: right;">1</td>
<td style="text-align: right;">10144.16</td>
<td style="text-align: right;">8177.55</td>
<td style="text-align: right;">1476</td>
<td style="text-align: right;">7500</td>
<td style="text-align: right;">9375</td>
<td style="text-align: right;">11362</td>
<td style="text-align: right;">164660</td>
<td style="text-align: right;">11.20</td>
<td style="text-align: right;">182.91</td>
</tr>
<tr class="even">
<td style="text-align: left;">year_built</td>
<td style="text-align: right;">0</td>
<td style="text-align: right;">1</td>
<td style="text-align: right;">1971.35</td>
<td style="text-align: right;">29.65</td>
<td style="text-align: right;">1880</td>
<td style="text-align: right;">1953</td>
<td style="text-align: right;">1972</td>
<td style="text-align: right;">2000</td>
<td style="text-align: right;">2010</td>
<td style="text-align: right;">-0.54</td>
<td style="text-align: right;">-0.62</td>
</tr>
<tr class="odd">
<td style="text-align: left;">garage_cars</td>
<td style="text-align: right;">1</td>
<td style="text-align: right;">1</td>
<td style="text-align: right;">1.78</td>
<td style="text-align: right;">0.76</td>
<td style="text-align: right;">0</td>
<td style="text-align: right;">1</td>
<td style="text-align: right;">2</td>
<td style="text-align: right;">2</td>
<td style="text-align: right;">4</td>
<td style="text-align: right;">-0.26</td>
<td style="text-align: right;">0.10</td>
</tr>
</tbody>
</table>
</div>
</div>
<hr>
</section>
<section id="bivariate-relationships-with-outcome" class="level3" data-number="2.5.10">
<h3 data-number="2.5.10" class="anchored" data-anchor-id="bivariate-relationships-with-outcome"><span class="header-section-number">2.5.10</span> Bivariate Relationships with Outcome</h3>
<p>Bivariate relationships with the outcome are useful to detect</p>
<ul>
<li>Which predictors display some relationship with the outcome</li>
<li>What feature engineering (transformations) might maximize that relationship</li>
<li>Are there any bivariate (model) outliers</li>
</ul>
<p>Again, we prefer visualizations but summary statistics are also available</p>
<hr>
</section>
<section id="scatterplots-for-numeric-variables-bivariate" class="level3" data-number="2.5.11">
<h3 data-number="2.5.11" class="anchored" data-anchor-id="scatterplots-for-numeric-variables-bivariate"><span class="header-section-number">2.5.11</span> Scatterplots for Numeric Variables (Bivariate)</h3>
<p>Scatterplots are the preferred visualization when both variables are numeric</p>
<p>Define a scatterplot function (included in <code>fun_plots.r</code>)</p>
<ul>
<li>add a simple line</li>
<li>add a LOWESS line (Locally Weighted Scatterplot Smoothing)</li>
<li>These lines are useful for considering shape of relationship</li>
</ul>
<div class="cell">
<details open="" class="code-fold">
<summary>Code</summary>
<div class="sourceCode cell-code" id="cb56"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb56-1"><a href="#cb56-1" aria-hidden="true" tabindex="-1"></a>plot_scatter <span class="ot">&lt;-</span> <span class="cf">function</span>(df, x, y){</span>
<span id="cb56-2"><a href="#cb56-2" aria-hidden="true" tabindex="-1"></a>  df <span class="sc">|&gt;</span></span>
<span id="cb56-3"><a href="#cb56-3" aria-hidden="true" tabindex="-1"></a>    <span class="fu">ggplot</span>(<span class="fu">aes</span>(<span class="at">x =</span> .data[[x]], <span class="at">y =</span> .data[[y]])) <span class="sc">+</span></span>
<span id="cb56-4"><a href="#cb56-4" aria-hidden="true" tabindex="-1"></a>    <span class="fu">geom_point</span>() <span class="sc">+</span></span>
<span id="cb56-5"><a href="#cb56-5" aria-hidden="true" tabindex="-1"></a>    <span class="fu">geom_smooth</span>(<span class="at">method =</span> <span class="st">"lm"</span>, <span class="at">formula =</span> y <span class="sc">~</span> x, <span class="at">col =</span> <span class="st">"red"</span>) <span class="sc">+</span></span>
<span id="cb56-6"><a href="#cb56-6" aria-hidden="true" tabindex="-1"></a>    <span class="fu">geom_smooth</span>(<span class="at">method =</span> <span class="st">"loess"</span>, <span class="at">formula =</span> y <span class="sc">~</span> x, <span class="at">col =</span> <span class="st">"green"</span>) <span class="sc">+</span></span>
<span id="cb56-7"><a href="#cb56-7" aria-hidden="true" tabindex="-1"></a>    <span class="fu">theme</span>(<span class="at">axis.text.x =</span> <span class="fu">element_text</span>(<span class="at">size =</span> <span class="dv">11</span>),</span>
<span id="cb56-8"><a href="#cb56-8" aria-hidden="true" tabindex="-1"></a>          <span class="at">axis.text.y =</span> <span class="fu">element_text</span>(<span class="at">size =</span> <span class="dv">11</span>))</span>
<span id="cb56-9"><a href="#cb56-9" aria-hidden="true" tabindex="-1"></a>}</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
</details>
</div>
<hr>
<p>Let’s consider relationship between <code>gr_liv_area</code> and <code>sale_price</code></p>
<ul>
<li>Care most about influential points (both model outlier and leverage)</li>
<li>Can be <em>typically</em> spotted in bivariate plots (but could do more sophisticated assessments)</li>
<li>We might:
<ul>
<li>retain as is</li>
<li>drop</li>
<li>bring to fence</li>
</ul></li>
</ul>
<p>If bivariate outliers are detected, you should return to cleaning mode to verify that they aren’t result of scoring/coding errors. If they are:</p>
<ul>
<li>Fix in full dataset</li>
<li>Use same train/test split after fixing</li>
</ul>
<div class="cell">
<details open="" class="code-fold">
<summary>Code</summary>
<div class="sourceCode cell-code" id="cb57"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb57-1"><a href="#cb57-1" aria-hidden="true" tabindex="-1"></a>data_trn <span class="sc">|&gt;</span> <span class="fu">plot_scatter</span>(<span class="st">"gr_liv_area"</span>, <span class="st">"sale_price"</span>)</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
</details>
<div class="cell-output-display">
<div>
<figure class="figure">
<p><img src="l02_exploratory_data_analysis_files/figure-html/unnamed-chunk-55-1.png" class="img-fluid figure-img" width="672"></p>
</figure>
</div>
</div>
</div>
<hr>
<p>Here is another example where the relationship might be non-linear</p>
<div class="cell">
<details open="" class="code-fold">
<summary>Code</summary>
<div class="sourceCode cell-code" id="cb58"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb58-1"><a href="#cb58-1" aria-hidden="true" tabindex="-1"></a>data_trn <span class="sc">|&gt;</span> <span class="fu">plot_scatter</span>(<span class="st">"year_built"</span>, <span class="st">"sale_price"</span>)</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
</details>
<div class="cell-output-display">
<div>
<figure class="figure">
<p><img src="l02_exploratory_data_analysis_files/figure-html/unnamed-chunk-56-1.png" class="img-fluid figure-img" width="672"></p>
</figure>
</div>
</div>
</div>
<hr>
<p>A transformation of <code>sale_price</code> might help the relationship with <span class="math inline">\(year\_built\)</span> but might hurt <code>gr_liv_area</code></p>
<p>Maybe need to transform both <code>sale_price</code> and <code>gr_liv_area</code> as both were skewed</p>
<p>This might require some more EDA but here is a start</p>
<ul>
<li>Quick and temporary Log (base e) of <code>sale_price</code></li>
<li>This doesn’t seem promising by itself</li>
</ul>
<div class="cell">
<details open="" class="code-fold">
<summary>Code</summary>
<div class="sourceCode cell-code" id="cb59"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb59-1"><a href="#cb59-1" aria-hidden="true" tabindex="-1"></a>data_trn <span class="sc">|&gt;</span> </span>
<span id="cb59-2"><a href="#cb59-2" aria-hidden="true" tabindex="-1"></a>  <span class="fu">mutate</span>(<span class="at">sale_price =</span> <span class="fu">log</span>(sale_price)) <span class="sc">|&gt;</span> </span>
<span id="cb59-3"><a href="#cb59-3" aria-hidden="true" tabindex="-1"></a>  <span class="fu">plot_scatter</span>(<span class="st">"gr_liv_area"</span>, <span class="st">"sale_price"</span>)</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
</details>
<div class="cell-output-display">
<div>
<figure class="figure">
<p><img src="l02_exploratory_data_analysis_files/figure-html/unnamed-chunk-57-1.png" class="img-fluid figure-img" width="672"></p>
</figure>
</div>
</div>
<details open="" class="code-fold">
<summary>Code</summary>
<div class="sourceCode cell-code" id="cb60"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb60-1"><a href="#cb60-1" aria-hidden="true" tabindex="-1"></a>data_trn <span class="sc">|&gt;</span> </span>
<span id="cb60-2"><a href="#cb60-2" aria-hidden="true" tabindex="-1"></a>  <span class="fu">mutate</span>(<span class="at">sale_price =</span> <span class="fu">log</span>(sale_price)) <span class="sc">|&gt;</span></span>
<span id="cb60-3"><a href="#cb60-3" aria-hidden="true" tabindex="-1"></a>  <span class="fu">plot_scatter</span>(<span class="st">"year_built"</span>, <span class="st">"sale_price"</span>)</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
</details>
<div class="cell-output-display">
<div>
<figure class="figure">
<p><img src="l02_exploratory_data_analysis_files/figure-html/unnamed-chunk-57-2.png" class="img-fluid figure-img" width="672"></p>
</figure>
</div>
</div>
</div>
<hr>
<p>Can make scatterplots for ordinal variables as well</p>
<ul>
<li>But other (perhaps better) options also exist for this combination of variable classes.</li>
<li>Use <code>as.numeric()</code> to allow for lm and LOWESS lines on otherwise categorical variable</li>
</ul>
<div class="cell">
<details open="" class="code-fold">
<summary>Code</summary>
<div class="sourceCode cell-code" id="cb61"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb61-1"><a href="#cb61-1" aria-hidden="true" tabindex="-1"></a>data_trn <span class="sc">|&gt;</span> </span>
<span id="cb61-2"><a href="#cb61-2" aria-hidden="true" tabindex="-1"></a>  <span class="fu">mutate</span>(<span class="at">overall_qual =</span> <span class="fu">as.numeric</span>(overall_qual)) <span class="sc">|&gt;</span> </span>
<span id="cb61-3"><a href="#cb61-3" aria-hidden="true" tabindex="-1"></a>  <span class="fu">plot_scatter</span>(<span class="st">"overall_qual"</span>, <span class="st">"sale_price"</span>)</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
</details>
<div class="cell-output-display">
<div>
<figure class="figure">
<p><img src="l02_exploratory_data_analysis_files/figure-html/unnamed-chunk-58-1.png" class="img-fluid figure-img" width="672"></p>
</figure>
</div>
</div>
</div>
<hr>
<div class="callout callout-style-default callout-tip no-icon callout-titled">
<div class="callout-header d-flex align-content-center">
<div class="callout-icon-container">
<i class="callout-icon no-icon"></i>
</div>
<div class="callout-title-container flex-fill">
Coding sidebar
</div>
</div>
<div class="callout-body-container callout-body">
<p>Use <code>jitter()</code> with x to help with overplotting</p>
<div class="cell">
<details open="" class="code-fold">
<summary>Code</summary>
<div class="sourceCode cell-code" id="cb62"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb62-1"><a href="#cb62-1" aria-hidden="true" tabindex="-1"></a>data_trn <span class="sc">|&gt;</span> </span>
<span id="cb62-2"><a href="#cb62-2" aria-hidden="true" tabindex="-1"></a>  <span class="fu">mutate</span>(<span class="at">overall_qual =</span> <span class="fu">jitter</span>(<span class="fu">as.numeric</span>(overall_qual))) <span class="sc">|&gt;</span> </span>
<span id="cb62-3"><a href="#cb62-3" aria-hidden="true" tabindex="-1"></a>  <span class="fu">plot_scatter</span>(<span class="st">"overall_qual"</span>, <span class="st">"sale_price"</span>)</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
</details>
<div class="cell-output-display">
<div>
<figure class="figure">
<p><img src="l02_exploratory_data_analysis_files/figure-html/unnamed-chunk-59-1.png" class="img-fluid figure-img" width="672"></p>
</figure>
</div>
</div>
</div>
</div>
</div>
<hr>
</section>
<section id="correlations-correlation-plots-for-numeric-variables-bivariate" class="level3" data-number="2.5.12">
<h3 data-number="2.5.12" class="anchored" data-anchor-id="correlations-correlation-plots-for-numeric-variables-bivariate"><span class="header-section-number">2.5.12</span> Correlations &amp; Correlation Plots for Numeric Variables (Bivariate)</h3>
<p>Correlations are useful summary statistics for numeric variables</p>
<p>Some statistical algorithms are sensitive to high correlations among features (multi-collinearity)</p>
<p>At best, highly correlated features add unnecessary flexibility and can lead to overfitting</p>
<hr>
<p>We can visualize correlations among predictors/features using <code>corrplot.mixed()</code> from <code>corrplot</code> package</p>
<ul>
<li>Best for numeric variables</li>
<li>Can include ordinal or two level nominal variables if transformed to numeric</li>
<li>Can include nominal variables with &gt; 2 levels if first transformed appropriately (e.g., dummy features, not demonstrated yet)</li>
<li>Works best with relatively small set of variables</li>
</ul>
<hr>
<div class="cell">
<details open="" class="code-fold">
<summary>Code</summary>
<div class="sourceCode cell-code" id="annotated-cell-58"><pre class="sourceCode r code-annotation-code code-with-copy code-annotated"><code class="sourceCode r"><span id="annotated-cell-58-1"><a href="#annotated-cell-58-1" aria-hidden="true" tabindex="-1"></a>data_trn <span class="sc">|&gt;</span> </span>
<span id="annotated-cell-58-2"><a href="#annotated-cell-58-2" aria-hidden="true" tabindex="-1"></a>  <span class="fu">mutate</span>(<span class="at">overall_qual =</span> <span class="fu">as.numeric</span>(overall_qual),</span>
<span id="annotated-cell-58-3"><a href="#annotated-cell-58-3" aria-hidden="true" tabindex="-1"></a>         <span class="at">garage_qual =</span> <span class="fu">as.numeric</span>(garage_qual)) <span class="sc">|&gt;</span> </span>
<span id="annotated-cell-58-4"><a href="#annotated-cell-58-4" aria-hidden="true" tabindex="-1"></a>  <span class="fu">select</span>(<span class="fu">where</span>(is.numeric)) <span class="sc">|&gt;</span> </span>
<span id="annotated-cell-58-5"><a href="#annotated-cell-58-5" aria-hidden="true" tabindex="-1"></a>  <span class="fu">cor</span>(<span class="at">use =</span> <span class="st">"pairwise.complete.obs"</span>) <span class="sc">|&gt;</span> </span>
<a class="code-annotation-anchor" data-target-cell="annotated-cell-58" data-target-annotation="1" onclick="event.preventDefault();">1</a><span id="annotated-cell-58-6" class="code-annotation-target"><a href="#annotated-cell-58-6" aria-hidden="true" tabindex="-1"></a>  corrplot<span class="sc">::</span><span class="fu">corrplot.mixed</span>()</span><div class="code-annotation-gutter-bg"></div><div class="code-annotation-gutter"></div></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
</details>
<div class="cell-annotation">
<dl class="code-annotation-container-grid">
<dt data-target-cell="annotated-cell-58" data-target-annotation="1">1</dt>
<dd>
<span data-code-cell="annotated-cell-58" data-code-lines="6" data-code-annotation="1">Note use of namespace (<code>corrplot::corrplot.mixed()</code>) to call this function from <code>corrplot</code> package</span>
</dd>
</dl>
</div>
<div class="cell-output-display">
<div>
<figure class="figure">
<p><img src="l02_exploratory_data_analysis_files/figure-html/unnamed-chunk-60-1.png" class="img-fluid figure-img" width="672"></p>
</figure>
</div>
</div>
</div>
<hr>
</section>
<section id="grouped-box-violin-plots-for-categorical-and-numeric-bivariate" class="level3" data-number="2.5.13">
<h3 data-number="2.5.13" class="anchored" data-anchor-id="grouped-box-violin-plots-for-categorical-and-numeric-bivariate"><span class="header-section-number">2.5.13</span> Grouped Box + Violin Plots for Categorical and Numeric (Bivariate)</h3>
<p>A grouped version of the combined box and violin plot is our preferred visualization for relationship between categorical and numeric variables (included in <code>fun_plots.r</code>)</p>
<ul>
<li>Often best when feature is categorical and outcome is numeric but can reverse</li>
<li>Can use with both nominal and ordinal categorical variable</li>
<li><span class="citation" data-cites="RDS">Wickham, Çetinkaya-Rundel, and Grolemund (<a href="#ref-RDS" role="doc-biblioref">2023</a>)</span> also describes use of grouped frequency polygons for this combination of variable classes</li>
</ul>
<div class="cell">
<details open="" class="code-fold">
<summary>Code</summary>
<div class="sourceCode cell-code" id="cb63"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb63-1"><a href="#cb63-1" aria-hidden="true" tabindex="-1"></a>plot_grouped_box_violin <span class="ot">&lt;-</span> <span class="cf">function</span>(df, x, y){</span>
<span id="cb63-2"><a href="#cb63-2" aria-hidden="true" tabindex="-1"></a>  x_label_size <span class="ot">&lt;-</span> <span class="fu">if_else</span>(skimr<span class="sc">::</span><span class="fu">n_unique</span>(df[[x]]) <span class="sc">&lt;</span> <span class="dv">7</span>, <span class="dv">11</span>, <span class="dv">7</span>)</span>
<span id="cb63-3"><a href="#cb63-3" aria-hidden="true" tabindex="-1"></a>  </span>
<span id="cb63-4"><a href="#cb63-4" aria-hidden="true" tabindex="-1"></a>  df <span class="sc">|&gt;</span></span>
<span id="cb63-5"><a href="#cb63-5" aria-hidden="true" tabindex="-1"></a>    <span class="fu">ggplot</span>(<span class="fu">aes</span>(<span class="at">x =</span> .data[[x]], <span class="at">y =</span> .data[[y]])) <span class="sc">+</span></span>
<span id="cb63-6"><a href="#cb63-6" aria-hidden="true" tabindex="-1"></a>    <span class="fu">geom_violin</span>(<span class="at">fill =</span> <span class="st">"green"</span>, <span class="at">color =</span> <span class="cn">NA</span>) <span class="sc">+</span></span>
<span id="cb63-7"><a href="#cb63-7" aria-hidden="true" tabindex="-1"></a>    <span class="fu">geom_boxplot</span>(<span class="at">width =</span> .<span class="dv">1</span>, <span class="at">fill =</span> <span class="cn">NA</span>, <span class="at">lwd =</span> <span class="fl">1.1</span>, <span class="at">fatten =</span> <span class="fl">1.1</span>) <span class="sc">+</span></span>
<span id="cb63-8"><a href="#cb63-8" aria-hidden="true" tabindex="-1"></a>    <span class="fu">theme</span>(<span class="at">axis.text.x =</span> <span class="fu">element_text</span>(<span class="at">angle =</span> <span class="dv">90</span>, <span class="at">size =</span> x_label_size, </span>
<span id="cb63-9"><a href="#cb63-9" aria-hidden="true" tabindex="-1"></a>                                     <span class="at">vjust =</span> <span class="fl">0.5</span>, <span class="at">hjust =</span> <span class="dv">1</span>),</span>
<span id="cb63-10"><a href="#cb63-10" aria-hidden="true" tabindex="-1"></a>          <span class="at">axis.text.y =</span> <span class="fu">element_text</span>(<span class="at">size =</span> <span class="dv">11</span>))</span>
<span id="cb63-11"><a href="#cb63-11" aria-hidden="true" tabindex="-1"></a>}</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
</details>
</div>
<hr>
<p>Here is the relationship between <code>overall_qual</code> and <code>sale_price</code></p>
<ul>
<li>Tend to prefer this over the scatterplot (with <code>as.numeric()</code>) for ordinal variables</li>
<li>Increasing spread of <code>sale_price</code> at higher levels of <code>overall_qual</code> is clearer in this plot</li>
</ul>
<div class="cell">
<details open="" class="code-fold">
<summary>Code</summary>
<div class="sourceCode cell-code" id="cb64"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb64-1"><a href="#cb64-1" aria-hidden="true" tabindex="-1"></a>data_trn <span class="sc">|&gt;</span> <span class="fu">plot_grouped_box_violin</span>(<span class="st">"overall_qual"</span>, <span class="st">"sale_price"</span>)</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
</details>
<div class="cell-output-display">
<div>
<figure class="figure">
<p><img src="l02_exploratory_data_analysis_files/figure-html/unnamed-chunk-62-1.png" class="img-fluid figure-img" width="672"></p>
</figure>
</div>
</div>
</div>
<hr>
<p>Here is a grouped box + violin with a nominal variable</p>
<ul>
<li>More variation and skew in <code>sale_price</code> for one family homes (additional features, moderators?)</li>
<li>Position of townhouse (interior vs.&nbsp;exterior) seems to matter (don’t collapse?)</li>
</ul>
<div class="cell">
<details open="" class="code-fold">
<summary>Code</summary>
<div class="sourceCode cell-code" id="cb65"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb65-1"><a href="#cb65-1" aria-hidden="true" tabindex="-1"></a>data_trn <span class="sc">|&gt;</span> <span class="fu">plot_grouped_box_violin</span>(<span class="st">"bldg_type"</span>, <span class="st">"sale_price"</span>)</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
</details>
<div class="cell-output-display">
<div>
<figure class="figure">
<p><img src="l02_exploratory_data_analysis_files/figure-html/unnamed-chunk-63-1.png" class="img-fluid figure-img" width="672"></p>
</figure>
</div>
</div>
</div>
<hr>
<p>When we have a categorical predictor and a numeric outcome, we often want to see both the relationship between the variables AND the variability on the categorical variable alone.</p>
<p>We like this combined plot enough when doing EDA to provide a specific function (included in <code>fun_plots.r</code>)!</p>
<p>It is our go to for understanding the potential effect of a categorical predictor</p>
<div class="cell">
<details open="" class="code-fold">
<summary>Code</summary>
<div class="sourceCode cell-code" id="cb66"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb66-1"><a href="#cb66-1" aria-hidden="true" tabindex="-1"></a>plot_categorical <span class="ot">&lt;-</span> <span class="cf">function</span>(df, x, y, <span class="at">ordered =</span> <span class="cn">FALSE</span>){</span>
<span id="cb66-2"><a href="#cb66-2" aria-hidden="true" tabindex="-1"></a>  <span class="cf">if</span> (ordered) {</span>
<span id="cb66-3"><a href="#cb66-3" aria-hidden="true" tabindex="-1"></a>    df <span class="ot">&lt;-</span> df <span class="sc">|&gt;</span></span>
<span id="cb66-4"><a href="#cb66-4" aria-hidden="true" tabindex="-1"></a>      <span class="fu">mutate</span>(<span class="sc">!!</span><span class="at">x :=</span> <span class="fu">fct_reorder</span>(.data[[x]], .data[[y]]))</span>
<span id="cb66-5"><a href="#cb66-5" aria-hidden="true" tabindex="-1"></a>  }</span>
<span id="cb66-6"><a href="#cb66-6" aria-hidden="true" tabindex="-1"></a>  </span>
<span id="cb66-7"><a href="#cb66-7" aria-hidden="true" tabindex="-1"></a>  x_label_size <span class="ot">&lt;-</span> <span class="fu">if_else</span>(skimr<span class="sc">::</span><span class="fu">n_unique</span>(df[[x]]) <span class="sc">&lt;</span> <span class="dv">7</span>, <span class="dv">11</span>, <span class="dv">7</span>)</span>
<span id="cb66-8"><a href="#cb66-8" aria-hidden="true" tabindex="-1"></a>  </span>
<span id="cb66-9"><a href="#cb66-9" aria-hidden="true" tabindex="-1"></a>  p_bar <span class="ot">&lt;-</span> df <span class="sc">|&gt;</span></span>
<span id="cb66-10"><a href="#cb66-10" aria-hidden="true" tabindex="-1"></a>    <span class="fu">ggplot</span>(<span class="fu">aes</span>(<span class="at">x =</span> .data[[x]])) <span class="sc">+</span></span>
<span id="cb66-11"><a href="#cb66-11" aria-hidden="true" tabindex="-1"></a>    <span class="fu">geom_bar</span>()  <span class="sc">+</span></span>
<span id="cb66-12"><a href="#cb66-12" aria-hidden="true" tabindex="-1"></a>    <span class="fu">theme</span>(<span class="at">axis.text.x =</span> <span class="fu">element_text</span>(<span class="at">angle =</span> <span class="dv">90</span>, <span class="at">size =</span> x_label_size, </span>
<span id="cb66-13"><a href="#cb66-13" aria-hidden="true" tabindex="-1"></a>                                     <span class="at">vjust =</span> <span class="fl">0.5</span>, <span class="at">hjust =</span> <span class="dv">1</span>),</span>
<span id="cb66-14"><a href="#cb66-14" aria-hidden="true" tabindex="-1"></a>          <span class="at">axis.text.y =</span> <span class="fu">element_text</span>(<span class="at">size =</span> <span class="dv">11</span>))</span>
<span id="cb66-15"><a href="#cb66-15" aria-hidden="true" tabindex="-1"></a>  </span>
<span id="cb66-16"><a href="#cb66-16" aria-hidden="true" tabindex="-1"></a>  p_box <span class="ot">&lt;-</span> df <span class="sc">|&gt;</span></span>
<span id="cb66-17"><a href="#cb66-17" aria-hidden="true" tabindex="-1"></a>    <span class="fu">ggplot</span>(<span class="fu">aes</span>(<span class="at">x =</span> .data[[x]], <span class="at">y =</span> .data[[y]])) <span class="sc">+</span></span>
<span id="cb66-18"><a href="#cb66-18" aria-hidden="true" tabindex="-1"></a>    <span class="fu">geom_violin</span>(<span class="at">fill =</span> <span class="st">"green"</span>, <span class="at">color =</span> <span class="cn">NA</span>) <span class="sc">+</span></span>
<span id="cb66-19"><a href="#cb66-19" aria-hidden="true" tabindex="-1"></a>    <span class="fu">geom_boxplot</span>(<span class="at">width =</span> .<span class="dv">1</span>, <span class="at">fill =</span> <span class="cn">NA</span>, <span class="at">lwd =</span> <span class="fl">1.1</span>, <span class="at">fatten =</span> <span class="fl">1.1</span>) <span class="sc">+</span></span>
<span id="cb66-20"><a href="#cb66-20" aria-hidden="true" tabindex="-1"></a>    <span class="fu">theme</span>(<span class="at">axis.text.x =</span> <span class="fu">element_text</span>(<span class="at">angle =</span> <span class="dv">90</span>, <span class="at">size =</span> x_label_size, </span>
<span id="cb66-21"><a href="#cb66-21" aria-hidden="true" tabindex="-1"></a>                                     <span class="at">vjust =</span> <span class="fl">0.5</span>, <span class="at">hjust =</span> <span class="dv">1</span>),</span>
<span id="cb66-22"><a href="#cb66-22" aria-hidden="true" tabindex="-1"></a>          <span class="at">axis.text.y =</span> <span class="fu">element_text</span>(<span class="at">size =</span> <span class="dv">11</span>))</span>
<span id="cb66-23"><a href="#cb66-23" aria-hidden="true" tabindex="-1"></a>  </span>
<span id="cb66-24"><a href="#cb66-24" aria-hidden="true" tabindex="-1"></a>  <span class="fu">return</span>(<span class="fu">list</span>(p_bar, p_box))</span>
<span id="cb66-25"><a href="#cb66-25" aria-hidden="true" tabindex="-1"></a>}</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
</details>
</div>
<hr>
<p><code>sale_price</code> by <code>bldg_type</code></p>
<div class="cell">
<details open="" class="code-fold">
<summary>Code</summary>
<div class="sourceCode cell-code" id="cb67"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb67-1"><a href="#cb67-1" aria-hidden="true" tabindex="-1"></a>data_trn <span class="sc">|&gt;</span> <span class="fu">plot_categorical</span>(<span class="st">"bldg_type"</span>, <span class="st">"sale_price"</span>) <span class="sc">|&gt;</span> </span>
<span id="cb67-2"><a href="#cb67-2" aria-hidden="true" tabindex="-1"></a>  <span class="fu">plot_grid</span>(<span class="at">plotlist =</span> _, <span class="at">ncol =</span> <span class="dv">1</span>)</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
</details>
<div class="cell-output-display">
<div>
<figure class="figure">
<p><img src="l02_exploratory_data_analysis_files/figure-html/unnamed-chunk-65-1.png" class="img-fluid figure-img" width="672"></p>
</figure>
</div>
</div>
</div>
<hr>
</section>
<section id="stacked-barplots-for-categorical-bivariate" class="level3" data-number="2.5.14">
<h3 data-number="2.5.14" class="anchored" data-anchor-id="stacked-barplots-for-categorical-bivariate"><span class="header-section-number">2.5.14</span> Stacked Barplots for Categorical (Bivariate)</h3>
<p>Stacked Barplots:</p>
<ul>
<li>Can be useful with both nominal and ordinal variables</li>
<li>Can create with either raw counts or percentages.
<ul>
<li>Displays different perspective (particularly with uneven distributions across levels)</li>
<li>Depends on your question</li>
</ul></li>
<li>Often, you will place the outcome on the x-axis and the feature is coded by fill</li>
</ul>
<div class="cell">
<details open="" class="code-fold">
<summary>Code</summary>
<div class="sourceCode cell-code" id="cb68"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb68-1"><a href="#cb68-1" aria-hidden="true" tabindex="-1"></a>plot_grouped_barplot_count <span class="ot">&lt;-</span> <span class="cf">function</span>(df, x, y){</span>
<span id="cb68-2"><a href="#cb68-2" aria-hidden="true" tabindex="-1"></a>  x_label_size <span class="ot">&lt;-</span> <span class="fu">if_else</span>(skimr<span class="sc">::</span><span class="fu">n_unique</span>(df[[x]]) <span class="sc">&lt;</span> <span class="dv">7</span>, <span class="dv">11</span>, <span class="dv">7</span>)</span>
<span id="cb68-3"><a href="#cb68-3" aria-hidden="true" tabindex="-1"></a>  </span>
<span id="cb68-4"><a href="#cb68-4" aria-hidden="true" tabindex="-1"></a>  df <span class="sc">|&gt;</span></span>
<span id="cb68-5"><a href="#cb68-5" aria-hidden="true" tabindex="-1"></a>    <span class="fu">ggplot</span>(<span class="fu">aes</span>(<span class="at">x =</span> .data[[y]], <span class="at">fill =</span> .data[[x]])) <span class="sc">+</span></span>
<span id="cb68-6"><a href="#cb68-6" aria-hidden="true" tabindex="-1"></a>    <span class="fu">geom_bar</span>(<span class="at">position =</span> <span class="st">"stack"</span>) <span class="sc">+</span></span>
<span id="cb68-7"><a href="#cb68-7" aria-hidden="true" tabindex="-1"></a>    <span class="fu">theme</span>(<span class="at">axis.text.x =</span> <span class="fu">element_text</span>(<span class="at">angle =</span> <span class="dv">90</span>, <span class="at">size =</span> x_label_size, </span>
<span id="cb68-8"><a href="#cb68-8" aria-hidden="true" tabindex="-1"></a>                                     <span class="at">vjust =</span> <span class="fl">0.5</span>, <span class="at">hjust =</span> <span class="dv">1</span>),</span>
<span id="cb68-9"><a href="#cb68-9" aria-hidden="true" tabindex="-1"></a>          <span class="at">axis.text.y =</span> <span class="fu">element_text</span>(<span class="at">size =</span> <span class="dv">11</span>))</span>
<span id="cb68-10"><a href="#cb68-10" aria-hidden="true" tabindex="-1"></a>}</span>
<span id="cb68-11"><a href="#cb68-11" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb68-12"><a href="#cb68-12" aria-hidden="true" tabindex="-1"></a>plot_grouped_barplot_percent <span class="ot">&lt;-</span> <span class="cf">function</span>(df, x, y){</span>
<span id="cb68-13"><a href="#cb68-13" aria-hidden="true" tabindex="-1"></a>  x_label_size <span class="ot">&lt;-</span> <span class="fu">if_else</span>(skimr<span class="sc">::</span><span class="fu">n_unique</span>(df[[x]]) <span class="sc">&lt;</span> <span class="dv">7</span>, <span class="dv">11</span>, <span class="dv">7</span>)</span>
<span id="cb68-14"><a href="#cb68-14" aria-hidden="true" tabindex="-1"></a>  </span>
<span id="cb68-15"><a href="#cb68-15" aria-hidden="true" tabindex="-1"></a>  df <span class="sc">|&gt;</span></span>
<span id="cb68-16"><a href="#cb68-16" aria-hidden="true" tabindex="-1"></a>    <span class="fu">ggplot</span>(<span class="fu">aes</span>(<span class="at">x =</span> .data[[y]], <span class="at">fill =</span> .data[[x]])) <span class="sc">+</span></span>
<span id="cb68-17"><a href="#cb68-17" aria-hidden="true" tabindex="-1"></a>    <span class="fu">geom_bar</span>(<span class="at">position =</span> <span class="st">"fill"</span>) <span class="sc">+</span></span>
<span id="cb68-18"><a href="#cb68-18" aria-hidden="true" tabindex="-1"></a>    <span class="fu">labs</span>(<span class="at">y =</span> <span class="st">"Proportion"</span>) <span class="sc">+</span></span>
<span id="cb68-19"><a href="#cb68-19" aria-hidden="true" tabindex="-1"></a>    <span class="fu">theme</span>(<span class="at">axis.text.x =</span> <span class="fu">element_text</span>(<span class="at">angle =</span> <span class="dv">90</span>, <span class="at">size =</span> x_label_size, </span>
<span id="cb68-20"><a href="#cb68-20" aria-hidden="true" tabindex="-1"></a>                                     <span class="at">vjust =</span> <span class="fl">0.5</span>, <span class="at">hjust =</span> <span class="dv">1</span>),</span>
<span id="cb68-21"><a href="#cb68-21" aria-hidden="true" tabindex="-1"></a>          <span class="at">axis.text.y =</span> <span class="fu">element_text</span>(<span class="at">size =</span> <span class="dv">11</span>))</span>
<span id="cb68-22"><a href="#cb68-22" aria-hidden="true" tabindex="-1"></a>}</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
</details>
</div>
<hr>
<p>For example, if we wanted to learn about how <code>bldg_type</code> varies by <code>lot_config</code>, see these plots</p>
<div class="cell">
<details open="" class="code-fold">
<summary>Code</summary>
<div class="sourceCode cell-code" id="cb69"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb69-1"><a href="#cb69-1" aria-hidden="true" tabindex="-1"></a>data_trn <span class="sc">|&gt;</span> <span class="fu">plot_grouped_barplot_count</span>(<span class="st">"lot_config"</span>, <span class="st">"bldg_type"</span>)</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
</details>
<div class="cell-output-display">
<div>
<figure class="figure">
<p><img src="l02_exploratory_data_analysis_files/figure-html/unnamed-chunk-67-1.png" class="img-fluid figure-img" width="672"></p>
</figure>
</div>
</div>
</div>
<div class="cell">
<details open="" class="code-fold">
<summary>Code</summary>
<div class="sourceCode cell-code" id="cb70"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb70-1"><a href="#cb70-1" aria-hidden="true" tabindex="-1"></a>data_trn <span class="sc">|&gt;</span> <span class="fu">plot_grouped_barplot_percent</span>(<span class="st">"lot_config"</span>, <span class="st">"bldg_type"</span>)</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
</details>
<div class="cell-output-display">
<div>
<figure class="figure">
<p><img src="l02_exploratory_data_analysis_files/figure-html/unnamed-chunk-68-1.png" class="img-fluid figure-img" width="672"></p>
</figure>
</div>
</div>
</div>
<hr>
<p>May want to plot both ways</p>
<div class="cell">
<details open="" class="code-fold">
<summary>Code</summary>
<div class="sourceCode cell-code" id="cb71"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb71-1"><a href="#cb71-1" aria-hidden="true" tabindex="-1"></a>data_trn <span class="sc">|&gt;</span> <span class="fu">plot_grouped_barplot_percent</span>(<span class="st">"lot_config"</span>, <span class="st">"bldg_type"</span>)</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
</details>
<div class="cell-output-display">
<div>
<figure class="figure">
<p><img src="l02_exploratory_data_analysis_files/figure-html/unnamed-chunk-69-1.png" class="img-fluid figure-img" width="672"></p>
</figure>
</div>
</div>
</div>
<div class="cell">
<details open="" class="code-fold">
<summary>Code</summary>
<div class="sourceCode cell-code" id="cb72"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb72-1"><a href="#cb72-1" aria-hidden="true" tabindex="-1"></a>data_trn <span class="sc">|&gt;</span> <span class="fu">plot_grouped_barplot_percent</span>(<span class="st">"bldg_type"</span>, <span class="st">"lot_config"</span>)</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
</details>
<div class="cell-output-display">
<div>
<figure class="figure">
<p><img src="l02_exploratory_data_analysis_files/figure-html/unnamed-chunk-70-1.png" class="img-fluid figure-img" width="672"></p>
</figure>
</div>
</div>
</div>
<hr>
</section>
<section id="tile-plot-for-ordinal-categorical-bivariate" class="level3" data-number="2.5.15">
<h3 data-number="2.5.15" class="anchored" data-anchor-id="tile-plot-for-ordinal-categorical-bivariate"><span class="header-section-number">2.5.15</span> Tile Plot for Ordinal Categorical (Bivariate)</h3>
<p>Tile plots may be useful if both categorical variables are ordinal</p>
<div class="cell">
<details open="" class="code-fold">
<summary>Code</summary>
<div class="sourceCode cell-code" id="cb73"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb73-1"><a href="#cb73-1" aria-hidden="true" tabindex="-1"></a>plot_tile <span class="ot">&lt;-</span> <span class="cf">function</span>(df, x, y){</span>
<span id="cb73-2"><a href="#cb73-2" aria-hidden="true" tabindex="-1"></a>  df <span class="sc">|&gt;</span></span>
<span id="cb73-3"><a href="#cb73-3" aria-hidden="true" tabindex="-1"></a>    <span class="fu">count</span>(.data[[x]], .data[[y]]) <span class="sc">|&gt;</span></span>
<span id="cb73-4"><a href="#cb73-4" aria-hidden="true" tabindex="-1"></a>    <span class="fu">ggplot</span>(<span class="fu">aes</span>(<span class="at">x =</span> .data[[x]], <span class="at">y =</span> .data[[y]])) <span class="sc">+</span></span>
<span id="cb73-5"><a href="#cb73-5" aria-hidden="true" tabindex="-1"></a>    <span class="fu">geom_tile</span>(<span class="at">mapping =</span> <span class="fu">aes</span>(<span class="at">fill =</span> n))</span>
<span id="cb73-6"><a href="#cb73-6" aria-hidden="true" tabindex="-1"></a>}</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
</details>
</div>
<hr>
<div class="cell">
<details open="" class="code-fold">
<summary>Code</summary>
<div class="sourceCode cell-code" id="cb74"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb74-1"><a href="#cb74-1" aria-hidden="true" tabindex="-1"></a>data_trn <span class="sc">|&gt;</span> <span class="fu">plot_tile</span>(<span class="st">"overall_qual"</span>, <span class="st">"garage_qual"</span>)</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
</details>
<div class="cell-output-display">
<div>
<figure class="figure">
<p><img src="l02_exploratory_data_analysis_files/figure-html/unnamed-chunk-72-1.png" class="img-fluid figure-img" width="672"></p>
</figure>
</div>
</div>
</div>
<hr>
<p>You might also consider a scatterplot with jitter in this instance</p>
<div class="cell">
<details open="" class="code-fold">
<summary>Code</summary>
<div class="sourceCode cell-code" id="cb75"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb75-1"><a href="#cb75-1" aria-hidden="true" tabindex="-1"></a>data_trn <span class="sc">|&gt;</span> </span>
<span id="cb75-2"><a href="#cb75-2" aria-hidden="true" tabindex="-1"></a>  <span class="fu">mutate</span>(<span class="at">overall_qual =</span> <span class="fu">jitter</span>(<span class="fu">as.numeric</span>(overall_qual)),</span>
<span id="cb75-3"><a href="#cb75-3" aria-hidden="true" tabindex="-1"></a>         <span class="at">garage_qual =</span> <span class="fu">as.numeric</span>(garage_qual)) <span class="sc">|&gt;</span> </span>
<span id="cb75-4"><a href="#cb75-4" aria-hidden="true" tabindex="-1"></a>  <span class="fu">plot_scatter</span>(<span class="st">"overall_qual"</span>, <span class="st">"garage_qual"</span>)</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
</details>
<div class="cell-output-display">
<div>
<figure class="figure">
<p><img src="l02_exploratory_data_analysis_files/figure-html/unnamed-chunk-73-1.png" class="img-fluid figure-img" width="672"></p>
</figure>
</div>
</div>
</div>
<hr>
</section>
<section id="two-way-tables-for-categorical-variables-bivariate" class="level3" data-number="2.5.16">
<h3 data-number="2.5.16" class="anchored" data-anchor-id="two-way-tables-for-categorical-variables-bivariate"><span class="header-section-number">2.5.16</span> Two-way Tables for Categorical Variables (Bivariate)</h3>
<p>Two-way tables are sometimes a useful summary statistic for two categorical variables. We can use a 2-variable form of the tab function, <code>tab2()</code>, from my function scripts for this</p>
<p>For example, the relationship between <code>bldg_type</code> and <code>lot_config</code></p>
<div class="cell">
<details open="" class="code-fold">
<summary>Code</summary>
<div class="sourceCode cell-code" id="cb76"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb76-1"><a href="#cb76-1" aria-hidden="true" tabindex="-1"></a>data_trn <span class="sc">|&gt;</span> <span class="fu">tab2</span>(bldg_type, lot_config)</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
</details>
<div class="cell-output cell-output-stdout">
<pre><code>   bldg_type corner culdsac fr2 fr3 inside
      duplex     13       0   3   0     47
     one_fam    221      73  29   1    892
    town_end      8       5   3   0     92
 town_inside      0       3   3   0     40
     two_fam      6       0   1   1     24</code></pre>
</div>
</div>
<hr>
</section>
</section>
<section id="working-with-recipes" class="level2" data-number="2.6">
<h2 data-number="2.6" class="anchored" data-anchor-id="working-with-recipes"><span class="header-section-number">2.6</span> Working with Recipes</h2>
<p>Recipes are used for feature engineering in <code>tidymodels</code> using the <a href="https://recipes.tidymodels.org/"><code>recipes</code></a> package</p>
<ul>
<li>Used for transforming raw predictors into features used in our models</li>
<li>Describes all steps to make feature matrix. For example:
<ul>
<li>Transforming factors into “dummy” features if needed</li>
<li>Linear and non-linear transformations (e.g., log, box-cox)</li>
<li>Polynomials and interactions (i.e., <code>x1 * x1</code> or <code>x1 * x2</code>)</li>
<li>Missing value imputations</li>
</ul></li>
<li>Proper use of recipes is an important tool to prevent data leakage between train and either validation or test.</li>
<li>Recipes use only information from the training set in all feature engineering</li>
<li>Consider example of standardizing <code>x1</code> for a feature in train vs.&nbsp;validation and test. Must use mean and sd from TRAIN to standardize <code>x1</code> in train, validate, and test. VERY IMPORTANT.</li>
</ul>
<hr>
<p>We use recipes in a two step process - <code>prep()</code> and <code>bake()</code></p>
<ul>
<li>“Prepping” a recipe involves calculating any statistics needed for the transformations that will be applied to engineer features (e.g., mean and standard deviation to normalize a numeric variable).
<ul>
<li>Prepping is done with the <code>prep()</code> function.</li>
<li>Prepping is <strong>always</strong> done only with training data. A “prepped” recipe does not derive any statistics from validation or test sets.</li>
</ul></li>
<li>“Baking” is the process of calculating the features
<ul>
<li>Baking is done with the <code>bake()</code> function.</li>
<li>We used our prepped recipe when we bake.</li>
<li>Whereas we only prep a recipe with training data, we can use a prepped recipe to bake features from any dataset (training, validation, or test).</li>
</ul></li>
</ul>
<hr>
<p>We will work with recipes extensively when model building starting in unit 3</p>
<p>For now, we will only use the recipe to indicate roles as a gentle introduction.</p>
<p>We will expand on this recipe in unit 3</p>
<p>Recipe syntax is very similar to generic <code>tidyverse</code> syntax (created by same group)</p>
<ul>
<li>Actually a subset of <code>tidyverse</code> functions</li>
<li>Less flexible/powerful but focused on our needs and easier to learn</li>
<li>You will eventually know both</li>
</ul>
<hr>
<p>Recipes are used in Modeling scripts (which is a third type of script after cleaning and modeling EDA scripts)</p>
<ul>
<li>Lets reload training again to pretend we are starting a new script</li>
</ul>
<div class="cell">
<details open="" class="code-fold">
<summary>Code</summary>
<div class="sourceCode cell-code" id="annotated-cell-73"><pre class="sourceCode r code-annotation-code code-with-copy code-annotated"><code class="sourceCode r"><span id="annotated-cell-73-1"><a href="#annotated-cell-73-1" aria-hidden="true" tabindex="-1"></a> data_trn <span class="ot">&lt;-</span> <span class="fu">read_csv</span>(<span class="fu">file.path</span>(path_data, <span class="st">"ames_clean_class_trn.csv"</span>), </span>
<span id="annotated-cell-73-2"><a href="#annotated-cell-73-2" aria-hidden="true" tabindex="-1"></a>                      <span class="at">col_types =</span> <span class="fu">cols</span>()) <span class="sc">|&gt;</span> </span>
<a class="code-annotation-anchor" data-target-cell="annotated-cell-73" data-target-annotation="1" onclick="event.preventDefault();">1</a><span id="annotated-cell-73-3" class="code-annotation-target"><a href="#annotated-cell-73-3" aria-hidden="true" tabindex="-1"></a>  <span class="fu">class_ames</span>() <span class="sc">|&gt;</span></span>
<span id="annotated-cell-73-4"><a href="#annotated-cell-73-4" aria-hidden="true" tabindex="-1"></a>  <span class="fu">glimpse</span>()</span><div class="code-annotation-gutter-bg"></div><div class="code-annotation-gutter"></div></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
</details>
<div class="cell-annotation">
<dl class="code-annotation-container-grid">
<dt data-target-cell="annotated-cell-73" data-target-annotation="1">1</dt>
<dd>
<span data-code-cell="annotated-cell-73" data-code-lines="3" data-code-annotation="1">Remember our function for classing!</span>
</dd>
</dl>
</div>
<div class="cell-output cell-output-stdout">
<pre><code>Rows: 1,465
Columns: 10
$ sale_price   &lt;dbl&gt; 105000, 126000, 115000, 120000, 99500, 112000, 122000, 12…
$ gr_liv_area  &lt;dbl&gt; 896, 882, 864, 836, 918, 1902, 900, 1225, 1728, 858, 1306…
$ lot_area     &lt;dbl&gt; 11622, 8400, 10500, 2280, 7892, 8930, 9819, 9320, 13260, …
$ year_built   &lt;dbl&gt; 1961, 1970, 1971, 1975, 1979, 1978, 1967, 1959, 1962, 195…
$ overall_qual &lt;fct&gt; 5, 4, 4, 7, 6, 6, 5, 4, 5, 5, 3, 5, 4, 5, 3, 5, 2, 6, 5, …
$ garage_cars  &lt;dbl&gt; 1, 2, 0, 1, 1, 2, 1, 0, 0, 0, 0, 1, 2, 2, 1, 1, 2, 2, 1, …
$ garage_qual  &lt;fct&gt; ta, ta, no_garage, ta, ta, ta, ta, no_garage, no_garage, …
$ ms_zoning    &lt;fct&gt; res_high, res_low, res_low, res_low, res_low, res_med, re…
$ lot_config   &lt;fct&gt; inside, corner, fr2, fr2, inside, inside, inside, inside,…
$ bldg_type    &lt;fct&gt; one_fam, one_fam, one_fam, town_inside, town_end, duplex,…</code></pre>
</div>
</div>
<hr>
<p>Recipes can be used to indicate the outcome and predictors that will be used in the model</p>
<ul>
<li>Can use <code>.</code> to indicate all predictors
<ul>
<li>Currently, our preferred method for larger data sets</li>
<li>We can exclude some predictors later by changing their role, removing them with a later recipe step (<span class="math inline">\(step\_rm()\)</span>), or specifying a more precise formula when we fit the model</li>
<li>See <a href="https://recipes.tidymodels.org/articles/Roles.html">Roles in Recipes</a> for more info</li>
</ul></li>
<li>Can use specific names of predictors along with <span class="math inline">\(+\)</span>
<ul>
<li>This is our preferred method when we have a smaller set of predictors (We will show you both approaches)</li>
<li>e.g., <code>sale_price ~ lot_area + year_built + overall_qual</code></li>
</ul></li>
<li>Do NOT indicate interactions here
<ul>
<li>All predictors are combined with <code>+</code></li>
<li>Interactions are specified by a later explicit feature engineering step</li>
</ul></li>
</ul>
<div class="cell">
<details open="" class="code-fold">
<summary>Code</summary>
<div class="sourceCode cell-code" id="cb79"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb79-1"><a href="#cb79-1" aria-hidden="true" tabindex="-1"></a>rec <span class="ot">&lt;-</span> <span class="fu">recipe</span>(sale_price <span class="sc">~</span> ., <span class="at">data =</span> data_trn)</span>
<span id="cb79-2"><a href="#cb79-2" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb79-3"><a href="#cb79-3" aria-hidden="true" tabindex="-1"></a>rec</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
</details>
<div class="cell-output cell-output-stderr">
<pre><code></code></pre>
</div>
<div class="cell-output cell-output-stderr">
<pre><code>── Recipe ──────────────────────────────────────────────────────────────────────</code></pre>
</div>
<div class="cell-output cell-output-stderr">
<pre><code></code></pre>
</div>
<div class="cell-output cell-output-stderr">
<pre><code>── Inputs </code></pre>
</div>
<div class="cell-output cell-output-stderr">
<pre><code>Number of variables by role</code></pre>
</div>
<div class="cell-output cell-output-stderr">
<pre><code>outcome:   1
predictor: 9</code></pre>
</div>
<details open="" class="code-fold">
<summary>Code</summary>
<div class="sourceCode cell-code" id="cb86"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb86-1"><a href="#cb86-1" aria-hidden="true" tabindex="-1"></a><span class="fu">summary</span>(rec)</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
</details>
<div class="cell-output cell-output-stdout">
<pre><code># A tibble: 10 × 4
   variable     type      role      source  
   &lt;chr&gt;        &lt;list&gt;    &lt;chr&gt;     &lt;chr&gt;   
 1 gr_liv_area  &lt;chr [2]&gt; predictor original
 2 lot_area     &lt;chr [2]&gt; predictor original
 3 year_built   &lt;chr [2]&gt; predictor original
 4 overall_qual &lt;chr [3]&gt; predictor original
 5 garage_cars  &lt;chr [2]&gt; predictor original
 6 garage_qual  &lt;chr [3]&gt; predictor original
 7 ms_zoning    &lt;chr [3]&gt; predictor original
 8 lot_config   &lt;chr [3]&gt; predictor original
 9 bldg_type    &lt;chr [3]&gt; predictor original
10 sale_price   &lt;chr [2]&gt; outcome   original</code></pre>
</div>
</div>
<hr>
<section id="prepping-and-baking-a-recipe" class="level3" data-number="2.6.1">
<h3 data-number="2.6.1" class="anchored" data-anchor-id="prepping-and-baking-a-recipe"><span class="header-section-number">2.6.1</span> Prepping and Baking a Recipe</h3>
<p>Let’s make a feature matrix from the training set</p>
<p>There are two discrete (and important) steps</p>
<ul>
<li><code>prep()</code></li>
<li><code>bake()</code></li>
</ul>
<p>First we prep the recipe using the training data</p>
<div class="cell">
<details open="" class="code-fold">
<summary>Code</summary>
<div class="sourceCode cell-code" id="annotated-cell-76"><pre class="sourceCode r code-annotation-code code-with-copy code-annotated"><code class="sourceCode r"><a class="code-annotation-anchor" data-target-cell="annotated-cell-76" data-target-annotation="1" onclick="event.preventDefault();">1</a><span id="annotated-cell-76-1" class="code-annotation-target"><a href="#annotated-cell-76-1" aria-hidden="true" tabindex="-1"></a>rec_prep <span class="ot">&lt;-</span> rec <span class="sc">|&gt;</span></span>
<a class="code-annotation-anchor" data-target-cell="annotated-cell-76" data-target-annotation="2" onclick="event.preventDefault();">2</a><span id="annotated-cell-76-2" class="code-annotation-target"><a href="#annotated-cell-76-2" aria-hidden="true" tabindex="-1"></a>  <span class="fu">prep</span>(<span class="at">training =</span> data_trn)</span><div class="code-annotation-gutter-bg"></div><div class="code-annotation-gutter"></div></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
</details>
<div class="cell-annotation">
<dl class="code-annotation-container-grid">
<dt data-target-cell="annotated-cell-76" data-target-annotation="1">1</dt>
<dd>
<span data-code-cell="annotated-cell-76" data-code-lines="1" data-code-annotation="1">We start by prepping our raw/original recipe (<code>rec</code>)</span>
</dd>
<dt data-target-cell="annotated-cell-76" data-target-annotation="2">2</dt>
<dd>
<span data-code-cell="annotated-cell-76" data-code-lines="2" data-code-annotation="2">We use the <code>prep()</code> function on on the training data. Recipes are ALWAYS prepped using training data. This makes sure that are recipes will always only use information from the training set when making features for any subsequent dataset. As part of the prepping process, <code>prep()</code> calculates and saves the features for the training data for later use</span>
</dd>
</dl>
</div>
</div>
<hr>
<p>Second, we bake the training data using this prepped recipe to get a feature matrix from it.</p>
<p>We set <code>new_data = NULL</code> because don’t need features for new data. Instead, we want features from the training data that were used to prep the recipe</p>
<div class="cell">
<details open="" class="code-fold">
<summary>Code</summary>
<div class="sourceCode cell-code" id="cb88"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb88-1"><a href="#cb88-1" aria-hidden="true" tabindex="-1"></a>feat_trn <span class="ot">&lt;-</span> rec_prep <span class="sc">|&gt;</span> </span>
<span id="cb88-2"><a href="#cb88-2" aria-hidden="true" tabindex="-1"></a>  <span class="fu">bake</span>(<span class="at">new_data =</span> <span class="cn">NULL</span>)</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
</details>
</div>
<hr>
<p>Finally, we should generally at least glimpse and/or skim (and typically do some more EDA) on our features to make sure our recipe is doing what we expect.</p>
<ul>
<li>glimpse</li>
</ul>
<div class="cell">
<details open="" class="code-fold">
<summary>Code</summary>
<div class="sourceCode cell-code" id="cb89"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb89-1"><a href="#cb89-1" aria-hidden="true" tabindex="-1"></a>feat_trn <span class="sc">|&gt;</span> <span class="fu">glimpse</span>()</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
</details>
<div class="cell-output cell-output-stdout">
<pre><code>Rows: 1,465
Columns: 10
$ gr_liv_area  &lt;dbl&gt; 896, 882, 864, 836, 918, 1902, 900, 1225, 1728, 858, 1306…
$ lot_area     &lt;dbl&gt; 11622, 8400, 10500, 2280, 7892, 8930, 9819, 9320, 13260, …
$ year_built   &lt;dbl&gt; 1961, 1970, 1971, 1975, 1979, 1978, 1967, 1959, 1962, 195…
$ overall_qual &lt;fct&gt; 5, 4, 4, 7, 6, 6, 5, 4, 5, 5, 3, 5, 4, 5, 3, 5, 2, 6, 5, …
$ garage_cars  &lt;dbl&gt; 1, 2, 0, 1, 1, 2, 1, 0, 0, 0, 0, 1, 2, 2, 1, 1, 2, 2, 1, …
$ garage_qual  &lt;fct&gt; ta, ta, no_garage, ta, ta, ta, ta, no_garage, no_garage, …
$ ms_zoning    &lt;fct&gt; res_high, res_low, res_low, res_low, res_low, res_med, re…
$ lot_config   &lt;fct&gt; inside, corner, fr2, fr2, inside, inside, inside, inside,…
$ bldg_type    &lt;fct&gt; one_fam, one_fam, one_fam, town_inside, town_end, duplex,…
$ sale_price   &lt;dbl&gt; 105000, 126000, 115000, 120000, 99500, 112000, 122000, 12…</code></pre>
</div>
</div>
<hr>
<ul>
<li>skim</li>
</ul>
<div class="cell">
<details open="" class="code-fold">
<summary>Code</summary>
<div class="sourceCode cell-code" id="cb91"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb91-1"><a href="#cb91-1" aria-hidden="true" tabindex="-1"></a>feat_trn <span class="sc">|&gt;</span> <span class="fu">skim_all</span>()</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
</details>
<div class="cell-output-display">
<table class="caption-top table table-sm table-striped small">
<caption>Data summary</caption>
<tbody>
<tr class="odd">
<td style="text-align: left;">Name</td>
<td style="text-align: left;">feat_trn</td>
</tr>
<tr class="even">
<td style="text-align: left;">Number of rows</td>
<td style="text-align: left;">1465</td>
</tr>
<tr class="odd">
<td style="text-align: left;">Number of columns</td>
<td style="text-align: left;">10</td>
</tr>
<tr class="even">
<td style="text-align: left;">_______________________</td>
<td style="text-align: left;"></td>
</tr>
<tr class="odd">
<td style="text-align: left;">Column type frequency:</td>
<td style="text-align: left;"></td>
</tr>
<tr class="even">
<td style="text-align: left;">factor</td>
<td style="text-align: left;">5</td>
</tr>
<tr class="odd">
<td style="text-align: left;">numeric</td>
<td style="text-align: left;">5</td>
</tr>
<tr class="even">
<td style="text-align: left;">________________________</td>
<td style="text-align: left;"></td>
</tr>
<tr class="odd">
<td style="text-align: left;">Group variables</td>
<td style="text-align: left;">None</td>
</tr>
</tbody>
</table>
<p><strong>Variable type: factor</strong></p>
<table class="caption-top table table-sm table-striped small">
<colgroup>
<col style="width: 16%">
<col style="width: 11%">
<col style="width: 16%">
<col style="width: 10%">
<col style="width: 44%">
</colgroup>
<thead>
<tr class="header">
<th style="text-align: left;">skim_variable</th>
<th style="text-align: right;">n_missing</th>
<th style="text-align: right;">complete_rate</th>
<th style="text-align: right;">n_unique</th>
<th style="text-align: left;">top_counts</th>
</tr>
</thead>
<tbody>
<tr class="odd">
<td style="text-align: left;">overall_qual</td>
<td style="text-align: right;">0</td>
<td style="text-align: right;">1</td>
<td style="text-align: right;">10</td>
<td style="text-align: left;">5: 424, 6: 350, 7: 304, 8: 176</td>
</tr>
<tr class="even">
<td style="text-align: left;">garage_qual</td>
<td style="text-align: right;">0</td>
<td style="text-align: right;">1</td>
<td style="text-align: right;">5</td>
<td style="text-align: left;">ta: 1312, no_: 81, fa: 57, gd: 13</td>
</tr>
<tr class="odd">
<td style="text-align: left;">ms_zoning</td>
<td style="text-align: right;">0</td>
<td style="text-align: right;">1</td>
<td style="text-align: right;">7</td>
<td style="text-align: left;">res: 1157, res: 217, flo: 66, com: 13</td>
</tr>
<tr class="even">
<td style="text-align: left;">lot_config</td>
<td style="text-align: right;">0</td>
<td style="text-align: right;">1</td>
<td style="text-align: right;">5</td>
<td style="text-align: left;">ins: 1095, cor: 248, cul: 81, fr2: 39</td>
</tr>
<tr class="odd">
<td style="text-align: left;">bldg_type</td>
<td style="text-align: right;">0</td>
<td style="text-align: right;">1</td>
<td style="text-align: right;">5</td>
<td style="text-align: left;">one: 1216, tow: 108, dup: 63, tow: 46</td>
</tr>
</tbody>
</table>
<p><strong>Variable type: numeric</strong></p>
<table class="caption-top table table-sm table-striped small">
<colgroup>
<col style="width: 13%">
<col style="width: 9%">
<col style="width: 13%">
<col style="width: 9%">
<col style="width: 8%">
<col style="width: 5%">
<col style="width: 6%">
<col style="width: 6%">
<col style="width: 6%">
<col style="width: 6%">
<col style="width: 5%">
<col style="width: 8%">
</colgroup>
<thead>
<tr class="header">
<th style="text-align: left;">skim_variable</th>
<th style="text-align: right;">n_missing</th>
<th style="text-align: right;">complete_rate</th>
<th style="text-align: right;">mean</th>
<th style="text-align: right;">sd</th>
<th style="text-align: right;">p0</th>
<th style="text-align: right;">p25</th>
<th style="text-align: right;">p50</th>
<th style="text-align: right;">p75</th>
<th style="text-align: right;">p100</th>
<th style="text-align: right;">skew</th>
<th style="text-align: right;">kurtosis</th>
</tr>
</thead>
<tbody>
<tr class="odd">
<td style="text-align: left;">gr_liv_area</td>
<td style="text-align: right;">0</td>
<td style="text-align: right;">1</td>
<td style="text-align: right;">1506.84</td>
<td style="text-align: right;">511.44</td>
<td style="text-align: right;">438</td>
<td style="text-align: right;">1128</td>
<td style="text-align: right;">1450</td>
<td style="text-align: right;">1759</td>
<td style="text-align: right;">5642</td>
<td style="text-align: right;">1.43</td>
<td style="text-align: right;">5.19</td>
</tr>
<tr class="even">
<td style="text-align: left;">lot_area</td>
<td style="text-align: right;">0</td>
<td style="text-align: right;">1</td>
<td style="text-align: right;">10144.16</td>
<td style="text-align: right;">8177.55</td>
<td style="text-align: right;">1476</td>
<td style="text-align: right;">7500</td>
<td style="text-align: right;">9375</td>
<td style="text-align: right;">11362</td>
<td style="text-align: right;">164660</td>
<td style="text-align: right;">11.20</td>
<td style="text-align: right;">182.91</td>
</tr>
<tr class="odd">
<td style="text-align: left;">year_built</td>
<td style="text-align: right;">0</td>
<td style="text-align: right;">1</td>
<td style="text-align: right;">1971.35</td>
<td style="text-align: right;">29.65</td>
<td style="text-align: right;">1880</td>
<td style="text-align: right;">1953</td>
<td style="text-align: right;">1972</td>
<td style="text-align: right;">2000</td>
<td style="text-align: right;">2010</td>
<td style="text-align: right;">-0.54</td>
<td style="text-align: right;">-0.62</td>
</tr>
<tr class="even">
<td style="text-align: left;">garage_cars</td>
<td style="text-align: right;">1</td>
<td style="text-align: right;">1</td>
<td style="text-align: right;">1.78</td>
<td style="text-align: right;">0.76</td>
<td style="text-align: right;">0</td>
<td style="text-align: right;">1</td>
<td style="text-align: right;">2</td>
<td style="text-align: right;">2</td>
<td style="text-align: right;">4</td>
<td style="text-align: right;">-0.26</td>
<td style="text-align: right;">0.10</td>
</tr>
<tr class="odd">
<td style="text-align: left;">sale_price</td>
<td style="text-align: right;">0</td>
<td style="text-align: right;">1</td>
<td style="text-align: right;">180696.15</td>
<td style="text-align: right;">78836.41</td>
<td style="text-align: right;">12789</td>
<td style="text-align: right;">129500</td>
<td style="text-align: right;">160000</td>
<td style="text-align: right;">213500</td>
<td style="text-align: right;">745000</td>
<td style="text-align: right;">1.64</td>
<td style="text-align: right;">4.60</td>
</tr>
</tbody>
</table>
</div>
</div>
<hr>
<p>We can now use our features from training to train models, but that will take place in the next unit!</p>
<p>We could also use the prepped recipe to bake validation or test data to evaluate trained models. That too will happen in the next unit!</p>


<div id="refs" class="references csl-bib-body hanging-indent" data-entry-spacing="0" role="list">
<div id="ref-AR" class="csl-entry" role="listitem">
Wickham, Hadley. 2019. <em>Advanced r</em>. 2nd ed. <a href="https://adv-r.hadley.nz/">https://adv-r.hadley.nz/</a>.
</div>
<div id="ref-RDS" class="csl-entry" role="listitem">
Wickham, Hadley, Çetinkaya-Rundel Mine, and Garrett Grolemund. 2023. <em>R for Data Science: Visualize, Model, Transform, and Import Data</em>. 2nd ed. <a href="https://r4ds.hadley.nz/">https://r4ds.hadley.nz/</a>.
</div>
</div>
</section>
</section>

</main> <!-- /main -->
<script id="quarto-html-after-body" type="application/javascript">
window.document.addEventListener("DOMContentLoaded", function (event) {
  const toggleBodyColorMode = (bsSheetEl) => {
    const mode = bsSheetEl.getAttribute("data-mode");
    const bodyEl = window.document.querySelector("body");
    if (mode === "dark") {
      bodyEl.classList.add("quarto-dark");
      bodyEl.classList.remove("quarto-light");
    } else {
      bodyEl.classList.add("quarto-light");
      bodyEl.classList.remove("quarto-dark");
    }
  }
  const toggleBodyColorPrimary = () => {
    const bsSheetEl = window.document.querySelector("link#quarto-bootstrap");
    if (bsSheetEl) {
      toggleBodyColorMode(bsSheetEl);
    }
  }
  toggleBodyColorPrimary();  
  const icon = "";
  const anchorJS = new window.AnchorJS();
  anchorJS.options = {
    placement: 'right',
    icon: icon
  };
  anchorJS.add('.anchored');
  const isCodeAnnotation = (el) => {
    for (const clz of el.classList) {
      if (clz.startsWith('code-annotation-')) {                     
        return true;
      }
    }
    return false;
  }
  const onCopySuccess = function(e) {
    // button target
    const button = e.trigger;
    // don't keep focus
    button.blur();
    // flash "checked"
    button.classList.add('code-copy-button-checked');
    var currentTitle = button.getAttribute("title");
    button.setAttribute("title", "Copied!");
    let tooltip;
    if (window.bootstrap) {
      button.setAttribute("data-bs-toggle", "tooltip");
      button.setAttribute("data-bs-placement", "left");
      button.setAttribute("data-bs-title", "Copied!");
      tooltip = new bootstrap.Tooltip(button, 
        { trigger: "manual", 
          customClass: "code-copy-button-tooltip",
          offset: [0, -8]});
      tooltip.show();    
    }
    setTimeout(function() {
      if (tooltip) {
        tooltip.hide();
        button.removeAttribute("data-bs-title");
        button.removeAttribute("data-bs-toggle");
        button.removeAttribute("data-bs-placement");
      }
      button.setAttribute("title", currentTitle);
      button.classList.remove('code-copy-button-checked');
    }, 1000);
    // clear code selection
    e.clearSelection();
  }
  const getTextToCopy = function(trigger) {
      const codeEl = trigger.previousElementSibling.cloneNode(true);
      for (const childEl of codeEl.children) {
        if (isCodeAnnotation(childEl)) {
          childEl.remove();
        }
      }
      return codeEl.innerText;
  }
  const clipboard = new window.ClipboardJS('.code-copy-button:not([data-in-quarto-modal])', {
    text: getTextToCopy
  });
  clipboard.on('success', onCopySuccess);
  if (window.document.getElementById('quarto-embedded-source-code-modal')) {
    // For code content inside modals, clipBoardJS needs to be initialized with a container option
    // TODO: Check when it could be a function (https://github.com/zenorocha/clipboard.js/issues/860)
    const clipboardModal = new window.ClipboardJS('.code-copy-button[data-in-quarto-modal]', {
      text: getTextToCopy,
      container: window.document.getElementById('quarto-embedded-source-code-modal')
    });
    clipboardModal.on('success', onCopySuccess);
  }
    var localhostRegex = new RegExp(/^(?:http|https):\/\/localhost\:?[0-9]*\//);
    var mailtoRegex = new RegExp(/^mailto:/);
      var filterRegex = new RegExp("https:\/\/github\.io\/jjcurtin\/book_iaml");
    var isInternal = (href) => {
        return filterRegex.test(href) || localhostRegex.test(href) || mailtoRegex.test(href);
    }
    // Inspect non-navigation links and adorn them if external
 	var links = window.document.querySelectorAll('a[href]:not(.nav-link):not(.navbar-brand):not(.toc-action):not(.sidebar-link):not(.sidebar-item-toggle):not(.pagination-link):not(.no-external):not([aria-hidden]):not(.dropdown-item):not(.quarto-navigation-tool):not(.about-link)');
    for (var i=0; i<links.length; i++) {
      const link = links[i];
      if (!isInternal(link.href)) {
        // undo the damage that might have been done by quarto-nav.js in the case of
        // links that we want to consider external
        if (link.dataset.originalHref !== undefined) {
          link.href = link.dataset.originalHref;
        }
      }
    }
  function tippyHover(el, contentFn, onTriggerFn, onUntriggerFn) {
    const config = {
      allowHTML: true,
      maxWidth: 500,
      delay: 100,
      arrow: false,
      appendTo: function(el) {
          return el.parentElement;
      },
      interactive: true,
      interactiveBorder: 10,
      theme: 'quarto',
      placement: 'bottom-start',
    };
    if (contentFn) {
      config.content = contentFn;
    }
    if (onTriggerFn) {
      config.onTrigger = onTriggerFn;
    }
    if (onUntriggerFn) {
      config.onUntrigger = onUntriggerFn;
    }
    window.tippy(el, config); 
  }
  const noterefs = window.document.querySelectorAll('a[role="doc-noteref"]');
  for (var i=0; i<noterefs.length; i++) {
    const ref = noterefs[i];
    tippyHover(ref, function() {
      // use id or data attribute instead here
      let href = ref.getAttribute('data-footnote-href') || ref.getAttribute('href');
      try { href = new URL(href).hash; } catch {}
      const id = href.replace(/^#\/?/, "");
      const note = window.document.getElementById(id);
      if (note) {
        return note.innerHTML;
      } else {
        return "";
      }
    });
  }
  const xrefs = window.document.querySelectorAll('a.quarto-xref');
  const processXRef = (id, note) => {
    // Strip column container classes
    const stripColumnClz = (el) => {
      el.classList.remove("page-full", "page-columns");
      if (el.children) {
        for (const child of el.children) {
          stripColumnClz(child);
        }
      }
    }
    stripColumnClz(note)
    if (id === null || id.startsWith('sec-')) {
      // Special case sections, only their first couple elements
      const container = document.createElement("div");
      if (note.children && note.children.length > 2) {
        container.appendChild(note.children[0].cloneNode(true));
        for (let i = 1; i < note.children.length; i++) {
          const child = note.children[i];
          if (child.tagName === "P" && child.innerText === "") {
            continue;
          } else {
            container.appendChild(child.cloneNode(true));
            break;
          }
        }
        if (window.Quarto?.typesetMath) {
          window.Quarto.typesetMath(container);
        }
        return container.innerHTML
      } else {
        if (window.Quarto?.typesetMath) {
          window.Quarto.typesetMath(note);
        }
        return note.innerHTML;
      }
    } else {
      // Remove any anchor links if they are present
      const anchorLink = note.querySelector('a.anchorjs-link');
      if (anchorLink) {
        anchorLink.remove();
      }
      if (window.Quarto?.typesetMath) {
        window.Quarto.typesetMath(note);
      }
      // TODO in 1.5, we should make sure this works without a callout special case
      if (note.classList.contains("callout")) {
        return note.outerHTML;
      } else {
        return note.innerHTML;
      }
    }
  }
  for (var i=0; i<xrefs.length; i++) {
    const xref = xrefs[i];
    tippyHover(xref, undefined, function(instance) {
      instance.disable();
      let url = xref.getAttribute('href');
      let hash = undefined; 
      if (url.startsWith('#')) {
        hash = url;
      } else {
        try { hash = new URL(url).hash; } catch {}
      }
      if (hash) {
        const id = hash.replace(/^#\/?/, "");
        const note = window.document.getElementById(id);
        if (note !== null) {
          try {
            const html = processXRef(id, note.cloneNode(true));
            instance.setContent(html);
          } finally {
            instance.enable();
            instance.show();
          }
        } else {
          // See if we can fetch this
          fetch(url.split('#')[0])
          .then(res => res.text())
          .then(html => {
            const parser = new DOMParser();
            const htmlDoc = parser.parseFromString(html, "text/html");
            const note = htmlDoc.getElementById(id);
            if (note !== null) {
              const html = processXRef(id, note);
              instance.setContent(html);
            } 
          }).finally(() => {
            instance.enable();
            instance.show();
          });
        }
      } else {
        // See if we can fetch a full url (with no hash to target)
        // This is a special case and we should probably do some content thinning / targeting
        fetch(url)
        .then(res => res.text())
        .then(html => {
          const parser = new DOMParser();
          const htmlDoc = parser.parseFromString(html, "text/html");
          const note = htmlDoc.querySelector('main.content');
          if (note !== null) {
            // This should only happen for chapter cross references
            // (since there is no id in the URL)
            // remove the first header
            if (note.children.length > 0 && note.children[0].tagName === "HEADER") {
              note.children[0].remove();
            }
            const html = processXRef(null, note);
            instance.setContent(html);
          } 
        }).finally(() => {
          instance.enable();
          instance.show();
        });
      }
    }, function(instance) {
    });
  }
      let selectedAnnoteEl;
      const selectorForAnnotation = ( cell, annotation) => {
        let cellAttr = 'data-code-cell="' + cell + '"';
        let lineAttr = 'data-code-annotation="' +  annotation + '"';
        const selector = 'span[' + cellAttr + '][' + lineAttr + ']';
        return selector;
      }
      const selectCodeLines = (annoteEl) => {
        const doc = window.document;
        const targetCell = annoteEl.getAttribute("data-target-cell");
        const targetAnnotation = annoteEl.getAttribute("data-target-annotation");
        const annoteSpan = window.document.querySelector(selectorForAnnotation(targetCell, targetAnnotation));
        const lines = annoteSpan.getAttribute("data-code-lines").split(",");
        const lineIds = lines.map((line) => {
          return targetCell + "-" + line;
        })
        let top = null;
        let height = null;
        let parent = null;
        if (lineIds.length > 0) {
            //compute the position of the single el (top and bottom and make a div)
            const el = window.document.getElementById(lineIds[0]);
            top = el.offsetTop;
            height = el.offsetHeight;
            parent = el.parentElement.parentElement;
          if (lineIds.length > 1) {
            const lastEl = window.document.getElementById(lineIds[lineIds.length - 1]);
            const bottom = lastEl.offsetTop + lastEl.offsetHeight;
            height = bottom - top;
          }
          if (top !== null && height !== null && parent !== null) {
            // cook up a div (if necessary) and position it 
            let div = window.document.getElementById("code-annotation-line-highlight");
            if (div === null) {
              div = window.document.createElement("div");
              div.setAttribute("id", "code-annotation-line-highlight");
              div.style.position = 'absolute';
              parent.appendChild(div);
            }
            div.style.top = top - 2 + "px";
            div.style.height = height + 4 + "px";
            div.style.left = 0;
            let gutterDiv = window.document.getElementById("code-annotation-line-highlight-gutter");
            if (gutterDiv === null) {
              gutterDiv = window.document.createElement("div");
              gutterDiv.setAttribute("id", "code-annotation-line-highlight-gutter");
              gutterDiv.style.position = 'absolute';
              const codeCell = window.document.getElementById(targetCell);
              const gutter = codeCell.querySelector('.code-annotation-gutter');
              gutter.appendChild(gutterDiv);
            }
            gutterDiv.style.top = top - 2 + "px";
            gutterDiv.style.height = height + 4 + "px";
          }
          selectedAnnoteEl = annoteEl;
        }
      };
      const unselectCodeLines = () => {
        const elementsIds = ["code-annotation-line-highlight", "code-annotation-line-highlight-gutter"];
        elementsIds.forEach((elId) => {
          const div = window.document.getElementById(elId);
          if (div) {
            div.remove();
          }
        });
        selectedAnnoteEl = undefined;
      };
        // Handle positioning of the toggle
    window.addEventListener(
      "resize",
      throttle(() => {
        elRect = undefined;
        if (selectedAnnoteEl) {
          selectCodeLines(selectedAnnoteEl);
        }
      }, 10)
    );
    function throttle(fn, ms) {
    let throttle = false;
    let timer;
      return (...args) => {
        if(!throttle) { // first call gets through
            fn.apply(this, args);
            throttle = true;
        } else { // all the others get throttled
            if(timer) clearTimeout(timer); // cancel #2
            timer = setTimeout(() => {
              fn.apply(this, args);
              timer = throttle = false;
            }, ms);
        }
      };
    }
      // Attach click handler to the DT
      const annoteDls = window.document.querySelectorAll('dt[data-target-cell]');
      for (const annoteDlNode of annoteDls) {
        annoteDlNode.addEventListener('click', (event) => {
          const clickedEl = event.target;
          if (clickedEl !== selectedAnnoteEl) {
            unselectCodeLines();
            const activeEl = window.document.querySelector('dt[data-target-cell].code-annotation-active');
            if (activeEl) {
              activeEl.classList.remove('code-annotation-active');
            }
            selectCodeLines(clickedEl);
            clickedEl.classList.add('code-annotation-active');
          } else {
            // Unselect the line
            unselectCodeLines();
            clickedEl.classList.remove('code-annotation-active');
          }
        });
      }
  const findCites = (el) => {
    const parentEl = el.parentElement;
    if (parentEl) {
      const cites = parentEl.dataset.cites;
      if (cites) {
        return {
          el,
          cites: cites.split(' ')
        };
      } else {
        return findCites(el.parentElement)
      }
    } else {
      return undefined;
    }
  };
  var bibliorefs = window.document.querySelectorAll('a[role="doc-biblioref"]');
  for (var i=0; i<bibliorefs.length; i++) {
    const ref = bibliorefs[i];
    const citeInfo = findCites(ref);
    if (citeInfo) {
      tippyHover(citeInfo.el, function() {
        var popup = window.document.createElement('div');
        citeInfo.cites.forEach(function(cite) {
          var citeDiv = window.document.createElement('div');
          citeDiv.classList.add('hanging-indent');
          citeDiv.classList.add('csl-entry');
          var biblioDiv = window.document.getElementById('ref-' + cite);
          if (biblioDiv) {
            citeDiv.innerHTML = biblioDiv.innerHTML;
          }
          popup.appendChild(citeDiv);
        });
        return popup.innerHTML;
      });
    }
  }
});
</script>
<nav class="page-navigation">
  <div class="nav-page nav-page-previous">
      <a href="./l01_overview.html" class="pagination-link" aria-label="Overview of Machine Learning">
        <i class="bi bi-arrow-left-short"></i> <span class="nav-page-text"><span class="chapter-number">1</span>&nbsp; <span class="chapter-title">Overview of Machine Learning</span></span>
      </a>          
  </div>
  <div class="nav-page nav-page-next">
      <a href="./l03_regression.html" class="pagination-link" aria-label="Introduction to Regression Models">
        <span class="nav-page-text"><span class="chapter-number">3</span>&nbsp; <span class="chapter-title">Introduction to Regression Models</span></span> <i class="bi bi-arrow-right-short"></i>
      </a>
  </div>
</nav>
</div> <!-- /content -->




<footer class="footer"><div class="nav-footer"><div class="nav-footer-center"><div class="toc-actions d-sm-block d-md-none"><ul><li><a href="https://github.com/jjcurtin/book_iaml/edit/main/l02_exploratory_data_analysis.qmd" class="toc-action"><i class="bi bi-github"></i>Edit this page</a></li></ul></div></div></div></footer></body></html>