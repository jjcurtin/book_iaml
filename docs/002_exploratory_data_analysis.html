<!DOCTYPE html>
<html xmlns="http://www.w3.org/1999/xhtml" lang="en" xml:lang="en"><head>

<meta charset="utf-8">
<meta name="generator" content="quarto-1.2.269">

<meta name="viewport" content="width=device-width, initial-scale=1.0, user-scalable=yes">


<title>Introduction to Applied Machine Learning - 2&nbsp; Exploratory Data Analysis</title>
<style>
code{white-space: pre-wrap;}
span.smallcaps{font-variant: small-caps;}
div.columns{display: flex; gap: min(4vw, 1.5em);}
div.column{flex: auto; overflow-x: auto;}
div.hanging-indent{margin-left: 1.5em; text-indent: -1.5em;}
ul.task-list{list-style: none;}
ul.task-list li input[type="checkbox"] {
  width: 0.8em;
  margin: 0 0.8em 0.2em -1.6em;
  vertical-align: middle;
}
pre > code.sourceCode { white-space: pre; position: relative; }
pre > code.sourceCode > span { display: inline-block; line-height: 1.25; }
pre > code.sourceCode > span:empty { height: 1.2em; }
.sourceCode { overflow: visible; }
code.sourceCode > span { color: inherit; text-decoration: inherit; }
div.sourceCode { margin: 1em 0; }
pre.sourceCode { margin: 0; }
@media screen {
div.sourceCode { overflow: auto; }
}
@media print {
pre > code.sourceCode { white-space: pre-wrap; }
pre > code.sourceCode > span { text-indent: -5em; padding-left: 5em; }
}
pre.numberSource code
  { counter-reset: source-line 0; }
pre.numberSource code > span
  { position: relative; left: -4em; counter-increment: source-line; }
pre.numberSource code > span > a:first-child::before
  { content: counter(source-line);
    position: relative; left: -1em; text-align: right; vertical-align: baseline;
    border: none; display: inline-block;
    -webkit-touch-callout: none; -webkit-user-select: none;
    -khtml-user-select: none; -moz-user-select: none;
    -ms-user-select: none; user-select: none;
    padding: 0 4px; width: 4em;
    color: #aaaaaa;
  }
pre.numberSource { margin-left: 3em; border-left: 1px solid #aaaaaa;  padding-left: 4px; }
div.sourceCode
  {   }
@media screen {
pre > code.sourceCode > span > a:first-child::before { text-decoration: underline; }
}
code span.al { color: #ff0000; font-weight: bold; } /* Alert */
code span.an { color: #60a0b0; font-weight: bold; font-style: italic; } /* Annotation */
code span.at { color: #7d9029; } /* Attribute */
code span.bn { color: #40a070; } /* BaseN */
code span.bu { color: #008000; } /* BuiltIn */
code span.cf { color: #007020; font-weight: bold; } /* ControlFlow */
code span.ch { color: #4070a0; } /* Char */
code span.cn { color: #880000; } /* Constant */
code span.co { color: #60a0b0; font-style: italic; } /* Comment */
code span.cv { color: #60a0b0; font-weight: bold; font-style: italic; } /* CommentVar */
code span.do { color: #ba2121; font-style: italic; } /* Documentation */
code span.dt { color: #902000; } /* DataType */
code span.dv { color: #40a070; } /* DecVal */
code span.er { color: #ff0000; font-weight: bold; } /* Error */
code span.ex { } /* Extension */
code span.fl { color: #40a070; } /* Float */
code span.fu { color: #06287e; } /* Function */
code span.im { color: #008000; font-weight: bold; } /* Import */
code span.in { color: #60a0b0; font-weight: bold; font-style: italic; } /* Information */
code span.kw { color: #007020; font-weight: bold; } /* Keyword */
code span.op { color: #666666; } /* Operator */
code span.ot { color: #007020; } /* Other */
code span.pp { color: #bc7a00; } /* Preprocessor */
code span.sc { color: #4070a0; } /* SpecialChar */
code span.ss { color: #bb6688; } /* SpecialString */
code span.st { color: #4070a0; } /* String */
code span.va { color: #19177c; } /* Variable */
code span.vs { color: #4070a0; } /* VerbatimString */
code span.wa { color: #60a0b0; font-weight: bold; font-style: italic; } /* Warning */
div.csl-bib-body { }
div.csl-entry {
  clear: both;
}
.hanging div.csl-entry {
  margin-left:2em;
  text-indent:-2em;
}
div.csl-left-margin {
  min-width:2em;
  float:left;
}
div.csl-right-inline {
  margin-left:2em;
  padding-left:1em;
}
div.csl-indent {
  margin-left: 2em;
}
</style>


<script src="site_libs/quarto-nav/quarto-nav.js"></script>
<script src="site_libs/quarto-nav/headroom.min.js"></script>
<script src="site_libs/clipboard/clipboard.min.js"></script>
<script src="site_libs/quarto-search/autocomplete.umd.js"></script>
<script src="site_libs/quarto-search/fuse.min.js"></script>
<script src="site_libs/quarto-search/quarto-search.js"></script>
<meta name="quarto:offset" content="./">
<link href="./003_regression.html" rel="next">
<link href="./001_overview.html" rel="prev">
<script src="site_libs/quarto-html/quarto.js"></script>
<script src="site_libs/quarto-html/popper.min.js"></script>
<script src="site_libs/quarto-html/tippy.umd.min.js"></script>
<script src="site_libs/quarto-html/anchor.min.js"></script>
<link href="site_libs/quarto-html/tippy.css" rel="stylesheet">
<link href="site_libs/quarto-html/quarto-syntax-highlighting.css" rel="stylesheet" id="quarto-text-highlighting-styles">
<script src="site_libs/bootstrap/bootstrap.min.js"></script>
<link href="site_libs/bootstrap/bootstrap-icons.css" rel="stylesheet">
<link href="site_libs/bootstrap/bootstrap.min.css" rel="stylesheet" id="quarto-bootstrap" data-mode="light">
<script id="quarto-search-options" type="application/json">{
  "location": "sidebar",
  "copy-button": false,
  "collapse-after": 3,
  "panel-placement": "start",
  "type": "textbox",
  "limit": 20,
  "language": {
    "search-no-results-text": "No results",
    "search-matching-documents-text": "matching documents",
    "search-copy-link-title": "Copy link to search",
    "search-hide-matches-text": "Hide additional matches",
    "search-more-match-text": "more match in this document",
    "search-more-matches-text": "more matches in this document",
    "search-clear-button-title": "Clear",
    "search-detached-cancel-button-title": "Cancel",
    "search-submit-button-title": "Submit"
  }
}</script>

<script src="site_libs/kePrint-0.0.1/kePrint.js"></script>
<link href="site_libs/lightable-0.0.1/lightable.css" rel="stylesheet">

  <script src="https://cdn.jsdelivr.net/npm/mathjax@3/es5/tex-chtml-full.js" type="text/javascript"></script>

<link rel="stylesheet" href="style.css">
</head>

<body class="nav-sidebar floating">

<div id="quarto-search-results"></div>
  <header id="quarto-header" class="headroom fixed-top">
  <nav class="quarto-secondary-nav" data-bs-toggle="collapse" data-bs-target="#quarto-sidebar" aria-controls="quarto-sidebar" aria-expanded="false" aria-label="Toggle sidebar navigation" onclick="if (window.quartoToggleHeadroom) { window.quartoToggleHeadroom(); }">
    <div class="container-fluid d-flex justify-content-between">
      <h1 class="quarto-secondary-nav-title"><span class="chapter-number">2</span>&nbsp; <span class="chapter-title">Exploratory Data Analysis</span></h1>
      <button type="button" class="quarto-btn-toggle btn" aria-label="Show secondary navigation">
        <i class="bi bi-chevron-right"></i>
      </button>
    </div>
  </nav>
</header>
<!-- content -->
<div id="quarto-content" class="quarto-container page-columns page-rows-contents page-layout-article">
<!-- sidebar -->
  <nav id="quarto-sidebar" class="sidebar collapse sidebar-navigation floating overflow-auto">
    <div class="pt-lg-2 mt-2 text-left sidebar-header">
    <div class="sidebar-title mb-0 py-0">
      <a href="./">Introduction to Applied Machine Learning</a> 
        <div class="sidebar-tools-main tools-wide">
    <a href="https://github.com/jjcurtin/book_iaml" title="Source Code" class="sidebar-tool px-1"><i class="bi bi-github"></i></a>
    <a href="" title="Share" id="sidebar-tool-dropdown-0" class="sidebar-tool dropdown-toggle px-1" data-bs-toggle="dropdown" aria-expanded="false"><i class="bi bi-share"></i></a>
    <ul class="dropdown-menu" aria-labelledby="sidebar-tool-dropdown-0">
        <li>
          <a class="dropdown-item sidebar-tools-main-item" href="https://www.facebook.com/sharer/sharer.php?u=|url|">
            <i class="bi bi-bi-facebook pe-1"></i>
          Facebook
          </a>
        </li>
        <li>
          <a class="dropdown-item sidebar-tools-main-item" href="https://www.linkedin.com/sharing/share-offsite/?url=|url|">
            <i class="bi bi-bi-linkedin pe-1"></i>
          LinkedIn
          </a>
        </li>
    </ul>
  <a href="" class="quarto-reader-toggle sidebar-tool" onclick="window.quartoToggleReader(); return false;" title="Toggle reader mode">
  <div class="quarto-reader-toggle-btn">
  <i class="bi"></i>
  </div>
</a>
</div>
    </div>
      </div>
      <div class="mt-2 flex-shrink-0 align-items-center">
        <div class="sidebar-search">
        <div id="quarto-search" class="" title="Search"></div>
        </div>
      </div>
    <div class="sidebar-menu-container"> 
    <ul class="list-unstyled mt-1">
        <li class="sidebar-item">
  <div class="sidebar-item-container"> 
  <a href="./index.html" class="sidebar-item-text sidebar-link">Course Syllabus</a>
  </div>
</li>
        <li class="sidebar-item">
  <div class="sidebar-item-container"> 
  <a href="./001_overview.html" class="sidebar-item-text sidebar-link"><span class="chapter-number">1</span>&nbsp; <span class="chapter-title">Overview of Machine Learning</span></a>
  </div>
</li>
        <li class="sidebar-item">
  <div class="sidebar-item-container"> 
  <a href="./002_exploratory_data_analysis.html" class="sidebar-item-text sidebar-link active"><span class="chapter-number">2</span>&nbsp; <span class="chapter-title">Exploratory Data Analysis</span></a>
  </div>
</li>
        <li class="sidebar-item">
  <div class="sidebar-item-container"> 
  <a href="./003_regression.html" class="sidebar-item-text sidebar-link"><span class="chapter-number">3</span>&nbsp; <span class="chapter-title">Introduction to Regression Models</span></a>
  </div>
</li>
        <li class="sidebar-item">
  <div class="sidebar-item-container"> 
  <a href="./004_classification.html" class="sidebar-item-text sidebar-link"><span class="chapter-number">4</span>&nbsp; <span class="chapter-title">Introduction to Classification Models</span></a>
  </div>
</li>
        <li class="sidebar-item">
  <div class="sidebar-item-container"> 
  <a href="./005_resampling.html" class="sidebar-item-text sidebar-link"><span class="chapter-number">5</span>&nbsp; <span class="chapter-title">Resampling Methods for Model Selection and Evaluation</span></a>
  </div>
</li>
        <li class="sidebar-item">
  <div class="sidebar-item-container"> 
  <a href="./006_regularization.html" class="sidebar-item-text sidebar-link"><span class="chapter-number">6</span>&nbsp; <span class="chapter-title">Regularization and Penalized Models</span></a>
  </div>
</li>
        <li class="sidebar-item">
  <div class="sidebar-item-container"> 
  <a href="./007_midterm.html" class="sidebar-item-text sidebar-link"><span class="chapter-number">7</span>&nbsp; <span class="chapter-title">Midterm Exam</span></a>
  </div>
</li>
        <li class="sidebar-item">
  <div class="sidebar-item-container"> 
  <a href="./008_advanced_performance_metrics.html" class="sidebar-item-text sidebar-link"><span class="chapter-number">8</span>&nbsp; <span class="chapter-title">Advanced Performance Metrics</span></a>
  </div>
</li>
        <li class="sidebar-item">
  <div class="sidebar-item-container"> 
  <a href="./009_model_comparisons.html" class="sidebar-item-text sidebar-link"><span class="chapter-number">9</span>&nbsp; <span class="chapter-title">Model Comparisons and Other Explanatory Goals</span></a>
  </div>
</li>
        <li class="sidebar-item">
  <div class="sidebar-item-container"> 
  <a href="./010_random_forest.html" class="sidebar-item-text sidebar-link"><span class="chapter-number">10</span>&nbsp; <span class="chapter-title">Advanced Models: Decision Trees, Bagging Trees, and Random Forest</span></a>
  </div>
</li>
        <li class="sidebar-item">
  <div class="sidebar-item-container"> 
  <a href="./011_neural_networks.html" class="sidebar-item-text sidebar-link"><span class="chapter-number">11</span>&nbsp; <span class="chapter-title">Advanced Models: Neural Networks</span></a>
  </div>
</li>
        <li class="sidebar-item">
  <div class="sidebar-item-container"> 
  <a href="./012_nlp.html" class="sidebar-item-text sidebar-link"><span class="chapter-number">12</span>&nbsp; <span class="chapter-title">Natural Language Processing: Text Processing and Feature Engineering</span></a>
  </div>
</li>
        <li class="sidebar-item">
  <div class="sidebar-item-container"> 
  <a href="./013_applications.html" class="sidebar-item-text sidebar-link"><span class="chapter-number">13</span>&nbsp; <span class="chapter-title">Applications for Machine Learning: Synthesis and Concept Generalization</span></a>
  </div>
</li>
        <li class="sidebar-item">
  <div class="sidebar-item-container"> 
  <a href="./014_ethics.html" class="sidebar-item-text sidebar-link"><span class="chapter-number">14</span>&nbsp; <span class="chapter-title">Ethical Issues in Machine Learning Research and Applications</span></a>
  </div>
</li>
        <li class="sidebar-item">
  <div class="sidebar-item-container"> 
  <a href="./015_final.html" class="sidebar-item-text sidebar-link"><span class="chapter-number">15</span>&nbsp; <span class="chapter-title">Final Exam and Project</span></a>
  </div>
</li>
        <li class="sidebar-item sidebar-item-section">
      <div class="sidebar-item-container"> 
            <a class="sidebar-item-text sidebar-link text-start" data-bs-toggle="collapse" data-bs-target="#quarto-sidebar-section-1" aria-expanded="true">Appendices</a>
          <a class="sidebar-item-toggle text-start" data-bs-toggle="collapse" data-bs-target="#quarto-sidebar-section-1" aria-expanded="true">
            <i class="bi bi-chevron-right ms-2"></i>
          </a> 
      </div>
      <ul id="quarto-sidebar-section-1" class="collapse list-unstyled sidebar-section depth1 show">  
          <li class="sidebar-item">
  <div class="sidebar-item-container"> 
  <a href="./101_novel_levels.html" class="sidebar-item-text sidebar-link"><span class="chapter-number">16</span>&nbsp; <span class="chapter-title">Handling Novel Values in Held Out Sets</span></a>
  </div>
</li>
          <li class="sidebar-item">
  <div class="sidebar-item-container"> 
  <a href="./101_recipes.html" class="sidebar-item-text sidebar-link"><span class="chapter-number">17</span>&nbsp; <span class="chapter-title">Appendix 1: Feature Engineering with Recipes</span></a>
  </div>
</li>
          <li class="sidebar-item">
  <div class="sidebar-item-container"> 
  <a href="./102_model_performance_simulations.html" class="sidebar-item-text sidebar-link"><span class="chapter-number">18</span>&nbsp; <span class="chapter-title">Appendix 2: Simulations of Model Performance Bias and Variance by Resampling Techniques</span></a>
  </div>
</li>
          <li class="sidebar-item">
  <div class="sidebar-item-container"> 
  <a href="./103_shap.html" class="sidebar-item-text sidebar-link"><span class="chapter-number">19</span>&nbsp; <span class="chapter-title">Appendix 3: Understanding Shapley Values from SHAP</span></a>
  </div>
</li>
          <li class="sidebar-item">
  <div class="sidebar-item-container"> 
  <a href="./104_bootstrapping.html" class="sidebar-item-text sidebar-link"><span class="chapter-number">20</span>&nbsp; <span class="chapter-title">Appendix 4: Bootstrapping Standard Errors &amp; Confidence Intervals</span></a>
  </div>
</li>
          <li class="sidebar-item">
  <div class="sidebar-item-container"> 
  <a href="./test.html" class="sidebar-item-text sidebar-link"><span class="chapter-number">21</span>&nbsp; <span class="chapter-title">Test</span></a>
  </div>
</li>
      </ul>
  </li>
    </ul>
    </div>
</nav>
<!-- margin-sidebar -->
    <div id="quarto-margin-sidebar" class="sidebar margin-sidebar">
        <nav id="TOC" role="doc-toc" class="toc-active">
    <h2 id="toc-title">Table of contents</h2>
   
  <ul>
  <li><a href="#overview-of-unit" id="toc-overview-of-unit" class="nav-link active" data-scroll-target="#overview-of-unit"><span class="toc-section-number">2.1</span>  Overview of Unit</a>
  <ul class="collapse">
  <li><a href="#learning-objectives" id="toc-learning-objectives" class="nav-link" data-scroll-target="#learning-objectives"><span class="toc-section-number">2.1.1</span>  Learning Objectives</a></li>
  <li><a href="#readings" id="toc-readings" class="nav-link" data-scroll-target="#readings"><span class="toc-section-number">2.1.2</span>  Readings</a></li>
  <li><a href="#lecture-videos" id="toc-lecture-videos" class="nav-link" data-scroll-target="#lecture-videos"><span class="toc-section-number">2.1.3</span>  Lecture Videos</a></li>
  <li><a href="#application-assignment" id="toc-application-assignment" class="nav-link" data-scroll-target="#application-assignment"><span class="toc-section-number">2.1.4</span>  Application Assignment</a></li>
  <li><a href="#quiz" id="toc-quiz" class="nav-link" data-scroll-target="#quiz"><span class="toc-section-number">2.1.5</span>  Quiz</a></li>
  </ul></li>
  <li><a href="#overview-of-exploratory-data-analysis" id="toc-overview-of-exploratory-data-analysis" class="nav-link" data-scroll-target="#overview-of-exploratory-data-analysis"><span class="toc-section-number">2.2</span>  Overview of Exploratory Data Analysis</a>
  <ul class="collapse">
  <li><a href="#stages-of-data-analysis-and-model-development" id="toc-stages-of-data-analysis-and-model-development" class="nav-link" data-scroll-target="#stages-of-data-analysis-and-model-development"><span class="toc-section-number">2.2.1</span>  Stages of Data Analysis and Model Development</a></li>
  </ul></li>
  <li><a href="#best-practices-and-other-recommendations" id="toc-best-practices-and-other-recommendations" class="nav-link" data-scroll-target="#best-practices-and-other-recommendations"><span class="toc-section-number">2.3</span>  Best Practices and Other Recommendations</a>
  <ul class="collapse">
  <li><a href="#data-file-formats" id="toc-data-file-formats" class="nav-link" data-scroll-target="#data-file-formats"><span class="toc-section-number">2.3.1</span>  Data file formats</a></li>
  <li><a href="#classing-variables" id="toc-classing-variables" class="nav-link" data-scroll-target="#classing-variables"><span class="toc-section-number">2.3.2</span>  Classing Variables</a></li>
  <li><a href="#data-dictionaries" id="toc-data-dictionaries" class="nav-link" data-scroll-target="#data-dictionaries"><span class="toc-section-number">2.3.3</span>  Data Dictionaries</a></li>
  <li><a href="#the-ames-housing-prices-dataset" id="toc-the-ames-housing-prices-dataset" class="nav-link" data-scroll-target="#the-ames-housing-prices-dataset"><span class="toc-section-number">2.3.4</span>  The Ames Housing Prices Dataset</a></li>
  <li><a href="#packages-and-conflicts" id="toc-packages-and-conflicts" class="nav-link" data-scroll-target="#packages-and-conflicts"><span class="toc-section-number">2.3.5</span>  Packages and Conflicts</a></li>
  <li><a href="#source-and-other-environment-settings" id="toc-source-and-other-environment-settings" class="nav-link" data-scroll-target="#source-and-other-environment-settings"><span class="toc-section-number">2.3.6</span>  Source and Other Environment Settings</a></li>
  <li><a href="#read-and-glimpse-dataframe" id="toc-read-and-glimpse-dataframe" class="nav-link" data-scroll-target="#read-and-glimpse-dataframe"><span class="toc-section-number">2.3.7</span>  Read and Glimpse Dataframe</a></li>
  </ul></li>
  <li><a href="#exploratory-data-analysis-for-data-cleaning" id="toc-exploratory-data-analysis-for-data-cleaning" class="nav-link" data-scroll-target="#exploratory-data-analysis-for-data-cleaning"><span class="toc-section-number">2.4</span>  Exploratory Data Analysis for Data Cleaning</a>
  <ul class="collapse">
  <li><a href="#data-leakage-issues" id="toc-data-leakage-issues" class="nav-link" data-scroll-target="#data-leakage-issues"><span class="toc-section-number">2.4.1</span>  Data Leakage Issues</a></li>
  <li><a href="#tidy-variable-names" id="toc-tidy-variable-names" class="nav-link" data-scroll-target="#tidy-variable-names"><span class="toc-section-number">2.4.2</span>  Tidy variable names</a></li>
  <li><a href="#explore-variable-classes" id="toc-explore-variable-classes" class="nav-link" data-scroll-target="#explore-variable-classes"><span class="toc-section-number">2.4.3</span>  Explore variable classes</a></li>
  <li><a href="#skimming-the-data" id="toc-skimming-the-data" class="nav-link" data-scroll-target="#skimming-the-data"><span class="toc-section-number">2.4.4</span>  Skimming the data</a></li>
  <li><a href="#missing-data---all-variables" id="toc-missing-data---all-variables" class="nav-link" data-scroll-target="#missing-data---all-variables"><span class="toc-section-number">2.4.5</span>  Missing Data - All variables</a></li>
  <li><a href="#explore-minmax-response-for-numeric-variables" id="toc-explore-minmax-response-for-numeric-variables" class="nav-link" data-scroll-target="#explore-minmax-response-for-numeric-variables"><span class="toc-section-number">2.4.6</span>  Explore Min/Max Response for Numeric Variables</a></li>
  <li><a href="#explore-all-responses-for-categorical-variables" id="toc-explore-all-responses-for-categorical-variables" class="nav-link" data-scroll-target="#explore-all-responses-for-categorical-variables"><span class="toc-section-number">2.4.7</span>  Explore All Responses for Categorical Variables</a></li>
  <li><a href="#tidy-responses-for-categorical-variables" id="toc-tidy-responses-for-categorical-variables" class="nav-link" data-scroll-target="#tidy-responses-for-categorical-variables"><span class="toc-section-number">2.4.8</span>  Tidy Responses for Categorical Variables</a></li>
  <li><a href="#trainvalidatetest-splits" id="toc-trainvalidatetest-splits" class="nav-link" data-scroll-target="#trainvalidatetest-splits"><span class="toc-section-number">2.4.9</span>  Train/Validate/Test Splits</a></li>
  </ul></li>
  <li><a href="#exploratory-data-analysis-for-modeling" id="toc-exploratory-data-analysis-for-modeling" class="nav-link" data-scroll-target="#exploratory-data-analysis-for-modeling"><span class="toc-section-number">2.5</span>  Exploratory Data Analysis for Modeling</a>
  <ul class="collapse">
  <li><a href="#overall-summary-of-feature-matrix" id="toc-overall-summary-of-feature-matrix" class="nav-link" data-scroll-target="#overall-summary-of-feature-matrix"><span class="toc-section-number">2.5.1</span>  Overall Summary of Feature Matrix</a></li>
  <li><a href="#univariate-distributions" id="toc-univariate-distributions" class="nav-link" data-scroll-target="#univariate-distributions"><span class="toc-section-number">2.5.2</span>  Univariate Distributions</a></li>
  <li><a href="#barplots-for-categorical-variables-univariate" id="toc-barplots-for-categorical-variables-univariate" class="nav-link" data-scroll-target="#barplots-for-categorical-variables-univariate"><span class="toc-section-number">2.5.3</span>  Barplots for Categorical Variables (Univariate)</a></li>
  <li><a href="#tables-for-categorical-variables-univariate" id="toc-tables-for-categorical-variables-univariate" class="nav-link" data-scroll-target="#tables-for-categorical-variables-univariate"><span class="toc-section-number">2.5.4</span>  Tables for Categorical Variables (Univariate)</a></li>
  <li><a href="#histograms-for-numeric-variables-univariate" id="toc-histograms-for-numeric-variables-univariate" class="nav-link" data-scroll-target="#histograms-for-numeric-variables-univariate"><span class="toc-section-number">2.5.5</span>  Histograms for Numeric Variables (Univariate)</a></li>
  <li><a href="#smoothed-frequency-polygons-for-numeric-variables-univariate" id="toc-smoothed-frequency-polygons-for-numeric-variables-univariate" class="nav-link" data-scroll-target="#smoothed-frequency-polygons-for-numeric-variables-univariate"><span class="toc-section-number">2.5.6</span>  Smoothed Frequency Polygons for Numeric Variables (Univariate)</a></li>
  <li><a href="#simple-boxplots-for-numeric-variables-univariate" id="toc-simple-boxplots-for-numeric-variables-univariate" class="nav-link" data-scroll-target="#simple-boxplots-for-numeric-variables-univariate"><span class="toc-section-number">2.5.7</span>  Simple Boxplots for Numeric Variables (Univariate)</a></li>
  <li><a href="#combined-boxplot-and-violin-plots-for-numeric-variables-univariate" id="toc-combined-boxplot-and-violin-plots-for-numeric-variables-univariate" class="nav-link" data-scroll-target="#combined-boxplot-and-violin-plots-for-numeric-variables-univariate"><span class="toc-section-number">2.5.8</span>  Combined Boxplot and Violin Plots for Numeric Variables (Univariate)</a></li>
  <li><a href="#summary-statistics-for-numeric-variables-univariate" id="toc-summary-statistics-for-numeric-variables-univariate" class="nav-link" data-scroll-target="#summary-statistics-for-numeric-variables-univariate"><span class="toc-section-number">2.5.9</span>  Summary Statistics for Numeric Variables (Univariate)</a></li>
  <li><a href="#bivariate-relationships-with-outcome" id="toc-bivariate-relationships-with-outcome" class="nav-link" data-scroll-target="#bivariate-relationships-with-outcome"><span class="toc-section-number">2.5.10</span>  Bivariate Relationships with Outcome</a></li>
  <li><a href="#scatterplots-for-numeric-variables-bivariate" id="toc-scatterplots-for-numeric-variables-bivariate" class="nav-link" data-scroll-target="#scatterplots-for-numeric-variables-bivariate"><span class="toc-section-number">2.5.11</span>  Scatterplots for Numeric Variables (Bivariate)</a></li>
  <li><a href="#correlations-correlation-plots-for-numeric-variables-bivariate" id="toc-correlations-correlation-plots-for-numeric-variables-bivariate" class="nav-link" data-scroll-target="#correlations-correlation-plots-for-numeric-variables-bivariate"><span class="toc-section-number">2.5.12</span>  Correlations &amp; Correlation Plots for Numeric Variables (Bivariate)</a></li>
  <li><a href="#grouped-box-violin-plots-for-categorical-and-numeric-bivariate" id="toc-grouped-box-violin-plots-for-categorical-and-numeric-bivariate" class="nav-link" data-scroll-target="#grouped-box-violin-plots-for-categorical-and-numeric-bivariate"><span class="toc-section-number">2.5.13</span>  Grouped Box + Violin Plots for Categorical and Numeric (Bivariate)</a></li>
  <li><a href="#stacked-barplots-for-categorical-bivariate" id="toc-stacked-barplots-for-categorical-bivariate" class="nav-link" data-scroll-target="#stacked-barplots-for-categorical-bivariate"><span class="toc-section-number">2.5.14</span>  Stacked Barplots for Categorical (Bivariate)</a></li>
  <li><a href="#tile-plot-for-ordered-categorical-bivariate" id="toc-tile-plot-for-ordered-categorical-bivariate" class="nav-link" data-scroll-target="#tile-plot-for-ordered-categorical-bivariate"><span class="toc-section-number">2.5.15</span>  Tile Plot for Ordered Categorical (Bivariate)</a></li>
  <li><a href="#two-way-tables-for-categorical-variables-bivariate" id="toc-two-way-tables-for-categorical-variables-bivariate" class="nav-link" data-scroll-target="#two-way-tables-for-categorical-variables-bivariate"><span class="toc-section-number">2.5.16</span>  Two-way Tables for Categorical Variables (Bivariate)</a></li>
  </ul></li>
  <li><a href="#working-with-recipes" id="toc-working-with-recipes" class="nav-link" data-scroll-target="#working-with-recipes"><span class="toc-section-number">2.6</span>  Working with Recipes</a>
  <ul class="collapse">
  <li><a href="#prepping-and-baking-a-recipe" id="toc-prepping-and-baking-a-recipe" class="nav-link" data-scroll-target="#prepping-and-baking-a-recipe"><span class="toc-section-number">2.6.1</span>  Prepping and Baking a Recipe</a></li>
  </ul></li>
  <li><a href="#discussion-topics" id="toc-discussion-topics" class="nav-link" data-scroll-target="#discussion-topics"><span class="toc-section-number">2.7</span>  Discussion Topics</a></li>
  </ul>
<div class="toc-actions"><div><i class="bi bi-github"></i></div><div class="action-links"><p><a href="https://github.com/jjcurtin/book_iaml/edit/main/002_exploratory_data_analysis.qmd" class="toc-action">Edit this page</a></p></div></div></nav>
    </div>
<!-- main -->
<main class="content" id="quarto-document-content">

<header id="title-block-header" class="quarto-title-block default">
<div class="quarto-title">
<h1 class="title d-none d-lg-block"><span class="chapter-number">2</span>&nbsp; <span class="chapter-title">Exploratory Data Analysis</span></h1>
</div>



<div class="quarto-title-meta">

    
  
    
  </div>
  

</header>

<section id="overview-of-unit" class="level2" data-number="2.1">
<h2 data-number="2.1" class="anchored" data-anchor-id="overview-of-unit"><span class="header-section-number">2.1</span> Overview of Unit</h2>
<section id="learning-objectives" class="level3" data-number="2.1.1">
<h3 data-number="2.1.1" class="anchored" data-anchor-id="learning-objectives"><span class="header-section-number">2.1.1</span> Learning Objectives</h3>
<ul>
<li>Stages of Analysis</li>
<li>Best practices for data storage, variable classing, data dictionaries</li>
<li>Problems and solutions regarding data leakage</li>
<li>Key goals and techniques cleaning EDA
<ul>
<li>Tidying names and response labels</li>
<li>Appropriate visualizations based on variable class</li>
<li>Summary statistics based on variable class</li>
</ul></li>
<li>Proper splitting for training/validation and test sets</li>
<li>Key goals and techniques modeling EDA
<ul>
<li>Appropriate visualizations based on variable class</li>
<li>Summary statistics based on variable class</li>
</ul></li>
<li>Introductory use of recipes for feature engineering</li>
</ul>
<hr>
</section>
<section id="readings" class="level3" data-number="2.1.2">
<h3 data-number="2.1.2" class="anchored" data-anchor-id="readings"><span class="header-section-number">2.1.2</span> Readings</h3>
<p>[NOTE: These are short chapters. You are reading to understand the framework of visualizing data in R. Don’t feel like you have to memorize the details. These are reference materials that you can turn back to when you need to write code!]</p>
<ul>
<li><span class="citation" data-cites="RDS">Wickham, Çetinkaya-Rundel, and Grolemund (<a href="#ref-RDS" role="doc-biblioref">2023</a>)</span> <a href="https://r4ds.hadley.nz/data-visualize">Chapter 1, Data Visualization</a></li>
<li><span class="citation" data-cites="RDS">Wickham, Çetinkaya-Rundel, and Grolemund (<a href="#ref-RDS" role="doc-biblioref">2023</a>)</span> <a href="https://r4ds.hadley.nz/layers">Chapter 9, Layers</a></li>
<li><span class="citation" data-cites="RDS">Wickham, Çetinkaya-Rundel, and Grolemund (<a href="#ref-RDS" role="doc-biblioref">2023</a>)</span> <a href="https://r4ds.hadley.nz/eda">Chapter 10, Exploratory Data Analysis</a></li>
</ul>
</section>
<section id="lecture-videos" class="level3" data-number="2.1.3">
<h3 data-number="2.1.3" class="anchored" data-anchor-id="lecture-videos"><span class="header-section-number">2.1.3</span> Lecture Videos</h3>
<ul>
<li><a href="https://mediaspace.wisc.edu/media/iaml+2-1/1_m7rm2anw">Lecture 1: Stages of Data Analysis and Model Development</a> ~ 10 mins</li>
<li><a href="https://mediaspace.wisc.edu/media/iaml+2-2/1_nxtr5uda">Lecture 2: Best Practices and Other Recommendations</a> ~ 27 mins</li>
<li><a href="https://mediaspace.wisc.edu/media/iaml+2-3/1_xorv88kj">Lecture 3: EDA for Data Cleaning</a> ~ 41 mins</li>
<li><a href="https://mediaspace.wisc.edu/media/iaml+2-4/1_f6hm842y">Lecture 4: EDA for Modeling - Univariate</a> ~ 24 mins</li>
<li><a href="">Lecture 5: EDA for Modeling - Bivariate</a></li>
<li><a href="">Lecture 6: Working with Recipes</a><br>
<br>
</li>
<li><a href="">Discussion</a></li>
</ul>
<p>Post questions or discuss readings or lectures in Slack</p>
<hr>
</section>
<section id="application-assignment" class="level3" data-number="2.1.4">
<h3 data-number="2.1.4" class="anchored" data-anchor-id="application-assignment"><span class="header-section-number">2.1.4</span> Application Assignment</h3>
<ul>
<li><a href="application_assignments/unit_02/ames_raw_class.csv">data</a></li>
<li><a href="application_assignments/unit_02/ames_data_dictionary.pdf">data dictionary</a></li>
<li>cleaning EDA: <a href="application_assignments/unit_02/hw_unit_2_cleaning.qmd">qmd</a></li>
<li>modeling EDA: <a href="application_assignments/unit_02/hw_unit_2_modeling.qmd">qmd</a></li>
<li>solutions: <a href="">knit cleaning EDA</a>; <a href="">knit modeling EDA</a></li>
</ul>
<p>Note: the qmd files may not be viewable but can be downloaded through your browser (e.g., right-click to save)</p>
<p>Submit the <a href="https://canvas.wisc.edu/courses/395546/assignments/2187687">application assignment</a> by 8 pm on Wednesday, January 31st</p>
</section>
<section id="quiz" class="level3" data-number="2.1.5">
<h3 data-number="2.1.5" class="anchored" data-anchor-id="quiz"><span class="header-section-number">2.1.5</span> Quiz</h3>
<p>Submit the <a href="https://canvas.wisc.edu/courses/395546/quizzes/514049">unit quiz</a> by 8 pm on Wednesday, January 31st</p>
<hr>
</section>
</section>
<section id="overview-of-exploratory-data-analysis" class="level2" data-number="2.2">
<h2 data-number="2.2" class="anchored" data-anchor-id="overview-of-exploratory-data-analysis"><span class="header-section-number">2.2</span> Overview of Exploratory Data Analysis</h2>
<section id="stages-of-data-analysis-and-model-development" class="level3" data-number="2.2.1">
<h3 data-number="2.2.1" class="anchored" data-anchor-id="stages-of-data-analysis-and-model-development"><span class="header-section-number">2.2.1</span> Stages of Data Analysis and Model Development</h3>
<p>These are the main stages of data analysis for machine learning and the data that are used</p>
<ol type="1">
<li>EDA: Cleaning (full dataset)</li>
<li>EDA: Split data into training, validation and test set(s)</li>
<li>EDA: Modeling (training sets)</li>
<li>Model Building: Feature engineering (training sets)</li>
<li>Model Building: Fit many models configurations (training set)</li>
<li>Model Building: Evaluate many models configurations (validation sets)</li>
<li>Final Model Evaluation: Select final/best model configuration (validation sets)</li>
<li>Final Model Evaluation: Fit best model configuration (use both training and validation sets)</li>
<li>Final Model Evaluation: Evaluate final model configuration (test sets)</li>
<li>Final Model Evaluation: Fit best model configuration to ALL data (training, validation, and test sets) if you plan to use it for applications.</li>
</ol>
<hr>
<p>The earlier stages are highly iterative:</p>
<ul>
<li>You may iterate some through EDA stages 1-3 if you find further errors to clean in stage 3 [<strong>But make sure you resplit into the same sets</strong>]</li>
<li>You will iterate many times though stages 3-6 as you learn more about your data both through EDA for modeling and evaluating actual models in validation</li>
</ul>
<p>You will NOT iterate back to earlier stages after you select a final model configuration</p>
<ul>
<li>Stages 7 - 10 are performed ONLY ONCE</li>
<li>Only one model configuration is selected and re-fit and only that model is brought into test for evaluation</li>
<li>Any more than this is essentially equivalent to p-hacking in traditional analyses</li>
<li>Step 10 only happens if you plan to use the model in some application</li>
</ul>
<hr>
</section>
</section>
<section id="best-practices-and-other-recommendations" class="level2" data-number="2.3">
<h2 data-number="2.3" class="anchored" data-anchor-id="best-practices-and-other-recommendations"><span class="header-section-number">2.3</span> Best Practices and Other Recommendations</h2>
<section id="data-file-formats" class="level3" data-number="2.3.1">
<h3 data-number="2.3.1" class="anchored" data-anchor-id="data-file-formats"><span class="header-section-number">2.3.1</span> Data file formats</h3>
<p>We generally store data as CSV [comma-separated value] files</p>
<ul>
<li>Easy to <strong>view directly</strong> in a text editor</li>
<li>Easy to <strong>share</strong> because others can use/import into any data analysis platform</li>
<li>Works with <strong>version control</strong> (e.g.&nbsp;git, svn)</li>
<li>use <code>read_csv()</code> and <code>write_csv()</code></li>
</ul>
<p>Exceptions include:</p>
<ul>
<li>We <strong>may</strong> consider binary (.rds) format for very big files because read/write can be slow for csv files.<br>
</li>
<li>Binary file format provides a very modest additional protection for sensitive data (which we also don’t share)</li>
<li>use <code>read_rds()</code> and <code>write_rds()</code></li>
</ul>
<p>See <a href="https://r4ds.hadley.nz/data-import">chapter 7 - Data Import</a> in <span class="citation" data-cites="RDS">Wickham, Çetinkaya-Rundel, and Grolemund (<a href="#ref-RDS" role="doc-biblioref">2023</a>)</span> for more details and advanced techniques for importing data using <code>read_csv()</code></p>
<hr>
</section>
<section id="classing-variables" class="level3" data-number="2.3.2">
<h3 data-number="2.3.2" class="anchored" data-anchor-id="classing-variables"><span class="header-section-number">2.3.2</span> Classing Variables</h3>
<p>We store and class variables in R based on their data type (level of measurement).</p>
<ul>
<li>See Wikipedia definitions for <a href="https://en.wikipedia.org/wiki/Level_of_measurement">levels of measurement</a> for a bit more precision that we will provide here.</li>
</ul>
<p>Coarsely, there are four levels:</p>
<ul>
<li>nominal: qualitative categories, no inherent order (e.g., marital status, sex, car color)</li>
<li>ordinal: qualitative categories (sometimes uses number), inherent order but not equidistant spacing (e.g., Likert scale; education level)</li>
<li>interval and ratio (generally treated the same in social sciences): quantitative scores, ordered, equidistant spacing. Ratio has true 0. (e.g., temperature in Celsius vs.&nbsp;Kelvin scales)</li>
</ul>
<p>We generally refer to nominal and ordinal variables as categorical and interval/ratio as quantitative or numeric</p>
<hr>
<p>For <strong>nominal</strong> variables</p>
<ul>
<li>We store (in csv files) these variables as character class with descriptive text labels for the levels
<ul>
<li>Easier to share/document</li>
<li>Reduces errors</li>
</ul></li>
<li>We class these variables in R as factors when we load them (using <code>read_csv()</code>)</li>
<li>In some cases, we should pay attention to the order of the levels of the variable. e.g.,
<ul>
<li>For a dichotomous outcome variable, the positive/event level of dichotomous factor outcome should be first level of the factor</li>
<li>The order of levels may also matter for factor predictors (e.g., <code>step_dummy()</code> uses first level as reference).</li>
</ul></li>
</ul>
<hr>
<p>For <strong>ordinal</strong> variables:</p>
<ul>
<li>We store (in csv files) these variables as character class with descriptive text labels for the levels
<ul>
<li>Easier to share/document</li>
<li>Reduces errors</li>
</ul></li>
<li>We class these variables in R as factors (just like nominal variables)
<ul>
<li>It is easier to do EDA with these variables classes as factors</li>
<li>We use standard factors (not ordered)</li>
</ul></li>
<li>Confirm that the order of the levels is set up correctly. This is very important for ordinal variables.</li>
<li>During feature engineering stage, we can then either
<ul>
<li>Treat as a nominal variable and create features using <code>step_dummy()</code></li>
<li>Treat as an interval variable using <code>step_ordinalscore()</code></li>
</ul></li>
</ul>
<p>Similar EDA approaches are used with both nominal and ordinal variable</p>
<p>Ordinal variables may show non-linear relations b/c they may not be evenly spaced. In these instances, we can use feature engineering approaches that are also used for nominal variables</p>
<hr>
<p>For <strong>interval and ratio</strong> variables:</p>
<ul>
<li>We store these variables as numeric</li>
<li>We class these variables as numeric (either integer or double - let R decide) during the read and clean stage (They are typically already in this class when read in)</li>
</ul>
<p>Similar EDA approaches are used with both interval and ratio variables</p>
<p>Similar feature engineering approaches are used with both</p>
<hr>
</section>
<section id="data-dictionaries" class="level3" data-number="2.3.3">
<h3 data-number="2.3.3" class="anchored" data-anchor-id="data-dictionaries"><span class="header-section-number">2.3.3</span> Data Dictionaries</h3>
<p>You should always make a data dictionary for use with your data files.</p>
<ul>
<li>Ideally, these are created during the planning phase of your study, prior to the start of data collection</li>
<li>Still useful if created at the start of data analysis</li>
</ul>
<p>Data dictionaries:</p>
<ul>
<li>help you keep track of your variables and their characteristics (e.g., valid ranges, valid responses)</li>
<li>can be used by you to check your data during EDA</li>
<li>can be provided to others when you share your data (data are not generally useful to others without a data dictionary)</li>
</ul>
<p>We will see a variety of data dictionaries throughout the course. Many are not great as you will learn.</p>
<hr>
</section>
<section id="the-ames-housing-prices-dataset" class="level3" data-number="2.3.4">
<h3 data-number="2.3.4" class="anchored" data-anchor-id="the-ames-housing-prices-dataset"><span class="header-section-number">2.3.4</span> The Ames Housing Prices Dataset</h3>
<p>We will use the Ames Housing Prices dataset as a running example this unit (and some future units and application assignments as well)</p>
<ul>
<li><p>You can <a href="http://jse.amstat.org/v19n3/decock.pdf">read more</a> about the original dataset created by Dean DeCock</p></li>
<li><p>The data set contains data from home sales of individual residential property in Ames, Iowa from 2006 to 2010</p></li>
<li><p>The original data set includes 2930 observations of sales price and a large number of explanatory variables (23 nominal, 23 ordinal, 14 discrete, and 20 continuous)</p></li>
<li><p>This is the <a href="data/ames_data_dictionary.pdf">original data dictionary</a></p></li>
<li><p>The challenge with this dataset is to build the best possible prediction model for the sale price of the homes.</p></li>
</ul>
<hr>
</section>
<section id="packages-and-conflicts" class="level3" data-number="2.3.5">
<h3 data-number="2.3.5" class="anchored" data-anchor-id="packages-and-conflicts"><span class="header-section-number">2.3.5</span> Packages and Conflicts</h3>
<p>First, lets set up our environment with functions from important packages. I strongly recommend reviewing our recommendations for best practices regarding <a href="https://jjcurtin.github.io/book_dwvt/conflicts.html">managing function conflicts</a> now. It will save you a lot of headaches in the future.</p>
<ul>
<li>We set a conflicts policy that will produce errors if we have unanticipated conflicts.</li>
<li>We source a library of functions that we use for common tasks in machine learning.
<ul>
<li>This includes a function (<code>tidymodels_conflictRules()</code>) that sets conflict rules to allow us to attach <code>tidymodels</code> functions without conflicts with <code>tidyverse</code> functions.<br>
</li>
<li>You can <a href="https://github.com/jjcurtin/lab_support/blob/main/fun_ml.R?raw=true">review</a> that function to see what it does (search for that function name at the link)</li>
</ul></li>
<li>Then we use that function</li>
</ul>
<div class="cell">
<div class="sourceCode cell-code" id="cb1"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb1-1"><a href="#cb1-1" aria-hidden="true" tabindex="-1"></a><span class="fu">options</span>(<span class="at">conflicts.policy =</span> <span class="st">"depends.ok"</span>)</span>
<span id="cb1-2"><a href="#cb1-2" aria-hidden="true" tabindex="-1"></a>devtools<span class="sc">::</span><span class="fu">source_url</span>(<span class="st">"https://github.com/jjcurtin/lab_support/blob/main/fun_ml.R?raw=true"</span>)</span>
<span id="cb1-3"><a href="#cb1-3" aria-hidden="true" tabindex="-1"></a><span class="fu">tidymodels_conflictRules</span>()</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
</div>
<hr>
<p>Next we load packages for functions that we will use regularly. There are five things to note RE best practices</p>
<ol type="1">
<li>If we will use a lot of functions from a package (e.g., <code>tidyverse</code>, <code>tidymodels</code>), we attach the full package</li>
<li>If we will use only several functions from a package (but plan to use them repeatedly), we use the <code>include.only</code> parameter to just attach those functions.</li>
<li>At times, if we plan to use a single function from a package only 1-2x times, we may not even attach that function at all. Instead, we just call it using its namespace (i.e.&nbsp;<code>packagename::functionname</code>)</li>
<li>If a package has a function that conflicts with our primary packages and we don’t plan to use that function, we load the package but exclude the function. If we really needed it, we can call it with its namespace as per option 3 above.</li>
<li>Pay attention to conflicts that were allowed to make sure you understand and accept them. (I left the package messages and warnings in the book this time to see them. I will hide them to avoid cluttering book in later units but you should always review them.)</li>
</ol>
<div class="cell">
<div class="sourceCode cell-code" id="cb2"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb2-1"><a href="#cb2-1" aria-hidden="true" tabindex="-1"></a><span class="fu">library</span>(janitor, <span class="at">include.only =</span> <span class="st">"clean_names"</span>) <span class="co"># &lt;1&gt;</span></span>
<span id="cb2-2"><a href="#cb2-2" aria-hidden="true" tabindex="-1"></a><span class="fu">library</span>(cowplot, <span class="at">include.only =</span> <span class="st">"plot_grid"</span>) <span class="co"># &lt;2&gt; </span></span>
<span id="cb2-3"><a href="#cb2-3" aria-hidden="true" tabindex="-1"></a><span class="fu">library</span>(kableExtra, <span class="at">exclude =</span> <span class="st">"group_rows"</span>) <span class="co"># &lt;3&gt; </span></span>
<span id="cb2-4"><a href="#cb2-4" aria-hidden="true" tabindex="-1"></a><span class="fu">library</span>(tidyverse) </span>
<span id="cb2-5"><a href="#cb2-5" aria-hidden="true" tabindex="-1"></a><span class="fu">library</span>(tidymodels) <span class="co"># &lt;4&gt;</span></span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
</div>
<ol type="1">
<li>As an alternative, we could have skipped loading the package and instead called the function as <code>janitor::clean_names()</code></li>
<li>Same is true for <code>cowplot</code> package</li>
<li>When loading <code>kableExtra</code> (which we use often), you will always need to exclude <code>groups_rows()</code> to prevent a conflict with <code>dplyr</code> package in the tidyverse</li>
<li>Loading tidymodels will produce conflicts unless you source and call my function <code>tidymodels_conflictRules()</code> (see above)</li>
</ol>
<hr>
</section>
<section id="source-and-other-environment-settings" class="level3" data-number="2.3.6">
<h3 data-number="2.3.6" class="anchored" data-anchor-id="source-and-other-environment-settings"><span class="header-section-number">2.3.6</span> Source and Other Environment Settings</h3>
<p>We will also source (from github) two other libraries of functions that we use commonly for exploratory data analyses. You should review these function scripts (<a href="https://github.com/jjcurtin/lab_support/blob/main/fun_eda.R?raw=true">fun_eda.R</a>; <a href="https://github.com/jjcurtin/lab_support/blob/main/fun_plots.R?raw=true">fun_plots.R</a> to see the code for these functions.</p>
<div class="cell">
<div class="sourceCode cell-code" id="cb3"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb3-1"><a href="#cb3-1" aria-hidden="true" tabindex="-1"></a>devtools<span class="sc">::</span><span class="fu">source_url</span>(<span class="st">"https://github.com/jjcurtin/lab_support/blob/main/fun_eda.R?raw=true"</span>)</span>
<span id="cb3-2"><a href="#cb3-2" aria-hidden="true" tabindex="-1"></a>devtools<span class="sc">::</span><span class="fu">source_url</span>(<span class="st">"https://github.com/jjcurtin/lab_support/blob/main/fun_plots.R?raw=true"</span>)</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
</div>
<hr>
<p>Finally, we tune our environment a bit more by setting plot themes and print options that we prefer</p>
<div class="cell">
<div class="sourceCode cell-code" id="cb4"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb4-1"><a href="#cb4-1" aria-hidden="true" tabindex="-1"></a><span class="fu">theme_set</span>(<span class="fu">theme_classic</span>())</span>
<span id="cb4-2"><a href="#cb4-2" aria-hidden="true" tabindex="-1"></a><span class="fu">options</span>(<span class="at">tibble.width =</span> <span class="cn">Inf</span>, <span class="at">tibble.print_max =</span> <span class="cn">Inf</span>)</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
</div>
<p>And we set a relative path to our data. This assumes you are using an RStudio project with the path to the data relative to that project file. I’ve provided more detail <a href="https://jjcurtin.github.io/book_dwvt/file_and_path_management.html">elsewhere</a> on best practices for managing files and paths.</p>
<div class="cell">
<div class="sourceCode cell-code" id="cb5"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb5-1"><a href="#cb5-1" aria-hidden="true" tabindex="-1"></a>path_data <span class="ot">&lt;-</span> <span class="st">"data"</span></span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
</div>
<hr>
</section>
<section id="read-and-glimpse-dataframe" class="level3" data-number="2.3.7">
<h3 data-number="2.3.7" class="anchored" data-anchor-id="read-and-glimpse-dataframe"><span class="header-section-number">2.3.7</span> Read and Glimpse Dataframe</h3>
<p>Lets read in the data and glimpse the subset of observations we will work with in Units 2-3 and the first two application assignments.</p>
<div class="cell">
<div class="sourceCode cell-code" id="cb6"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb6-1"><a href="#cb6-1" aria-hidden="true" tabindex="-1"></a>data_all <span class="ot">&lt;-</span> <span class="fu">read_csv</span>(here<span class="sc">::</span><span class="fu">here</span>(path_data, <span class="st">"ames_raw_class.csv"</span>),   <span class="co"># &lt;1&gt;</span></span>
<span id="cb6-2"><a href="#cb6-2" aria-hidden="true" tabindex="-1"></a>                     <span class="at">col_types =</span> <span class="fu">cols</span>()) <span class="sc">|&gt;</span> <span class="co"># &lt;2&gt; </span></span>
<span id="cb6-3"><a href="#cb6-3" aria-hidden="true" tabindex="-1"></a>  <span class="fu">glimpse</span>() <span class="co"># &lt;3&gt;</span></span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
<div class="cell-output cell-output-stdout">
<pre><code>Rows: 1,955
Columns: 81
$ PID               &lt;chr&gt; "0526301100", "0526350040", "0526351010", "052710501…
$ `MS SubClass`     &lt;chr&gt; "020", "020", "020", "060", "120", "120", "120", "06…
$ `MS Zoning`       &lt;chr&gt; "RL", "RH", "RL", "RL", "RL", "RL", "RL", "RL", "RL"…
$ `Lot Frontage`    &lt;dbl&gt; 141, 80, 81, 74, 41, 43, 39, 60, 75, 63, 85, NA, 47,…
$ `Lot Area`        &lt;dbl&gt; 31770, 11622, 14267, 13830, 4920, 5005, 5389, 7500, …
$ Street            &lt;chr&gt; "Pave", "Pave", "Pave", "Pave", "Pave", "Pave", "Pav…
$ Alley             &lt;chr&gt; NA, NA, NA, NA, NA, NA, NA, NA, NA, NA, NA, NA, NA, …
$ `Lot Shape`       &lt;chr&gt; "IR1", "Reg", "IR1", "IR1", "Reg", "IR1", "IR1", "Re…
$ `Land Contour`    &lt;chr&gt; "Lvl", "Lvl", "Lvl", "Lvl", "Lvl", "HLS", "Lvl", "Lv…
$ Utilities         &lt;chr&gt; "AllPub", "AllPub", "AllPub", "AllPub", "AllPub", "A…
$ `Lot Config`      &lt;chr&gt; "Corner", "Inside", "Corner", "Inside", "Inside", "I…
$ `Land Slope`      &lt;chr&gt; "Gtl", "Gtl", "Gtl", "Gtl", "Gtl", "Gtl", "Gtl", "Gt…
$ Neighborhood      &lt;chr&gt; "NAmes", "NAmes", "NAmes", "Gilbert", "StoneBr", "St…
$ `Condition 1`     &lt;chr&gt; "Norm", "Feedr", "Norm", "Norm", "Norm", "Norm", "No…
$ `Condition 2`     &lt;chr&gt; "Norm", "Norm", "Norm", "Norm", "Norm", "Norm", "Nor…
$ `Bldg Type`       &lt;chr&gt; "1Fam", "1Fam", "1Fam", "1Fam", "TwnhsE", "TwnhsE", …
$ `House Style`     &lt;chr&gt; "1Story", "1Story", "1Story", "2Story", "1Story", "1…
$ `Overall Qual`    &lt;dbl&gt; 6, 5, 6, 5, 8, 8, 8, 7, 6, 6, 7, 8, 8, 8, 9, 4, 6, 6…
$ `Overall Cond`    &lt;dbl&gt; 5, 6, 6, 5, 5, 5, 5, 5, 5, 5, 5, 5, 5, 7, 2, 5, 6, 6…
$ `Year Built`      &lt;dbl&gt; 1960, 1961, 1958, 1997, 2001, 1992, 1995, 1999, 1993…
$ `Year Remod/Add`  &lt;dbl&gt; 1960, 1961, 1958, 1998, 2001, 1992, 1996, 1999, 1994…
$ `Roof Style`      &lt;chr&gt; "Hip", "Gable", "Hip", "Gable", "Gable", "Gable", "G…
$ `Roof Matl`       &lt;chr&gt; "CompShg", "CompShg", "CompShg", "CompShg", "CompShg…
$ `Exterior 1st`    &lt;chr&gt; "BrkFace", "VinylSd", "Wd Sdng", "VinylSd", "CemntBd…
$ `Exterior 2nd`    &lt;chr&gt; "Plywood", "VinylSd", "Wd Sdng", "VinylSd", "CmentBd…
$ `Mas Vnr Type`    &lt;chr&gt; "Stone", "None", "BrkFace", "None", "None", "None", …
$ `Mas Vnr Area`    &lt;dbl&gt; 112, 0, 108, 0, 0, 0, 0, 0, 0, 0, 0, 0, 603, 0, 350,…
$ `Exter Qual`      &lt;chr&gt; "TA", "TA", "TA", "TA", "Gd", "Gd", "Gd", "TA", "TA"…
$ `Exter Cond`      &lt;chr&gt; "TA", "TA", "TA", "TA", "TA", "TA", "TA", "TA", "TA"…
$ Foundation        &lt;chr&gt; "CBlock", "CBlock", "CBlock", "PConc", "PConc", "PCo…
$ `Bsmt Qual`       &lt;chr&gt; "TA", "TA", "TA", "Gd", "Gd", "Gd", "Gd", "TA", "Gd"…
$ `Bsmt Cond`       &lt;chr&gt; "Gd", "TA", "TA", "TA", "TA", "TA", "TA", "TA", "TA"…
$ `Bsmt Exposure`   &lt;chr&gt; "Gd", "No", "No", "No", "Mn", "No", "No", "No", "No"…
$ `BsmtFin Type 1`  &lt;chr&gt; "BLQ", "Rec", "ALQ", "GLQ", "GLQ", "ALQ", "GLQ", "Un…
$ `BsmtFin SF 1`    &lt;dbl&gt; 639, 468, 923, 791, 616, 263, 1180, 0, 0, 0, 637, 36…
$ `BsmtFin Type 2`  &lt;chr&gt; "Unf", "LwQ", "Unf", "Unf", "Unf", "Unf", "Unf", "Un…
$ `BsmtFin SF 2`    &lt;dbl&gt; 0, 144, 0, 0, 0, 0, 0, 0, 0, 0, 0, 1120, 0, 0, 0, 0,…
$ `Bsmt Unf SF`     &lt;dbl&gt; 441, 270, 406, 137, 722, 1017, 415, 994, 763, 789, 6…
$ `Total Bsmt SF`   &lt;dbl&gt; 1080, 882, 1329, 928, 1338, 1280, 1595, 994, 763, 78…
$ Heating           &lt;chr&gt; "GasA", "GasA", "GasA", "GasA", "GasA", "GasA", "Gas…
$ `Heating QC`      &lt;chr&gt; "Fa", "TA", "TA", "Gd", "Ex", "Ex", "Ex", "Gd", "Gd"…
$ `Central Air`     &lt;chr&gt; "Y", "Y", "Y", "Y", "Y", "Y", "Y", "Y", "Y", "Y", "Y…
$ Electrical        &lt;chr&gt; "SBrkr", "SBrkr", "SBrkr", "SBrkr", "SBrkr", "SBrkr"…
$ `1st Flr SF`      &lt;dbl&gt; 1656, 896, 1329, 928, 1338, 1280, 1616, 1028, 763, 7…
$ `2nd Flr SF`      &lt;dbl&gt; 0, 0, 0, 701, 0, 0, 0, 776, 892, 676, 0, 0, 1589, 67…
$ `Low Qual Fin SF` &lt;dbl&gt; 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0…
$ `Gr Liv Area`     &lt;dbl&gt; 1656, 896, 1329, 1629, 1338, 1280, 1616, 1804, 1655,…
$ `Bsmt Full Bath`  &lt;dbl&gt; 1, 0, 0, 0, 1, 0, 1, 0, 0, 0, 1, 1, 1, 0, 1, 0, 1, 0…
$ `Bsmt Half Bath`  &lt;dbl&gt; 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0…
$ `Full Bath`       &lt;dbl&gt; 1, 1, 1, 2, 2, 2, 2, 2, 2, 2, 1, 1, 3, 2, 1, 1, 2, 2…
$ `Half Bath`       &lt;dbl&gt; 0, 0, 1, 1, 0, 0, 0, 1, 1, 1, 1, 1, 1, 0, 1, 0, 0, 0…
$ `Bedroom AbvGr`   &lt;dbl&gt; 3, 2, 3, 3, 2, 2, 2, 3, 3, 3, 2, 1, 4, 4, 1, 2, 3, 3…
$ `Kitchen AbvGr`   &lt;dbl&gt; 1, 1, 1, 1, 1, 1, 1, 1, 1, 1, 1, 1, 1, 1, 1, 1, 1, 1…
$ `Kitchen Qual`    &lt;chr&gt; "TA", "TA", "Gd", "TA", "Gd", "Gd", "Gd", "Gd", "TA"…
$ `TotRms AbvGrd`   &lt;dbl&gt; 7, 5, 6, 6, 6, 5, 5, 7, 7, 7, 5, 4, 12, 8, 8, 4, 7, …
$ Functional        &lt;chr&gt; "Typ", "Typ", "Typ", "Typ", "Typ", "Typ", "Typ", "Ty…
$ Fireplaces        &lt;dbl&gt; 2, 0, 0, 1, 0, 0, 1, 1, 1, 1, 1, 0, 1, 0, 1, 0, 2, 1…
$ `Fireplace Qu`    &lt;chr&gt; "Gd", NA, NA, "TA", NA, NA, "TA", "TA", "TA", "Gd", …
$ `Garage Type`     &lt;chr&gt; "Attchd", "Attchd", "Attchd", "Attchd", "Attchd", "A…
$ `Garage Yr Blt`   &lt;dbl&gt; 1960, 1961, 1958, 1997, 2001, 1992, 1995, 1999, 1993…
$ `Garage Finish`   &lt;chr&gt; "Fin", "Unf", "Unf", "Fin", "Fin", "RFn", "RFn", "Fi…
$ `Garage Cars`     &lt;dbl&gt; 2, 1, 1, 2, 2, 2, 2, 2, 2, 2, 2, 2, 3, 2, 3, 2, 2, 2…
$ `Garage Area`     &lt;dbl&gt; 528, 730, 312, 482, 582, 506, 608, 442, 440, 393, 50…
$ `Garage Qual`     &lt;chr&gt; "TA", "TA", "TA", "TA", "TA", "TA", "TA", "TA", "TA"…
$ `Garage Cond`     &lt;chr&gt; "TA", "TA", "TA", "TA", "TA", "TA", "TA", "TA", "TA"…
$ `Paved Drive`     &lt;chr&gt; "P", "Y", "Y", "Y", "Y", "Y", "Y", "Y", "Y", "Y", "Y…
$ `Wood Deck SF`    &lt;dbl&gt; 210, 140, 393, 212, 0, 0, 237, 140, 157, 0, 192, 0, …
$ `Open Porch SF`   &lt;dbl&gt; 62, 0, 36, 34, 0, 82, 152, 60, 84, 75, 0, 54, 36, 12…
$ `Enclosed Porch`  &lt;dbl&gt; 0, 0, 0, 0, 170, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0,…
$ `3Ssn Porch`      &lt;dbl&gt; 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0…
$ `Screen Porch`    &lt;dbl&gt; 0, 120, 0, 0, 0, 144, 0, 0, 0, 0, 0, 140, 210, 0, 0,…
$ `Pool Area`       &lt;dbl&gt; 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0…
$ `Pool QC`         &lt;chr&gt; NA, NA, NA, NA, NA, NA, NA, NA, NA, NA, NA, NA, NA, …
$ Fence             &lt;chr&gt; NA, "MnPrv", NA, "MnPrv", NA, NA, NA, NA, NA, NA, NA…
$ `Misc Feature`    &lt;chr&gt; NA, NA, "Gar2", NA, NA, NA, NA, NA, NA, NA, NA, NA, …
$ `Misc Val`        &lt;dbl&gt; 0, 0, 12500, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, …
$ `Mo Sold`         &lt;dbl&gt; 5, 6, 6, 3, 4, 1, 3, 6, 4, 5, 2, 6, 6, 6, 6, 6, 2, 1…
$ `Yr Sold`         &lt;dbl&gt; 2010, 2010, 2010, 2010, 2010, 2010, 2010, 2010, 2010…
$ `Sale Type`       &lt;chr&gt; "WD", "WD", "WD", "WD", "WD", "WD", "WD", "WD", "WD"…
$ `Sale Condition`  &lt;chr&gt; "Normal", "Normal", "Normal", "Normal", "Normal", "N…
$ SalePrice         &lt;dbl&gt; 215000, 105000, 172000, 189900, 213500, 191500, 2365…</code></pre>
</div>
</div>
<ol type="1">
<li>First we read data using a relative path and the <code>here::here()</code> function. This is a replacement for <code>file.path()</code> that works better for both interactive use and rendering in Quarto when using projects.</li>
<li>We use <code>col_types = cols()</code> to let R guess the correct class for each column. This suppresses messages that aren’t important at this point prior to EDA.</li>
<li>It is good practice to always <code>glimpse()</code> data after you read it.</li>
</ol>
<hr>
<p>Dataset Notes:</p>
<ul>
<li><p>Dataset has N = 1955 rather than 2930.</p>
<ul>
<li>I have held out remaining observations to serve as a test set for a friendly competition in Unit 3</li>
<li>I will judge your models’ performance with this test set at that time!</li>
<li>More on the importance of held out test sets as we progress through the course</li>
</ul></li>
<li><p>This full dataset has 81 variables. For the lecture examples in units 2-3 we will only use a subset of the predictors</p></li>
<li><p>You will use different predictors in the next two application assignments</p></li>
</ul>
<hr>
<p>Here we select the variables we will use for lecture</p>
<div class="cell">
<div class="sourceCode cell-code" id="cb8"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb8-1"><a href="#cb8-1" aria-hidden="true" tabindex="-1"></a>data_all <span class="ot">&lt;-</span> data_all <span class="sc">|&gt;</span> </span>
<span id="cb8-2"><a href="#cb8-2" aria-hidden="true" tabindex="-1"></a>  <span class="fu">select</span>(SalePrice,</span>
<span id="cb8-3"><a href="#cb8-3" aria-hidden="true" tabindex="-1"></a>         <span class="st">`</span><span class="at">Gr Liv Area</span><span class="st">`</span>, </span>
<span id="cb8-4"><a href="#cb8-4" aria-hidden="true" tabindex="-1"></a>         <span class="st">`</span><span class="at">Lot Area</span><span class="st">`</span>, </span>
<span id="cb8-5"><a href="#cb8-5" aria-hidden="true" tabindex="-1"></a>         <span class="st">`</span><span class="at">Year Built</span><span class="st">`</span>, </span>
<span id="cb8-6"><a href="#cb8-6" aria-hidden="true" tabindex="-1"></a>         <span class="st">`</span><span class="at">Overall Qual</span><span class="st">`</span>, </span>
<span id="cb8-7"><a href="#cb8-7" aria-hidden="true" tabindex="-1"></a>         <span class="st">`</span><span class="at">Garage Cars</span><span class="st">`</span>,</span>
<span id="cb8-8"><a href="#cb8-8" aria-hidden="true" tabindex="-1"></a>         <span class="st">`</span><span class="at">Garage Qual</span><span class="st">`</span>,</span>
<span id="cb8-9"><a href="#cb8-9" aria-hidden="true" tabindex="-1"></a>         <span class="st">`</span><span class="at">MS Zoning</span><span class="st">`</span>,</span>
<span id="cb8-10"><a href="#cb8-10" aria-hidden="true" tabindex="-1"></a>         <span class="st">`</span><span class="at">Lot Config</span><span class="st">`</span> ,</span>
<span id="cb8-11"><a href="#cb8-11" aria-hidden="true" tabindex="-1"></a>         <span class="st">`</span><span class="at">Bldg Type</span><span class="st">`</span>) <span class="sc">|&gt;</span> <span class="co"># &lt;1&gt; </span></span>
<span id="cb8-12"><a href="#cb8-12" aria-hidden="true" tabindex="-1"></a>  <span class="fu">glimpse</span>()</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
<div class="cell-output cell-output-stdout">
<pre><code>Rows: 1,955
Columns: 10
$ SalePrice      &lt;dbl&gt; 215000, 105000, 172000, 189900, 213500, 191500, 236500,…
$ `Gr Liv Area`  &lt;dbl&gt; 1656, 896, 1329, 1629, 1338, 1280, 1616, 1804, 1655, 14…
$ `Lot Area`     &lt;dbl&gt; 31770, 11622, 14267, 13830, 4920, 5005, 5389, 7500, 100…
$ `Year Built`   &lt;dbl&gt; 1960, 1961, 1958, 1997, 2001, 1992, 1995, 1999, 1993, 1…
$ `Overall Qual` &lt;dbl&gt; 6, 5, 6, 5, 8, 8, 8, 7, 6, 6, 7, 8, 8, 8, 9, 4, 6, 6, 7…
$ `Garage Cars`  &lt;dbl&gt; 2, 1, 1, 2, 2, 2, 2, 2, 2, 2, 2, 2, 3, 2, 3, 2, 2, 2, 2…
$ `Garage Qual`  &lt;chr&gt; "TA", "TA", "TA", "TA", "TA", "TA", "TA", "TA", "TA", "…
$ `MS Zoning`    &lt;chr&gt; "RL", "RH", "RL", "RL", "RL", "RL", "RL", "RL", "RL", "…
$ `Lot Config`   &lt;chr&gt; "Corner", "Inside", "Corner", "Inside", "Inside", "Insi…
$ `Bldg Type`    &lt;chr&gt; "1Fam", "1Fam", "1Fam", "1Fam", "TwnhsE", "TwnhsE", "Tw…</code></pre>
</div>
</div>
<ol type="1">
<li>Notice that the dataset used non-standard variable names that include spaces. We need to use back-ticks around the variable names to allow us reference those variables. We will fix this during the cleaning process and you should never use spaces in variable names when setting up your own data!!!</li>
</ol>
<hr>
</section>
</section>
<section id="exploratory-data-analysis-for-data-cleaning" class="level2" data-number="2.4">
<h2 data-number="2.4" class="anchored" data-anchor-id="exploratory-data-analysis-for-data-cleaning"><span class="header-section-number">2.4</span> Exploratory Data Analysis for Data Cleaning</h2>
<p>EDA <em>could</em> be done using either <code>tidyverse</code> packages and functions or <code>tidymodels</code> (mostly using the <code>recipes</code> package.)</p>
<ul>
<li><p>We prefer to use the richer set of functions available in the tidyverse (and <code>dplyr</code> and <code>purrr</code> packages in particular).</p></li>
<li><p>We will reserve the use of recipes for feature engineering only when we are building features for models that we will fit in our training sets and evaluation in our validation and test sets.</p></li>
</ul>
<hr>
<section id="data-leakage-issues" class="level3" data-number="2.4.1">
<h3 data-number="2.4.1" class="anchored" data-anchor-id="data-leakage-issues"><span class="header-section-number">2.4.1</span> Data Leakage Issues</h3>
<p>Data leakage refers to a mistake made by the developer of a machine learning model in which they accidentally share information between their training set and held-out validation or test sets</p>
<ul>
<li><p>Training sets are used to fit models with different configurations</p></li>
<li><p>Validation sets are used to select the best model among those with different configurations (not needed if you only have one configuration)</p></li>
<li><p>Test sets are used to evaluate a best model</p></li>
<li><p>When splitting data-sets into training, validation and test sets, the goal is to ensure that no data (or information more broadly) are shared between the three sets</p>
<ul>
<li>No data or information from test should influence either fitting or selecting models</li>
<li>Test should only be used once to evaluate a best/final model</li>
<li>Train and validation set also must be segregated (although validation sets may be used to evaluate many model configurations)</li>
<li>Information necessary for transformations and other feature engineering (e.g., means/sds for centering/scaling, procedures for missing data imputation) must all be based only on training data.</li>
<li>Data leakage is common if you are not careful.</li>
</ul></li>
</ul>
<p>In particular, if we begin to use test data or information about test during model fitting</p>
<ul>
<li>We risk overfitting</li>
<li>This is essentially the equivalent of p-hacking in traditional analyses</li>
<li>Our estimate of model performance will be too optimistic, which could have harmful real-world consequences.</li>
</ul>
<hr>
</section>
<section id="tidy-variable-names" class="level3" data-number="2.4.2">
<h3 data-number="2.4.2" class="anchored" data-anchor-id="tidy-variable-names"><span class="header-section-number">2.4.2</span> Tidy variable names</h3>
<p>Use snake case for variable names</p>
<ul>
<li><code>clean_names()</code> from <code>janitor</code> package is useful for this.</li>
<li>May need to do further correction of variable names using <code>rename()</code></li>
<li>See more details about tidy names for objects (e.g., variables, dfs, functions) per <a href="https://style.tidyverse.org/syntax.html#object-names">Tidy Style Guide</a></li>
</ul>
<div class="cell">
<div class="sourceCode cell-code" id="cb10"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb10-1"><a href="#cb10-1" aria-hidden="true" tabindex="-1"></a>data_all <span class="ot">&lt;-</span> data_all <span class="sc">|&gt;</span> </span>
<span id="cb10-2"><a href="#cb10-2" aria-hidden="true" tabindex="-1"></a>  <span class="fu">clean_names</span>(<span class="st">"snake"</span>)</span>
<span id="cb10-3"><a href="#cb10-3" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb10-4"><a href="#cb10-4" aria-hidden="true" tabindex="-1"></a>data_all <span class="sc">|&gt;</span> <span class="fu">names</span>()</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
<div class="cell-output cell-output-stdout">
<pre><code> [1] "sale_price"   "gr_liv_area"  "lot_area"     "year_built"   "overall_qual"
 [6] "garage_cars"  "garage_qual"  "ms_zoning"    "lot_config"   "bldg_type"   </code></pre>
</div>
</div>
<hr>
</section>
<section id="explore-variable-classes" class="level3" data-number="2.4.3">
<h3 data-number="2.4.3" class="anchored" data-anchor-id="explore-variable-classes"><span class="header-section-number">2.4.3</span> Explore variable classes</h3>
<p>At this point, we should class all of our variables as either numeric or factor</p>
<ul>
<li>Interval and ratio variables use numeric classes (dbl or int)</li>
<li>Nominal and ordinal variable use factor class</li>
<li>Useful for variable selection later (e.g., <code>where(is.numeric)</code>, <code>where(is.factor)</code>)</li>
</ul>
<p>Subsequent cleaning steps are clearer if we have this established/confirmed now</p>
<hr>
<p>We have a number of nominal or ordinal variables that are classed as character.</p>
<p>We have one ordinal variable (<code>overall_qual</code>) that is classed as numeric (because the levels were coded with numbers rather than text)</p>
<ul>
<li><code>read_csv()</code> thought was numeric by the levels are coded using numbers</li>
<li>The data dictionary indicates that valid values range from 1 - 10.</li>
</ul>
<div class="cell">
<div class="sourceCode cell-code" id="cb12"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb12-1"><a href="#cb12-1" aria-hidden="true" tabindex="-1"></a>data_all <span class="sc">|&gt;</span> <span class="fu">glimpse</span>()</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
<div class="cell-output cell-output-stdout">
<pre><code>Rows: 1,955
Columns: 10
$ sale_price   &lt;dbl&gt; 215000, 105000, 172000, 189900, 213500, 191500, 236500, 1…
$ gr_liv_area  &lt;dbl&gt; 1656, 896, 1329, 1629, 1338, 1280, 1616, 1804, 1655, 1465…
$ lot_area     &lt;dbl&gt; 31770, 11622, 14267, 13830, 4920, 5005, 5389, 7500, 10000…
$ year_built   &lt;dbl&gt; 1960, 1961, 1958, 1997, 2001, 1992, 1995, 1999, 1993, 199…
$ overall_qual &lt;dbl&gt; 6, 5, 6, 5, 8, 8, 8, 7, 6, 6, 7, 8, 8, 8, 9, 4, 6, 6, 7, …
$ garage_cars  &lt;dbl&gt; 2, 1, 1, 2, 2, 2, 2, 2, 2, 2, 2, 2, 3, 2, 3, 2, 2, 2, 2, …
$ garage_qual  &lt;chr&gt; "TA", "TA", "TA", "TA", "TA", "TA", "TA", "TA", "TA", "TA…
$ ms_zoning    &lt;chr&gt; "RL", "RH", "RL", "RL", "RL", "RL", "RL", "RL", "RL", "RL…
$ lot_config   &lt;chr&gt; "Corner", "Inside", "Corner", "Inside", "Inside", "Inside…
$ bldg_type    &lt;chr&gt; "1Fam", "1Fam", "1Fam", "1Fam", "TwnhsE", "TwnhsE", "Twnh…</code></pre>
</div>
</div>
<hr>
<p>We can the recode <code>overall_qual</code> first and set its levels</p>
<p>We can recode all the character variables to factor in one step. Most are nominal. We will handle the order for <code>garage_qual</code> later.</p>
<div class="cell">
<div class="sourceCode cell-code" id="cb14"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb14-1"><a href="#cb14-1" aria-hidden="true" tabindex="-1"></a>oq_levels <span class="ot">&lt;-</span> <span class="dv">1</span><span class="sc">:</span><span class="dv">10</span> <span class="co"># &lt;1&gt;</span></span>
<span id="cb14-2"><a href="#cb14-2" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb14-3"><a href="#cb14-3" aria-hidden="true" tabindex="-1"></a>data_all <span class="ot">&lt;-</span>  data_all <span class="sc">|&gt;</span> </span>
<span id="cb14-4"><a href="#cb14-4" aria-hidden="true" tabindex="-1"></a>  <span class="fu">mutate</span>(<span class="at">overall_qual =</span> <span class="fu">factor</span>(overall_qual, </span>
<span id="cb14-5"><a href="#cb14-5" aria-hidden="true" tabindex="-1"></a>                               <span class="at">levels =</span> oq_levels)) <span class="sc">|&gt;</span> <span class="co"># &lt;2&gt;</span></span>
<span id="cb14-6"><a href="#cb14-6" aria-hidden="true" tabindex="-1"></a>  <span class="fu">mutate</span>(<span class="fu">across</span>(<span class="fu">where</span>(is.character), factor)) <span class="sc">|&gt;</span>  <span class="co"># &lt;3&gt;</span></span>
<span id="cb14-7"><a href="#cb14-7" aria-hidden="true" tabindex="-1"></a>  <span class="fu">glimpse</span>()</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
<div class="cell-output cell-output-stdout">
<pre><code>Rows: 1,955
Columns: 10
$ sale_price   &lt;dbl&gt; 215000, 105000, 172000, 189900, 213500, 191500, 236500, 1…
$ gr_liv_area  &lt;dbl&gt; 1656, 896, 1329, 1629, 1338, 1280, 1616, 1804, 1655, 1465…
$ lot_area     &lt;dbl&gt; 31770, 11622, 14267, 13830, 4920, 5005, 5389, 7500, 10000…
$ year_built   &lt;dbl&gt; 1960, 1961, 1958, 1997, 2001, 1992, 1995, 1999, 1993, 199…
$ overall_qual &lt;fct&gt; 6, 5, 6, 5, 8, 8, 8, 7, 6, 6, 7, 8, 8, 8, 9, 4, 6, 6, 7, …
$ garage_cars  &lt;dbl&gt; 2, 1, 1, 2, 2, 2, 2, 2, 2, 2, 2, 2, 3, 2, 3, 2, 2, 2, 2, …
$ garage_qual  &lt;fct&gt; TA, TA, TA, TA, TA, TA, TA, TA, TA, TA, TA, TA, TA, TA, T…
$ ms_zoning    &lt;fct&gt; RL, RH, RL, RL, RL, RL, RL, RL, RL, RL, RL, RL, RL, RL, R…
$ lot_config   &lt;fct&gt; Corner, Inside, Corner, Inside, Inside, Inside, Inside, I…
$ bldg_type    &lt;fct&gt; 1Fam, 1Fam, 1Fam, 1Fam, TwnhsE, TwnhsE, TwnhsE, 1Fam, 1Fa…</code></pre>
</div>
</div>
<ol type="1">
<li>It is always best to explicitly set the levels of an ordinal factor in the order you prefer. It is not necessary here because <code>overall_qual</code> was numeric and therefore sorts in the expected order. However, if it had been numbers stored as characters, it could sort incorrectly (e.g., 1, 10, 2, 3, …). And obviously if the orders levels were names, the order would have to be specified.</li>
<li>We indicate the levels here.</li>
<li>We use a mutate to re-class all character data to factors. I prefer <code>factor()</code> to <code>forcats::fct()</code> because factor orders the levels alphabetically. Be aware that this <em>could</em> change if your code is used in a region of the world where this sorting is different. I still prefer this to the alternative (in <code>fct()</code>) that orders by the order the levels are found in your data.</li>
</ol>
<hr>
</section>
<section id="skimming-the-data" class="level3" data-number="2.4.4">
<h3 data-number="2.4.4" class="anchored" data-anchor-id="skimming-the-data"><span class="header-section-number">2.4.4</span> Skimming the data</h3>
<p><code>skim()</code> from the <code>skimr</code> package is a wonderful and customizable function for summary statistics</p>
<ul>
<li>It is highly customizable so we can write our own versions for our own needs</li>
<li>We use different versions for cleaning and modeling EDA</li>
<li>For cleaning EDA, we just remove some stats that we don’t want to see at this time</li>
<li>We can get many of the summary stats for cleaning in one call</li>
<li>We have a custom skim defined in the <code>fun_eda.R</code> function library that we use regularly. Here is the code but you can use the function directly if you sourced <code>fun_eda.R</code> (as we did above)</li>
</ul>
<div class="cell">
<div class="sourceCode cell-code" id="cb16"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb16-1"><a href="#cb16-1" aria-hidden="true" tabindex="-1"></a>skim_some <span class="ot">&lt;-</span> <span class="fu">skim_with</span>(<span class="at">numeric =</span> <span class="fu">sfl</span>(<span class="at">mean =</span> <span class="cn">NULL</span>, <span class="at">sd =</span> <span class="cn">NULL</span>, <span class="at">p25 =</span> <span class="cn">NULL</span>, <span class="at">p50 =</span> <span class="cn">NULL</span>, <span class="at">p75 =</span> <span class="cn">NULL</span>, <span class="at">hist =</span> <span class="cn">NULL</span>))</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
</div>
<hr>
<p>Here is what we get with our new <code>skim_some()</code> function</p>
<ul>
<li>We will refer to this again for each characteristic we want to review for instructional purposes</li>
<li>We can already see that we can use <code>skim_some()</code> to confirm that we only have numeric and factor classes</li>
</ul>
<div class="cell">
<div class="sourceCode cell-code" id="cb17"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb17-1"><a href="#cb17-1" aria-hidden="true" tabindex="-1"></a>data_all <span class="sc">|&gt;</span> </span>
<span id="cb17-2"><a href="#cb17-2" aria-hidden="true" tabindex="-1"></a>  <span class="fu">skim_some</span>()</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
<div class="cell-output-display">

<table style="width: auto;" class="table table-condensed">
<caption>
Data summary
</caption>
<tbody>
<tr>
<td style="text-align:left;">
Name
</td>
<td style="text-align:left;">
data_all
</td>
</tr>
<tr>
<td style="text-align:left;">
Number of rows
</td>
<td style="text-align:left;">
1955
</td>
</tr>
<tr>
<td style="text-align:left;">
Number of columns
</td>
<td style="text-align:left;">
10
</td>
</tr>
<tr>
<td style="text-align:left;">
_______________________
</td>
<td style="text-align:left;">
</td>
</tr>
<tr>
<td style="text-align:left;">
Column type frequency:
</td>
<td style="text-align:left;">
</td>
</tr>
<tr>
<td style="text-align:left;">
factor
</td>
<td style="text-align:left;">
5
</td>
</tr>
<tr>
<td style="text-align:left;">
numeric
</td>
<td style="text-align:left;">
5
</td>
</tr>
<tr>
<td style="text-align:left;">
________________________
</td>
<td style="text-align:left;">
</td>
</tr>
<tr>
<td style="text-align:left;">
Group variables
</td>
<td style="text-align:left;">
None
</td>
</tr>
</tbody>

</table>
<p><strong>Variable type: factor</strong></p>

<table>
<thead>
<tr>
<th style="text-align:left;">
skim_variable
</th>
<th style="text-align:right;">
n_missing
</th>
<th style="text-align:right;">
complete_rate
</th>
<th style="text-align:left;">
ordered
</th>
<th style="text-align:right;">
n_unique
</th>
<th style="text-align:left;">
top_counts
</th>
</tr>
</thead>
<tbody>
<tr>
<td style="text-align:left;">
overall_qual
</td>
<td style="text-align:right;">
0
</td>
<td style="text-align:right;">
1.00
</td>
<td style="text-align:left;">
FALSE
</td>
<td style="text-align:right;">
10
</td>
<td style="text-align:left;">
5: 556, 6: 487, 7: 403, 8: 233
</td>
</tr>
<tr>
<td style="text-align:left;">
garage_qual
</td>
<td style="text-align:right;">
109
</td>
<td style="text-align:right;">
0.94
</td>
<td style="text-align:left;">
FALSE
</td>
<td style="text-align:right;">
5
</td>
<td style="text-align:left;">
TA: 1745, Fa: 79, Gd: 16, Po: 4
</td>
</tr>
<tr>
<td style="text-align:left;">
ms_zoning
</td>
<td style="text-align:right;">
0
</td>
<td style="text-align:right;">
1.00
</td>
<td style="text-align:left;">
FALSE
</td>
<td style="text-align:right;">
7
</td>
<td style="text-align:left;">
RL: 1530, RM: 297, FV: 91, C (: 19
</td>
</tr>
<tr>
<td style="text-align:left;">
lot_config
</td>
<td style="text-align:right;">
0
</td>
<td style="text-align:right;">
1.00
</td>
<td style="text-align:left;">
FALSE
</td>
<td style="text-align:right;">
5
</td>
<td style="text-align:left;">
Ins: 1454, Cor: 328, Cul: 114, FR2: 55
</td>
</tr>
<tr>
<td style="text-align:left;">
bldg_type
</td>
<td style="text-align:right;">
0
</td>
<td style="text-align:right;">
1.00
</td>
<td style="text-align:left;">
FALSE
</td>
<td style="text-align:right;">
5
</td>
<td style="text-align:left;">
1Fa: 1631, Twn: 145, Dup: 77, Twn: 64
</td>
</tr>
</tbody>

</table>
<p><strong>Variable type: numeric</strong></p>

<table>
<thead>
<tr>
<th style="text-align:left;">
skim_variable
</th>
<th style="text-align:right;">
n_missing
</th>
<th style="text-align:right;">
complete_rate
</th>
<th style="text-align:right;">
p0
</th>
<th style="text-align:right;">
p100
</th>
</tr>
</thead>
<tbody>
<tr>
<td style="text-align:left;">
sale_price
</td>
<td style="text-align:right;">
0
</td>
<td style="text-align:right;">
1
</td>
<td style="text-align:right;">
12789
</td>
<td style="text-align:right;">
745000
</td>
</tr>
<tr>
<td style="text-align:left;">
gr_liv_area
</td>
<td style="text-align:right;">
0
</td>
<td style="text-align:right;">
1
</td>
<td style="text-align:right;">
438
</td>
<td style="text-align:right;">
5642
</td>
</tr>
<tr>
<td style="text-align:left;">
lot_area
</td>
<td style="text-align:right;">
0
</td>
<td style="text-align:right;">
1
</td>
<td style="text-align:right;">
1476
</td>
<td style="text-align:right;">
215245
</td>
</tr>
<tr>
<td style="text-align:left;">
year_built
</td>
<td style="text-align:right;">
0
</td>
<td style="text-align:right;">
1
</td>
<td style="text-align:right;">
1875
</td>
<td style="text-align:right;">
2010
</td>
</tr>
<tr>
<td style="text-align:left;">
garage_cars
</td>
<td style="text-align:right;">
1
</td>
<td style="text-align:right;">
1
</td>
<td style="text-align:right;">
0
</td>
<td style="text-align:right;">
4
</td>
</tr>
</tbody>

</table>
</div>
</div>
<hr>
<p><strong>Coding sidebar 1:</strong></p>
<ul>
<li>Write functions whenever you will repeat code often. You can now reuse <code>skim_some()</code></li>
<li><code>skim_with()</code> is an example of a function factory - a function that is used to create a new function
<ul>
<li><code>partial()</code> and <code>compose()</code> are two other function factories we will use at times</li>
<li>More details on function factories is available in <a href="https://adv-r.hadley.nz/function-factories.html">Advanced R</a></li>
</ul></li>
</ul>
<hr>
<p><strong>Coding sidebar 2:</strong></p>
<ul>
<li>Gather useful functions together in a script that you can reuse.</li>
<li>All of the reusable functions in this and later units are available to you in one of my <a href="https://github.com/jjcurtin/lab_support">public github repositories</a>.</li>
<li>You can load these functions into your workspace directly from github using <code>devtools::source_url()</code>. For example: <code>devtools::source_url("https://github.com/jjcurtin/lab_support/blob/main/fun_modeling.R?raw=true")</code></li>
<li>You should start to gather your favorite custom functions together in your own script(s).<br>
</li>
<li>You can save your own scripts in a local file and load them into your workspace using <code>source()</code> or you can make your own github repo so you can begin to share your code with others!</li>
</ul>
<hr>
</section>
<section id="missing-data---all-variables" class="level3" data-number="2.4.5">
<h3 data-number="2.4.5" class="anchored" data-anchor-id="missing-data---all-variables"><span class="header-section-number">2.4.5</span> Missing Data - All variables</h3>
<p><code>skim_some()</code> provides us with missing data counts and complete data proportions for each variable</p>
<div class="cell">
<div class="sourceCode cell-code" id="cb18"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb18-1"><a href="#cb18-1" aria-hidden="true" tabindex="-1"></a>data_all <span class="sc">|&gt;</span> </span>
<span id="cb18-2"><a href="#cb18-2" aria-hidden="true" tabindex="-1"></a>  <span class="fu">skim_some</span>() <span class="sc">|&gt;</span> </span>
<span id="cb18-3"><a href="#cb18-3" aria-hidden="true" tabindex="-1"></a>  <span class="fu">select</span>(skim_variable, n_missing, complete_rate) <span class="co"># &lt;1&gt;</span></span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
<div class="cell-output cell-output-stdout">
<pre><code># A tibble: 10 × 3
   skim_variable n_missing complete_rate
   &lt;chr&gt;             &lt;int&gt;         &lt;dbl&gt;
 1 overall_qual          0         1    
 2 garage_qual         109         0.944
 3 ms_zoning             0         1    
 4 lot_config            0         1    
 5 bldg_type             0         1    
 6 sale_price            0         1    
 7 gr_liv_area           0         1    
 8 lot_area              0         1    
 9 year_built            0         1    
10 garage_cars           1         0.999</code></pre>
</div>
</div>
<ol type="1">
<li><code>skim_some()</code> returns a dataframe so you can select only the subset of columns to focus its output on what you want. Or just print it all!</li>
</ol>
<hr>
<p>You likely should view the full observation for missing values</p>
<p>We will show you a few methods to do this in your rendered output</p>
<ul>
<li><code>print()</code> will print only 20 rows and the number of columns that will display for width of page
<ul>
<li>Set <code>options()</code> if you will do a lot of printing and want full dataframe printed</li>
</ul></li>
<li>Use <code>kbl()</code> from <code>kableExtra</code> package for formatted tables (two methods below)</li>
</ul>
<p>Don’t forget that you can also use <code>View()</code> interactively in R Studio</p>
<hr>
<p><strong>Option 1 (Simple)</strong>: Use print() with <code>options()</code></p>
<div class="cell">
<div class="sourceCode cell-code" id="cb20"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb20-1"><a href="#cb20-1" aria-hidden="true" tabindex="-1"></a><span class="fu">options</span>(<span class="at">tibble.width =</span> <span class="cn">Inf</span>, <span class="at">tibble.print_max =</span> <span class="cn">Inf</span>) <span class="co"># &lt;1&gt;</span></span>
<span id="cb20-2"><a href="#cb20-2" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb20-3"><a href="#cb20-3" aria-hidden="true" tabindex="-1"></a>data_all <span class="sc">|&gt;</span> <span class="fu">filter</span>(<span class="fu">is.na</span>(garage_cars)) <span class="sc">|&gt;</span> </span>
<span id="cb20-4"><a href="#cb20-4" aria-hidden="true" tabindex="-1"></a>  <span class="fu">print</span>()</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
<div class="cell-output cell-output-stdout">
<pre><code># A tibble: 1 × 10
  sale_price gr_liv_area lot_area year_built overall_qual garage_cars
       &lt;dbl&gt;       &lt;dbl&gt;    &lt;dbl&gt;      &lt;dbl&gt; &lt;fct&gt;              &lt;dbl&gt;
1     150909        1828     9060       1923 5                     NA
  garage_qual ms_zoning lot_config bldg_type
  &lt;fct&gt;       &lt;fct&gt;     &lt;fct&gt;      &lt;fct&gt;    
1 &lt;NA&gt;        RM        Inside     1Fam     </code></pre>
</div>
</div>
<ol type="1">
<li>This sets print to print all rows and columns. Note that we set these options at the start of the unit b.c. we like to see our full tibbles. If we want only a subset of the first (or last) rows, we use <code>head()</code> or <code>tail()</code></li>
</ol>
<hr>
<p>Here are some more advanced options using <code>kbl()</code> for the df with many rows</p>
<ul>
<li><code>kable()</code> tables from <code>knitr</code> package and <code>kableExtra</code> extensions (including <code>kbl()</code>) are very useful during EDA and also final publication quality tables</li>
<li>use <code>library(kableExtra)</code></li>
<li>see <a href="https://cran.r-project.org/web/packages/kableExtra/vignettes/awesome_table_in_html.html">vignettes for kableExtra</a></li>
</ul>
<p><strong>Option 2 (more advanced)</strong>: Use a function for kables that we created. Code is displayed here but the function is available to you if you source fun_eda.R from Github</p>
<div class="cell">
<div class="sourceCode cell-code" id="cb22"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb22-1"><a href="#cb22-1" aria-hidden="true" tabindex="-1"></a><span class="co"># Might want to use height = "100%" if only printing a few rows</span></span>
<span id="cb22-2"><a href="#cb22-2" aria-hidden="true" tabindex="-1"></a>print_kbl <span class="ot">&lt;-</span> <span class="cf">function</span>(data, <span class="at">height =</span> <span class="st">"500px"</span>) { <span class="co"># &lt;1&gt;</span></span>
<span id="cb22-3"><a href="#cb22-3" aria-hidden="true" tabindex="-1"></a>  data <span class="sc">|&gt;</span> </span>
<span id="cb22-4"><a href="#cb22-4" aria-hidden="true" tabindex="-1"></a>    <span class="fu">kbl</span>(<span class="at">align =</span> <span class="st">"r"</span>) <span class="sc">|&gt;</span> </span>
<span id="cb22-5"><a href="#cb22-5" aria-hidden="true" tabindex="-1"></a>    <span class="fu">kable_styling</span>(<span class="at">bootstrap_options =</span> <span class="fu">c</span>(<span class="st">"striped"</span>, <span class="st">"condensed"</span>)) <span class="sc">|&gt;</span> </span>
<span id="cb22-6"><a href="#cb22-6" aria-hidden="true" tabindex="-1"></a>    <span class="fu">scroll_box</span>(<span class="at">height =</span> height, <span class="at">width =</span> <span class="st">"100%"</span>) <span class="co"># &lt;2&gt;</span></span>
<span id="cb22-7"><a href="#cb22-7" aria-hidden="true" tabindex="-1"></a>}</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
</div>
<ol type="1">
<li>Defaults to a output box of height = “500px”. Can set to other values if preferred.</li>
<li>Might want to use <code>height = "100%"</code> if only printing a few rows.</li>
</ol>
<hr>
<p>Let’s use this function to see its output</p>
<div class="cell">
<div class="sourceCode cell-code" id="cb23"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb23-1"><a href="#cb23-1" aria-hidden="true" tabindex="-1"></a>data_all <span class="sc">|&gt;</span> <span class="fu">filter</span>(<span class="fu">is.na</span>(garage_qual)) <span class="sc">|&gt;</span> </span>
<span id="cb23-2"><a href="#cb23-2" aria-hidden="true" tabindex="-1"></a>  <span class="fu">print_kbl</span>()</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
<div class="cell-output-display">

<div style="border: 1px solid #ddd; padding: 0px; overflow-y: scroll; height:500px; overflow-x: scroll; width:100%; "><table class="table table-striped table-condensed" style="margin-left: auto; margin-right: auto;">
 <thead>
  <tr>
   <th style="text-align:right;position: sticky; top:0; background-color: #FFFFFF;"> sale_price </th>
   <th style="text-align:right;position: sticky; top:0; background-color: #FFFFFF;"> gr_liv_area </th>
   <th style="text-align:right;position: sticky; top:0; background-color: #FFFFFF;"> lot_area </th>
   <th style="text-align:right;position: sticky; top:0; background-color: #FFFFFF;"> year_built </th>
   <th style="text-align:right;position: sticky; top:0; background-color: #FFFFFF;"> overall_qual </th>
   <th style="text-align:right;position: sticky; top:0; background-color: #FFFFFF;"> garage_cars </th>
   <th style="text-align:right;position: sticky; top:0; background-color: #FFFFFF;"> garage_qual </th>
   <th style="text-align:right;position: sticky; top:0; background-color: #FFFFFF;"> ms_zoning </th>
   <th style="text-align:right;position: sticky; top:0; background-color: #FFFFFF;"> lot_config </th>
   <th style="text-align:right;position: sticky; top:0; background-color: #FFFFFF;"> bldg_type </th>
  </tr>
 </thead>
<tbody>
  <tr>
   <td style="text-align:right;"> 115000 </td>
   <td style="text-align:right;"> 864 </td>
   <td style="text-align:right;"> 10500 </td>
   <td style="text-align:right;"> 1971 </td>
   <td style="text-align:right;"> 4 </td>
   <td style="text-align:right;"> 0 </td>
   <td style="text-align:right;"> NA </td>
   <td style="text-align:right;"> RL </td>
   <td style="text-align:right;"> FR2 </td>
   <td style="text-align:right;"> 1Fam </td>
  </tr>
  <tr>
   <td style="text-align:right;"> 128950 </td>
   <td style="text-align:right;"> 1225 </td>
   <td style="text-align:right;"> 9320 </td>
   <td style="text-align:right;"> 1959 </td>
   <td style="text-align:right;"> 4 </td>
   <td style="text-align:right;"> 0 </td>
   <td style="text-align:right;"> NA </td>
   <td style="text-align:right;"> RL </td>
   <td style="text-align:right;"> Inside </td>
   <td style="text-align:right;"> 1Fam </td>
  </tr>
  <tr>
   <td style="text-align:right;"> 84900 </td>
   <td style="text-align:right;"> 1728 </td>
   <td style="text-align:right;"> 13260 </td>
   <td style="text-align:right;"> 1962 </td>
   <td style="text-align:right;"> 5 </td>
   <td style="text-align:right;"> 0 </td>
   <td style="text-align:right;"> NA </td>
   <td style="text-align:right;"> RL </td>
   <td style="text-align:right;"> Inside </td>
   <td style="text-align:right;"> Duplex </td>
  </tr>
  <tr>
   <td style="text-align:right;"> 116500 </td>
   <td style="text-align:right;"> 858 </td>
   <td style="text-align:right;"> 7207 </td>
   <td style="text-align:right;"> 1958 </td>
   <td style="text-align:right;"> 5 </td>
   <td style="text-align:right;"> 0 </td>
   <td style="text-align:right;"> NA </td>
   <td style="text-align:right;"> RL </td>
   <td style="text-align:right;"> Inside </td>
   <td style="text-align:right;"> 1Fam </td>
  </tr>
  <tr>
   <td style="text-align:right;"> 76500 </td>
   <td style="text-align:right;"> 1306 </td>
   <td style="text-align:right;"> 5350 </td>
   <td style="text-align:right;"> 1940 </td>
   <td style="text-align:right;"> 3 </td>
   <td style="text-align:right;"> 0 </td>
   <td style="text-align:right;"> NA </td>
   <td style="text-align:right;"> RL </td>
   <td style="text-align:right;"> Inside </td>
   <td style="text-align:right;"> 1Fam </td>
  </tr>
  <tr>
   <td style="text-align:right;"> 76500 </td>
   <td style="text-align:right;"> 2256 </td>
   <td style="text-align:right;"> 9045 </td>
   <td style="text-align:right;"> 1910 </td>
   <td style="text-align:right;"> 5 </td>
   <td style="text-align:right;"> 0 </td>
   <td style="text-align:right;"> NA </td>
   <td style="text-align:right;"> RM </td>
   <td style="text-align:right;"> Inside </td>
   <td style="text-align:right;"> 2fmCon </td>
  </tr>
  <tr>
   <td style="text-align:right;"> 159900 </td>
   <td style="text-align:right;"> 1560 </td>
   <td style="text-align:right;"> 12900 </td>
   <td style="text-align:right;"> 1912 </td>
   <td style="text-align:right;"> 6 </td>
   <td style="text-align:right;"> 0 </td>
   <td style="text-align:right;"> NA </td>
   <td style="text-align:right;"> RM </td>
   <td style="text-align:right;"> Inside </td>
   <td style="text-align:right;"> 1Fam </td>
  </tr>
  <tr>
   <td style="text-align:right;"> 55000 </td>
   <td style="text-align:right;"> 1092 </td>
   <td style="text-align:right;"> 5600 </td>
   <td style="text-align:right;"> 1930 </td>
   <td style="text-align:right;"> 4 </td>
   <td style="text-align:right;"> 0 </td>
   <td style="text-align:right;"> NA </td>
   <td style="text-align:right;"> RM </td>
   <td style="text-align:right;"> Inside </td>
   <td style="text-align:right;"> 2fmCon </td>
  </tr>
  <tr>
   <td style="text-align:right;"> 93369 </td>
   <td style="text-align:right;"> 1884 </td>
   <td style="text-align:right;"> 6449 </td>
   <td style="text-align:right;"> 1907 </td>
   <td style="text-align:right;"> 4 </td>
   <td style="text-align:right;"> 0 </td>
   <td style="text-align:right;"> NA </td>
   <td style="text-align:right;"> C (all) </td>
   <td style="text-align:right;"> Inside </td>
   <td style="text-align:right;"> 1Fam </td>
  </tr>
  <tr>
   <td style="text-align:right;"> 94000 </td>
   <td style="text-align:right;"> 1020 </td>
   <td style="text-align:right;"> 6342 </td>
   <td style="text-align:right;"> 1875 </td>
   <td style="text-align:right;"> 5 </td>
   <td style="text-align:right;"> 0 </td>
   <td style="text-align:right;"> NA </td>
   <td style="text-align:right;"> RL </td>
   <td style="text-align:right;"> Inside </td>
   <td style="text-align:right;"> 1Fam </td>
  </tr>
  <tr>
   <td style="text-align:right;"> 136000 </td>
   <td style="text-align:right;"> 1832 </td>
   <td style="text-align:right;"> 10773 </td>
   <td style="text-align:right;"> 1967 </td>
   <td style="text-align:right;"> 4 </td>
   <td style="text-align:right;"> 0 </td>
   <td style="text-align:right;"> NA </td>
   <td style="text-align:right;"> RL </td>
   <td style="text-align:right;"> Inside </td>
   <td style="text-align:right;"> Duplex </td>
  </tr>
  <tr>
   <td style="text-align:right;"> 100000 </td>
   <td style="text-align:right;"> 1664 </td>
   <td style="text-align:right;"> 9825 </td>
   <td style="text-align:right;"> 1965 </td>
   <td style="text-align:right;"> 5 </td>
   <td style="text-align:right;"> 0 </td>
   <td style="text-align:right;"> NA </td>
   <td style="text-align:right;"> RL </td>
   <td style="text-align:right;"> Inside </td>
   <td style="text-align:right;"> Duplex </td>
  </tr>
  <tr>
   <td style="text-align:right;"> 90000 </td>
   <td style="text-align:right;"> 960 </td>
   <td style="text-align:right;"> 6410 </td>
   <td style="text-align:right;"> 1958 </td>
   <td style="text-align:right;"> 4 </td>
   <td style="text-align:right;"> 0 </td>
   <td style="text-align:right;"> NA </td>
   <td style="text-align:right;"> RL </td>
   <td style="text-align:right;"> Inside </td>
   <td style="text-align:right;"> 1Fam </td>
  </tr>
  <tr>
   <td style="text-align:right;"> 100000 </td>
   <td style="text-align:right;"> 1666 </td>
   <td style="text-align:right;"> 9839 </td>
   <td style="text-align:right;"> 1931 </td>
   <td style="text-align:right;"> 5 </td>
   <td style="text-align:right;"> 0 </td>
   <td style="text-align:right;"> NA </td>
   <td style="text-align:right;"> RL </td>
   <td style="text-align:right;"> Inside </td>
   <td style="text-align:right;"> 1Fam </td>
  </tr>
  <tr>
   <td style="text-align:right;"> 139000 </td>
   <td style="text-align:right;"> 1824 </td>
   <td style="text-align:right;"> 9400 </td>
   <td style="text-align:right;"> 1971 </td>
   <td style="text-align:right;"> 6 </td>
   <td style="text-align:right;"> 0 </td>
   <td style="text-align:right;"> NA </td>
   <td style="text-align:right;"> RL </td>
   <td style="text-align:right;"> Corner </td>
   <td style="text-align:right;"> Duplex </td>
  </tr>
  <tr>
   <td style="text-align:right;"> 76000 </td>
   <td style="text-align:right;"> 1092 </td>
   <td style="text-align:right;"> 1476 </td>
   <td style="text-align:right;"> 1970 </td>
   <td style="text-align:right;"> 4 </td>
   <td style="text-align:right;"> 0 </td>
   <td style="text-align:right;"> NA </td>
   <td style="text-align:right;"> RM </td>
   <td style="text-align:right;"> Inside </td>
   <td style="text-align:right;"> Twnhs </td>
  </tr>
  <tr>
   <td style="text-align:right;"> 75500 </td>
   <td style="text-align:right;"> 630 </td>
   <td style="text-align:right;"> 1491 </td>
   <td style="text-align:right;"> 1972 </td>
   <td style="text-align:right;"> 4 </td>
   <td style="text-align:right;"> 0 </td>
   <td style="text-align:right;"> NA </td>
   <td style="text-align:right;"> RM </td>
   <td style="text-align:right;"> Inside </td>
   <td style="text-align:right;"> TwnhsE </td>
  </tr>
  <tr>
   <td style="text-align:right;"> 88250 </td>
   <td style="text-align:right;"> 1092 </td>
   <td style="text-align:right;"> 1900 </td>
   <td style="text-align:right;"> 1970 </td>
   <td style="text-align:right;"> 4 </td>
   <td style="text-align:right;"> 0 </td>
   <td style="text-align:right;"> NA </td>
   <td style="text-align:right;"> RM </td>
   <td style="text-align:right;"> Inside </td>
   <td style="text-align:right;"> TwnhsE </td>
  </tr>
  <tr>
   <td style="text-align:right;"> 136000 </td>
   <td style="text-align:right;"> 1792 </td>
   <td style="text-align:right;"> 9000 </td>
   <td style="text-align:right;"> 1974 </td>
   <td style="text-align:right;"> 5 </td>
   <td style="text-align:right;"> 0 </td>
   <td style="text-align:right;"> NA </td>
   <td style="text-align:right;"> RL </td>
   <td style="text-align:right;"> FR2 </td>
   <td style="text-align:right;"> Duplex </td>
  </tr>
  <tr>
   <td style="text-align:right;"> 142000 </td>
   <td style="text-align:right;"> 1114 </td>
   <td style="text-align:right;"> 13072 </td>
   <td style="text-align:right;"> 2004 </td>
   <td style="text-align:right;"> 5 </td>
   <td style="text-align:right;"> 0 </td>
   <td style="text-align:right;"> NA </td>
   <td style="text-align:right;"> RL </td>
   <td style="text-align:right;"> Inside </td>
   <td style="text-align:right;"> 1Fam </td>
  </tr>
  <tr>
   <td style="text-align:right;"> 82500 </td>
   <td style="text-align:right;"> 708 </td>
   <td style="text-align:right;"> 5330 </td>
   <td style="text-align:right;"> 1940 </td>
   <td style="text-align:right;"> 4 </td>
   <td style="text-align:right;"> 0 </td>
   <td style="text-align:right;"> NA </td>
   <td style="text-align:right;"> RL </td>
   <td style="text-align:right;"> Inside </td>
   <td style="text-align:right;"> 1Fam </td>
  </tr>
  <tr>
   <td style="text-align:right;"> 129000 </td>
   <td style="text-align:right;"> 1464 </td>
   <td style="text-align:right;"> 9900 </td>
   <td style="text-align:right;"> 1910 </td>
   <td style="text-align:right;"> 5 </td>
   <td style="text-align:right;"> 0 </td>
   <td style="text-align:right;"> NA </td>
   <td style="text-align:right;"> RM </td>
   <td style="text-align:right;"> Corner </td>
   <td style="text-align:right;"> 1Fam </td>
  </tr>
  <tr>
   <td style="text-align:right;"> 94550 </td>
   <td style="text-align:right;"> 1701 </td>
   <td style="text-align:right;"> 7627 </td>
   <td style="text-align:right;"> 1920 </td>
   <td style="text-align:right;"> 4 </td>
   <td style="text-align:right;"> 0 </td>
   <td style="text-align:right;"> NA </td>
   <td style="text-align:right;"> RM </td>
   <td style="text-align:right;"> Corner </td>
   <td style="text-align:right;"> 2fmCon </td>
  </tr>
  <tr>
   <td style="text-align:right;"> 103000 </td>
   <td style="text-align:right;"> 1447 </td>
   <td style="text-align:right;"> 10134 </td>
   <td style="text-align:right;"> 1910 </td>
   <td style="text-align:right;"> 5 </td>
   <td style="text-align:right;"> 0 </td>
   <td style="text-align:right;"> NA </td>
   <td style="text-align:right;"> RM </td>
   <td style="text-align:right;"> Inside </td>
   <td style="text-align:right;"> 1Fam </td>
  </tr>
  <tr>
   <td style="text-align:right;"> 37900 </td>
   <td style="text-align:right;"> 968 </td>
   <td style="text-align:right;"> 5925 </td>
   <td style="text-align:right;"> 1910 </td>
   <td style="text-align:right;"> 3 </td>
   <td style="text-align:right;"> 0 </td>
   <td style="text-align:right;"> NA </td>
   <td style="text-align:right;"> RM </td>
   <td style="text-align:right;"> Inside </td>
   <td style="text-align:right;"> 1Fam </td>
  </tr>
  <tr>
   <td style="text-align:right;"> 113000 </td>
   <td style="text-align:right;"> 1452 </td>
   <td style="text-align:right;"> 4456 </td>
   <td style="text-align:right;"> 1920 </td>
   <td style="text-align:right;"> 4 </td>
   <td style="text-align:right;"> 0 </td>
   <td style="text-align:right;"> NA </td>
   <td style="text-align:right;"> RM </td>
   <td style="text-align:right;"> Inside </td>
   <td style="text-align:right;"> 2fmCon </td>
  </tr>
  <tr>
   <td style="text-align:right;"> 58500 </td>
   <td style="text-align:right;"> 816 </td>
   <td style="text-align:right;"> 3300 </td>
   <td style="text-align:right;"> 1910 </td>
   <td style="text-align:right;"> 4 </td>
   <td style="text-align:right;"> 0 </td>
   <td style="text-align:right;"> NA </td>
   <td style="text-align:right;"> C (all) </td>
   <td style="text-align:right;"> Inside </td>
   <td style="text-align:right;"> 1Fam </td>
  </tr>
  <tr>
   <td style="text-align:right;"> 34900 </td>
   <td style="text-align:right;"> 720 </td>
   <td style="text-align:right;"> 7879 </td>
   <td style="text-align:right;"> 1920 </td>
   <td style="text-align:right;"> 4 </td>
   <td style="text-align:right;"> 0 </td>
   <td style="text-align:right;"> NA </td>
   <td style="text-align:right;"> C (all) </td>
   <td style="text-align:right;"> Inside </td>
   <td style="text-align:right;"> 1Fam </td>
  </tr>
  <tr>
   <td style="text-align:right;"> 60000 </td>
   <td style="text-align:right;"> 800 </td>
   <td style="text-align:right;"> 6120 </td>
   <td style="text-align:right;"> 1936 </td>
   <td style="text-align:right;"> 2 </td>
   <td style="text-align:right;"> 0 </td>
   <td style="text-align:right;"> NA </td>
   <td style="text-align:right;"> RM </td>
   <td style="text-align:right;"> Inside </td>
   <td style="text-align:right;"> 1Fam </td>
  </tr>
  <tr>
   <td style="text-align:right;"> 62500 </td>
   <td style="text-align:right;"> 2128 </td>
   <td style="text-align:right;"> 3000 </td>
   <td style="text-align:right;"> 1922 </td>
   <td style="text-align:right;"> 5 </td>
   <td style="text-align:right;"> 0 </td>
   <td style="text-align:right;"> NA </td>
   <td style="text-align:right;"> RM </td>
   <td style="text-align:right;"> Inside </td>
   <td style="text-align:right;"> Duplex </td>
  </tr>
  <tr>
   <td style="text-align:right;"> 97500 </td>
   <td style="text-align:right;"> 1864 </td>
   <td style="text-align:right;"> 5852 </td>
   <td style="text-align:right;"> 1902 </td>
   <td style="text-align:right;"> 7 </td>
   <td style="text-align:right;"> 0 </td>
   <td style="text-align:right;"> NA </td>
   <td style="text-align:right;"> RM </td>
   <td style="text-align:right;"> Corner </td>
   <td style="text-align:right;"> 2fmCon </td>
  </tr>
  <tr>
   <td style="text-align:right;"> 70000 </td>
   <td style="text-align:right;"> 892 </td>
   <td style="text-align:right;"> 5160 </td>
   <td style="text-align:right;"> 1923 </td>
   <td style="text-align:right;"> 4 </td>
   <td style="text-align:right;"> 0 </td>
   <td style="text-align:right;"> NA </td>
   <td style="text-align:right;"> RM </td>
   <td style="text-align:right;"> Inside </td>
   <td style="text-align:right;"> 1Fam </td>
  </tr>
  <tr>
   <td style="text-align:right;"> 179000 </td>
   <td style="text-align:right;"> 1200 </td>
   <td style="text-align:right;"> 10800 </td>
   <td style="text-align:right;"> 1987 </td>
   <td style="text-align:right;"> 5 </td>
   <td style="text-align:right;"> 0 </td>
   <td style="text-align:right;"> NA </td>
   <td style="text-align:right;"> RL </td>
   <td style="text-align:right;"> Inside </td>
   <td style="text-align:right;"> Duplex </td>
  </tr>
  <tr>
   <td style="text-align:right;"> 179000 </td>
   <td style="text-align:right;"> 1200 </td>
   <td style="text-align:right;"> 10800 </td>
   <td style="text-align:right;"> 1987 </td>
   <td style="text-align:right;"> 5 </td>
   <td style="text-align:right;"> 0 </td>
   <td style="text-align:right;"> NA </td>
   <td style="text-align:right;"> RL </td>
   <td style="text-align:right;"> Inside </td>
   <td style="text-align:right;"> Duplex </td>
  </tr>
  <tr>
   <td style="text-align:right;"> 61000 </td>
   <td style="text-align:right;"> 904 </td>
   <td style="text-align:right;"> 10020 </td>
   <td style="text-align:right;"> 1922 </td>
   <td style="text-align:right;"> 1 </td>
   <td style="text-align:right;"> 0 </td>
   <td style="text-align:right;"> NA </td>
   <td style="text-align:right;"> RL </td>
   <td style="text-align:right;"> Inside </td>
   <td style="text-align:right;"> 1Fam </td>
  </tr>
  <tr>
   <td style="text-align:right;"> 118000 </td>
   <td style="text-align:right;"> 698 </td>
   <td style="text-align:right;"> 9405 </td>
   <td style="text-align:right;"> 1947 </td>
   <td style="text-align:right;"> 5 </td>
   <td style="text-align:right;"> 0 </td>
   <td style="text-align:right;"> NA </td>
   <td style="text-align:right;"> RL </td>
   <td style="text-align:right;"> Inside </td>
   <td style="text-align:right;"> 1Fam </td>
  </tr>
  <tr>
   <td style="text-align:right;"> 99900 </td>
   <td style="text-align:right;"> 864 </td>
   <td style="text-align:right;"> 4060 </td>
   <td style="text-align:right;"> 1922 </td>
   <td style="text-align:right;"> 5 </td>
   <td style="text-align:right;"> 0 </td>
   <td style="text-align:right;"> NA </td>
   <td style="text-align:right;"> RL </td>
   <td style="text-align:right;"> Corner </td>
   <td style="text-align:right;"> 1Fam </td>
  </tr>
  <tr>
   <td style="text-align:right;"> 119900 </td>
   <td style="text-align:right;"> 1678 </td>
   <td style="text-align:right;"> 10926 </td>
   <td style="text-align:right;"> 1959 </td>
   <td style="text-align:right;"> 5 </td>
   <td style="text-align:right;"> 0 </td>
   <td style="text-align:right;"> NA </td>
   <td style="text-align:right;"> RL </td>
   <td style="text-align:right;"> Inside </td>
   <td style="text-align:right;"> Duplex </td>
  </tr>
  <tr>
   <td style="text-align:right;"> 112000 </td>
   <td style="text-align:right;"> 833 </td>
   <td style="text-align:right;"> 8780 </td>
   <td style="text-align:right;"> 1985 </td>
   <td style="text-align:right;"> 5 </td>
   <td style="text-align:right;"> 0 </td>
   <td style="text-align:right;"> NA </td>
   <td style="text-align:right;"> RL </td>
   <td style="text-align:right;"> Corner </td>
   <td style="text-align:right;"> 1Fam </td>
  </tr>
  <tr>
   <td style="text-align:right;"> 141000 </td>
   <td style="text-align:right;"> 1080 </td>
   <td style="text-align:right;"> 7500 </td>
   <td style="text-align:right;"> 2004 </td>
   <td style="text-align:right;"> 7 </td>
   <td style="text-align:right;"> 0 </td>
   <td style="text-align:right;"> NA </td>
   <td style="text-align:right;"> RL </td>
   <td style="text-align:right;"> Inside </td>
   <td style="text-align:right;"> 1Fam </td>
  </tr>
  <tr>
   <td style="text-align:right;"> 106250 </td>
   <td style="text-align:right;"> 1294 </td>
   <td style="text-align:right;"> 10800 </td>
   <td style="text-align:right;"> 1900 </td>
   <td style="text-align:right;"> 4 </td>
   <td style="text-align:right;"> 0 </td>
   <td style="text-align:right;"> NA </td>
   <td style="text-align:right;"> RL </td>
   <td style="text-align:right;"> Inside </td>
   <td style="text-align:right;"> 2fmCon </td>
  </tr>
  <tr>
   <td style="text-align:right;"> 130000 </td>
   <td style="text-align:right;"> 1800 </td>
   <td style="text-align:right;"> 8513 </td>
   <td style="text-align:right;"> 1961 </td>
   <td style="text-align:right;"> 5 </td>
   <td style="text-align:right;"> 0 </td>
   <td style="text-align:right;"> NA </td>
   <td style="text-align:right;"> RL </td>
   <td style="text-align:right;"> Corner </td>
   <td style="text-align:right;"> Duplex </td>
  </tr>
  <tr>
   <td style="text-align:right;"> 120000 </td>
   <td style="text-align:right;"> 1027 </td>
   <td style="text-align:right;"> 5400 </td>
   <td style="text-align:right;"> 1920 </td>
   <td style="text-align:right;"> 7 </td>
   <td style="text-align:right;"> 0 </td>
   <td style="text-align:right;"> NA </td>
   <td style="text-align:right;"> RM </td>
   <td style="text-align:right;"> Inside </td>
   <td style="text-align:right;"> 1Fam </td>
  </tr>
  <tr>
   <td style="text-align:right;"> 95000 </td>
   <td style="text-align:right;"> 1080 </td>
   <td style="text-align:right;"> 5914 </td>
   <td style="text-align:right;"> 1890 </td>
   <td style="text-align:right;"> 5 </td>
   <td style="text-align:right;"> 0 </td>
   <td style="text-align:right;"> NA </td>
   <td style="text-align:right;"> RM </td>
   <td style="text-align:right;"> Inside </td>
   <td style="text-align:right;"> 1Fam </td>
  </tr>
  <tr>
   <td style="text-align:right;"> 65000 </td>
   <td style="text-align:right;"> 1588 </td>
   <td style="text-align:right;"> 12205 </td>
   <td style="text-align:right;"> 1949 </td>
   <td style="text-align:right;"> 3 </td>
   <td style="text-align:right;"> 0 </td>
   <td style="text-align:right;"> NA </td>
   <td style="text-align:right;"> RM </td>
   <td style="text-align:right;"> Inside </td>
   <td style="text-align:right;"> 1Fam </td>
  </tr>
  <tr>
   <td style="text-align:right;"> 129400 </td>
   <td style="text-align:right;"> 1540 </td>
   <td style="text-align:right;"> 6000 </td>
   <td style="text-align:right;"> 1905 </td>
   <td style="text-align:right;"> 5 </td>
   <td style="text-align:right;"> 0 </td>
   <td style="text-align:right;"> NA </td>
   <td style="text-align:right;"> RM </td>
   <td style="text-align:right;"> Corner </td>
   <td style="text-align:right;"> 1Fam </td>
  </tr>
  <tr>
   <td style="text-align:right;"> 160000 </td>
   <td style="text-align:right;"> 1984 </td>
   <td style="text-align:right;"> 8094 </td>
   <td style="text-align:right;"> 1910 </td>
   <td style="text-align:right;"> 6 </td>
   <td style="text-align:right;"> 1 </td>
   <td style="text-align:right;"> NA </td>
   <td style="text-align:right;"> RM </td>
   <td style="text-align:right;"> Inside </td>
   <td style="text-align:right;"> 2fmCon </td>
  </tr>
  <tr>
   <td style="text-align:right;"> 89500 </td>
   <td style="text-align:right;"> 1406 </td>
   <td style="text-align:right;"> 7920 </td>
   <td style="text-align:right;"> 1920 </td>
   <td style="text-align:right;"> 6 </td>
   <td style="text-align:right;"> 0 </td>
   <td style="text-align:right;"> NA </td>
   <td style="text-align:right;"> RM </td>
   <td style="text-align:right;"> Inside </td>
   <td style="text-align:right;"> 1Fam </td>
  </tr>
  <tr>
   <td style="text-align:right;"> 79900 </td>
   <td style="text-align:right;"> 1198 </td>
   <td style="text-align:right;"> 5586 </td>
   <td style="text-align:right;"> 1920 </td>
   <td style="text-align:right;"> 6 </td>
   <td style="text-align:right;"> 0 </td>
   <td style="text-align:right;"> NA </td>
   <td style="text-align:right;"> RM </td>
   <td style="text-align:right;"> Inside </td>
   <td style="text-align:right;"> 1Fam </td>
  </tr>
  <tr>
   <td style="text-align:right;"> 82375 </td>
   <td style="text-align:right;"> 1344 </td>
   <td style="text-align:right;"> 10320 </td>
   <td style="text-align:right;"> 1915 </td>
   <td style="text-align:right;"> 3 </td>
   <td style="text-align:right;"> 0 </td>
   <td style="text-align:right;"> NA </td>
   <td style="text-align:right;"> RM </td>
   <td style="text-align:right;"> Inside </td>
   <td style="text-align:right;"> 2fmCon </td>
  </tr>
  <tr>
   <td style="text-align:right;"> 127500 </td>
   <td style="text-align:right;"> 1355 </td>
   <td style="text-align:right;"> 10106 </td>
   <td style="text-align:right;"> 1940 </td>
   <td style="text-align:right;"> 5 </td>
   <td style="text-align:right;"> 0 </td>
   <td style="text-align:right;"> NA </td>
   <td style="text-align:right;"> RL </td>
   <td style="text-align:right;"> Inside </td>
   <td style="text-align:right;"> 2fmCon </td>
  </tr>
  <tr>
   <td style="text-align:right;"> 80000 </td>
   <td style="text-align:right;"> 1006 </td>
   <td style="text-align:right;"> 9000 </td>
   <td style="text-align:right;"> 1959 </td>
   <td style="text-align:right;"> 5 </td>
   <td style="text-align:right;"> 0 </td>
   <td style="text-align:right;"> NA </td>
   <td style="text-align:right;"> RL </td>
   <td style="text-align:right;"> Inside </td>
   <td style="text-align:right;"> 1Fam </td>
  </tr>
  <tr>
   <td style="text-align:right;"> 260000 </td>
   <td style="text-align:right;"> 1518 </td>
   <td style="text-align:right;"> 19550 </td>
   <td style="text-align:right;"> 1940 </td>
   <td style="text-align:right;"> 5 </td>
   <td style="text-align:right;"> 0 </td>
   <td style="text-align:right;"> NA </td>
   <td style="text-align:right;"> RL </td>
   <td style="text-align:right;"> Inside </td>
   <td style="text-align:right;"> 1Fam </td>
  </tr>
  <tr>
   <td style="text-align:right;"> 99600 </td>
   <td style="text-align:right;"> 864 </td>
   <td style="text-align:right;"> 9350 </td>
   <td style="text-align:right;"> 1975 </td>
   <td style="text-align:right;"> 5 </td>
   <td style="text-align:right;"> 0 </td>
   <td style="text-align:right;"> NA </td>
   <td style="text-align:right;"> RL </td>
   <td style="text-align:right;"> Inside </td>
   <td style="text-align:right;"> Duplex </td>
  </tr>
  <tr>
   <td style="text-align:right;"> 107500 </td>
   <td style="text-align:right;"> 1347 </td>
   <td style="text-align:right;"> 7000 </td>
   <td style="text-align:right;"> 1910 </td>
   <td style="text-align:right;"> 5 </td>
   <td style="text-align:right;"> 0 </td>
   <td style="text-align:right;"> NA </td>
   <td style="text-align:right;"> RL </td>
   <td style="text-align:right;"> Inside </td>
   <td style="text-align:right;"> 2fmCon </td>
  </tr>
  <tr>
   <td style="text-align:right;"> 79000 </td>
   <td style="text-align:right;"> 1096 </td>
   <td style="text-align:right;"> 9600 </td>
   <td style="text-align:right;"> 1924 </td>
   <td style="text-align:right;"> 6 </td>
   <td style="text-align:right;"> 0 </td>
   <td style="text-align:right;"> NA </td>
   <td style="text-align:right;"> RL </td>
   <td style="text-align:right;"> Corner </td>
   <td style="text-align:right;"> 1Fam </td>
  </tr>
  <tr>
   <td style="text-align:right;"> 85000 </td>
   <td style="text-align:right;"> 796 </td>
   <td style="text-align:right;"> 8777 </td>
   <td style="text-align:right;"> 1910 </td>
   <td style="text-align:right;"> 5 </td>
   <td style="text-align:right;"> 0 </td>
   <td style="text-align:right;"> NA </td>
   <td style="text-align:right;"> RL </td>
   <td style="text-align:right;"> Inside </td>
   <td style="text-align:right;"> 1Fam </td>
  </tr>
  <tr>
   <td style="text-align:right;"> 145900 </td>
   <td style="text-align:right;"> 2200 </td>
   <td style="text-align:right;"> 8777 </td>
   <td style="text-align:right;"> 1900 </td>
   <td style="text-align:right;"> 5 </td>
   <td style="text-align:right;"> 0 </td>
   <td style="text-align:right;"> NA </td>
   <td style="text-align:right;"> RL </td>
   <td style="text-align:right;"> Inside </td>
   <td style="text-align:right;"> Duplex </td>
  </tr>
  <tr>
   <td style="text-align:right;"> 82000 </td>
   <td style="text-align:right;"> 1152 </td>
   <td style="text-align:right;"> 6040 </td>
   <td style="text-align:right;"> 1955 </td>
   <td style="text-align:right;"> 4 </td>
   <td style="text-align:right;"> 0 </td>
   <td style="text-align:right;"> NA </td>
   <td style="text-align:right;"> RL </td>
   <td style="text-align:right;"> Inside </td>
   <td style="text-align:right;"> Duplex </td>
  </tr>
  <tr>
   <td style="text-align:right;"> 82000 </td>
   <td style="text-align:right;"> 1152 </td>
   <td style="text-align:right;"> 6012 </td>
   <td style="text-align:right;"> 1955 </td>
   <td style="text-align:right;"> 4 </td>
   <td style="text-align:right;"> 0 </td>
   <td style="text-align:right;"> NA </td>
   <td style="text-align:right;"> RL </td>
   <td style="text-align:right;"> Corner </td>
   <td style="text-align:right;"> Duplex </td>
  </tr>
  <tr>
   <td style="text-align:right;"> 118000 </td>
   <td style="text-align:right;"> 1440 </td>
   <td style="text-align:right;"> 12108 </td>
   <td style="text-align:right;"> 1955 </td>
   <td style="text-align:right;"> 4 </td>
   <td style="text-align:right;"> 0 </td>
   <td style="text-align:right;"> NA </td>
   <td style="text-align:right;"> RL </td>
   <td style="text-align:right;"> Inside </td>
   <td style="text-align:right;"> Duplex </td>
  </tr>
  <tr>
   <td style="text-align:right;"> 82500 </td>
   <td style="text-align:right;"> 1152 </td>
   <td style="text-align:right;"> 6845 </td>
   <td style="text-align:right;"> 1955 </td>
   <td style="text-align:right;"> 4 </td>
   <td style="text-align:right;"> 0 </td>
   <td style="text-align:right;"> NA </td>
   <td style="text-align:right;"> RL </td>
   <td style="text-align:right;"> Inside </td>
   <td style="text-align:right;"> Duplex </td>
  </tr>
  <tr>
   <td style="text-align:right;"> 91900 </td>
   <td style="text-align:right;"> 784 </td>
   <td style="text-align:right;"> 6931 </td>
   <td style="text-align:right;"> 1955 </td>
   <td style="text-align:right;"> 4 </td>
   <td style="text-align:right;"> 0 </td>
   <td style="text-align:right;"> NA </td>
   <td style="text-align:right;"> RL </td>
   <td style="text-align:right;"> Inside </td>
   <td style="text-align:right;"> 2fmCon </td>
  </tr>
  <tr>
   <td style="text-align:right;"> 120000 </td>
   <td style="text-align:right;"> 1053 </td>
   <td style="text-align:right;"> 12180 </td>
   <td style="text-align:right;"> 1938 </td>
   <td style="text-align:right;"> 5 </td>
   <td style="text-align:right;"> 0 </td>
   <td style="text-align:right;"> NA </td>
   <td style="text-align:right;"> RL </td>
   <td style="text-align:right;"> Inside </td>
   <td style="text-align:right;"> 1Fam </td>
  </tr>
  <tr>
   <td style="text-align:right;"> 96000 </td>
   <td style="text-align:right;"> 1137 </td>
   <td style="text-align:right;"> 8050 </td>
   <td style="text-align:right;"> 1947 </td>
   <td style="text-align:right;"> 5 </td>
   <td style="text-align:right;"> 0 </td>
   <td style="text-align:right;"> NA </td>
   <td style="text-align:right;"> RL </td>
   <td style="text-align:right;"> Inside </td>
   <td style="text-align:right;"> 1Fam </td>
  </tr>
  <tr>
   <td style="text-align:right;"> 98000 </td>
   <td style="text-align:right;"> 864 </td>
   <td style="text-align:right;"> 5604 </td>
   <td style="text-align:right;"> 1925 </td>
   <td style="text-align:right;"> 5 </td>
   <td style="text-align:right;"> 0 </td>
   <td style="text-align:right;"> NA </td>
   <td style="text-align:right;"> RL </td>
   <td style="text-align:right;"> Inside </td>
   <td style="text-align:right;"> 1Fam </td>
  </tr>
  <tr>
   <td style="text-align:right;"> 67000 </td>
   <td style="text-align:right;"> 864 </td>
   <td style="text-align:right;"> 8248 </td>
   <td style="text-align:right;"> 1914 </td>
   <td style="text-align:right;"> 3 </td>
   <td style="text-align:right;"> 0 </td>
   <td style="text-align:right;"> NA </td>
   <td style="text-align:right;"> RL </td>
   <td style="text-align:right;"> Inside </td>
   <td style="text-align:right;"> 1Fam </td>
  </tr>
  <tr>
   <td style="text-align:right;"> 135900 </td>
   <td style="text-align:right;"> 1716 </td>
   <td style="text-align:right;"> 5687 </td>
   <td style="text-align:right;"> 1912 </td>
   <td style="text-align:right;"> 5 </td>
   <td style="text-align:right;"> 0 </td>
   <td style="text-align:right;"> NA </td>
   <td style="text-align:right;"> RL </td>
   <td style="text-align:right;"> Inside </td>
   <td style="text-align:right;"> 2fmCon </td>
  </tr>
  <tr>
   <td style="text-align:right;"> 119000 </td>
   <td style="text-align:right;"> 1200 </td>
   <td style="text-align:right;"> 8155 </td>
   <td style="text-align:right;"> 1930 </td>
   <td style="text-align:right;"> 5 </td>
   <td style="text-align:right;"> 0 </td>
   <td style="text-align:right;"> NA </td>
   <td style="text-align:right;"> RM </td>
   <td style="text-align:right;"> Inside </td>
   <td style="text-align:right;"> 1Fam </td>
  </tr>
  <tr>
   <td style="text-align:right;"> 81000 </td>
   <td style="text-align:right;"> 630 </td>
   <td style="text-align:right;"> 1890 </td>
   <td style="text-align:right;"> 1972 </td>
   <td style="text-align:right;"> 4 </td>
   <td style="text-align:right;"> 0 </td>
   <td style="text-align:right;"> NA </td>
   <td style="text-align:right;"> RM </td>
   <td style="text-align:right;"> Inside </td>
   <td style="text-align:right;"> Twnhs </td>
  </tr>
  <tr>
   <td style="text-align:right;"> 146000 </td>
   <td style="text-align:right;"> 1100 </td>
   <td style="text-align:right;"> 7500 </td>
   <td style="text-align:right;"> 2006 </td>
   <td style="text-align:right;"> 6 </td>
   <td style="text-align:right;"> 0 </td>
   <td style="text-align:right;"> NA </td>
   <td style="text-align:right;"> RL </td>
   <td style="text-align:right;"> Inside </td>
   <td style="text-align:right;"> 1Fam </td>
  </tr>
  <tr>
   <td style="text-align:right;"> 64000 </td>
   <td style="text-align:right;"> 670 </td>
   <td style="text-align:right;"> 3500 </td>
   <td style="text-align:right;"> 1945 </td>
   <td style="text-align:right;"> 3 </td>
   <td style="text-align:right;"> 0 </td>
   <td style="text-align:right;"> NA </td>
   <td style="text-align:right;"> RL </td>
   <td style="text-align:right;"> Inside </td>
   <td style="text-align:right;"> 1Fam </td>
  </tr>
  <tr>
   <td style="text-align:right;"> 103200 </td>
   <td style="text-align:right;"> 882 </td>
   <td style="text-align:right;"> 5500 </td>
   <td style="text-align:right;"> 1956 </td>
   <td style="text-align:right;"> 4 </td>
   <td style="text-align:right;"> 0 </td>
   <td style="text-align:right;"> NA </td>
   <td style="text-align:right;"> RL </td>
   <td style="text-align:right;"> Inside </td>
   <td style="text-align:right;"> 1Fam </td>
  </tr>
  <tr>
   <td style="text-align:right;"> 148000 </td>
   <td style="text-align:right;"> 1534 </td>
   <td style="text-align:right;"> 10800 </td>
   <td style="text-align:right;"> 1895 </td>
   <td style="text-align:right;"> 5 </td>
   <td style="text-align:right;"> 0 </td>
   <td style="text-align:right;"> NA </td>
   <td style="text-align:right;"> RL </td>
   <td style="text-align:right;"> Inside </td>
   <td style="text-align:right;"> 1Fam </td>
  </tr>
  <tr>
   <td style="text-align:right;"> 110500 </td>
   <td style="text-align:right;"> 866 </td>
   <td style="text-align:right;"> 3880 </td>
   <td style="text-align:right;"> 1945 </td>
   <td style="text-align:right;"> 5 </td>
   <td style="text-align:right;"> 0 </td>
   <td style="text-align:right;"> NA </td>
   <td style="text-align:right;"> RM </td>
   <td style="text-align:right;"> Inside </td>
   <td style="text-align:right;"> 1Fam </td>
  </tr>
  <tr>
   <td style="text-align:right;"> 127000 </td>
   <td style="text-align:right;"> 1355 </td>
   <td style="text-align:right;"> 6882 </td>
   <td style="text-align:right;"> 1914 </td>
   <td style="text-align:right;"> 6 </td>
   <td style="text-align:right;"> 0 </td>
   <td style="text-align:right;"> NA </td>
   <td style="text-align:right;"> RM </td>
   <td style="text-align:right;"> Inside </td>
   <td style="text-align:right;"> 1Fam </td>
  </tr>
  <tr>
   <td style="text-align:right;"> 200500 </td>
   <td style="text-align:right;"> 3086 </td>
   <td style="text-align:right;"> 18030 </td>
   <td style="text-align:right;"> 1946 </td>
   <td style="text-align:right;"> 5 </td>
   <td style="text-align:right;"> 0 </td>
   <td style="text-align:right;"> NA </td>
   <td style="text-align:right;"> RL </td>
   <td style="text-align:right;"> Inside </td>
   <td style="text-align:right;"> 1Fam </td>
  </tr>
  <tr>
   <td style="text-align:right;"> 150000 </td>
   <td style="text-align:right;"> 1440 </td>
   <td style="text-align:right;"> 7711 </td>
   <td style="text-align:right;"> 1977 </td>
   <td style="text-align:right;"> 4 </td>
   <td style="text-align:right;"> 0 </td>
   <td style="text-align:right;"> NA </td>
   <td style="text-align:right;"> RL </td>
   <td style="text-align:right;"> Inside </td>
   <td style="text-align:right;"> Duplex </td>
  </tr>
  <tr>
   <td style="text-align:right;"> 86000 </td>
   <td style="text-align:right;"> 605 </td>
   <td style="text-align:right;"> 9098 </td>
   <td style="text-align:right;"> 1920 </td>
   <td style="text-align:right;"> 4 </td>
   <td style="text-align:right;"> 0 </td>
   <td style="text-align:right;"> NA </td>
   <td style="text-align:right;"> RL </td>
   <td style="text-align:right;"> Inside </td>
   <td style="text-align:right;"> 1Fam </td>
  </tr>
  <tr>
   <td style="text-align:right;"> 123600 </td>
   <td style="text-align:right;"> 990 </td>
   <td style="text-align:right;"> 8070 </td>
   <td style="text-align:right;"> 1994 </td>
   <td style="text-align:right;"> 4 </td>
   <td style="text-align:right;"> 0 </td>
   <td style="text-align:right;"> NA </td>
   <td style="text-align:right;"> RL </td>
   <td style="text-align:right;"> Inside </td>
   <td style="text-align:right;"> 1Fam </td>
  </tr>
  <tr>
   <td style="text-align:right;"> 98500 </td>
   <td style="text-align:right;"> 1195 </td>
   <td style="text-align:right;"> 8741 </td>
   <td style="text-align:right;"> 1946 </td>
   <td style="text-align:right;"> 5 </td>
   <td style="text-align:right;"> 0 </td>
   <td style="text-align:right;"> NA </td>
   <td style="text-align:right;"> RL </td>
   <td style="text-align:right;"> Inside </td>
   <td style="text-align:right;"> Duplex </td>
  </tr>
  <tr>
   <td style="text-align:right;"> 79000 </td>
   <td style="text-align:right;"> 774 </td>
   <td style="text-align:right;"> 4270 </td>
   <td style="text-align:right;"> 1931 </td>
   <td style="text-align:right;"> 3 </td>
   <td style="text-align:right;"> 0 </td>
   <td style="text-align:right;"> NA </td>
   <td style="text-align:right;"> RH </td>
   <td style="text-align:right;"> Inside </td>
   <td style="text-align:right;"> 1Fam </td>
  </tr>
  <tr>
   <td style="text-align:right;"> 200000 </td>
   <td style="text-align:right;"> 3395 </td>
   <td style="text-align:right;"> 10896 </td>
   <td style="text-align:right;"> 1914 </td>
   <td style="text-align:right;"> 6 </td>
   <td style="text-align:right;"> 0 </td>
   <td style="text-align:right;"> NA </td>
   <td style="text-align:right;"> RH </td>
   <td style="text-align:right;"> Inside </td>
   <td style="text-align:right;"> 2fmCon </td>
  </tr>
  <tr>
   <td style="text-align:right;"> 150000 </td>
   <td style="text-align:right;"> 2592 </td>
   <td style="text-align:right;"> 10890 </td>
   <td style="text-align:right;"> 1923 </td>
   <td style="text-align:right;"> 5 </td>
   <td style="text-align:right;"> 0 </td>
   <td style="text-align:right;"> NA </td>
   <td style="text-align:right;"> RL </td>
   <td style="text-align:right;"> Inside </td>
   <td style="text-align:right;"> Duplex </td>
  </tr>
  <tr>
   <td style="text-align:right;"> 115000 </td>
   <td style="text-align:right;"> 1517 </td>
   <td style="text-align:right;"> 8500 </td>
   <td style="text-align:right;"> 1919 </td>
   <td style="text-align:right;"> 5 </td>
   <td style="text-align:right;"> 0 </td>
   <td style="text-align:right;"> NA </td>
   <td style="text-align:right;"> RM </td>
   <td style="text-align:right;"> Corner </td>
   <td style="text-align:right;"> 1Fam </td>
  </tr>
  <tr>
   <td style="text-align:right;"> 150909 </td>
   <td style="text-align:right;"> 1828 </td>
   <td style="text-align:right;"> 9060 </td>
   <td style="text-align:right;"> 1923 </td>
   <td style="text-align:right;"> 5 </td>
   <td style="text-align:right;"> NA </td>
   <td style="text-align:right;"> NA </td>
   <td style="text-align:right;"> RM </td>
   <td style="text-align:right;"> Inside </td>
   <td style="text-align:right;"> 1Fam </td>
  </tr>
  <tr>
   <td style="text-align:right;"> 119600 </td>
   <td style="text-align:right;"> 1991 </td>
   <td style="text-align:right;"> 8250 </td>
   <td style="text-align:right;"> 1895 </td>
   <td style="text-align:right;"> 5 </td>
   <td style="text-align:right;"> 0 </td>
   <td style="text-align:right;"> NA </td>
   <td style="text-align:right;"> C (all) </td>
   <td style="text-align:right;"> Inside </td>
   <td style="text-align:right;"> 2fmCon </td>
  </tr>
  <tr>
   <td style="text-align:right;"> 147000 </td>
   <td style="text-align:right;"> 1120 </td>
   <td style="text-align:right;"> 8402 </td>
   <td style="text-align:right;"> 2007 </td>
   <td style="text-align:right;"> 5 </td>
   <td style="text-align:right;"> 0 </td>
   <td style="text-align:right;"> NA </td>
   <td style="text-align:right;"> RL </td>
   <td style="text-align:right;"> Inside </td>
   <td style="text-align:right;"> 1Fam </td>
  </tr>
  <tr>
   <td style="text-align:right;"> 93900 </td>
   <td style="text-align:right;"> 1092 </td>
   <td style="text-align:right;"> 1495 </td>
   <td style="text-align:right;"> 1970 </td>
   <td style="text-align:right;"> 4 </td>
   <td style="text-align:right;"> 0 </td>
   <td style="text-align:right;"> NA </td>
   <td style="text-align:right;"> RM </td>
   <td style="text-align:right;"> Inside </td>
   <td style="text-align:right;"> TwnhsE </td>
  </tr>
  <tr>
   <td style="text-align:right;"> 84500 </td>
   <td style="text-align:right;"> 630 </td>
   <td style="text-align:right;"> 1936 </td>
   <td style="text-align:right;"> 1970 </td>
   <td style="text-align:right;"> 4 </td>
   <td style="text-align:right;"> 0 </td>
   <td style="text-align:right;"> NA </td>
   <td style="text-align:right;"> RM </td>
   <td style="text-align:right;"> Inside </td>
   <td style="text-align:right;"> Twnhs </td>
  </tr>
  <tr>
   <td style="text-align:right;"> 139500 </td>
   <td style="text-align:right;"> 1142 </td>
   <td style="text-align:right;"> 7733 </td>
   <td style="text-align:right;"> 2005 </td>
   <td style="text-align:right;"> 6 </td>
   <td style="text-align:right;"> 0 </td>
   <td style="text-align:right;"> NA </td>
   <td style="text-align:right;"> RL </td>
   <td style="text-align:right;"> Inside </td>
   <td style="text-align:right;"> 1Fam </td>
  </tr>
  <tr>
   <td style="text-align:right;"> 132000 </td>
   <td style="text-align:right;"> 1131 </td>
   <td style="text-align:right;"> 13072 </td>
   <td style="text-align:right;"> 2005 </td>
   <td style="text-align:right;"> 6 </td>
   <td style="text-align:right;"> 0 </td>
   <td style="text-align:right;"> NA </td>
   <td style="text-align:right;"> RL </td>
   <td style="text-align:right;"> Inside </td>
   <td style="text-align:right;"> 1Fam </td>
  </tr>
  <tr>
   <td style="text-align:right;"> 85500 </td>
   <td style="text-align:right;"> 869 </td>
   <td style="text-align:right;"> 5900 </td>
   <td style="text-align:right;"> 1923 </td>
   <td style="text-align:right;"> 4 </td>
   <td style="text-align:right;"> 0 </td>
   <td style="text-align:right;"> NA </td>
   <td style="text-align:right;"> RL </td>
   <td style="text-align:right;"> Inside </td>
   <td style="text-align:right;"> 1Fam </td>
  </tr>
  <tr>
   <td style="text-align:right;"> 135000 </td>
   <td style="text-align:right;"> 1192 </td>
   <td style="text-align:right;"> 10800 </td>
   <td style="text-align:right;"> 1949 </td>
   <td style="text-align:right;"> 4 </td>
   <td style="text-align:right;"> 0 </td>
   <td style="text-align:right;"> NA </td>
   <td style="text-align:right;"> RL </td>
   <td style="text-align:right;"> Inside </td>
   <td style="text-align:right;"> 1Fam </td>
  </tr>
  <tr>
   <td style="text-align:right;"> 119000 </td>
   <td style="text-align:right;"> 1556 </td>
   <td style="text-align:right;"> 8512 </td>
   <td style="text-align:right;"> 1960 </td>
   <td style="text-align:right;"> 5 </td>
   <td style="text-align:right;"> 0 </td>
   <td style="text-align:right;"> NA </td>
   <td style="text-align:right;"> RL </td>
   <td style="text-align:right;"> Corner </td>
   <td style="text-align:right;"> Duplex </td>
  </tr>
  <tr>
   <td style="text-align:right;"> 124000 </td>
   <td style="text-align:right;"> 1025 </td>
   <td style="text-align:right;"> 7000 </td>
   <td style="text-align:right;"> 1962 </td>
   <td style="text-align:right;"> 5 </td>
   <td style="text-align:right;"> 0 </td>
   <td style="text-align:right;"> NA </td>
   <td style="text-align:right;"> RL </td>
   <td style="text-align:right;"> Inside </td>
   <td style="text-align:right;"> 2fmCon </td>
  </tr>
  <tr>
   <td style="text-align:right;"> 64500 </td>
   <td style="text-align:right;"> 1020 </td>
   <td style="text-align:right;"> 4761 </td>
   <td style="text-align:right;"> 1918 </td>
   <td style="text-align:right;"> 3 </td>
   <td style="text-align:right;"> 0 </td>
   <td style="text-align:right;"> NA </td>
   <td style="text-align:right;"> C (all) </td>
   <td style="text-align:right;"> Corner </td>
   <td style="text-align:right;"> 1Fam </td>
  </tr>
  <tr>
   <td style="text-align:right;"> 100000 </td>
   <td style="text-align:right;"> 788 </td>
   <td style="text-align:right;"> 7446 </td>
   <td style="text-align:right;"> 1941 </td>
   <td style="text-align:right;"> 4 </td>
   <td style="text-align:right;"> 0 </td>
   <td style="text-align:right;"> NA </td>
   <td style="text-align:right;"> RL </td>
   <td style="text-align:right;"> Corner </td>
   <td style="text-align:right;"> 1Fam </td>
  </tr>
  <tr>
   <td style="text-align:right;"> 80500 </td>
   <td style="text-align:right;"> 912 </td>
   <td style="text-align:right;"> 6240 </td>
   <td style="text-align:right;"> 1947 </td>
   <td style="text-align:right;"> 4 </td>
   <td style="text-align:right;"> 0 </td>
   <td style="text-align:right;"> NA </td>
   <td style="text-align:right;"> RM </td>
   <td style="text-align:right;"> Inside </td>
   <td style="text-align:right;"> 1Fam </td>
  </tr>
  <tr>
   <td style="text-align:right;"> 72000 </td>
   <td style="text-align:right;"> 819 </td>
   <td style="text-align:right;"> 9000 </td>
   <td style="text-align:right;"> 1919 </td>
   <td style="text-align:right;"> 5 </td>
   <td style="text-align:right;"> 0 </td>
   <td style="text-align:right;"> NA </td>
   <td style="text-align:right;"> RM </td>
   <td style="text-align:right;"> Inside </td>
   <td style="text-align:right;"> 1Fam </td>
  </tr>
  <tr>
   <td style="text-align:right;"> 117250 </td>
   <td style="text-align:right;"> 914 </td>
   <td style="text-align:right;"> 8050 </td>
   <td style="text-align:right;"> 2002 </td>
   <td style="text-align:right;"> 6 </td>
   <td style="text-align:right;"> 0 </td>
   <td style="text-align:right;"> NA </td>
   <td style="text-align:right;"> RL </td>
   <td style="text-align:right;"> Inside </td>
   <td style="text-align:right;"> 1Fam </td>
  </tr>
  <tr>
   <td style="text-align:right;"> 81000 </td>
   <td style="text-align:right;"> 1184 </td>
   <td style="text-align:right;"> 8410 </td>
   <td style="text-align:right;"> 1910 </td>
   <td style="text-align:right;"> 5 </td>
   <td style="text-align:right;"> 0 </td>
   <td style="text-align:right;"> NA </td>
   <td style="text-align:right;"> RL </td>
   <td style="text-align:right;"> FR2 </td>
   <td style="text-align:right;"> 1Fam </td>
  </tr>
  <tr>
   <td style="text-align:right;"> 83000 </td>
   <td style="text-align:right;"> 1414 </td>
   <td style="text-align:right;"> 8248 </td>
   <td style="text-align:right;"> 1922 </td>
   <td style="text-align:right;"> 4 </td>
   <td style="text-align:right;"> 0 </td>
   <td style="text-align:right;"> NA </td>
   <td style="text-align:right;"> RL </td>
   <td style="text-align:right;"> Inside </td>
   <td style="text-align:right;"> 1Fam </td>
  </tr>
  <tr>
   <td style="text-align:right;"> 102000 </td>
   <td style="text-align:right;"> 1522 </td>
   <td style="text-align:right;"> 6000 </td>
   <td style="text-align:right;"> 1926 </td>
   <td style="text-align:right;"> 5 </td>
   <td style="text-align:right;"> 0 </td>
   <td style="text-align:right;"> NA </td>
   <td style="text-align:right;"> RL </td>
   <td style="text-align:right;"> Inside </td>
   <td style="text-align:right;"> 1Fam </td>
  </tr>
  <tr>
   <td style="text-align:right;"> 72000 </td>
   <td style="text-align:right;"> 672 </td>
   <td style="text-align:right;"> 8534 </td>
   <td style="text-align:right;"> 1925 </td>
   <td style="text-align:right;"> 4 </td>
   <td style="text-align:right;"> 0 </td>
   <td style="text-align:right;"> NA </td>
   <td style="text-align:right;"> RM </td>
   <td style="text-align:right;"> Inside </td>
   <td style="text-align:right;"> 1Fam </td>
  </tr>
  <tr>
   <td style="text-align:right;"> 115000 </td>
   <td style="text-align:right;"> 1396 </td>
   <td style="text-align:right;"> 9000 </td>
   <td style="text-align:right;"> 1951 </td>
   <td style="text-align:right;"> 5 </td>
   <td style="text-align:right;"> 0 </td>
   <td style="text-align:right;"> NA </td>
   <td style="text-align:right;"> C (all) </td>
   <td style="text-align:right;"> Inside </td>
   <td style="text-align:right;"> 2fmCon </td>
  </tr>
  <tr>
   <td style="text-align:right;"> 78000 </td>
   <td style="text-align:right;"> 936 </td>
   <td style="text-align:right;"> 8520 </td>
   <td style="text-align:right;"> 1916 </td>
   <td style="text-align:right;"> 3 </td>
   <td style="text-align:right;"> 0 </td>
   <td style="text-align:right;"> NA </td>
   <td style="text-align:right;"> C (all) </td>
   <td style="text-align:right;"> Inside </td>
   <td style="text-align:right;"> 1Fam </td>
  </tr>
  <tr>
   <td style="text-align:right;"> 92000 </td>
   <td style="text-align:right;"> 630 </td>
   <td style="text-align:right;"> 1533 </td>
   <td style="text-align:right;"> 1970 </td>
   <td style="text-align:right;"> 5 </td>
   <td style="text-align:right;"> 0 </td>
   <td style="text-align:right;"> NA </td>
   <td style="text-align:right;"> RM </td>
   <td style="text-align:right;"> Inside </td>
   <td style="text-align:right;"> Twnhs </td>
  </tr>
  <tr>
   <td style="text-align:right;"> 90500 </td>
   <td style="text-align:right;"> 1092 </td>
   <td style="text-align:right;"> 1936 </td>
   <td style="text-align:right;"> 1970 </td>
   <td style="text-align:right;"> 4 </td>
   <td style="text-align:right;"> 0 </td>
   <td style="text-align:right;"> NA </td>
   <td style="text-align:right;"> RM </td>
   <td style="text-align:right;"> Inside </td>
   <td style="text-align:right;"> Twnhs </td>
  </tr>
</tbody>
</table></div>

</div>
</div>
<hr>
<p><strong>Coding sidebar:</strong></p>
<ul>
<li>In the above example, we created a function (<code>print_kbl()</code>) from scratch (rather than using a function factory)</li>
<li>See <a href="https://r4ds.hadley.nz/functions.html">functions chapter</a> in <span class="citation" data-cites="RDS">Wickham, Çetinkaya-Rundel, and Grolemund (<a href="#ref-RDS" role="doc-biblioref">2023</a>)</span> for help.</li>
<li>See <a href="https://adv-r.hadley.nz/functionals.html">functionals chapter</a> in <span class="citation" data-cites="AR">Wickham (<a href="#ref-AR" role="doc-biblioref">2019</a>)</span>.</li>
</ul>
<hr>
<p><strong>Option 3 (Most advanced)</strong>: Line by line kable table. You can make this as complicated and customized as you like. We use kable (and kableExtra) for publication quality tables. This is a simple example of options</p>
<div class="cell">
<div class="sourceCode cell-code" id="cb24"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb24-1"><a href="#cb24-1" aria-hidden="true" tabindex="-1"></a>data_all <span class="sc">|&gt;</span> <span class="fu">filter</span>(<span class="fu">is.na</span>(garage_qual)) <span class="sc">|&gt;</span> </span>
<span id="cb24-2"><a href="#cb24-2" aria-hidden="true" tabindex="-1"></a>  <span class="fu">kbl</span>(<span class="at">align =</span> <span class="st">"r"</span>) <span class="sc">|&gt;</span> </span>
<span id="cb24-3"><a href="#cb24-3" aria-hidden="true" tabindex="-1"></a>  <span class="fu">kable_styling</span>(<span class="at">bootstrap_options =</span> <span class="fu">c</span>(<span class="st">"striped"</span>, <span class="st">"condensed"</span>)) <span class="sc">|&gt;</span> </span>
<span id="cb24-4"><a href="#cb24-4" aria-hidden="true" tabindex="-1"></a>  <span class="fu">scroll_box</span>(<span class="at">height =</span> <span class="st">"500px"</span>, <span class="at">width =</span> <span class="st">"100%"</span>)</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
<div class="cell-output-display">

<div style="border: 1px solid #ddd; padding: 0px; overflow-y: scroll; height:500px; overflow-x: scroll; width:100%; "><table class="table table-striped table-condensed" style="margin-left: auto; margin-right: auto;">
 <thead>
  <tr>
   <th style="text-align:right;position: sticky; top:0; background-color: #FFFFFF;"> sale_price </th>
   <th style="text-align:right;position: sticky; top:0; background-color: #FFFFFF;"> gr_liv_area </th>
   <th style="text-align:right;position: sticky; top:0; background-color: #FFFFFF;"> lot_area </th>
   <th style="text-align:right;position: sticky; top:0; background-color: #FFFFFF;"> year_built </th>
   <th style="text-align:right;position: sticky; top:0; background-color: #FFFFFF;"> overall_qual </th>
   <th style="text-align:right;position: sticky; top:0; background-color: #FFFFFF;"> garage_cars </th>
   <th style="text-align:right;position: sticky; top:0; background-color: #FFFFFF;"> garage_qual </th>
   <th style="text-align:right;position: sticky; top:0; background-color: #FFFFFF;"> ms_zoning </th>
   <th style="text-align:right;position: sticky; top:0; background-color: #FFFFFF;"> lot_config </th>
   <th style="text-align:right;position: sticky; top:0; background-color: #FFFFFF;"> bldg_type </th>
  </tr>
 </thead>
<tbody>
  <tr>
   <td style="text-align:right;"> 115000 </td>
   <td style="text-align:right;"> 864 </td>
   <td style="text-align:right;"> 10500 </td>
   <td style="text-align:right;"> 1971 </td>
   <td style="text-align:right;"> 4 </td>
   <td style="text-align:right;"> 0 </td>
   <td style="text-align:right;"> NA </td>
   <td style="text-align:right;"> RL </td>
   <td style="text-align:right;"> FR2 </td>
   <td style="text-align:right;"> 1Fam </td>
  </tr>
  <tr>
   <td style="text-align:right;"> 128950 </td>
   <td style="text-align:right;"> 1225 </td>
   <td style="text-align:right;"> 9320 </td>
   <td style="text-align:right;"> 1959 </td>
   <td style="text-align:right;"> 4 </td>
   <td style="text-align:right;"> 0 </td>
   <td style="text-align:right;"> NA </td>
   <td style="text-align:right;"> RL </td>
   <td style="text-align:right;"> Inside </td>
   <td style="text-align:right;"> 1Fam </td>
  </tr>
  <tr>
   <td style="text-align:right;"> 84900 </td>
   <td style="text-align:right;"> 1728 </td>
   <td style="text-align:right;"> 13260 </td>
   <td style="text-align:right;"> 1962 </td>
   <td style="text-align:right;"> 5 </td>
   <td style="text-align:right;"> 0 </td>
   <td style="text-align:right;"> NA </td>
   <td style="text-align:right;"> RL </td>
   <td style="text-align:right;"> Inside </td>
   <td style="text-align:right;"> Duplex </td>
  </tr>
  <tr>
   <td style="text-align:right;"> 116500 </td>
   <td style="text-align:right;"> 858 </td>
   <td style="text-align:right;"> 7207 </td>
   <td style="text-align:right;"> 1958 </td>
   <td style="text-align:right;"> 5 </td>
   <td style="text-align:right;"> 0 </td>
   <td style="text-align:right;"> NA </td>
   <td style="text-align:right;"> RL </td>
   <td style="text-align:right;"> Inside </td>
   <td style="text-align:right;"> 1Fam </td>
  </tr>
  <tr>
   <td style="text-align:right;"> 76500 </td>
   <td style="text-align:right;"> 1306 </td>
   <td style="text-align:right;"> 5350 </td>
   <td style="text-align:right;"> 1940 </td>
   <td style="text-align:right;"> 3 </td>
   <td style="text-align:right;"> 0 </td>
   <td style="text-align:right;"> NA </td>
   <td style="text-align:right;"> RL </td>
   <td style="text-align:right;"> Inside </td>
   <td style="text-align:right;"> 1Fam </td>
  </tr>
  <tr>
   <td style="text-align:right;"> 76500 </td>
   <td style="text-align:right;"> 2256 </td>
   <td style="text-align:right;"> 9045 </td>
   <td style="text-align:right;"> 1910 </td>
   <td style="text-align:right;"> 5 </td>
   <td style="text-align:right;"> 0 </td>
   <td style="text-align:right;"> NA </td>
   <td style="text-align:right;"> RM </td>
   <td style="text-align:right;"> Inside </td>
   <td style="text-align:right;"> 2fmCon </td>
  </tr>
  <tr>
   <td style="text-align:right;"> 159900 </td>
   <td style="text-align:right;"> 1560 </td>
   <td style="text-align:right;"> 12900 </td>
   <td style="text-align:right;"> 1912 </td>
   <td style="text-align:right;"> 6 </td>
   <td style="text-align:right;"> 0 </td>
   <td style="text-align:right;"> NA </td>
   <td style="text-align:right;"> RM </td>
   <td style="text-align:right;"> Inside </td>
   <td style="text-align:right;"> 1Fam </td>
  </tr>
  <tr>
   <td style="text-align:right;"> 55000 </td>
   <td style="text-align:right;"> 1092 </td>
   <td style="text-align:right;"> 5600 </td>
   <td style="text-align:right;"> 1930 </td>
   <td style="text-align:right;"> 4 </td>
   <td style="text-align:right;"> 0 </td>
   <td style="text-align:right;"> NA </td>
   <td style="text-align:right;"> RM </td>
   <td style="text-align:right;"> Inside </td>
   <td style="text-align:right;"> 2fmCon </td>
  </tr>
  <tr>
   <td style="text-align:right;"> 93369 </td>
   <td style="text-align:right;"> 1884 </td>
   <td style="text-align:right;"> 6449 </td>
   <td style="text-align:right;"> 1907 </td>
   <td style="text-align:right;"> 4 </td>
   <td style="text-align:right;"> 0 </td>
   <td style="text-align:right;"> NA </td>
   <td style="text-align:right;"> C (all) </td>
   <td style="text-align:right;"> Inside </td>
   <td style="text-align:right;"> 1Fam </td>
  </tr>
  <tr>
   <td style="text-align:right;"> 94000 </td>
   <td style="text-align:right;"> 1020 </td>
   <td style="text-align:right;"> 6342 </td>
   <td style="text-align:right;"> 1875 </td>
   <td style="text-align:right;"> 5 </td>
   <td style="text-align:right;"> 0 </td>
   <td style="text-align:right;"> NA </td>
   <td style="text-align:right;"> RL </td>
   <td style="text-align:right;"> Inside </td>
   <td style="text-align:right;"> 1Fam </td>
  </tr>
  <tr>
   <td style="text-align:right;"> 136000 </td>
   <td style="text-align:right;"> 1832 </td>
   <td style="text-align:right;"> 10773 </td>
   <td style="text-align:right;"> 1967 </td>
   <td style="text-align:right;"> 4 </td>
   <td style="text-align:right;"> 0 </td>
   <td style="text-align:right;"> NA </td>
   <td style="text-align:right;"> RL </td>
   <td style="text-align:right;"> Inside </td>
   <td style="text-align:right;"> Duplex </td>
  </tr>
  <tr>
   <td style="text-align:right;"> 100000 </td>
   <td style="text-align:right;"> 1664 </td>
   <td style="text-align:right;"> 9825 </td>
   <td style="text-align:right;"> 1965 </td>
   <td style="text-align:right;"> 5 </td>
   <td style="text-align:right;"> 0 </td>
   <td style="text-align:right;"> NA </td>
   <td style="text-align:right;"> RL </td>
   <td style="text-align:right;"> Inside </td>
   <td style="text-align:right;"> Duplex </td>
  </tr>
  <tr>
   <td style="text-align:right;"> 90000 </td>
   <td style="text-align:right;"> 960 </td>
   <td style="text-align:right;"> 6410 </td>
   <td style="text-align:right;"> 1958 </td>
   <td style="text-align:right;"> 4 </td>
   <td style="text-align:right;"> 0 </td>
   <td style="text-align:right;"> NA </td>
   <td style="text-align:right;"> RL </td>
   <td style="text-align:right;"> Inside </td>
   <td style="text-align:right;"> 1Fam </td>
  </tr>
  <tr>
   <td style="text-align:right;"> 100000 </td>
   <td style="text-align:right;"> 1666 </td>
   <td style="text-align:right;"> 9839 </td>
   <td style="text-align:right;"> 1931 </td>
   <td style="text-align:right;"> 5 </td>
   <td style="text-align:right;"> 0 </td>
   <td style="text-align:right;"> NA </td>
   <td style="text-align:right;"> RL </td>
   <td style="text-align:right;"> Inside </td>
   <td style="text-align:right;"> 1Fam </td>
  </tr>
  <tr>
   <td style="text-align:right;"> 139000 </td>
   <td style="text-align:right;"> 1824 </td>
   <td style="text-align:right;"> 9400 </td>
   <td style="text-align:right;"> 1971 </td>
   <td style="text-align:right;"> 6 </td>
   <td style="text-align:right;"> 0 </td>
   <td style="text-align:right;"> NA </td>
   <td style="text-align:right;"> RL </td>
   <td style="text-align:right;"> Corner </td>
   <td style="text-align:right;"> Duplex </td>
  </tr>
  <tr>
   <td style="text-align:right;"> 76000 </td>
   <td style="text-align:right;"> 1092 </td>
   <td style="text-align:right;"> 1476 </td>
   <td style="text-align:right;"> 1970 </td>
   <td style="text-align:right;"> 4 </td>
   <td style="text-align:right;"> 0 </td>
   <td style="text-align:right;"> NA </td>
   <td style="text-align:right;"> RM </td>
   <td style="text-align:right;"> Inside </td>
   <td style="text-align:right;"> Twnhs </td>
  </tr>
  <tr>
   <td style="text-align:right;"> 75500 </td>
   <td style="text-align:right;"> 630 </td>
   <td style="text-align:right;"> 1491 </td>
   <td style="text-align:right;"> 1972 </td>
   <td style="text-align:right;"> 4 </td>
   <td style="text-align:right;"> 0 </td>
   <td style="text-align:right;"> NA </td>
   <td style="text-align:right;"> RM </td>
   <td style="text-align:right;"> Inside </td>
   <td style="text-align:right;"> TwnhsE </td>
  </tr>
  <tr>
   <td style="text-align:right;"> 88250 </td>
   <td style="text-align:right;"> 1092 </td>
   <td style="text-align:right;"> 1900 </td>
   <td style="text-align:right;"> 1970 </td>
   <td style="text-align:right;"> 4 </td>
   <td style="text-align:right;"> 0 </td>
   <td style="text-align:right;"> NA </td>
   <td style="text-align:right;"> RM </td>
   <td style="text-align:right;"> Inside </td>
   <td style="text-align:right;"> TwnhsE </td>
  </tr>
  <tr>
   <td style="text-align:right;"> 136000 </td>
   <td style="text-align:right;"> 1792 </td>
   <td style="text-align:right;"> 9000 </td>
   <td style="text-align:right;"> 1974 </td>
   <td style="text-align:right;"> 5 </td>
   <td style="text-align:right;"> 0 </td>
   <td style="text-align:right;"> NA </td>
   <td style="text-align:right;"> RL </td>
   <td style="text-align:right;"> FR2 </td>
   <td style="text-align:right;"> Duplex </td>
  </tr>
  <tr>
   <td style="text-align:right;"> 142000 </td>
   <td style="text-align:right;"> 1114 </td>
   <td style="text-align:right;"> 13072 </td>
   <td style="text-align:right;"> 2004 </td>
   <td style="text-align:right;"> 5 </td>
   <td style="text-align:right;"> 0 </td>
   <td style="text-align:right;"> NA </td>
   <td style="text-align:right;"> RL </td>
   <td style="text-align:right;"> Inside </td>
   <td style="text-align:right;"> 1Fam </td>
  </tr>
  <tr>
   <td style="text-align:right;"> 82500 </td>
   <td style="text-align:right;"> 708 </td>
   <td style="text-align:right;"> 5330 </td>
   <td style="text-align:right;"> 1940 </td>
   <td style="text-align:right;"> 4 </td>
   <td style="text-align:right;"> 0 </td>
   <td style="text-align:right;"> NA </td>
   <td style="text-align:right;"> RL </td>
   <td style="text-align:right;"> Inside </td>
   <td style="text-align:right;"> 1Fam </td>
  </tr>
  <tr>
   <td style="text-align:right;"> 129000 </td>
   <td style="text-align:right;"> 1464 </td>
   <td style="text-align:right;"> 9900 </td>
   <td style="text-align:right;"> 1910 </td>
   <td style="text-align:right;"> 5 </td>
   <td style="text-align:right;"> 0 </td>
   <td style="text-align:right;"> NA </td>
   <td style="text-align:right;"> RM </td>
   <td style="text-align:right;"> Corner </td>
   <td style="text-align:right;"> 1Fam </td>
  </tr>
  <tr>
   <td style="text-align:right;"> 94550 </td>
   <td style="text-align:right;"> 1701 </td>
   <td style="text-align:right;"> 7627 </td>
   <td style="text-align:right;"> 1920 </td>
   <td style="text-align:right;"> 4 </td>
   <td style="text-align:right;"> 0 </td>
   <td style="text-align:right;"> NA </td>
   <td style="text-align:right;"> RM </td>
   <td style="text-align:right;"> Corner </td>
   <td style="text-align:right;"> 2fmCon </td>
  </tr>
  <tr>
   <td style="text-align:right;"> 103000 </td>
   <td style="text-align:right;"> 1447 </td>
   <td style="text-align:right;"> 10134 </td>
   <td style="text-align:right;"> 1910 </td>
   <td style="text-align:right;"> 5 </td>
   <td style="text-align:right;"> 0 </td>
   <td style="text-align:right;"> NA </td>
   <td style="text-align:right;"> RM </td>
   <td style="text-align:right;"> Inside </td>
   <td style="text-align:right;"> 1Fam </td>
  </tr>
  <tr>
   <td style="text-align:right;"> 37900 </td>
   <td style="text-align:right;"> 968 </td>
   <td style="text-align:right;"> 5925 </td>
   <td style="text-align:right;"> 1910 </td>
   <td style="text-align:right;"> 3 </td>
   <td style="text-align:right;"> 0 </td>
   <td style="text-align:right;"> NA </td>
   <td style="text-align:right;"> RM </td>
   <td style="text-align:right;"> Inside </td>
   <td style="text-align:right;"> 1Fam </td>
  </tr>
  <tr>
   <td style="text-align:right;"> 113000 </td>
   <td style="text-align:right;"> 1452 </td>
   <td style="text-align:right;"> 4456 </td>
   <td style="text-align:right;"> 1920 </td>
   <td style="text-align:right;"> 4 </td>
   <td style="text-align:right;"> 0 </td>
   <td style="text-align:right;"> NA </td>
   <td style="text-align:right;"> RM </td>
   <td style="text-align:right;"> Inside </td>
   <td style="text-align:right;"> 2fmCon </td>
  </tr>
  <tr>
   <td style="text-align:right;"> 58500 </td>
   <td style="text-align:right;"> 816 </td>
   <td style="text-align:right;"> 3300 </td>
   <td style="text-align:right;"> 1910 </td>
   <td style="text-align:right;"> 4 </td>
   <td style="text-align:right;"> 0 </td>
   <td style="text-align:right;"> NA </td>
   <td style="text-align:right;"> C (all) </td>
   <td style="text-align:right;"> Inside </td>
   <td style="text-align:right;"> 1Fam </td>
  </tr>
  <tr>
   <td style="text-align:right;"> 34900 </td>
   <td style="text-align:right;"> 720 </td>
   <td style="text-align:right;"> 7879 </td>
   <td style="text-align:right;"> 1920 </td>
   <td style="text-align:right;"> 4 </td>
   <td style="text-align:right;"> 0 </td>
   <td style="text-align:right;"> NA </td>
   <td style="text-align:right;"> C (all) </td>
   <td style="text-align:right;"> Inside </td>
   <td style="text-align:right;"> 1Fam </td>
  </tr>
  <tr>
   <td style="text-align:right;"> 60000 </td>
   <td style="text-align:right;"> 800 </td>
   <td style="text-align:right;"> 6120 </td>
   <td style="text-align:right;"> 1936 </td>
   <td style="text-align:right;"> 2 </td>
   <td style="text-align:right;"> 0 </td>
   <td style="text-align:right;"> NA </td>
   <td style="text-align:right;"> RM </td>
   <td style="text-align:right;"> Inside </td>
   <td style="text-align:right;"> 1Fam </td>
  </tr>
  <tr>
   <td style="text-align:right;"> 62500 </td>
   <td style="text-align:right;"> 2128 </td>
   <td style="text-align:right;"> 3000 </td>
   <td style="text-align:right;"> 1922 </td>
   <td style="text-align:right;"> 5 </td>
   <td style="text-align:right;"> 0 </td>
   <td style="text-align:right;"> NA </td>
   <td style="text-align:right;"> RM </td>
   <td style="text-align:right;"> Inside </td>
   <td style="text-align:right;"> Duplex </td>
  </tr>
  <tr>
   <td style="text-align:right;"> 97500 </td>
   <td style="text-align:right;"> 1864 </td>
   <td style="text-align:right;"> 5852 </td>
   <td style="text-align:right;"> 1902 </td>
   <td style="text-align:right;"> 7 </td>
   <td style="text-align:right;"> 0 </td>
   <td style="text-align:right;"> NA </td>
   <td style="text-align:right;"> RM </td>
   <td style="text-align:right;"> Corner </td>
   <td style="text-align:right;"> 2fmCon </td>
  </tr>
  <tr>
   <td style="text-align:right;"> 70000 </td>
   <td style="text-align:right;"> 892 </td>
   <td style="text-align:right;"> 5160 </td>
   <td style="text-align:right;"> 1923 </td>
   <td style="text-align:right;"> 4 </td>
   <td style="text-align:right;"> 0 </td>
   <td style="text-align:right;"> NA </td>
   <td style="text-align:right;"> RM </td>
   <td style="text-align:right;"> Inside </td>
   <td style="text-align:right;"> 1Fam </td>
  </tr>
  <tr>
   <td style="text-align:right;"> 179000 </td>
   <td style="text-align:right;"> 1200 </td>
   <td style="text-align:right;"> 10800 </td>
   <td style="text-align:right;"> 1987 </td>
   <td style="text-align:right;"> 5 </td>
   <td style="text-align:right;"> 0 </td>
   <td style="text-align:right;"> NA </td>
   <td style="text-align:right;"> RL </td>
   <td style="text-align:right;"> Inside </td>
   <td style="text-align:right;"> Duplex </td>
  </tr>
  <tr>
   <td style="text-align:right;"> 179000 </td>
   <td style="text-align:right;"> 1200 </td>
   <td style="text-align:right;"> 10800 </td>
   <td style="text-align:right;"> 1987 </td>
   <td style="text-align:right;"> 5 </td>
   <td style="text-align:right;"> 0 </td>
   <td style="text-align:right;"> NA </td>
   <td style="text-align:right;"> RL </td>
   <td style="text-align:right;"> Inside </td>
   <td style="text-align:right;"> Duplex </td>
  </tr>
  <tr>
   <td style="text-align:right;"> 61000 </td>
   <td style="text-align:right;"> 904 </td>
   <td style="text-align:right;"> 10020 </td>
   <td style="text-align:right;"> 1922 </td>
   <td style="text-align:right;"> 1 </td>
   <td style="text-align:right;"> 0 </td>
   <td style="text-align:right;"> NA </td>
   <td style="text-align:right;"> RL </td>
   <td style="text-align:right;"> Inside </td>
   <td style="text-align:right;"> 1Fam </td>
  </tr>
  <tr>
   <td style="text-align:right;"> 118000 </td>
   <td style="text-align:right;"> 698 </td>
   <td style="text-align:right;"> 9405 </td>
   <td style="text-align:right;"> 1947 </td>
   <td style="text-align:right;"> 5 </td>
   <td style="text-align:right;"> 0 </td>
   <td style="text-align:right;"> NA </td>
   <td style="text-align:right;"> RL </td>
   <td style="text-align:right;"> Inside </td>
   <td style="text-align:right;"> 1Fam </td>
  </tr>
  <tr>
   <td style="text-align:right;"> 99900 </td>
   <td style="text-align:right;"> 864 </td>
   <td style="text-align:right;"> 4060 </td>
   <td style="text-align:right;"> 1922 </td>
   <td style="text-align:right;"> 5 </td>
   <td style="text-align:right;"> 0 </td>
   <td style="text-align:right;"> NA </td>
   <td style="text-align:right;"> RL </td>
   <td style="text-align:right;"> Corner </td>
   <td style="text-align:right;"> 1Fam </td>
  </tr>
  <tr>
   <td style="text-align:right;"> 119900 </td>
   <td style="text-align:right;"> 1678 </td>
   <td style="text-align:right;"> 10926 </td>
   <td style="text-align:right;"> 1959 </td>
   <td style="text-align:right;"> 5 </td>
   <td style="text-align:right;"> 0 </td>
   <td style="text-align:right;"> NA </td>
   <td style="text-align:right;"> RL </td>
   <td style="text-align:right;"> Inside </td>
   <td style="text-align:right;"> Duplex </td>
  </tr>
  <tr>
   <td style="text-align:right;"> 112000 </td>
   <td style="text-align:right;"> 833 </td>
   <td style="text-align:right;"> 8780 </td>
   <td style="text-align:right;"> 1985 </td>
   <td style="text-align:right;"> 5 </td>
   <td style="text-align:right;"> 0 </td>
   <td style="text-align:right;"> NA </td>
   <td style="text-align:right;"> RL </td>
   <td style="text-align:right;"> Corner </td>
   <td style="text-align:right;"> 1Fam </td>
  </tr>
  <tr>
   <td style="text-align:right;"> 141000 </td>
   <td style="text-align:right;"> 1080 </td>
   <td style="text-align:right;"> 7500 </td>
   <td style="text-align:right;"> 2004 </td>
   <td style="text-align:right;"> 7 </td>
   <td style="text-align:right;"> 0 </td>
   <td style="text-align:right;"> NA </td>
   <td style="text-align:right;"> RL </td>
   <td style="text-align:right;"> Inside </td>
   <td style="text-align:right;"> 1Fam </td>
  </tr>
  <tr>
   <td style="text-align:right;"> 106250 </td>
   <td style="text-align:right;"> 1294 </td>
   <td style="text-align:right;"> 10800 </td>
   <td style="text-align:right;"> 1900 </td>
   <td style="text-align:right;"> 4 </td>
   <td style="text-align:right;"> 0 </td>
   <td style="text-align:right;"> NA </td>
   <td style="text-align:right;"> RL </td>
   <td style="text-align:right;"> Inside </td>
   <td style="text-align:right;"> 2fmCon </td>
  </tr>
  <tr>
   <td style="text-align:right;"> 130000 </td>
   <td style="text-align:right;"> 1800 </td>
   <td style="text-align:right;"> 8513 </td>
   <td style="text-align:right;"> 1961 </td>
   <td style="text-align:right;"> 5 </td>
   <td style="text-align:right;"> 0 </td>
   <td style="text-align:right;"> NA </td>
   <td style="text-align:right;"> RL </td>
   <td style="text-align:right;"> Corner </td>
   <td style="text-align:right;"> Duplex </td>
  </tr>
  <tr>
   <td style="text-align:right;"> 120000 </td>
   <td style="text-align:right;"> 1027 </td>
   <td style="text-align:right;"> 5400 </td>
   <td style="text-align:right;"> 1920 </td>
   <td style="text-align:right;"> 7 </td>
   <td style="text-align:right;"> 0 </td>
   <td style="text-align:right;"> NA </td>
   <td style="text-align:right;"> RM </td>
   <td style="text-align:right;"> Inside </td>
   <td style="text-align:right;"> 1Fam </td>
  </tr>
  <tr>
   <td style="text-align:right;"> 95000 </td>
   <td style="text-align:right;"> 1080 </td>
   <td style="text-align:right;"> 5914 </td>
   <td style="text-align:right;"> 1890 </td>
   <td style="text-align:right;"> 5 </td>
   <td style="text-align:right;"> 0 </td>
   <td style="text-align:right;"> NA </td>
   <td style="text-align:right;"> RM </td>
   <td style="text-align:right;"> Inside </td>
   <td style="text-align:right;"> 1Fam </td>
  </tr>
  <tr>
   <td style="text-align:right;"> 65000 </td>
   <td style="text-align:right;"> 1588 </td>
   <td style="text-align:right;"> 12205 </td>
   <td style="text-align:right;"> 1949 </td>
   <td style="text-align:right;"> 3 </td>
   <td style="text-align:right;"> 0 </td>
   <td style="text-align:right;"> NA </td>
   <td style="text-align:right;"> RM </td>
   <td style="text-align:right;"> Inside </td>
   <td style="text-align:right;"> 1Fam </td>
  </tr>
  <tr>
   <td style="text-align:right;"> 129400 </td>
   <td style="text-align:right;"> 1540 </td>
   <td style="text-align:right;"> 6000 </td>
   <td style="text-align:right;"> 1905 </td>
   <td style="text-align:right;"> 5 </td>
   <td style="text-align:right;"> 0 </td>
   <td style="text-align:right;"> NA </td>
   <td style="text-align:right;"> RM </td>
   <td style="text-align:right;"> Corner </td>
   <td style="text-align:right;"> 1Fam </td>
  </tr>
  <tr>
   <td style="text-align:right;"> 160000 </td>
   <td style="text-align:right;"> 1984 </td>
   <td style="text-align:right;"> 8094 </td>
   <td style="text-align:right;"> 1910 </td>
   <td style="text-align:right;"> 6 </td>
   <td style="text-align:right;"> 1 </td>
   <td style="text-align:right;"> NA </td>
   <td style="text-align:right;"> RM </td>
   <td style="text-align:right;"> Inside </td>
   <td style="text-align:right;"> 2fmCon </td>
  </tr>
  <tr>
   <td style="text-align:right;"> 89500 </td>
   <td style="text-align:right;"> 1406 </td>
   <td style="text-align:right;"> 7920 </td>
   <td style="text-align:right;"> 1920 </td>
   <td style="text-align:right;"> 6 </td>
   <td style="text-align:right;"> 0 </td>
   <td style="text-align:right;"> NA </td>
   <td style="text-align:right;"> RM </td>
   <td style="text-align:right;"> Inside </td>
   <td style="text-align:right;"> 1Fam </td>
  </tr>
  <tr>
   <td style="text-align:right;"> 79900 </td>
   <td style="text-align:right;"> 1198 </td>
   <td style="text-align:right;"> 5586 </td>
   <td style="text-align:right;"> 1920 </td>
   <td style="text-align:right;"> 6 </td>
   <td style="text-align:right;"> 0 </td>
   <td style="text-align:right;"> NA </td>
   <td style="text-align:right;"> RM </td>
   <td style="text-align:right;"> Inside </td>
   <td style="text-align:right;"> 1Fam </td>
  </tr>
  <tr>
   <td style="text-align:right;"> 82375 </td>
   <td style="text-align:right;"> 1344 </td>
   <td style="text-align:right;"> 10320 </td>
   <td style="text-align:right;"> 1915 </td>
   <td style="text-align:right;"> 3 </td>
   <td style="text-align:right;"> 0 </td>
   <td style="text-align:right;"> NA </td>
   <td style="text-align:right;"> RM </td>
   <td style="text-align:right;"> Inside </td>
   <td style="text-align:right;"> 2fmCon </td>
  </tr>
  <tr>
   <td style="text-align:right;"> 127500 </td>
   <td style="text-align:right;"> 1355 </td>
   <td style="text-align:right;"> 10106 </td>
   <td style="text-align:right;"> 1940 </td>
   <td style="text-align:right;"> 5 </td>
   <td style="text-align:right;"> 0 </td>
   <td style="text-align:right;"> NA </td>
   <td style="text-align:right;"> RL </td>
   <td style="text-align:right;"> Inside </td>
   <td style="text-align:right;"> 2fmCon </td>
  </tr>
  <tr>
   <td style="text-align:right;"> 80000 </td>
   <td style="text-align:right;"> 1006 </td>
   <td style="text-align:right;"> 9000 </td>
   <td style="text-align:right;"> 1959 </td>
   <td style="text-align:right;"> 5 </td>
   <td style="text-align:right;"> 0 </td>
   <td style="text-align:right;"> NA </td>
   <td style="text-align:right;"> RL </td>
   <td style="text-align:right;"> Inside </td>
   <td style="text-align:right;"> 1Fam </td>
  </tr>
  <tr>
   <td style="text-align:right;"> 260000 </td>
   <td style="text-align:right;"> 1518 </td>
   <td style="text-align:right;"> 19550 </td>
   <td style="text-align:right;"> 1940 </td>
   <td style="text-align:right;"> 5 </td>
   <td style="text-align:right;"> 0 </td>
   <td style="text-align:right;"> NA </td>
   <td style="text-align:right;"> RL </td>
   <td style="text-align:right;"> Inside </td>
   <td style="text-align:right;"> 1Fam </td>
  </tr>
  <tr>
   <td style="text-align:right;"> 99600 </td>
   <td style="text-align:right;"> 864 </td>
   <td style="text-align:right;"> 9350 </td>
   <td style="text-align:right;"> 1975 </td>
   <td style="text-align:right;"> 5 </td>
   <td style="text-align:right;"> 0 </td>
   <td style="text-align:right;"> NA </td>
   <td style="text-align:right;"> RL </td>
   <td style="text-align:right;"> Inside </td>
   <td style="text-align:right;"> Duplex </td>
  </tr>
  <tr>
   <td style="text-align:right;"> 107500 </td>
   <td style="text-align:right;"> 1347 </td>
   <td style="text-align:right;"> 7000 </td>
   <td style="text-align:right;"> 1910 </td>
   <td style="text-align:right;"> 5 </td>
   <td style="text-align:right;"> 0 </td>
   <td style="text-align:right;"> NA </td>
   <td style="text-align:right;"> RL </td>
   <td style="text-align:right;"> Inside </td>
   <td style="text-align:right;"> 2fmCon </td>
  </tr>
  <tr>
   <td style="text-align:right;"> 79000 </td>
   <td style="text-align:right;"> 1096 </td>
   <td style="text-align:right;"> 9600 </td>
   <td style="text-align:right;"> 1924 </td>
   <td style="text-align:right;"> 6 </td>
   <td style="text-align:right;"> 0 </td>
   <td style="text-align:right;"> NA </td>
   <td style="text-align:right;"> RL </td>
   <td style="text-align:right;"> Corner </td>
   <td style="text-align:right;"> 1Fam </td>
  </tr>
  <tr>
   <td style="text-align:right;"> 85000 </td>
   <td style="text-align:right;"> 796 </td>
   <td style="text-align:right;"> 8777 </td>
   <td style="text-align:right;"> 1910 </td>
   <td style="text-align:right;"> 5 </td>
   <td style="text-align:right;"> 0 </td>
   <td style="text-align:right;"> NA </td>
   <td style="text-align:right;"> RL </td>
   <td style="text-align:right;"> Inside </td>
   <td style="text-align:right;"> 1Fam </td>
  </tr>
  <tr>
   <td style="text-align:right;"> 145900 </td>
   <td style="text-align:right;"> 2200 </td>
   <td style="text-align:right;"> 8777 </td>
   <td style="text-align:right;"> 1900 </td>
   <td style="text-align:right;"> 5 </td>
   <td style="text-align:right;"> 0 </td>
   <td style="text-align:right;"> NA </td>
   <td style="text-align:right;"> RL </td>
   <td style="text-align:right;"> Inside </td>
   <td style="text-align:right;"> Duplex </td>
  </tr>
  <tr>
   <td style="text-align:right;"> 82000 </td>
   <td style="text-align:right;"> 1152 </td>
   <td style="text-align:right;"> 6040 </td>
   <td style="text-align:right;"> 1955 </td>
   <td style="text-align:right;"> 4 </td>
   <td style="text-align:right;"> 0 </td>
   <td style="text-align:right;"> NA </td>
   <td style="text-align:right;"> RL </td>
   <td style="text-align:right;"> Inside </td>
   <td style="text-align:right;"> Duplex </td>
  </tr>
  <tr>
   <td style="text-align:right;"> 82000 </td>
   <td style="text-align:right;"> 1152 </td>
   <td style="text-align:right;"> 6012 </td>
   <td style="text-align:right;"> 1955 </td>
   <td style="text-align:right;"> 4 </td>
   <td style="text-align:right;"> 0 </td>
   <td style="text-align:right;"> NA </td>
   <td style="text-align:right;"> RL </td>
   <td style="text-align:right;"> Corner </td>
   <td style="text-align:right;"> Duplex </td>
  </tr>
  <tr>
   <td style="text-align:right;"> 118000 </td>
   <td style="text-align:right;"> 1440 </td>
   <td style="text-align:right;"> 12108 </td>
   <td style="text-align:right;"> 1955 </td>
   <td style="text-align:right;"> 4 </td>
   <td style="text-align:right;"> 0 </td>
   <td style="text-align:right;"> NA </td>
   <td style="text-align:right;"> RL </td>
   <td style="text-align:right;"> Inside </td>
   <td style="text-align:right;"> Duplex </td>
  </tr>
  <tr>
   <td style="text-align:right;"> 82500 </td>
   <td style="text-align:right;"> 1152 </td>
   <td style="text-align:right;"> 6845 </td>
   <td style="text-align:right;"> 1955 </td>
   <td style="text-align:right;"> 4 </td>
   <td style="text-align:right;"> 0 </td>
   <td style="text-align:right;"> NA </td>
   <td style="text-align:right;"> RL </td>
   <td style="text-align:right;"> Inside </td>
   <td style="text-align:right;"> Duplex </td>
  </tr>
  <tr>
   <td style="text-align:right;"> 91900 </td>
   <td style="text-align:right;"> 784 </td>
   <td style="text-align:right;"> 6931 </td>
   <td style="text-align:right;"> 1955 </td>
   <td style="text-align:right;"> 4 </td>
   <td style="text-align:right;"> 0 </td>
   <td style="text-align:right;"> NA </td>
   <td style="text-align:right;"> RL </td>
   <td style="text-align:right;"> Inside </td>
   <td style="text-align:right;"> 2fmCon </td>
  </tr>
  <tr>
   <td style="text-align:right;"> 120000 </td>
   <td style="text-align:right;"> 1053 </td>
   <td style="text-align:right;"> 12180 </td>
   <td style="text-align:right;"> 1938 </td>
   <td style="text-align:right;"> 5 </td>
   <td style="text-align:right;"> 0 </td>
   <td style="text-align:right;"> NA </td>
   <td style="text-align:right;"> RL </td>
   <td style="text-align:right;"> Inside </td>
   <td style="text-align:right;"> 1Fam </td>
  </tr>
  <tr>
   <td style="text-align:right;"> 96000 </td>
   <td style="text-align:right;"> 1137 </td>
   <td style="text-align:right;"> 8050 </td>
   <td style="text-align:right;"> 1947 </td>
   <td style="text-align:right;"> 5 </td>
   <td style="text-align:right;"> 0 </td>
   <td style="text-align:right;"> NA </td>
   <td style="text-align:right;"> RL </td>
   <td style="text-align:right;"> Inside </td>
   <td style="text-align:right;"> 1Fam </td>
  </tr>
  <tr>
   <td style="text-align:right;"> 98000 </td>
   <td style="text-align:right;"> 864 </td>
   <td style="text-align:right;"> 5604 </td>
   <td style="text-align:right;"> 1925 </td>
   <td style="text-align:right;"> 5 </td>
   <td style="text-align:right;"> 0 </td>
   <td style="text-align:right;"> NA </td>
   <td style="text-align:right;"> RL </td>
   <td style="text-align:right;"> Inside </td>
   <td style="text-align:right;"> 1Fam </td>
  </tr>
  <tr>
   <td style="text-align:right;"> 67000 </td>
   <td style="text-align:right;"> 864 </td>
   <td style="text-align:right;"> 8248 </td>
   <td style="text-align:right;"> 1914 </td>
   <td style="text-align:right;"> 3 </td>
   <td style="text-align:right;"> 0 </td>
   <td style="text-align:right;"> NA </td>
   <td style="text-align:right;"> RL </td>
   <td style="text-align:right;"> Inside </td>
   <td style="text-align:right;"> 1Fam </td>
  </tr>
  <tr>
   <td style="text-align:right;"> 135900 </td>
   <td style="text-align:right;"> 1716 </td>
   <td style="text-align:right;"> 5687 </td>
   <td style="text-align:right;"> 1912 </td>
   <td style="text-align:right;"> 5 </td>
   <td style="text-align:right;"> 0 </td>
   <td style="text-align:right;"> NA </td>
   <td style="text-align:right;"> RL </td>
   <td style="text-align:right;"> Inside </td>
   <td style="text-align:right;"> 2fmCon </td>
  </tr>
  <tr>
   <td style="text-align:right;"> 119000 </td>
   <td style="text-align:right;"> 1200 </td>
   <td style="text-align:right;"> 8155 </td>
   <td style="text-align:right;"> 1930 </td>
   <td style="text-align:right;"> 5 </td>
   <td style="text-align:right;"> 0 </td>
   <td style="text-align:right;"> NA </td>
   <td style="text-align:right;"> RM </td>
   <td style="text-align:right;"> Inside </td>
   <td style="text-align:right;"> 1Fam </td>
  </tr>
  <tr>
   <td style="text-align:right;"> 81000 </td>
   <td style="text-align:right;"> 630 </td>
   <td style="text-align:right;"> 1890 </td>
   <td style="text-align:right;"> 1972 </td>
   <td style="text-align:right;"> 4 </td>
   <td style="text-align:right;"> 0 </td>
   <td style="text-align:right;"> NA </td>
   <td style="text-align:right;"> RM </td>
   <td style="text-align:right;"> Inside </td>
   <td style="text-align:right;"> Twnhs </td>
  </tr>
  <tr>
   <td style="text-align:right;"> 146000 </td>
   <td style="text-align:right;"> 1100 </td>
   <td style="text-align:right;"> 7500 </td>
   <td style="text-align:right;"> 2006 </td>
   <td style="text-align:right;"> 6 </td>
   <td style="text-align:right;"> 0 </td>
   <td style="text-align:right;"> NA </td>
   <td style="text-align:right;"> RL </td>
   <td style="text-align:right;"> Inside </td>
   <td style="text-align:right;"> 1Fam </td>
  </tr>
  <tr>
   <td style="text-align:right;"> 64000 </td>
   <td style="text-align:right;"> 670 </td>
   <td style="text-align:right;"> 3500 </td>
   <td style="text-align:right;"> 1945 </td>
   <td style="text-align:right;"> 3 </td>
   <td style="text-align:right;"> 0 </td>
   <td style="text-align:right;"> NA </td>
   <td style="text-align:right;"> RL </td>
   <td style="text-align:right;"> Inside </td>
   <td style="text-align:right;"> 1Fam </td>
  </tr>
  <tr>
   <td style="text-align:right;"> 103200 </td>
   <td style="text-align:right;"> 882 </td>
   <td style="text-align:right;"> 5500 </td>
   <td style="text-align:right;"> 1956 </td>
   <td style="text-align:right;"> 4 </td>
   <td style="text-align:right;"> 0 </td>
   <td style="text-align:right;"> NA </td>
   <td style="text-align:right;"> RL </td>
   <td style="text-align:right;"> Inside </td>
   <td style="text-align:right;"> 1Fam </td>
  </tr>
  <tr>
   <td style="text-align:right;"> 148000 </td>
   <td style="text-align:right;"> 1534 </td>
   <td style="text-align:right;"> 10800 </td>
   <td style="text-align:right;"> 1895 </td>
   <td style="text-align:right;"> 5 </td>
   <td style="text-align:right;"> 0 </td>
   <td style="text-align:right;"> NA </td>
   <td style="text-align:right;"> RL </td>
   <td style="text-align:right;"> Inside </td>
   <td style="text-align:right;"> 1Fam </td>
  </tr>
  <tr>
   <td style="text-align:right;"> 110500 </td>
   <td style="text-align:right;"> 866 </td>
   <td style="text-align:right;"> 3880 </td>
   <td style="text-align:right;"> 1945 </td>
   <td style="text-align:right;"> 5 </td>
   <td style="text-align:right;"> 0 </td>
   <td style="text-align:right;"> NA </td>
   <td style="text-align:right;"> RM </td>
   <td style="text-align:right;"> Inside </td>
   <td style="text-align:right;"> 1Fam </td>
  </tr>
  <tr>
   <td style="text-align:right;"> 127000 </td>
   <td style="text-align:right;"> 1355 </td>
   <td style="text-align:right;"> 6882 </td>
   <td style="text-align:right;"> 1914 </td>
   <td style="text-align:right;"> 6 </td>
   <td style="text-align:right;"> 0 </td>
   <td style="text-align:right;"> NA </td>
   <td style="text-align:right;"> RM </td>
   <td style="text-align:right;"> Inside </td>
   <td style="text-align:right;"> 1Fam </td>
  </tr>
  <tr>
   <td style="text-align:right;"> 200500 </td>
   <td style="text-align:right;"> 3086 </td>
   <td style="text-align:right;"> 18030 </td>
   <td style="text-align:right;"> 1946 </td>
   <td style="text-align:right;"> 5 </td>
   <td style="text-align:right;"> 0 </td>
   <td style="text-align:right;"> NA </td>
   <td style="text-align:right;"> RL </td>
   <td style="text-align:right;"> Inside </td>
   <td style="text-align:right;"> 1Fam </td>
  </tr>
  <tr>
   <td style="text-align:right;"> 150000 </td>
   <td style="text-align:right;"> 1440 </td>
   <td style="text-align:right;"> 7711 </td>
   <td style="text-align:right;"> 1977 </td>
   <td style="text-align:right;"> 4 </td>
   <td style="text-align:right;"> 0 </td>
   <td style="text-align:right;"> NA </td>
   <td style="text-align:right;"> RL </td>
   <td style="text-align:right;"> Inside </td>
   <td style="text-align:right;"> Duplex </td>
  </tr>
  <tr>
   <td style="text-align:right;"> 86000 </td>
   <td style="text-align:right;"> 605 </td>
   <td style="text-align:right;"> 9098 </td>
   <td style="text-align:right;"> 1920 </td>
   <td style="text-align:right;"> 4 </td>
   <td style="text-align:right;"> 0 </td>
   <td style="text-align:right;"> NA </td>
   <td style="text-align:right;"> RL </td>
   <td style="text-align:right;"> Inside </td>
   <td style="text-align:right;"> 1Fam </td>
  </tr>
  <tr>
   <td style="text-align:right;"> 123600 </td>
   <td style="text-align:right;"> 990 </td>
   <td style="text-align:right;"> 8070 </td>
   <td style="text-align:right;"> 1994 </td>
   <td style="text-align:right;"> 4 </td>
   <td style="text-align:right;"> 0 </td>
   <td style="text-align:right;"> NA </td>
   <td style="text-align:right;"> RL </td>
   <td style="text-align:right;"> Inside </td>
   <td style="text-align:right;"> 1Fam </td>
  </tr>
  <tr>
   <td style="text-align:right;"> 98500 </td>
   <td style="text-align:right;"> 1195 </td>
   <td style="text-align:right;"> 8741 </td>
   <td style="text-align:right;"> 1946 </td>
   <td style="text-align:right;"> 5 </td>
   <td style="text-align:right;"> 0 </td>
   <td style="text-align:right;"> NA </td>
   <td style="text-align:right;"> RL </td>
   <td style="text-align:right;"> Inside </td>
   <td style="text-align:right;"> Duplex </td>
  </tr>
  <tr>
   <td style="text-align:right;"> 79000 </td>
   <td style="text-align:right;"> 774 </td>
   <td style="text-align:right;"> 4270 </td>
   <td style="text-align:right;"> 1931 </td>
   <td style="text-align:right;"> 3 </td>
   <td style="text-align:right;"> 0 </td>
   <td style="text-align:right;"> NA </td>
   <td style="text-align:right;"> RH </td>
   <td style="text-align:right;"> Inside </td>
   <td style="text-align:right;"> 1Fam </td>
  </tr>
  <tr>
   <td style="text-align:right;"> 200000 </td>
   <td style="text-align:right;"> 3395 </td>
   <td style="text-align:right;"> 10896 </td>
   <td style="text-align:right;"> 1914 </td>
   <td style="text-align:right;"> 6 </td>
   <td style="text-align:right;"> 0 </td>
   <td style="text-align:right;"> NA </td>
   <td style="text-align:right;"> RH </td>
   <td style="text-align:right;"> Inside </td>
   <td style="text-align:right;"> 2fmCon </td>
  </tr>
  <tr>
   <td style="text-align:right;"> 150000 </td>
   <td style="text-align:right;"> 2592 </td>
   <td style="text-align:right;"> 10890 </td>
   <td style="text-align:right;"> 1923 </td>
   <td style="text-align:right;"> 5 </td>
   <td style="text-align:right;"> 0 </td>
   <td style="text-align:right;"> NA </td>
   <td style="text-align:right;"> RL </td>
   <td style="text-align:right;"> Inside </td>
   <td style="text-align:right;"> Duplex </td>
  </tr>
  <tr>
   <td style="text-align:right;"> 115000 </td>
   <td style="text-align:right;"> 1517 </td>
   <td style="text-align:right;"> 8500 </td>
   <td style="text-align:right;"> 1919 </td>
   <td style="text-align:right;"> 5 </td>
   <td style="text-align:right;"> 0 </td>
   <td style="text-align:right;"> NA </td>
   <td style="text-align:right;"> RM </td>
   <td style="text-align:right;"> Corner </td>
   <td style="text-align:right;"> 1Fam </td>
  </tr>
  <tr>
   <td style="text-align:right;"> 150909 </td>
   <td style="text-align:right;"> 1828 </td>
   <td style="text-align:right;"> 9060 </td>
   <td style="text-align:right;"> 1923 </td>
   <td style="text-align:right;"> 5 </td>
   <td style="text-align:right;"> NA </td>
   <td style="text-align:right;"> NA </td>
   <td style="text-align:right;"> RM </td>
   <td style="text-align:right;"> Inside </td>
   <td style="text-align:right;"> 1Fam </td>
  </tr>
  <tr>
   <td style="text-align:right;"> 119600 </td>
   <td style="text-align:right;"> 1991 </td>
   <td style="text-align:right;"> 8250 </td>
   <td style="text-align:right;"> 1895 </td>
   <td style="text-align:right;"> 5 </td>
   <td style="text-align:right;"> 0 </td>
   <td style="text-align:right;"> NA </td>
   <td style="text-align:right;"> C (all) </td>
   <td style="text-align:right;"> Inside </td>
   <td style="text-align:right;"> 2fmCon </td>
  </tr>
  <tr>
   <td style="text-align:right;"> 147000 </td>
   <td style="text-align:right;"> 1120 </td>
   <td style="text-align:right;"> 8402 </td>
   <td style="text-align:right;"> 2007 </td>
   <td style="text-align:right;"> 5 </td>
   <td style="text-align:right;"> 0 </td>
   <td style="text-align:right;"> NA </td>
   <td style="text-align:right;"> RL </td>
   <td style="text-align:right;"> Inside </td>
   <td style="text-align:right;"> 1Fam </td>
  </tr>
  <tr>
   <td style="text-align:right;"> 93900 </td>
   <td style="text-align:right;"> 1092 </td>
   <td style="text-align:right;"> 1495 </td>
   <td style="text-align:right;"> 1970 </td>
   <td style="text-align:right;"> 4 </td>
   <td style="text-align:right;"> 0 </td>
   <td style="text-align:right;"> NA </td>
   <td style="text-align:right;"> RM </td>
   <td style="text-align:right;"> Inside </td>
   <td style="text-align:right;"> TwnhsE </td>
  </tr>
  <tr>
   <td style="text-align:right;"> 84500 </td>
   <td style="text-align:right;"> 630 </td>
   <td style="text-align:right;"> 1936 </td>
   <td style="text-align:right;"> 1970 </td>
   <td style="text-align:right;"> 4 </td>
   <td style="text-align:right;"> 0 </td>
   <td style="text-align:right;"> NA </td>
   <td style="text-align:right;"> RM </td>
   <td style="text-align:right;"> Inside </td>
   <td style="text-align:right;"> Twnhs </td>
  </tr>
  <tr>
   <td style="text-align:right;"> 139500 </td>
   <td style="text-align:right;"> 1142 </td>
   <td style="text-align:right;"> 7733 </td>
   <td style="text-align:right;"> 2005 </td>
   <td style="text-align:right;"> 6 </td>
   <td style="text-align:right;"> 0 </td>
   <td style="text-align:right;"> NA </td>
   <td style="text-align:right;"> RL </td>
   <td style="text-align:right;"> Inside </td>
   <td style="text-align:right;"> 1Fam </td>
  </tr>
  <tr>
   <td style="text-align:right;"> 132000 </td>
   <td style="text-align:right;"> 1131 </td>
   <td style="text-align:right;"> 13072 </td>
   <td style="text-align:right;"> 2005 </td>
   <td style="text-align:right;"> 6 </td>
   <td style="text-align:right;"> 0 </td>
   <td style="text-align:right;"> NA </td>
   <td style="text-align:right;"> RL </td>
   <td style="text-align:right;"> Inside </td>
   <td style="text-align:right;"> 1Fam </td>
  </tr>
  <tr>
   <td style="text-align:right;"> 85500 </td>
   <td style="text-align:right;"> 869 </td>
   <td style="text-align:right;"> 5900 </td>
   <td style="text-align:right;"> 1923 </td>
   <td style="text-align:right;"> 4 </td>
   <td style="text-align:right;"> 0 </td>
   <td style="text-align:right;"> NA </td>
   <td style="text-align:right;"> RL </td>
   <td style="text-align:right;"> Inside </td>
   <td style="text-align:right;"> 1Fam </td>
  </tr>
  <tr>
   <td style="text-align:right;"> 135000 </td>
   <td style="text-align:right;"> 1192 </td>
   <td style="text-align:right;"> 10800 </td>
   <td style="text-align:right;"> 1949 </td>
   <td style="text-align:right;"> 4 </td>
   <td style="text-align:right;"> 0 </td>
   <td style="text-align:right;"> NA </td>
   <td style="text-align:right;"> RL </td>
   <td style="text-align:right;"> Inside </td>
   <td style="text-align:right;"> 1Fam </td>
  </tr>
  <tr>
   <td style="text-align:right;"> 119000 </td>
   <td style="text-align:right;"> 1556 </td>
   <td style="text-align:right;"> 8512 </td>
   <td style="text-align:right;"> 1960 </td>
   <td style="text-align:right;"> 5 </td>
   <td style="text-align:right;"> 0 </td>
   <td style="text-align:right;"> NA </td>
   <td style="text-align:right;"> RL </td>
   <td style="text-align:right;"> Corner </td>
   <td style="text-align:right;"> Duplex </td>
  </tr>
  <tr>
   <td style="text-align:right;"> 124000 </td>
   <td style="text-align:right;"> 1025 </td>
   <td style="text-align:right;"> 7000 </td>
   <td style="text-align:right;"> 1962 </td>
   <td style="text-align:right;"> 5 </td>
   <td style="text-align:right;"> 0 </td>
   <td style="text-align:right;"> NA </td>
   <td style="text-align:right;"> RL </td>
   <td style="text-align:right;"> Inside </td>
   <td style="text-align:right;"> 2fmCon </td>
  </tr>
  <tr>
   <td style="text-align:right;"> 64500 </td>
   <td style="text-align:right;"> 1020 </td>
   <td style="text-align:right;"> 4761 </td>
   <td style="text-align:right;"> 1918 </td>
   <td style="text-align:right;"> 3 </td>
   <td style="text-align:right;"> 0 </td>
   <td style="text-align:right;"> NA </td>
   <td style="text-align:right;"> C (all) </td>
   <td style="text-align:right;"> Corner </td>
   <td style="text-align:right;"> 1Fam </td>
  </tr>
  <tr>
   <td style="text-align:right;"> 100000 </td>
   <td style="text-align:right;"> 788 </td>
   <td style="text-align:right;"> 7446 </td>
   <td style="text-align:right;"> 1941 </td>
   <td style="text-align:right;"> 4 </td>
   <td style="text-align:right;"> 0 </td>
   <td style="text-align:right;"> NA </td>
   <td style="text-align:right;"> RL </td>
   <td style="text-align:right;"> Corner </td>
   <td style="text-align:right;"> 1Fam </td>
  </tr>
  <tr>
   <td style="text-align:right;"> 80500 </td>
   <td style="text-align:right;"> 912 </td>
   <td style="text-align:right;"> 6240 </td>
   <td style="text-align:right;"> 1947 </td>
   <td style="text-align:right;"> 4 </td>
   <td style="text-align:right;"> 0 </td>
   <td style="text-align:right;"> NA </td>
   <td style="text-align:right;"> RM </td>
   <td style="text-align:right;"> Inside </td>
   <td style="text-align:right;"> 1Fam </td>
  </tr>
  <tr>
   <td style="text-align:right;"> 72000 </td>
   <td style="text-align:right;"> 819 </td>
   <td style="text-align:right;"> 9000 </td>
   <td style="text-align:right;"> 1919 </td>
   <td style="text-align:right;"> 5 </td>
   <td style="text-align:right;"> 0 </td>
   <td style="text-align:right;"> NA </td>
   <td style="text-align:right;"> RM </td>
   <td style="text-align:right;"> Inside </td>
   <td style="text-align:right;"> 1Fam </td>
  </tr>
  <tr>
   <td style="text-align:right;"> 117250 </td>
   <td style="text-align:right;"> 914 </td>
   <td style="text-align:right;"> 8050 </td>
   <td style="text-align:right;"> 2002 </td>
   <td style="text-align:right;"> 6 </td>
   <td style="text-align:right;"> 0 </td>
   <td style="text-align:right;"> NA </td>
   <td style="text-align:right;"> RL </td>
   <td style="text-align:right;"> Inside </td>
   <td style="text-align:right;"> 1Fam </td>
  </tr>
  <tr>
   <td style="text-align:right;"> 81000 </td>
   <td style="text-align:right;"> 1184 </td>
   <td style="text-align:right;"> 8410 </td>
   <td style="text-align:right;"> 1910 </td>
   <td style="text-align:right;"> 5 </td>
   <td style="text-align:right;"> 0 </td>
   <td style="text-align:right;"> NA </td>
   <td style="text-align:right;"> RL </td>
   <td style="text-align:right;"> FR2 </td>
   <td style="text-align:right;"> 1Fam </td>
  </tr>
  <tr>
   <td style="text-align:right;"> 83000 </td>
   <td style="text-align:right;"> 1414 </td>
   <td style="text-align:right;"> 8248 </td>
   <td style="text-align:right;"> 1922 </td>
   <td style="text-align:right;"> 4 </td>
   <td style="text-align:right;"> 0 </td>
   <td style="text-align:right;"> NA </td>
   <td style="text-align:right;"> RL </td>
   <td style="text-align:right;"> Inside </td>
   <td style="text-align:right;"> 1Fam </td>
  </tr>
  <tr>
   <td style="text-align:right;"> 102000 </td>
   <td style="text-align:right;"> 1522 </td>
   <td style="text-align:right;"> 6000 </td>
   <td style="text-align:right;"> 1926 </td>
   <td style="text-align:right;"> 5 </td>
   <td style="text-align:right;"> 0 </td>
   <td style="text-align:right;"> NA </td>
   <td style="text-align:right;"> RL </td>
   <td style="text-align:right;"> Inside </td>
   <td style="text-align:right;"> 1Fam </td>
  </tr>
  <tr>
   <td style="text-align:right;"> 72000 </td>
   <td style="text-align:right;"> 672 </td>
   <td style="text-align:right;"> 8534 </td>
   <td style="text-align:right;"> 1925 </td>
   <td style="text-align:right;"> 4 </td>
   <td style="text-align:right;"> 0 </td>
   <td style="text-align:right;"> NA </td>
   <td style="text-align:right;"> RM </td>
   <td style="text-align:right;"> Inside </td>
   <td style="text-align:right;"> 1Fam </td>
  </tr>
  <tr>
   <td style="text-align:right;"> 115000 </td>
   <td style="text-align:right;"> 1396 </td>
   <td style="text-align:right;"> 9000 </td>
   <td style="text-align:right;"> 1951 </td>
   <td style="text-align:right;"> 5 </td>
   <td style="text-align:right;"> 0 </td>
   <td style="text-align:right;"> NA </td>
   <td style="text-align:right;"> C (all) </td>
   <td style="text-align:right;"> Inside </td>
   <td style="text-align:right;"> 2fmCon </td>
  </tr>
  <tr>
   <td style="text-align:right;"> 78000 </td>
   <td style="text-align:right;"> 936 </td>
   <td style="text-align:right;"> 8520 </td>
   <td style="text-align:right;"> 1916 </td>
   <td style="text-align:right;"> 3 </td>
   <td style="text-align:right;"> 0 </td>
   <td style="text-align:right;"> NA </td>
   <td style="text-align:right;"> C (all) </td>
   <td style="text-align:right;"> Inside </td>
   <td style="text-align:right;"> 1Fam </td>
  </tr>
  <tr>
   <td style="text-align:right;"> 92000 </td>
   <td style="text-align:right;"> 630 </td>
   <td style="text-align:right;"> 1533 </td>
   <td style="text-align:right;"> 1970 </td>
   <td style="text-align:right;"> 5 </td>
   <td style="text-align:right;"> 0 </td>
   <td style="text-align:right;"> NA </td>
   <td style="text-align:right;"> RM </td>
   <td style="text-align:right;"> Inside </td>
   <td style="text-align:right;"> Twnhs </td>
  </tr>
  <tr>
   <td style="text-align:right;"> 90500 </td>
   <td style="text-align:right;"> 1092 </td>
   <td style="text-align:right;"> 1936 </td>
   <td style="text-align:right;"> 1970 </td>
   <td style="text-align:right;"> 4 </td>
   <td style="text-align:right;"> 0 </td>
   <td style="text-align:right;"> NA </td>
   <td style="text-align:right;"> RM </td>
   <td style="text-align:right;"> Inside </td>
   <td style="text-align:right;"> Twnhs </td>
  </tr>
</tbody>
</table></div>

</div>
</div>
<hr>
<p>In this instance, if we consult our <a href="data/ames_data_dictionary.pdf">data dictionary</a>, we see that <code>NA</code> for <code>garage_qual</code> should be coded as “no garage”. We will correct this in our data set.</p>
<p>This is a pretty poor choice on the part of the researchers who created the dataset because it becomes impossible to distinguish between <code>NA</code> that means no garage vs.&nbsp;true NA for the variable. In fact, if you later do really careful EDA on the full data set with all variables, you will see this problem likely exists in this dataset</p>
<p>Anyway, let’s correct all the <code>NA</code> for <code>garage_qual</code> to “no_garage” using <code>mutate()</code></p>
<div class="cell">
<div class="sourceCode cell-code" id="cb25"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb25-1"><a href="#cb25-1" aria-hidden="true" tabindex="-1"></a>data_all <span class="ot">&lt;-</span> data_all <span class="sc">|&gt;</span> </span>
<span id="cb25-2"><a href="#cb25-2" aria-hidden="true" tabindex="-1"></a>  <span class="fu">mutate</span>(<span class="at">garage_qual =</span> <span class="fu">fct_expand</span>(garage_qual, <span class="st">"no_garage"</span>), <span class="co"># &lt;1&gt;</span></span>
<span id="cb25-3"><a href="#cb25-3" aria-hidden="true" tabindex="-1"></a>         <span class="at">garage_qual =</span> <span class="fu">replace_na</span>(garage_qual, <span class="st">"no_garage"</span>)) <span class="co"># &lt;2&gt;</span></span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
</div>
<ol type="1">
<li>First add a new level to the factor</li>
<li>Then recode NA to that new level</li>
</ol>
<p>We will leave the <code>NA</code> for <code>garage_cars</code> as <code>NA</code> because its not clear if that is truly missing or not, based on further EDA not shown here.</p>
<hr>
<p>We have one other issue with <code>garage_qual</code>. It is an ordinal variable but we never reviewed the order of its levels. The data dictionary indicates the levels are ordered (best to worst) as:</p>
<ul>
<li>Ex (excellent)</li>
<li>Gd (good)</li>
<li>TA (typical/average)</li>
<li>Fa (fair)</li>
<li>Po (poor)</li>
</ul>
<p>And we might assume that no garage is even worse than a poor garage. Lets see what they are.</p>
<div class="cell">
<div class="sourceCode cell-code" id="cb26"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb26-1"><a href="#cb26-1" aria-hidden="true" tabindex="-1"></a>data_all<span class="sc">$</span>garage_qual <span class="sc">|&gt;</span> <span class="fu">levels</span>()</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
<div class="cell-output cell-output-stdout">
<pre><code>[1] "Ex"        "Fa"        "Gd"        "Po"        "TA"        "no_garage"</code></pre>
</div>
</div>
<p>To fix this, we can use <code>forcats::fct_relevel()</code>.</p>
<div class="cell">
<div class="sourceCode cell-code" id="cb28"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb28-1"><a href="#cb28-1" aria-hidden="true" tabindex="-1"></a>gq_levels <span class="ot">&lt;-</span> <span class="fu">c</span>(<span class="st">"no_garage"</span>, <span class="st">"Po"</span>, <span class="st">"Fa"</span>, <span class="st">"TA"</span>, <span class="st">"Gd"</span>, <span class="st">"Ex"</span>) <span class="co"># &lt;1&gt;</span></span>
<span id="cb28-2"><a href="#cb28-2" aria-hidden="true" tabindex="-1"></a>data_all <span class="ot">&lt;-</span> data_all <span class="sc">|&gt;</span> </span>
<span id="cb28-3"><a href="#cb28-3" aria-hidden="true" tabindex="-1"></a>  <span class="fu">mutate</span>(<span class="at">garage_qual =</span> <span class="fu">fct_relevel</span>(garage_qual, gq_levels)) <span class="co"># &lt;2&gt;</span></span>
<span id="cb28-4"><a href="#cb28-4" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb28-5"><a href="#cb28-5" aria-hidden="true" tabindex="-1"></a>data_all<span class="sc">$</span>garage_qual <span class="sc">|&gt;</span> <span class="fu">levels</span>() <span class="co"># &lt;3&gt;</span></span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
<div class="cell-output cell-output-stdout">
<pre><code>[1] "no_garage" "Po"        "Fa"        "TA"        "Gd"        "Ex"       </code></pre>
</div>
</div>
<ol type="1">
<li>Make a vector that indicates the valid levels in order</li>
<li>Pass that into <code>fct_relevel()</code>. See <code>?fct_relevel</code> for other ways to adjust the levels of a factor.</li>
<li>Confirm that the levels are now correct</li>
</ol>
<hr>
</section>
<section id="explore-minmax-response-for-numeric-variables" class="level3" data-number="2.4.6">
<h3 data-number="2.4.6" class="anchored" data-anchor-id="explore-minmax-response-for-numeric-variables"><span class="header-section-number">2.4.6</span> Explore Min/Max Response for Numeric Variables</h3>
<p>We should explore mins and maxes for all numeric variables to detect out of valid range numeric responses</p>
<ul>
<li>Could also do this for ordinal variables that are coded with numbers
<ul>
<li>e.g., <code>overall_qual</code> (1-10) vs.&nbsp;<code>garage_qual</code> (no_garage, Po, Fa, TA, Gd, Ex)</li>
</ul></li>
<li>This is only a temporary mutation of <code>overall_qual</code> for this check. We don’t assign to new df to an object</li>
<li>We can use <code>skim_some()</code> again
<ul>
<li>p0 = min</li>
<li>p100 = max</li>
</ul></li>
</ul>
<div class="cell">
<div class="sourceCode cell-code" id="cb30"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb30-1"><a href="#cb30-1" aria-hidden="true" tabindex="-1"></a>data_all <span class="sc">|&gt;</span></span>
<span id="cb30-2"><a href="#cb30-2" aria-hidden="true" tabindex="-1"></a>  <span class="fu">mutate</span>(<span class="at">overall_qual =</span> <span class="fu">as.numeric</span>(overall_qual)) <span class="sc">|&gt;</span> </span>
<span id="cb30-3"><a href="#cb30-3" aria-hidden="true" tabindex="-1"></a>  <span class="fu">skim_some</span>() <span class="sc">|&gt;</span> </span>
<span id="cb30-4"><a href="#cb30-4" aria-hidden="true" tabindex="-1"></a>  <span class="fu">filter</span>(skim_type <span class="sc">==</span> <span class="st">"numeric"</span>) <span class="sc">|&gt;</span>  <span class="co"># &lt;1&gt;</span></span>
<span id="cb30-5"><a href="#cb30-5" aria-hidden="true" tabindex="-1"></a>  <span class="fu">select</span>(skim_variable, numeric.p0, numeric.p100) <span class="co"># &lt;2&gt;</span></span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
<div class="cell-output cell-output-stdout">
<pre><code># A tibble: 6 × 3
  skim_variable numeric.p0 numeric.p100
  &lt;chr&gt;              &lt;dbl&gt;        &lt;dbl&gt;
1 sale_price         12789       745000
2 gr_liv_area          438         5642
3 lot_area            1476       215245
4 year_built          1875         2010
5 overall_qual           1           10
6 garage_cars            0            4</code></pre>
</div>
</div>
<ol type="1">
<li>Select only numeric variables since min/max only apply to them</li>
<li>Select relevant stats (min/max)</li>
</ol>
<hr>
</section>
<section id="explore-all-responses-for-categorical-variables" class="level3" data-number="2.4.7">
<h3 data-number="2.4.7" class="anchored" data-anchor-id="explore-all-responses-for-categorical-variables"><span class="header-section-number">2.4.7</span> Explore All Responses for Categorical Variables</h3>
<p>We should explore all unique responses for nominal variables</p>
<p>Might also do this for ordinal variables that are coded with labels vs.&nbsp;numbers.</p>
<div class="cell">
<div class="sourceCode cell-code" id="cb32"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb32-1"><a href="#cb32-1" aria-hidden="true" tabindex="-1"></a>data_all <span class="sc">|&gt;</span> </span>
<span id="cb32-2"><a href="#cb32-2" aria-hidden="true" tabindex="-1"></a>  <span class="fu">select</span>(<span class="fu">where</span>(is.factor)) <span class="sc">|&gt;</span></span>
<span id="cb32-3"><a href="#cb32-3" aria-hidden="true" tabindex="-1"></a>  <span class="fu">walk</span>(\(column) <span class="fu">print</span>(<span class="fu">levels</span>(column)))</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
<div class="cell-output cell-output-stdout">
<pre><code> [1] "1"  "2"  "3"  "4"  "5"  "6"  "7"  "8"  "9"  "10"
[1] "no_garage" "Po"        "Fa"        "TA"        "Gd"        "Ex"       
[1] "A (agr)" "C (all)" "FV"      "I (all)" "RH"      "RL"      "RM"     
[1] "Corner"  "CulDSac" "FR2"     "FR3"     "Inside" 
[1] "1Fam"   "2fmCon" "Duplex" "Twnhs"  "TwnhsE"</code></pre>
</div>
</div>
<p><strong>Coding sidebar</strong>:</p>
<ul>
<li>On the previous page, we demonstrated the use of an anonymous function (<code>\(column) print(levels(column))</code>), which is a function we use once that we don’t bother to assign a name (since we won’t reuse it). We often use anonymous functions when using the functions from the <code>purrr</code> package (e.g., <code>map()</code>, <code>walk()</code>)</li>
<li>We use <code>walk()</code> from the <code>purrr</code> package to apply our anonymous function to all columns of the data frame at once</li>
<li>Just copy this code for now</li>
<li>We will see simpler uses later that will help you understand iteration with <code>purrr</code> functions</li>
<li>See the chapter on <a href="https://r4ds.hadley.nz/iteration">iteration</a> in <em>R for Data Science (2e)</em> for more info on <code>map()</code> and <code>walk()</code></li>
</ul>
<hr>
</section>
<section id="tidy-responses-for-categorical-variables" class="level3" data-number="2.4.8">
<h3 data-number="2.4.8" class="anchored" data-anchor-id="tidy-responses-for-categorical-variables"><span class="header-section-number">2.4.8</span> Tidy Responses for Categorical Variables</h3>
<p>Feature engineering with nominal and ordinal variables typically involves</p>
<ul>
<li>Converting to factors (already did this!)</li>
<li>Often creating dummy features from these factors</li>
</ul>
<p>This feature engineering will use response labels for naming new features</p>
<ul>
<li>Therefore, it is a good idea to have the responses snake-cased and cleaned up a bit so that these new feature names are clean/clear.</li>
</ul>
<p>Here is an easy way to convert responses for character variables to snake case using a function (<code>tidy_responses()</code>) we share in <code>fun_eda.R</code> (reproduced here).</p>
<ul>
<li>This uses regular expressions (regex), which will will learn about in a later unit on text processing.</li>
<li>You could expand this cleaning function if you encounter other issues that need to be cleaned in the factor levels.</li>
</ul>
<div class="cell">
<div class="sourceCode cell-code" id="cb34"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb34-1"><a href="#cb34-1" aria-hidden="true" tabindex="-1"></a>tidy_responses <span class="ot">&lt;-</span> <span class="cf">function</span>(column){</span>
<span id="cb34-2"><a href="#cb34-2" aria-hidden="true" tabindex="-1"></a>  <span class="co"># replace all non-alphanumeric with _</span></span>
<span id="cb34-3"><a href="#cb34-3" aria-hidden="true" tabindex="-1"></a>  column <span class="ot">&lt;-</span> <span class="fu">fct_relabel</span>(column, \(column) <span class="fu">str_replace_all</span>(column, <span class="st">"</span><span class="sc">\\</span><span class="st">W"</span>, <span class="st">"_"</span>))</span>
<span id="cb34-4"><a href="#cb34-4" aria-hidden="true" tabindex="-1"></a>  <span class="co"># replace whitespace with _</span></span>
<span id="cb34-5"><a href="#cb34-5" aria-hidden="true" tabindex="-1"></a>  column <span class="ot">&lt;-</span> <span class="fu">fct_relabel</span>(column, \(column) <span class="fu">str_replace_all</span>(column, <span class="st">"</span><span class="sc">\\</span><span class="st">s+"</span>, <span class="st">"_"</span>))</span>
<span id="cb34-6"><a href="#cb34-6" aria-hidden="true" tabindex="-1"></a>  <span class="co"># replace multiple _ with single _</span></span>
<span id="cb34-7"><a href="#cb34-7" aria-hidden="true" tabindex="-1"></a>  column <span class="ot">&lt;-</span> <span class="fu">fct_relabel</span>(column, \(column) <span class="fu">str_replace_all</span>(column, <span class="st">"</span><span class="sc">\\</span><span class="st">_+"</span>, <span class="st">"_"</span>))</span>
<span id="cb34-8"><a href="#cb34-8" aria-hidden="true" tabindex="-1"></a>  <span class="co">#remove _ at end of string</span></span>
<span id="cb34-9"><a href="#cb34-9" aria-hidden="true" tabindex="-1"></a>  column <span class="ot">&lt;-</span> <span class="fu">fct_relabel</span>(column, \(column) <span class="fu">str_replace_all</span>(column, <span class="st">"</span><span class="sc">\\</span><span class="st">_$"</span>, <span class="st">""</span>))</span>
<span id="cb34-10"><a href="#cb34-10" aria-hidden="true" tabindex="-1"></a>  <span class="co"># remove _ at start of string</span></span>
<span id="cb34-11"><a href="#cb34-11" aria-hidden="true" tabindex="-1"></a>  column <span class="ot">&lt;-</span> <span class="fu">fct_relabel</span>(column, \(column) <span class="fu">str_replace_all</span>(column, <span class="st">"</span><span class="sc">\\</span><span class="st">^_"</span>, <span class="st">""</span>))</span>
<span id="cb34-12"><a href="#cb34-12" aria-hidden="true" tabindex="-1"></a>  <span class="co"># convert to lowercase</span></span>
<span id="cb34-13"><a href="#cb34-13" aria-hidden="true" tabindex="-1"></a>  column <span class="ot">&lt;-</span> <span class="fu">fct_relabel</span>(column, tolower)</span>
<span id="cb34-14"><a href="#cb34-14" aria-hidden="true" tabindex="-1"></a>  <span class="fu">factor</span>(column)</span>
<span id="cb34-15"><a href="#cb34-15" aria-hidden="true" tabindex="-1"></a>}</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
</div>
<hr>
<p>Let’s use the function</p>
<div class="cell">
<div class="sourceCode cell-code" id="cb35"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb35-1"><a href="#cb35-1" aria-hidden="true" tabindex="-1"></a>data_all <span class="ot">&lt;-</span> data_all <span class="sc">|&gt;</span> </span>
<span id="cb35-2"><a href="#cb35-2" aria-hidden="true" tabindex="-1"></a>  <span class="fu">mutate</span>(<span class="fu">across</span>(<span class="fu">where</span>(is.factor), tidy_responses)) <span class="co"># &lt;1&gt;</span></span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
</div>
<ol type="1">
<li>We use the tidy selection helper function to limit our mutate to only factors. See <a href="https://tidyselect.r-lib.org/reference/language.html">more details</a> on the tidy selection helpers like <code>all_of()</code> and <code>where()</code></li>
</ol>
<hr>
<p>Alas, these response labels were pretty poorly chosen so some didn’t convert well. And some are really hard to understand too.</p>
<ul>
<li>Avoid this problem and choose good response labels from the start for your own data</li>
<li>Here, we show you what we got from using <code>tidy_responses()</code></li>
</ul>
<div class="cell">
<div class="sourceCode cell-code" id="cb36"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb36-1"><a href="#cb36-1" aria-hidden="true" tabindex="-1"></a>data_all <span class="sc">|&gt;</span> </span>
<span id="cb36-2"><a href="#cb36-2" aria-hidden="true" tabindex="-1"></a>  <span class="fu">select</span>(<span class="fu">where</span>(is.factor)) <span class="sc">|&gt;</span></span>
<span id="cb36-3"><a href="#cb36-3" aria-hidden="true" tabindex="-1"></a>  <span class="fu">walk</span>(\(column) <span class="fu">print</span>(<span class="fu">levels</span>(column)))</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
<div class="cell-output cell-output-stdout">
<pre><code> [1] "1"  "2"  "3"  "4"  "5"  "6"  "7"  "8"  "9"  "10"
[1] "no_garage" "po"        "fa"        "ta"        "gd"        "ex"       
[1] "a_agr" "c_all" "fv"    "i_all" "rh"    "rl"    "rm"   
[1] "corner"  "culdsac" "fr2"     "fr3"     "inside" 
[1] "1fam"   "2fmcon" "duplex" "twnhs"  "twnhse"</code></pre>
</div>
</div>
<hr>
<p>Lets clean them up a bit more manually</p>
<div class="cell">
<div class="sourceCode cell-code" id="cb38"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb38-1"><a href="#cb38-1" aria-hidden="true" tabindex="-1"></a>data_all <span class="ot">&lt;-</span> data_all <span class="sc">|&gt;</span> </span>
<span id="cb38-2"><a href="#cb38-2" aria-hidden="true" tabindex="-1"></a>  <span class="fu">mutate</span>(<span class="at">ms_zoning =</span> <span class="fu">fct_recode</span>(ms_zoning,</span>
<span id="cb38-3"><a href="#cb38-3" aria-hidden="true" tabindex="-1"></a>                                <span class="at">res_low =</span> <span class="st">"rl"</span>,</span>
<span id="cb38-4"><a href="#cb38-4" aria-hidden="true" tabindex="-1"></a>                                <span class="at">res_med =</span> <span class="st">"rm"</span>,</span>
<span id="cb38-5"><a href="#cb38-5" aria-hidden="true" tabindex="-1"></a>                                <span class="at">res_high =</span> <span class="st">"rh"</span>,</span>
<span id="cb38-6"><a href="#cb38-6" aria-hidden="true" tabindex="-1"></a>                                <span class="at">float =</span> <span class="st">"fv"</span>,</span>
<span id="cb38-7"><a href="#cb38-7" aria-hidden="true" tabindex="-1"></a>                                <span class="at">agri =</span> <span class="st">"a_agr"</span>,</span>
<span id="cb38-8"><a href="#cb38-8" aria-hidden="true" tabindex="-1"></a>                                <span class="at">indus =</span> <span class="st">"i_all"</span>,</span>
<span id="cb38-9"><a href="#cb38-9" aria-hidden="true" tabindex="-1"></a>                                <span class="at">commer =</span> <span class="st">"c_all"</span>),</span>
<span id="cb38-10"><a href="#cb38-10" aria-hidden="true" tabindex="-1"></a>         <span class="at">bldg_type =</span> <span class="fu">fct_recode</span>(bldg_type,   <span class="co"># &lt;1&gt;</span></span>
<span id="cb38-11"><a href="#cb38-11" aria-hidden="true" tabindex="-1"></a>                                <span class="at">one_fam =</span> <span class="st">"1fam"</span>,</span>
<span id="cb38-12"><a href="#cb38-12" aria-hidden="true" tabindex="-1"></a>                                <span class="at">two_fam =</span> <span class="st">"2fmcon"</span>,</span>
<span id="cb38-13"><a href="#cb38-13" aria-hidden="true" tabindex="-1"></a>                                <span class="at">town_end =</span> <span class="st">"twnhse"</span>,</span>
<span id="cb38-14"><a href="#cb38-14" aria-hidden="true" tabindex="-1"></a>                                <span class="at">town_inside =</span> <span class="st">"twnhs"</span>))</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
</div>
<ol type="1">
<li>Note that I did not need to list all levels in the recode. Only the levels I wanted to change.</li>
</ol>
<p>The full dataset is now clean!</p>
<hr>
</section>
<section id="trainvalidatetest-splits" class="level3" data-number="2.4.9">
<h3 data-number="2.4.9" class="anchored" data-anchor-id="trainvalidatetest-splits"><span class="header-section-number">2.4.9</span> Train/Validate/Test Splits</h3>
<p>The final task we typically do as part of the data preparation process is to split the full dataset into training, validation and test sets.</p>
<ul>
<li>Test sets are “typically” between 20-30% of your full dataset
<ul>
<li>There are costs and benefits to larger test sets</li>
<li>We will learn about these costs/benefits in the unit on resampling</li>
<li>I have already held out the test set</li>
</ul></li>
<li>There are many approaches to validation sets
<ul>
<li>For now (until unit 5) we will use a single validation set approach</li>
<li>We will use 25% of the remaining data (after holding out the test set) as a validation set for this example</li>
</ul></li>
<li>It is typical to split data on the outcome within strata
<ul>
<li>For a categorical outcome, this makes the proportions of the response categories more balanced across the train, validation, and test sets</li>
<li>For a numeric outcome, we first break up the distribution into temporary bins (see <code>breaks = 4</code> below) and then we split within these bins</li>
</ul></li>
<li><strong>IMPORTANT</strong>: Set a seed so that you can reproduce these splits if you later do more cleaning</li>
</ul>
<div class="cell">
<div class="sourceCode cell-code" id="cb39"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb39-1"><a href="#cb39-1" aria-hidden="true" tabindex="-1"></a><span class="fu">set.seed</span>(<span class="dv">20110522</span>)</span>
<span id="cb39-2"><a href="#cb39-2" aria-hidden="true" tabindex="-1"></a>splits <span class="ot">&lt;-</span> data_all <span class="sc">|&gt;</span> </span>
<span id="cb39-3"><a href="#cb39-3" aria-hidden="true" tabindex="-1"></a>  <span class="fu">initial_split</span>(<span class="at">prop =</span> <span class="dv">3</span><span class="sc">/</span><span class="dv">4</span>, <span class="at">strata =</span> <span class="st">"sale_price"</span>, <span class="at">breaks =</span> <span class="dv">4</span>)</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
</div>
<hr>
<p>We then extract the training set from the splits and save it</p>
<ul>
<li>Training sets are used for “analysis”- hence the name of the function</li>
</ul>
<div class="cell">
<div class="sourceCode cell-code" id="cb40"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb40-1"><a href="#cb40-1" aria-hidden="true" tabindex="-1"></a>splits <span class="sc">|&gt;</span> </span>
<span id="cb40-2"><a href="#cb40-2" aria-hidden="true" tabindex="-1"></a>  <span class="fu">analysis</span>() <span class="sc">|&gt;</span> <span class="co"># &lt;1&gt; </span></span>
<span id="cb40-3"><a href="#cb40-3" aria-hidden="true" tabindex="-1"></a>  <span class="fu">glimpse</span>() <span class="sc">|&gt;</span> </span>
<span id="cb40-4"><a href="#cb40-4" aria-hidden="true" tabindex="-1"></a>  <span class="fu">write_csv</span>(here<span class="sc">::</span><span class="fu">here</span>(path_data, <span class="st">"ames_clean_class_trn.csv"</span>))</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
<div class="cell-output cell-output-stdout">
<pre><code>Rows: 1,465
Columns: 10
$ sale_price   &lt;dbl&gt; 105000, 126000, 115000, 120000, 99500, 112000, 122000, 12…
$ gr_liv_area  &lt;dbl&gt; 896, 882, 864, 836, 918, 1902, 900, 1225, 1728, 858, 1306…
$ lot_area     &lt;dbl&gt; 11622, 8400, 10500, 2280, 7892, 8930, 9819, 9320, 13260, …
$ year_built   &lt;dbl&gt; 1961, 1970, 1971, 1975, 1979, 1978, 1967, 1959, 1962, 195…
$ overall_qual &lt;fct&gt; 5, 4, 4, 7, 6, 6, 5, 4, 5, 5, 3, 5, 4, 5, 3, 5, 2, 6, 5, …
$ garage_cars  &lt;dbl&gt; 1, 2, 0, 1, 1, 2, 1, 0, 0, 0, 0, 1, 2, 2, 1, 1, 2, 2, 1, …
$ garage_qual  &lt;fct&gt; ta, ta, no_garage, ta, ta, ta, ta, no_garage, no_garage, …
$ ms_zoning    &lt;fct&gt; res_high, res_low, res_low, res_low, res_low, res_med, re…
$ lot_config   &lt;fct&gt; inside, corner, fr2, fr2, inside, inside, inside, inside,…
$ bldg_type    &lt;fct&gt; one_fam, one_fam, one_fam, town_inside, town_end, duplex,…</code></pre>
</div>
</div>
<ol type="1">
<li><code>analysis()</code> pulls out the training set from our splits of <code>data_all</code></li>
</ol>
<hr>
<p>We will not need the validation set for modeling EDA</p>
<ul>
<li>It should NOT be used for anything other than evaluating models to select the best model configuration</li>
<li>We do NOT do Modeling EDA or Model Fitting with the validation set</li>
<li>Save it in this clean form for easy use when you need it</li>
<li>We use the validation set to “assess” models that we have fit in training sets - hence the name of the function</li>
</ul>
<div class="cell">
<div class="sourceCode cell-code" id="cb42"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb42-1"><a href="#cb42-1" aria-hidden="true" tabindex="-1"></a>splits <span class="sc">|&gt;</span> </span>
<span id="cb42-2"><a href="#cb42-2" aria-hidden="true" tabindex="-1"></a>  <span class="fu">assessment</span>() <span class="sc">|&gt;</span> <span class="co"># &lt;1&gt; </span></span>
<span id="cb42-3"><a href="#cb42-3" aria-hidden="true" tabindex="-1"></a>  <span class="fu">glimpse</span>() <span class="sc">|&gt;</span> </span>
<span id="cb42-4"><a href="#cb42-4" aria-hidden="true" tabindex="-1"></a>  <span class="fu">write_csv</span>(here<span class="sc">::</span><span class="fu">here</span>(path_data, <span class="st">"ames_clean_class_val.csv"</span>))</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
<div class="cell-output cell-output-stdout">
<pre><code>Rows: 490
Columns: 10
$ sale_price   &lt;dbl&gt; 215000, 189900, 189000, 171500, 212000, 164000, 394432, 1…
$ gr_liv_area  &lt;dbl&gt; 1656, 1629, 1804, 1341, 1502, 1752, 1856, 1004, 1092, 106…
$ lot_area     &lt;dbl&gt; 31770, 13830, 7500, 10176, 6820, 12134, 11394, 11241, 168…
$ year_built   &lt;dbl&gt; 1960, 1997, 1999, 1990, 1985, 1988, 2010, 1970, 1971, 197…
$ overall_qual &lt;fct&gt; 6, 5, 7, 7, 8, 8, 9, 6, 5, 6, 7, 9, 8, 8, 7, 8, 6, 5, 5, …
$ garage_cars  &lt;dbl&gt; 2, 2, 2, 2, 2, 2, 3, 2, 1, 2, 2, 2, 2, 3, 2, 3, 1, 1, 2, …
$ garage_qual  &lt;fct&gt; ta, ta, ta, ta, ta, ta, ta, ta, ta, ta, ta, ta, ta, ta, t…
$ ms_zoning    &lt;fct&gt; res_low, res_low, res_low, res_low, res_low, res_low, res…
$ lot_config   &lt;fct&gt; corner, inside, inside, inside, corner, inside, corner, c…
$ bldg_type    &lt;fct&gt; one_fam, one_fam, one_fam, one_fam, town_end, one_fam, on…</code></pre>
</div>
</div>
<ol type="1">
<li><code>assessment()</code> pulls out the validation set from our splits of <code>data_all</code></li>
</ol>
<hr>
</section>
</section>
<section id="exploratory-data-analysis-for-modeling" class="level2" data-number="2.5">
<h2 data-number="2.5" class="anchored" data-anchor-id="exploratory-data-analysis-for-modeling"><span class="header-section-number">2.5</span> Exploratory Data Analysis for Modeling</h2>
<p>Now let’s begin our Modeling EDA</p>
<p>We prefer to write separate scripts for Cleaning vs.&nbsp;Modeling EDA (but not displayed here)</p>
<ul>
<li>This keeps these two processes separate in our minds</li>
<li>Cleaning EDA is done with full dataset but Modeling EDA is only done with a training set - NEVER use validation or test set</li>
<li>You will use two separate scripts for the application assignment for this unit</li>
</ul>
<hr>
<p>Lets re-load (and glimpse) our training set to pretend we are at the start of a new script.</p>
<div class="cell">
<div class="sourceCode cell-code" id="cb44"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb44-1"><a href="#cb44-1" aria-hidden="true" tabindex="-1"></a> data_trn <span class="ot">&lt;-</span> <span class="fu">read_csv</span>(here<span class="sc">::</span><span class="fu">here</span>(path_data, <span class="st">"ames_clean_class_trn.csv"</span>)) <span class="sc">|&gt;</span> </span>
<span id="cb44-2"><a href="#cb44-2" aria-hidden="true" tabindex="-1"></a>  <span class="fu">glimpse</span>()</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
<div class="cell-output cell-output-stderr">
<pre><code>Rows: 1465 Columns: 10
── Column specification ────────────────────────────────────────────────────────
Delimiter: ","
chr (4): garage_qual, ms_zoning, lot_config, bldg_type
dbl (6): sale_price, gr_liv_area, lot_area, year_built, overall_qual, garage...

ℹ Use `spec()` to retrieve the full column specification for this data.
ℹ Specify the column types or set `show_col_types = FALSE` to quiet this message.</code></pre>
</div>
<div class="cell-output cell-output-stdout">
<pre><code>Rows: 1,465
Columns: 10
$ sale_price   &lt;dbl&gt; 105000, 126000, 115000, 120000, 99500, 112000, 122000, 12…
$ gr_liv_area  &lt;dbl&gt; 896, 882, 864, 836, 918, 1902, 900, 1225, 1728, 858, 1306…
$ lot_area     &lt;dbl&gt; 11622, 8400, 10500, 2280, 7892, 8930, 9819, 9320, 13260, …
$ year_built   &lt;dbl&gt; 1961, 1970, 1971, 1975, 1979, 1978, 1967, 1959, 1962, 195…
$ overall_qual &lt;dbl&gt; 5, 4, 4, 7, 6, 6, 5, 4, 5, 5, 3, 5, 4, 5, 3, 5, 2, 6, 5, …
$ garage_cars  &lt;dbl&gt; 1, 2, 0, 1, 1, 2, 1, 0, 0, 0, 0, 1, 2, 2, 1, 1, 2, 2, 1, …
$ garage_qual  &lt;chr&gt; "ta", "ta", "no_garage", "ta", "ta", "ta", "ta", "no_gara…
$ ms_zoning    &lt;chr&gt; "res_high", "res_low", "res_low", "res_low", "res_low", "…
$ lot_config   &lt;chr&gt; "inside", "corner", "fr2", "fr2", "inside", "inside", "in…
$ bldg_type    &lt;chr&gt; "one_fam", "one_fam", "one_fam", "town_inside", "town_end…</code></pre>
</div>
</div>
<hr>
<p>We have some work to do (again)</p>
<ul>
<li>Notice that <code>overall_qual</code> is back to being classed as numeric (dbl).<br>
</li>
<li>Notice that your factors are back to character
<ul>
<li>This is because csv files don’t save anything other than the values (labels for factors). They are the cleaned labels though!</li>
</ul></li>
<li>You should class all variables using the same approach as before (often just a copy/paste).</li>
</ul>
<div class="cell">
<div class="sourceCode cell-code" id="cb47"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb47-1"><a href="#cb47-1" aria-hidden="true" tabindex="-1"></a> data_trn <span class="ot">&lt;-</span> </span>
<span id="cb47-2"><a href="#cb47-2" aria-hidden="true" tabindex="-1"></a>  <span class="fu">read_csv</span>(here<span class="sc">::</span><span class="fu">here</span>(path_data, <span class="st">"ames_clean_class_trn.csv"</span>), </span>
<span id="cb47-3"><a href="#cb47-3" aria-hidden="true" tabindex="-1"></a>           <span class="at">col_types =</span> <span class="fu">cols</span>()) <span class="sc">|&gt;</span>  <span class="co"># &lt;1&gt;</span></span>
<span id="cb47-4"><a href="#cb47-4" aria-hidden="true" tabindex="-1"></a>  <span class="fu">mutate</span>(<span class="fu">across</span>(<span class="fu">where</span>(is.character), factor)) <span class="sc">|&gt;</span> <span class="co"># &lt;2&gt;</span></span>
<span id="cb47-5"><a href="#cb47-5" aria-hidden="true" tabindex="-1"></a>  <span class="fu">mutate</span>(<span class="at">overall_qual =</span> <span class="fu">factor</span>(overall_qual, <span class="at">levels =</span> <span class="dv">1</span><span class="sc">:</span><span class="dv">10</span>),  <span class="co"># &lt;3&gt;</span></span>
<span id="cb47-6"><a href="#cb47-6" aria-hidden="true" tabindex="-1"></a>         <span class="at">garage_qual =</span> <span class="fu">fct_relevel</span>(garage_qual, <span class="fu">c</span>(<span class="st">"no_garage"</span>, <span class="st">"po"</span>, <span class="st">"fa"</span>, </span>
<span id="cb47-7"><a href="#cb47-7" aria-hidden="true" tabindex="-1"></a>                                                  <span class="st">"ta"</span>, <span class="st">"gd"</span>, <span class="st">"ex"</span>))) <span class="sc">|&gt;</span>  <span class="co"># &lt;4&gt; </span></span>
<span id="cb47-8"><a href="#cb47-8" aria-hidden="true" tabindex="-1"></a>  <span class="fu">glimpse</span>()</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
<div class="cell-output cell-output-stderr">
<pre><code>Warning: There was 1 warning in `mutate()`.
ℹ In argument: `garage_qual = fct_relevel(...)`.
Caused by warning:
! 1 unknown level in `f`: ex</code></pre>
</div>
<div class="cell-output cell-output-stdout">
<pre><code>Rows: 1,465
Columns: 10
$ sale_price   &lt;dbl&gt; 105000, 126000, 115000, 120000, 99500, 112000, 122000, 12…
$ gr_liv_area  &lt;dbl&gt; 896, 882, 864, 836, 918, 1902, 900, 1225, 1728, 858, 1306…
$ lot_area     &lt;dbl&gt; 11622, 8400, 10500, 2280, 7892, 8930, 9819, 9320, 13260, …
$ year_built   &lt;dbl&gt; 1961, 1970, 1971, 1975, 1979, 1978, 1967, 1959, 1962, 195…
$ overall_qual &lt;fct&gt; 5, 4, 4, 7, 6, 6, 5, 4, 5, 5, 3, 5, 4, 5, 3, 5, 2, 6, 5, …
$ garage_cars  &lt;dbl&gt; 1, 2, 0, 1, 1, 2, 1, 0, 0, 0, 0, 1, 2, 2, 1, 1, 2, 2, 1, …
$ garage_qual  &lt;fct&gt; ta, ta, no_garage, ta, ta, ta, ta, no_garage, no_garage, …
$ ms_zoning    &lt;fct&gt; res_high, res_low, res_low, res_low, res_low, res_med, re…
$ lot_config   &lt;fct&gt; inside, corner, fr2, fr2, inside, inside, inside, inside,…
$ bldg_type    &lt;fct&gt; one_fam, one_fam, one_fam, town_inside, town_end, duplex,…</code></pre>
</div>
</div>
<ol type="1">
<li>use col_types = cols() to suppress messages about default class assignments</li>
<li>use <code>mutate()</code> with <code>across()</code> to change all character variables to factors</li>
<li>use <code>mutate()</code> with <code>factor()</code> to change numeric variable to factor.</li>
<li>use <code>mutate()</code> with <code>fct_relevel()</code> to explicitly set levels of an ordered factor. Also notice the warning about the unknown level. Always explore warnings! In this instance, its fine. There were only two observations with ex and neither ended up in the training split. Still best to include this level to note it exists!</li>
</ol>
<hr>
<p><strong>Coding sidebar</strong>: We will likely re-class the Ames dataset many times (for training, validation, test). We could copy/paste these mutates each time but whenever you do something more than twice, I recommend writing a function. We might write this one to re-class the ames variables</p>
<div class="cell">
<div class="sourceCode cell-code" id="cb50"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb50-1"><a href="#cb50-1" aria-hidden="true" tabindex="-1"></a>class_ames <span class="ot">&lt;-</span> <span class="cf">function</span>(df){</span>
<span id="cb50-2"><a href="#cb50-2" aria-hidden="true" tabindex="-1"></a>  </span>
<span id="cb50-3"><a href="#cb50-3" aria-hidden="true" tabindex="-1"></a>  df <span class="sc">|&gt;</span></span>
<span id="cb50-4"><a href="#cb50-4" aria-hidden="true" tabindex="-1"></a>    <span class="fu">mutate</span>(<span class="fu">across</span>(<span class="fu">where</span>(is.character), factor)) <span class="sc">|&gt;</span> </span>
<span id="cb50-5"><a href="#cb50-5" aria-hidden="true" tabindex="-1"></a>    <span class="fu">mutate</span>(<span class="at">overall_qual =</span> <span class="fu">factor</span>(overall_qual, <span class="at">levels =</span> <span class="dv">1</span><span class="sc">:</span><span class="dv">10</span>), </span>
<span id="cb50-6"><a href="#cb50-6" aria-hidden="true" tabindex="-1"></a>           <span class="at">garage_qual =</span> <span class="fu">fct_relevel</span>(garage_qual, <span class="fu">c</span>(<span class="st">"no_garage"</span>, <span class="st">"po"</span>, <span class="st">"fa"</span>, </span>
<span id="cb50-7"><a href="#cb50-7" aria-hidden="true" tabindex="-1"></a>                                                    <span class="st">"ta"</span>, <span class="st">"gd"</span>, <span class="st">"ex"</span>)))</span>
<span id="cb50-8"><a href="#cb50-8" aria-hidden="true" tabindex="-1"></a>}</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
</div>
<hr>
<p>Now we can use this function every time we read in one of the Ames datasets</p>
<div class="cell">
<div class="sourceCode cell-code" id="cb51"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb51-1"><a href="#cb51-1" aria-hidden="true" tabindex="-1"></a>data_trn <span class="ot">&lt;-</span> </span>
<span id="cb51-2"><a href="#cb51-2" aria-hidden="true" tabindex="-1"></a>  <span class="fu">read_csv</span>(here<span class="sc">::</span><span class="fu">here</span>(path_data, <span class="st">"ames_clean_class_trn.csv"</span>), </span>
<span id="cb51-3"><a href="#cb51-3" aria-hidden="true" tabindex="-1"></a>           <span class="at">col_types =</span> <span class="fu">cols</span>()) <span class="sc">|&gt;</span> </span>
<span id="cb51-4"><a href="#cb51-4" aria-hidden="true" tabindex="-1"></a>  <span class="fu">class_ames</span>() <span class="sc">|&gt;</span> <span class="co"># &lt;1&gt; </span></span>
<span id="cb51-5"><a href="#cb51-5" aria-hidden="true" tabindex="-1"></a>  <span class="fu">glimpse</span>()</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
<div class="cell-output cell-output-stdout">
<pre><code>Rows: 1,465
Columns: 10
$ sale_price   &lt;dbl&gt; 105000, 126000, 115000, 120000, 99500, 112000, 122000, 12…
$ gr_liv_area  &lt;dbl&gt; 896, 882, 864, 836, 918, 1902, 900, 1225, 1728, 858, 1306…
$ lot_area     &lt;dbl&gt; 11622, 8400, 10500, 2280, 7892, 8930, 9819, 9320, 13260, …
$ year_built   &lt;dbl&gt; 1961, 1970, 1971, 1975, 1979, 1978, 1967, 1959, 1962, 195…
$ overall_qual &lt;fct&gt; 5, 4, 4, 7, 6, 6, 5, 4, 5, 5, 3, 5, 4, 5, 3, 5, 2, 6, 5, …
$ garage_cars  &lt;dbl&gt; 1, 2, 0, 1, 1, 2, 1, 0, 0, 0, 0, 1, 2, 2, 1, 1, 2, 2, 1, …
$ garage_qual  &lt;fct&gt; ta, ta, no_garage, ta, ta, ta, ta, no_garage, no_garage, …
$ ms_zoning    &lt;fct&gt; res_high, res_low, res_low, res_low, res_low, res_med, re…
$ lot_config   &lt;fct&gt; inside, corner, fr2, fr2, inside, inside, inside, inside,…
$ bldg_type    &lt;fct&gt; one_fam, one_fam, one_fam, town_inside, town_end, duplex,…</code></pre>
</div>
</div>
<ol type="1">
<li>Using our new function!</li>
</ol>
<hr>
<p>There are 3 basic types of Modeling EDA you should always do</p>
<ol type="1">
<li>Explore missingness for predictors</li>
<li>Explore univariate distributions for outcome and predictors</li>
<li>Explore bivariate relationships between predictors and outcome</li>
</ol>
<p>As a result of this exploration, we will:</p>
<ul>
<li>Identify promising predictors</li>
<li>Determine appropriate feature engineering for those predictors (e.g., transformations)</li>
<li>Identify outliers and consider how to handle when model building</li>
<li>Consider how to handle imputation for missing data (if any)</li>
</ul>
<hr>
<section id="overall-summary-of-feature-matrix" class="level3" data-number="2.5.1">
<h3 data-number="2.5.1" class="anchored" data-anchor-id="overall-summary-of-feature-matrix"><span class="header-section-number">2.5.1</span> Overall Summary of Feature Matrix</h3>
<p>Before we dig into individual variables and their distributions and relationships with the outcome, it’s nice to start with a big picture of the dataset</p>
<ul>
<li>We use another customized version of <code>skim()</code> from the <code>skimr</code> package to provide this</li>
<li>Just needed to augment it with skewness and kurtosis statistics for numeric variables</li>
<li>and remove histogram b/c we don’t find that small histogram useful</li>
<li>included in <code>fun_eda.R</code> on github</li>
</ul>
<div class="cell">
<div class="sourceCode cell-code" id="cb53"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb53-1"><a href="#cb53-1" aria-hidden="true" tabindex="-1"></a>skew_na <span class="ot">&lt;-</span> <span class="fu">partial</span>(e1071<span class="sc">::</span>skewness, <span class="at">na.rm =</span> <span class="cn">TRUE</span>)</span>
<span id="cb53-2"><a href="#cb53-2" aria-hidden="true" tabindex="-1"></a>kurt_na <span class="ot">&lt;-</span> <span class="fu">partial</span>(e1071<span class="sc">::</span>kurtosis, <span class="at">na.rm =</span> <span class="cn">TRUE</span>)</span>
<span id="cb53-3"><a href="#cb53-3" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb53-4"><a href="#cb53-4" aria-hidden="true" tabindex="-1"></a>skim_all <span class="ot">&lt;-</span> skimr<span class="sc">::</span><span class="fu">skim_with</span>(<span class="at">numeric =</span> skimr<span class="sc">::</span><span class="fu">sfl</span>(<span class="at">skew =</span> skew_na, </span>
<span id="cb53-5"><a href="#cb53-5" aria-hidden="true" tabindex="-1"></a>                                                  <span class="at">kurtosis =</span> kurt_na, </span>
<span id="cb53-6"><a href="#cb53-6" aria-hidden="true" tabindex="-1"></a>                                                  <span class="at">hist =</span> <span class="cn">NULL</span>))</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
</div>
<hr>
<p>Careful review of this output provides a great orientation to our data</p>
<div class="cell">
<div class="sourceCode cell-code" id="cb54"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb54-1"><a href="#cb54-1" aria-hidden="true" tabindex="-1"></a>data_trn <span class="sc">|&gt;</span> </span>
<span id="cb54-2"><a href="#cb54-2" aria-hidden="true" tabindex="-1"></a>  <span class="fu">skim_all</span>()</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
<div class="cell-output-display">

<table style="width: auto;" class="table table-condensed">
<caption>
Data summary
</caption>
<tbody>
<tr>
<td style="text-align:left;">
Name
</td>
<td style="text-align:left;">
data_trn
</td>
</tr>
<tr>
<td style="text-align:left;">
Number of rows
</td>
<td style="text-align:left;">
1465
</td>
</tr>
<tr>
<td style="text-align:left;">
Number of columns
</td>
<td style="text-align:left;">
10
</td>
</tr>
<tr>
<td style="text-align:left;">
_______________________
</td>
<td style="text-align:left;">
</td>
</tr>
<tr>
<td style="text-align:left;">
Column type frequency:
</td>
<td style="text-align:left;">
</td>
</tr>
<tr>
<td style="text-align:left;">
factor
</td>
<td style="text-align:left;">
5
</td>
</tr>
<tr>
<td style="text-align:left;">
numeric
</td>
<td style="text-align:left;">
5
</td>
</tr>
<tr>
<td style="text-align:left;">
________________________
</td>
<td style="text-align:left;">
</td>
</tr>
<tr>
<td style="text-align:left;">
Group variables
</td>
<td style="text-align:left;">
None
</td>
</tr>
</tbody>

</table>
<p><strong>Variable type: factor</strong></p>

<table>
<thead>
<tr>
<th style="text-align:left;">
skim_variable
</th>
<th style="text-align:right;">
n_missing
</th>
<th style="text-align:right;">
complete_rate
</th>
<th style="text-align:right;">
n_unique
</th>
<th style="text-align:left;">
top_counts
</th>
</tr>
</thead>
<tbody>
<tr>
<td style="text-align:left;">
overall_qual
</td>
<td style="text-align:right;">
0
</td>
<td style="text-align:right;">
1
</td>
<td style="text-align:right;">
10
</td>
<td style="text-align:left;">
5: 424, 6: 350, 7: 304, 8: 176
</td>
</tr>
<tr>
<td style="text-align:left;">
garage_qual
</td>
<td style="text-align:right;">
0
</td>
<td style="text-align:right;">
1
</td>
<td style="text-align:right;">
5
</td>
<td style="text-align:left;">
ta: 1312, no_: 81, fa: 57, gd: 13
</td>
</tr>
<tr>
<td style="text-align:left;">
ms_zoning
</td>
<td style="text-align:right;">
0
</td>
<td style="text-align:right;">
1
</td>
<td style="text-align:right;">
7
</td>
<td style="text-align:left;">
res: 1157, res: 217, flo: 66, com: 13
</td>
</tr>
<tr>
<td style="text-align:left;">
lot_config
</td>
<td style="text-align:right;">
0
</td>
<td style="text-align:right;">
1
</td>
<td style="text-align:right;">
5
</td>
<td style="text-align:left;">
ins: 1095, cor: 248, cul: 81, fr2: 39
</td>
</tr>
<tr>
<td style="text-align:left;">
bldg_type
</td>
<td style="text-align:right;">
0
</td>
<td style="text-align:right;">
1
</td>
<td style="text-align:right;">
5
</td>
<td style="text-align:left;">
one: 1216, tow: 108, dup: 63, tow: 46
</td>
</tr>
</tbody>

</table>
<p><strong>Variable type: numeric</strong></p>

<table>
<thead>
<tr>
<th style="text-align:left;">
skim_variable
</th>
<th style="text-align:right;">
n_missing
</th>
<th style="text-align:right;">
complete_rate
</th>
<th style="text-align:right;">
mean
</th>
<th style="text-align:right;">
sd
</th>
<th style="text-align:right;">
p0
</th>
<th style="text-align:right;">
p25
</th>
<th style="text-align:right;">
p50
</th>
<th style="text-align:right;">
p75
</th>
<th style="text-align:right;">
p100
</th>
<th style="text-align:right;">
skew
</th>
<th style="text-align:right;">
kurtosis
</th>
</tr>
</thead>
<tbody>
<tr>
<td style="text-align:left;">
sale_price
</td>
<td style="text-align:right;">
0
</td>
<td style="text-align:right;">
1
</td>
<td style="text-align:right;">
180696.15
</td>
<td style="text-align:right;">
78836.41
</td>
<td style="text-align:right;">
12789
</td>
<td style="text-align:right;">
129500
</td>
<td style="text-align:right;">
160000
</td>
<td style="text-align:right;">
213500
</td>
<td style="text-align:right;">
745000
</td>
<td style="text-align:right;">
1.64
</td>
<td style="text-align:right;">
4.60
</td>
</tr>
<tr>
<td style="text-align:left;">
gr_liv_area
</td>
<td style="text-align:right;">
0
</td>
<td style="text-align:right;">
1
</td>
<td style="text-align:right;">
1506.84
</td>
<td style="text-align:right;">
511.44
</td>
<td style="text-align:right;">
438
</td>
<td style="text-align:right;">
1128
</td>
<td style="text-align:right;">
1450
</td>
<td style="text-align:right;">
1759
</td>
<td style="text-align:right;">
5642
</td>
<td style="text-align:right;">
1.43
</td>
<td style="text-align:right;">
5.19
</td>
</tr>
<tr>
<td style="text-align:left;">
lot_area
</td>
<td style="text-align:right;">
0
</td>
<td style="text-align:right;">
1
</td>
<td style="text-align:right;">
10144.16
</td>
<td style="text-align:right;">
8177.55
</td>
<td style="text-align:right;">
1476
</td>
<td style="text-align:right;">
7500
</td>
<td style="text-align:right;">
9375
</td>
<td style="text-align:right;">
11362
</td>
<td style="text-align:right;">
164660
</td>
<td style="text-align:right;">
11.20
</td>
<td style="text-align:right;">
182.91
</td>
</tr>
<tr>
<td style="text-align:left;">
year_built
</td>
<td style="text-align:right;">
0
</td>
<td style="text-align:right;">
1
</td>
<td style="text-align:right;">
1971.35
</td>
<td style="text-align:right;">
29.65
</td>
<td style="text-align:right;">
1880
</td>
<td style="text-align:right;">
1953
</td>
<td style="text-align:right;">
1972
</td>
<td style="text-align:right;">
2000
</td>
<td style="text-align:right;">
2010
</td>
<td style="text-align:right;">
-0.54
</td>
<td style="text-align:right;">
-0.62
</td>
</tr>
<tr>
<td style="text-align:left;">
garage_cars
</td>
<td style="text-align:right;">
1
</td>
<td style="text-align:right;">
1
</td>
<td style="text-align:right;">
1.78
</td>
<td style="text-align:right;">
0.76
</td>
<td style="text-align:right;">
0
</td>
<td style="text-align:right;">
1
</td>
<td style="text-align:right;">
2
</td>
<td style="text-align:right;">
2
</td>
<td style="text-align:right;">
4
</td>
<td style="text-align:right;">
-0.26
</td>
<td style="text-align:right;">
0.10
</td>
</tr>
</tbody>

</table>
</div>
</div>
<hr>
</section>
<section id="univariate-distributions" class="level3" data-number="2.5.2">
<h3 data-number="2.5.2" class="anchored" data-anchor-id="univariate-distributions"><span class="header-section-number">2.5.2</span> Univariate Distributions</h3>
<p>Exploration of univariate distributions are useful to</p>
<ul>
<li>Understand variation and distributional shape</li>
<li>May suggest need to consider transformations as part of feature engineering</li>
<li>Can identify univariate outliers (valid but disconnected from distribution so not detected in cleaning)</li>
</ul>
<p>We generally select different visualizations and summary statistics for categorical vs.&nbsp;numeric variables</p>
<hr>
</section>
<section id="barplots-for-categorical-variables-univariate" class="level3" data-number="2.5.3">
<h3 data-number="2.5.3" class="anchored" data-anchor-id="barplots-for-categorical-variables-univariate"><span class="header-section-number">2.5.3</span> Barplots for Categorical Variables (Univariate)</h3>
<p>The primary visualization for categorical variables is the bar plot</p>
<ul>
<li>We use it for both nominal and ordinal variables</li>
<li>Define and customize it within a function for repeated use.<br>
</li>
<li>We share this and all the remaining plots used in this unit in <code>fun_plot.R</code>. Source it to use them without having to re-code each time</li>
</ul>
<div class="cell">
<div class="sourceCode cell-code" id="cb55"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb55-1"><a href="#cb55-1" aria-hidden="true" tabindex="-1"></a>plot_bar <span class="ot">&lt;-</span> <span class="cf">function</span>(df, x){</span>
<span id="cb55-2"><a href="#cb55-2" aria-hidden="true" tabindex="-1"></a>  x_label_size <span class="ot">&lt;-</span> <span class="fu">if_else</span>(skimr<span class="sc">::</span><span class="fu">n_unique</span>(df[[x]]) <span class="sc">&lt;</span> <span class="dv">7</span>, <span class="dv">11</span>, <span class="dv">7</span>)</span>
<span id="cb55-3"><a href="#cb55-3" aria-hidden="true" tabindex="-1"></a>  </span>
<span id="cb55-4"><a href="#cb55-4" aria-hidden="true" tabindex="-1"></a>  df <span class="sc">|&gt;</span></span>
<span id="cb55-5"><a href="#cb55-5" aria-hidden="true" tabindex="-1"></a>    <span class="fu">ggplot</span>(<span class="fu">aes</span>(<span class="at">x =</span> .data[[x]])) <span class="sc">+</span></span>
<span id="cb55-6"><a href="#cb55-6" aria-hidden="true" tabindex="-1"></a>    <span class="fu">geom_bar</span>() <span class="sc">+</span></span>
<span id="cb55-7"><a href="#cb55-7" aria-hidden="true" tabindex="-1"></a>    <span class="fu">theme</span>(<span class="at">axis.text.x =</span> <span class="fu">element_text</span>(<span class="at">angle =</span> <span class="dv">90</span>, <span class="at">size =</span> x_label_size, <span class="at">vjust =</span> <span class="fl">0.5</span>, <span class="at">hjust =</span> <span class="dv">1</span>),</span>
<span id="cb55-8"><a href="#cb55-8" aria-hidden="true" tabindex="-1"></a>          <span class="at">axis.text.y =</span> <span class="fu">element_text</span>(<span class="at">size =</span> <span class="dv">11</span>))</span>
<span id="cb55-9"><a href="#cb55-9" aria-hidden="true" tabindex="-1"></a>}</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
</div>
<hr>
<p><strong>Coding sidebar</strong>: When defining functions, generally put data as first argument so you can pipe in data using tidy pipelines</p>
<p>There are pros and cons to writing functions that accept variable names that are quoted vs.&nbsp;unquoted</p>
<ul>
<li>It depends a bit on how you will use them.</li>
<li>.data[[argument]] is used in functions with quoted arguments</li>
<li>embracing {{}} is used for unquoted arguments</li>
<li>For these plot functions, I use quoted variable names and then pipe those into <code>map()</code> to make multiple plots (see below)</li>
<li>see <code>?vignette("programming")</code> or info on <a href="https://r4ds.hadley.nz/functions.html#indirection-and-tidy-evaluation">tidy evaluation</a> in <span class="citation" data-cites="RDS">Wickham, Çetinkaya-Rundel, and Grolemund (<a href="#ref-RDS" role="doc-biblioref">2023</a>)</span> for more details</li>
</ul>
<hr>
<p>Bar plots reveal low frequency responses for nominal and ordinal variables</p>
<ul>
<li>See <code>bldg_type</code></li>
</ul>
<div class="cell">
<div class="sourceCode cell-code" id="cb56"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb56-1"><a href="#cb56-1" aria-hidden="true" tabindex="-1"></a>data_trn <span class="sc">|&gt;</span> <span class="fu">plot_bar</span>(<span class="st">"bldg_type"</span>)</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
<div class="cell-output-display">
<p><img src="002_exploratory_data_analysis_files/figure-html/u2-modeling-2-1.png" class="img-fluid" width="672"></p>
</div>
</div>
<hr>
<p>Bar plots can display distributional shape for ordinal variables. May suggest the need for transformations if we later treat the ordinal variable as numeric</p>
<ul>
<li>See <code>overall_qual</code>. Though it is not very skewed.</li>
</ul>
<div class="cell">
<div class="sourceCode cell-code" id="cb57"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb57-1"><a href="#cb57-1" aria-hidden="true" tabindex="-1"></a>data_trn <span class="sc">|&gt;</span> <span class="fu">plot_bar</span>(<span class="st">"overall_qual"</span>)</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
<div class="cell-output-display">
<p><img src="002_exploratory_data_analysis_files/figure-html/u2-modeling-3-1.png" class="img-fluid" width="672"></p>
</div>
</div>
<hr>
<p><strong>Coding sidebar</strong>:</p>
<p>We can make all of our plots iteratively using <code>map()</code> from the `purrr package.</p>
<div class="cell">
<div class="sourceCode cell-code" id="cb58"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb58-1"><a href="#cb58-1" aria-hidden="true" tabindex="-1"></a>data_trn <span class="sc">|&gt;</span> </span>
<span id="cb58-2"><a href="#cb58-2" aria-hidden="true" tabindex="-1"></a>  <span class="fu">select</span>(<span class="fu">where</span>(is.factor)) <span class="sc">|&gt;</span> <span class="co"># &lt;1&gt; </span></span>
<span id="cb58-3"><a href="#cb58-3" aria-hidden="true" tabindex="-1"></a>  <span class="fu">names</span>() <span class="sc">|&gt;</span> <span class="co"># &lt;2&gt; </span></span>
<span id="cb58-4"><a href="#cb58-4" aria-hidden="true" tabindex="-1"></a>  <span class="fu">map</span>(\(name) <span class="fu">plot_bar</span>(<span class="at">df =</span> data_trn, <span class="at">x =</span> name)) <span class="sc">|&gt;</span> <span class="co"># &lt;3&gt; </span></span>
<span id="cb58-5"><a href="#cb58-5" aria-hidden="true" tabindex="-1"></a>  <span class="fu">plot_grid</span>(<span class="at">plotlist =</span> _, <span class="at">ncol =</span> <span class="dv">2</span>) <span class="co"># &lt;4&gt;</span></span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
<div class="cell-output-display">
<p><img src="002_exploratory_data_analysis_files/figure-html/u2-modeling-4-1.png" class="img-fluid" width="672"></p>
</div>
</div>
<ol type="1">
<li>Select only the factor columns</li>
<li>Get their names as strings (that is why we use quoted variables in these plot functions</li>
<li>Use <code>map()</code> to iterative <code>plot_bar()</code> over every column. (see <a href="https://r4ds.hadley.nz/iteration.html">iteration</a> in <span class="citation" data-cites="RDS">Wickham, Çetinkaya-Rundel, and Grolemund (<a href="#ref-RDS" role="doc-biblioref">2023</a>)</span>)</li>
<li>Use <code>plot_grid()</code> from <code>cowplot</code> package to display the list of plots in a grid</li>
</ol>
<hr>
</section>
<section id="tables-for-categorical-variables-univariate" class="level3" data-number="2.5.4">
<h3 data-number="2.5.4" class="anchored" data-anchor-id="tables-for-categorical-variables-univariate"><span class="header-section-number">2.5.4</span> Tables for Categorical Variables (Univariate)</h3>
<p>We tend to prefer visualizations vs.&nbsp;summary statistics for EDA. However, tables can be useful.</p>
<p>Here is a function that was described in <span class="citation" data-cites="RDS">Wickham, Çetinkaya-Rundel, and Grolemund (<a href="#ref-RDS" role="doc-biblioref">2023</a>)</span> that we like because</p>
<ul>
<li>It includes counts and proportions</li>
<li>It includes NA as a category</li>
</ul>
<p>We have included it in <code>fun_eda.R</code> for your use.</p>
<div class="cell">
<div class="sourceCode cell-code" id="cb59"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb59-1"><a href="#cb59-1" aria-hidden="true" tabindex="-1"></a>tab <span class="ot">&lt;-</span> <span class="cf">function</span>(df, var, <span class="at">sort =</span> <span class="cn">FALSE</span>) {</span>
<span id="cb59-2"><a href="#cb59-2" aria-hidden="true" tabindex="-1"></a>  df <span class="sc">|&gt;</span>  dplyr<span class="sc">::</span><span class="fu">count</span>({{ var }}, <span class="at">sort =</span> sort) <span class="sc">|&gt;</span> </span>
<span id="cb59-3"><a href="#cb59-3" aria-hidden="true" tabindex="-1"></a>    dplyr<span class="sc">::</span><span class="fu">mutate</span>(<span class="at">prop =</span> n <span class="sc">/</span> <span class="fu">sum</span>(n))</span>
<span id="cb59-4"><a href="#cb59-4" aria-hidden="true" tabindex="-1"></a>} </span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
</div>
<hr>
<p>Tables can be used to identify responses that have very low frequency and to think about the need to handle missing values</p>
<ul>
<li>See <code>ms_zoning</code></li>
<li>May want to collapse low frequency (or low percentage) categories to reduce the number of features needed to represent the predictor</li>
</ul>
<div class="cell">
<div class="sourceCode cell-code" id="cb60"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb60-1"><a href="#cb60-1" aria-hidden="true" tabindex="-1"></a>data_trn <span class="sc">|&gt;</span> <span class="fu">tab</span>(ms_zoning)</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
<div class="cell-output cell-output-stdout">
<pre><code># A tibble: 7 × 3
  ms_zoning     n     prop
  &lt;fct&gt;     &lt;int&gt;    &lt;dbl&gt;
1 agri          2 0.00137 
2 commer       13 0.00887 
3 float        66 0.0451  
4 indus         1 0.000683
5 res_high      9 0.00614 
6 res_low    1157 0.790   
7 res_med     217 0.148   </code></pre>
</div>
</div>
<hr>
<ul>
<li>We could also view the table sorted if we prefer</li>
</ul>
<div class="cell">
<div class="sourceCode cell-code" id="cb62"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb62-1"><a href="#cb62-1" aria-hidden="true" tabindex="-1"></a>data_trn <span class="sc">|&gt;</span> <span class="fu">tab</span>(ms_zoning, <span class="at">sort =</span> <span class="cn">TRUE</span>)</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
<div class="cell-output cell-output-stdout">
<pre><code># A tibble: 7 × 3
  ms_zoning     n     prop
  &lt;fct&gt;     &lt;int&gt;    &lt;dbl&gt;
1 res_low    1157 0.790   
2 res_med     217 0.148   
3 float        66 0.0451  
4 commer       13 0.00887 
5 res_high      9 0.00614 
6 agri          2 0.00137 
7 indus         1 0.000683</code></pre>
</div>
</div>
<hr>
<p>but could see all this detail with plot as well</p>
<div class="cell">
<div class="sourceCode cell-code" id="cb64"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb64-1"><a href="#cb64-1" aria-hidden="true" tabindex="-1"></a>data_trn <span class="sc">|&gt;</span> <span class="fu">plot_bar</span>(<span class="st">"ms_zoning"</span>)</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
<div class="cell-output-display">
<p><img src="002_exploratory_data_analysis_files/figure-html/u2-modeling-6-1.png" class="img-fluid" width="672"></p>
</div>
</div>
<hr>
</section>
<section id="histograms-for-numeric-variables-univariate" class="level3" data-number="2.5.5">
<h3 data-number="2.5.5" class="anchored" data-anchor-id="histograms-for-numeric-variables-univariate"><span class="header-section-number">2.5.5</span> Histograms for Numeric Variables (Univariate)</h3>
<p>Histograms are a useful/common visualization for numeric variables</p>
<p>Let’s define a histogram function (included in <code>fun_plots.r</code>)</p>
<ul>
<li>Bin size should be explored a bit to find best representation</li>
<li>Somewhat dependent on n (my default here is based on this training set)</li>
<li>This is one of the limitations of histograms</li>
</ul>
<div class="cell">
<div class="sourceCode cell-code" id="cb65"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb65-1"><a href="#cb65-1" aria-hidden="true" tabindex="-1"></a>plot_hist <span class="ot">&lt;-</span> <span class="cf">function</span>(df, x, <span class="at">bins =</span> <span class="dv">100</span>){</span>
<span id="cb65-2"><a href="#cb65-2" aria-hidden="true" tabindex="-1"></a>  df <span class="sc">|&gt;</span></span>
<span id="cb65-3"><a href="#cb65-3" aria-hidden="true" tabindex="-1"></a>    <span class="fu">ggplot</span>(<span class="fu">aes</span>(<span class="at">x =</span> .data[[x]])) <span class="sc">+</span></span>
<span id="cb65-4"><a href="#cb65-4" aria-hidden="true" tabindex="-1"></a>    <span class="fu">geom_histogram</span>(<span class="at">bins =</span> bins) <span class="sc">+</span></span>
<span id="cb65-5"><a href="#cb65-5" aria-hidden="true" tabindex="-1"></a>    <span class="fu">theme</span>(<span class="at">axis.text.x =</span> <span class="fu">element_text</span>(<span class="at">size =</span> <span class="dv">11</span>),</span>
<span id="cb65-6"><a href="#cb65-6" aria-hidden="true" tabindex="-1"></a>          <span class="at">axis.text.y =</span> <span class="fu">element_text</span>(<span class="at">size =</span> <span class="dv">11</span>))</span>
<span id="cb65-7"><a href="#cb65-7" aria-hidden="true" tabindex="-1"></a>}</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
</div>
<hr>
<p>Let’s look at <code>sale_price</code></p>
<ul>
<li>It is positively skewed</li>
<li>May suggest units (dollars) are not interval in nature (makes sense)</li>
<li>Could cause problems for some algorithms (e.g., lm) when features are normal</li>
</ul>
<div class="cell">
<div class="sourceCode cell-code" id="cb66"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb66-1"><a href="#cb66-1" aria-hidden="true" tabindex="-1"></a>data_trn <span class="sc">|&gt;</span> <span class="fu">plot_hist</span>(<span class="st">"sale_price"</span>)</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
<div class="cell-output-display">
<p><img src="002_exploratory_data_analysis_files/figure-html/u2-modeling-9-1.png" class="img-fluid" width="672"></p>
</div>
</div>
<hr>
</section>
<section id="smoothed-frequency-polygons-for-numeric-variables-univariate" class="level3" data-number="2.5.6">
<h3 data-number="2.5.6" class="anchored" data-anchor-id="smoothed-frequency-polygons-for-numeric-variables-univariate"><span class="header-section-number">2.5.6</span> Smoothed Frequency Polygons for Numeric Variables (Univariate)</h3>
<p>Frequency polygons are also commonly used</p>
<ul>
<li>Define a frequency polygon function and use it (included in <code>fun_plots.r</code>)</li>
</ul>
<div class="cell">
<div class="sourceCode cell-code" id="cb67"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb67-1"><a href="#cb67-1" aria-hidden="true" tabindex="-1"></a>plot_freqpoly <span class="ot">&lt;-</span> <span class="cf">function</span>(df, x, <span class="at">bins =</span> <span class="dv">50</span>){</span>
<span id="cb67-2"><a href="#cb67-2" aria-hidden="true" tabindex="-1"></a>  df <span class="sc">|&gt;</span></span>
<span id="cb67-3"><a href="#cb67-3" aria-hidden="true" tabindex="-1"></a>    <span class="fu">ggplot</span>(<span class="fu">aes</span>(<span class="at">x =</span> .data[[x]])) <span class="sc">+</span></span>
<span id="cb67-4"><a href="#cb67-4" aria-hidden="true" tabindex="-1"></a>    <span class="fu">geom_freqpoly</span>(<span class="at">bins =</span> bins) <span class="sc">+</span></span>
<span id="cb67-5"><a href="#cb67-5" aria-hidden="true" tabindex="-1"></a>    <span class="fu">theme</span>(<span class="at">axis.text.x =</span> <span class="fu">element_text</span>(<span class="at">size =</span> <span class="dv">11</span>),</span>
<span id="cb67-6"><a href="#cb67-6" aria-hidden="true" tabindex="-1"></a>          <span class="at">axis.text.y =</span> <span class="fu">element_text</span>(<span class="at">size =</span> <span class="dv">11</span>))</span>
<span id="cb67-7"><a href="#cb67-7" aria-hidden="true" tabindex="-1"></a>}</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
</div>
<hr>
<ul>
<li>Bins may matter again</li>
</ul>
<div class="cell">
<div class="sourceCode cell-code" id="cb68"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb68-1"><a href="#cb68-1" aria-hidden="true" tabindex="-1"></a>data_trn <span class="sc">|&gt;</span> <span class="fu">plot_freqpoly</span>(<span class="st">"sale_price"</span>)</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
<div class="cell-output-display">
<p><img src="002_exploratory_data_analysis_files/figure-html/u2-modeling-11-1.png" class="img-fluid" width="672"></p>
</div>
</div>
<hr>
</section>
<section id="simple-boxplots-for-numeric-variables-univariate" class="level3" data-number="2.5.7">
<h3 data-number="2.5.7" class="anchored" data-anchor-id="simple-boxplots-for-numeric-variables-univariate"><span class="header-section-number">2.5.7</span> Simple Boxplots for Numeric Variables (Univariate)</h3>
<p>Boxplots display</p>
<ul>
<li>Median as line</li>
<li>25%ile and 75%ile as hinges</li>
<li>Highest and lowest points within 1.5 * IQR (interquartile-range: difference between scores at 25% and 75%iles)</li>
<li>Outliers outside of 1.5 * IQR</li>
</ul>
<p>Define a boxplot function and use it (included in <code>fun_plots.r</code>)</p>
<div class="cell">
<div class="sourceCode cell-code" id="cb69"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb69-1"><a href="#cb69-1" aria-hidden="true" tabindex="-1"></a>plot_boxplot <span class="ot">&lt;-</span> <span class="cf">function</span>(df, x){</span>
<span id="cb69-2"><a href="#cb69-2" aria-hidden="true" tabindex="-1"></a>  x_label_size <span class="ot">&lt;-</span> <span class="fu">if_else</span>(skimr<span class="sc">::</span><span class="fu">n_unique</span>(df[[x]]) <span class="sc">&lt;</span> <span class="dv">7</span>, <span class="dv">11</span>, <span class="dv">7</span>)</span>
<span id="cb69-3"><a href="#cb69-3" aria-hidden="true" tabindex="-1"></a>  </span>
<span id="cb69-4"><a href="#cb69-4" aria-hidden="true" tabindex="-1"></a>  df <span class="sc">|&gt;</span></span>
<span id="cb69-5"><a href="#cb69-5" aria-hidden="true" tabindex="-1"></a>    <span class="fu">ggplot</span>(<span class="fu">aes</span>(<span class="at">x =</span> .data[[x]])) <span class="sc">+</span></span>
<span id="cb69-6"><a href="#cb69-6" aria-hidden="true" tabindex="-1"></a>    <span class="fu">geom_boxplot</span>() <span class="sc">+</span></span>
<span id="cb69-7"><a href="#cb69-7" aria-hidden="true" tabindex="-1"></a>    <span class="fu">theme</span>(<span class="at">axis.text.y =</span> <span class="fu">element_blank</span>(),</span>
<span id="cb69-8"><a href="#cb69-8" aria-hidden="true" tabindex="-1"></a>          <span class="at">axis.ticks.y =</span> <span class="fu">element_blank</span>(),</span>
<span id="cb69-9"><a href="#cb69-9" aria-hidden="true" tabindex="-1"></a>          <span class="at">axis.text.x =</span> <span class="fu">element_text</span>(<span class="at">angle =</span> <span class="dv">90</span>, <span class="at">size =</span> x_label_size, <span class="at">vjust =</span> <span class="fl">0.5</span>, <span class="at">hjust =</span> <span class="dv">1</span>))</span>
<span id="cb69-10"><a href="#cb69-10" aria-hidden="true" tabindex="-1"></a>}</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
</div>
<hr>
<p>Here is the plot for <code>sale_price</code></p>
<div class="cell">
<div class="sourceCode cell-code" id="cb70"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb70-1"><a href="#cb70-1" aria-hidden="true" tabindex="-1"></a>data_trn <span class="sc">|&gt;</span> <span class="fu">plot_boxplot</span>(<span class="st">"sale_price"</span>)</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
<div class="cell-output-display">
<p><img src="002_exploratory_data_analysis_files/figure-html/u2-modeling-13-1.png" class="img-fluid" width="672"></p>
</div>
</div>
<hr>
</section>
<section id="combined-boxplot-and-violin-plots-for-numeric-variables-univariate" class="level3" data-number="2.5.8">
<h3 data-number="2.5.8" class="anchored" data-anchor-id="combined-boxplot-and-violin-plots-for-numeric-variables-univariate"><span class="header-section-number">2.5.8</span> Combined Boxplot and Violin Plots for Numeric Variables (Univariate)</h3>
<p>The combination of a boxplot and violin plot is particularly useful</p>
<ul>
<li>This is our favorite</li>
<li>Get all the benefits of the boxplot</li>
<li>Can clearly see shape of distribution given the violin plot overlay</li>
<li>Can also clearly see the tails</li>
</ul>
<p>Define a combined plot (included in <code>fun_plots.r</code>)</p>
<div class="cell">
<div class="sourceCode cell-code" id="cb71"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb71-1"><a href="#cb71-1" aria-hidden="true" tabindex="-1"></a>plot_box_violin <span class="ot">&lt;-</span> <span class="cf">function</span>(df, x){</span>
<span id="cb71-2"><a href="#cb71-2" aria-hidden="true" tabindex="-1"></a>  x_label_size <span class="ot">&lt;-</span> <span class="fu">if_else</span>(skimr<span class="sc">::</span><span class="fu">n_unique</span>(df[[x]]) <span class="sc">&lt;</span> <span class="dv">7</span>, <span class="dv">11</span>, <span class="dv">7</span>)</span>
<span id="cb71-3"><a href="#cb71-3" aria-hidden="true" tabindex="-1"></a>  </span>
<span id="cb71-4"><a href="#cb71-4" aria-hidden="true" tabindex="-1"></a>  df <span class="sc">|&gt;</span></span>
<span id="cb71-5"><a href="#cb71-5" aria-hidden="true" tabindex="-1"></a>    <span class="fu">ggplot</span>(<span class="fu">aes</span>(<span class="at">x =</span> .data[[x]])) <span class="sc">+</span></span>
<span id="cb71-6"><a href="#cb71-6" aria-hidden="true" tabindex="-1"></a>    <span class="fu">geom_violin</span>(<span class="fu">aes</span>(<span class="at">y =</span> <span class="dv">0</span>), <span class="at">fill =</span> <span class="st">"green"</span>, <span class="at">color =</span> <span class="cn">NA</span>) <span class="sc">+</span></span>
<span id="cb71-7"><a href="#cb71-7" aria-hidden="true" tabindex="-1"></a>    <span class="fu">geom_boxplot</span>(<span class="at">width =</span> .<span class="dv">1</span>, <span class="at">fill =</span> <span class="cn">NA</span>, <span class="at">lwd =</span> <span class="fl">1.1</span>, <span class="at">fatten =</span> <span class="fl">1.1</span>) <span class="sc">+</span></span>
<span id="cb71-8"><a href="#cb71-8" aria-hidden="true" tabindex="-1"></a>    <span class="fu">theme</span>(<span class="at">axis.text.y =</span> <span class="fu">element_blank</span>(),</span>
<span id="cb71-9"><a href="#cb71-9" aria-hidden="true" tabindex="-1"></a>          <span class="at">axis.ticks.y =</span> <span class="fu">element_blank</span>(),</span>
<span id="cb71-10"><a href="#cb71-10" aria-hidden="true" tabindex="-1"></a>          <span class="at">axis.title.y =</span> <span class="fu">element_blank</span>(),</span>
<span id="cb71-11"><a href="#cb71-11" aria-hidden="true" tabindex="-1"></a>          <span class="at">axis.text.x =</span> <span class="fu">element_text</span>(<span class="at">angle =</span> <span class="dv">90</span>, <span class="at">size =</span> x_label_size, <span class="at">vjust =</span> <span class="fl">0.5</span>, <span class="at">hjust =</span> <span class="dv">1</span>))</span>
<span id="cb71-12"><a href="#cb71-12" aria-hidden="true" tabindex="-1"></a>}</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
</div>
<hr>
<p>Here is the plot for <code>sale_price</code></p>
<ul>
<li>In this instance, the skew is NOT due to only a few outliers</li>
</ul>
<div class="cell">
<div class="sourceCode cell-code" id="cb72"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb72-1"><a href="#cb72-1" aria-hidden="true" tabindex="-1"></a>data_trn <span class="sc">|&gt;</span> <span class="fu">plot_box_violin</span>(<span class="st">"sale_price"</span>)</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
<div class="cell-output-display">
<p><img src="002_exploratory_data_analysis_files/figure-html/u2-modeling-15-1.png" class="img-fluid" width="672"></p>
</div>
</div>
<hr>
<p><strong>Coding sidebar</strong>:</p>
<ul>
<li>You can make figures for all numeric variables at once using <code>select()</code> and <code>map()</code> as before</li>
</ul>
<div class="cell">
<div class="sourceCode cell-code" id="cb73"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb73-1"><a href="#cb73-1" aria-hidden="true" tabindex="-1"></a>data_trn <span class="sc">|&gt;</span> </span>
<span id="cb73-2"><a href="#cb73-2" aria-hidden="true" tabindex="-1"></a>  <span class="fu">select</span>(<span class="fu">where</span>(is.numeric)) <span class="sc">|&gt;</span> <span class="co"># &lt;1&gt; </span></span>
<span id="cb73-3"><a href="#cb73-3" aria-hidden="true" tabindex="-1"></a>  <span class="fu">names</span>() <span class="sc">|&gt;</span> </span>
<span id="cb73-4"><a href="#cb73-4" aria-hidden="true" tabindex="-1"></a>  <span class="fu">map</span>(\(name) <span class="fu">plot_box_violin</span>(<span class="at">df =</span> data_trn, <span class="at">x =</span> name)) <span class="sc">|&gt;</span> </span>
<span id="cb73-5"><a href="#cb73-5" aria-hidden="true" tabindex="-1"></a>  <span class="fu">plot_grid</span>(<span class="at">plotlist =</span> _, <span class="at">ncol =</span> <span class="dv">2</span>)</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
<div class="cell-output cell-output-stderr">
<pre><code>Warning: Removed 1 rows containing non-finite values (`stat_ydensity()`).</code></pre>
</div>
<div class="cell-output cell-output-stderr">
<pre><code>Warning: Removed 1 rows containing non-finite values (`stat_boxplot()`).</code></pre>
</div>
<div class="cell-output-display">
<p><img src="002_exploratory_data_analysis_files/figure-html/u2-modeling-16-1.png" class="img-fluid" width="672"></p>
</div>
</div>
<ol type="1">
<li>Now select numeric rather than factor but otherwise same as previous example</li>
</ol>
<hr>
</section>
<section id="summary-statistics-for-numeric-variables-univariate" class="level3" data-number="2.5.9">
<h3 data-number="2.5.9" class="anchored" data-anchor-id="summary-statistics-for-numeric-variables-univariate"><span class="header-section-number">2.5.9</span> Summary Statistics for Numeric Variables (Univariate)</h3>
<p><code>skim_all()</code> provided all the summary statistics you likely needed for numeric variables</p>
<ul>
<li>mean &amp; median (p50)</li>
<li>sd &amp; IQR (see difference between p25 and p75)</li>
<li>skew &amp; kurtosis</li>
</ul>
<p>You can get skim of only numeric variables if you like</p>
<div class="cell">
<div class="sourceCode cell-code" id="cb76"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb76-1"><a href="#cb76-1" aria-hidden="true" tabindex="-1"></a>data_trn <span class="sc">|&gt;</span> </span>
<span id="cb76-2"><a href="#cb76-2" aria-hidden="true" tabindex="-1"></a>  <span class="fu">skim_all</span>() <span class="sc">|&gt;</span> </span>
<span id="cb76-3"><a href="#cb76-3" aria-hidden="true" tabindex="-1"></a>  <span class="fu">filter</span>(skim_type <span class="sc">==</span> <span class="st">"numeric"</span>)</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
<div class="cell-output-display">

<table style="width: auto;" class="table table-condensed">
<caption>
Data summary
</caption>
<tbody>
<tr>
<td style="text-align:left;">
Name
</td>
<td style="text-align:left;">
data_trn
</td>
</tr>
<tr>
<td style="text-align:left;">
Number of rows
</td>
<td style="text-align:left;">
1465
</td>
</tr>
<tr>
<td style="text-align:left;">
Number of columns
</td>
<td style="text-align:left;">
10
</td>
</tr>
<tr>
<td style="text-align:left;">
_______________________
</td>
<td style="text-align:left;">
</td>
</tr>
<tr>
<td style="text-align:left;">
Column type frequency:
</td>
<td style="text-align:left;">
</td>
</tr>
<tr>
<td style="text-align:left;">
numeric
</td>
<td style="text-align:left;">
5
</td>
</tr>
<tr>
<td style="text-align:left;">
________________________
</td>
<td style="text-align:left;">
</td>
</tr>
<tr>
<td style="text-align:left;">
Group variables
</td>
<td style="text-align:left;">
None
</td>
</tr>
</tbody>

</table>
<p><strong>Variable type: numeric</strong></p>

<table>
<thead>
<tr>
<th style="text-align:left;">
skim_variable
</th>
<th style="text-align:right;">
n_missing
</th>
<th style="text-align:right;">
complete_rate
</th>
<th style="text-align:right;">
mean
</th>
<th style="text-align:right;">
sd
</th>
<th style="text-align:right;">
p0
</th>
<th style="text-align:right;">
p25
</th>
<th style="text-align:right;">
p50
</th>
<th style="text-align:right;">
p75
</th>
<th style="text-align:right;">
p100
</th>
<th style="text-align:right;">
skew
</th>
<th style="text-align:right;">
kurtosis
</th>
</tr>
</thead>
<tbody>
<tr>
<td style="text-align:left;">
sale_price
</td>
<td style="text-align:right;">
0
</td>
<td style="text-align:right;">
1
</td>
<td style="text-align:right;">
180696.15
</td>
<td style="text-align:right;">
78836.41
</td>
<td style="text-align:right;">
12789
</td>
<td style="text-align:right;">
129500
</td>
<td style="text-align:right;">
160000
</td>
<td style="text-align:right;">
213500
</td>
<td style="text-align:right;">
745000
</td>
<td style="text-align:right;">
1.64
</td>
<td style="text-align:right;">
4.60
</td>
</tr>
<tr>
<td style="text-align:left;">
gr_liv_area
</td>
<td style="text-align:right;">
0
</td>
<td style="text-align:right;">
1
</td>
<td style="text-align:right;">
1506.84
</td>
<td style="text-align:right;">
511.44
</td>
<td style="text-align:right;">
438
</td>
<td style="text-align:right;">
1128
</td>
<td style="text-align:right;">
1450
</td>
<td style="text-align:right;">
1759
</td>
<td style="text-align:right;">
5642
</td>
<td style="text-align:right;">
1.43
</td>
<td style="text-align:right;">
5.19
</td>
</tr>
<tr>
<td style="text-align:left;">
lot_area
</td>
<td style="text-align:right;">
0
</td>
<td style="text-align:right;">
1
</td>
<td style="text-align:right;">
10144.16
</td>
<td style="text-align:right;">
8177.55
</td>
<td style="text-align:right;">
1476
</td>
<td style="text-align:right;">
7500
</td>
<td style="text-align:right;">
9375
</td>
<td style="text-align:right;">
11362
</td>
<td style="text-align:right;">
164660
</td>
<td style="text-align:right;">
11.20
</td>
<td style="text-align:right;">
182.91
</td>
</tr>
<tr>
<td style="text-align:left;">
year_built
</td>
<td style="text-align:right;">
0
</td>
<td style="text-align:right;">
1
</td>
<td style="text-align:right;">
1971.35
</td>
<td style="text-align:right;">
29.65
</td>
<td style="text-align:right;">
1880
</td>
<td style="text-align:right;">
1953
</td>
<td style="text-align:right;">
1972
</td>
<td style="text-align:right;">
2000
</td>
<td style="text-align:right;">
2010
</td>
<td style="text-align:right;">
-0.54
</td>
<td style="text-align:right;">
-0.62
</td>
</tr>
<tr>
<td style="text-align:left;">
garage_cars
</td>
<td style="text-align:right;">
1
</td>
<td style="text-align:right;">
1
</td>
<td style="text-align:right;">
1.78
</td>
<td style="text-align:right;">
0.76
</td>
<td style="text-align:right;">
0
</td>
<td style="text-align:right;">
1
</td>
<td style="text-align:right;">
2
</td>
<td style="text-align:right;">
2
</td>
<td style="text-align:right;">
4
</td>
<td style="text-align:right;">
-0.26
</td>
<td style="text-align:right;">
0.10
</td>
</tr>
</tbody>

</table>
</div>
</div>
<hr>
</section>
<section id="bivariate-relationships-with-outcome" class="level3" data-number="2.5.10">
<h3 data-number="2.5.10" class="anchored" data-anchor-id="bivariate-relationships-with-outcome"><span class="header-section-number">2.5.10</span> Bivariate Relationships with Outcome</h3>
<p>Bivariate relationships with the outcome are useful to detect</p>
<ul>
<li>Which predictors display some relationship with the outcome</li>
<li>What feature engineering (transformations) might maximize that relationship</li>
<li>Are there any bivariate (model) outliers</li>
</ul>
<p>Again, we prefer visualizations but summary statistics are also available</p>
<hr>
</section>
<section id="scatterplots-for-numeric-variables-bivariate" class="level3" data-number="2.5.11">
<h3 data-number="2.5.11" class="anchored" data-anchor-id="scatterplots-for-numeric-variables-bivariate"><span class="header-section-number">2.5.11</span> Scatterplots for Numeric Variables (Bivariate)</h3>
<p>Scatterplots are the preferred visualization when both variables are numeric</p>
<p>Define a scatterplot function (included in <code>fun_plots.r</code>)</p>
<ul>
<li>add a simple line</li>
<li>add a LOWESS line (Locally Weighted Scatterplot Smoothing)</li>
<li>These lines are useful for considering shape of relationship</li>
</ul>
<div class="cell">
<div class="sourceCode cell-code" id="cb77"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb77-1"><a href="#cb77-1" aria-hidden="true" tabindex="-1"></a>plot_scatter <span class="ot">&lt;-</span> <span class="cf">function</span>(df, x, y){</span>
<span id="cb77-2"><a href="#cb77-2" aria-hidden="true" tabindex="-1"></a>  df <span class="sc">|&gt;</span></span>
<span id="cb77-3"><a href="#cb77-3" aria-hidden="true" tabindex="-1"></a>    <span class="fu">ggplot</span>(<span class="fu">aes</span>(<span class="at">x =</span> .data[[x]], <span class="at">y =</span> .data[[y]])) <span class="sc">+</span></span>
<span id="cb77-4"><a href="#cb77-4" aria-hidden="true" tabindex="-1"></a>    <span class="fu">geom_point</span>() <span class="sc">+</span></span>
<span id="cb77-5"><a href="#cb77-5" aria-hidden="true" tabindex="-1"></a>    <span class="fu">geom_smooth</span>(<span class="at">method =</span> <span class="st">"lm"</span>, <span class="at">formula =</span> y <span class="sc">~</span> x, <span class="at">col =</span> <span class="st">"red"</span>) <span class="sc">+</span></span>
<span id="cb77-6"><a href="#cb77-6" aria-hidden="true" tabindex="-1"></a>    <span class="fu">geom_smooth</span>(<span class="at">method =</span> <span class="st">"loess"</span>, <span class="at">formula =</span> y <span class="sc">~</span> x, <span class="at">col =</span> <span class="st">"green"</span>) <span class="sc">+</span></span>
<span id="cb77-7"><a href="#cb77-7" aria-hidden="true" tabindex="-1"></a>    <span class="fu">theme</span>(<span class="at">axis.text.x =</span> <span class="fu">element_text</span>(<span class="at">size =</span> <span class="dv">11</span>),</span>
<span id="cb77-8"><a href="#cb77-8" aria-hidden="true" tabindex="-1"></a>          <span class="at">axis.text.y =</span> <span class="fu">element_text</span>(<span class="at">size =</span> <span class="dv">11</span>))</span>
<span id="cb77-9"><a href="#cb77-9" aria-hidden="true" tabindex="-1"></a>}</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
</div>
<hr>
<p>Let’s consider relationship between <code>gr_liv_area</code> and <code>sale_price</code></p>
<ul>
<li>Care most about influential points (both model outlier and leverage)</li>
<li>Can be <em>typically</em> spotted in bivariate plots (but could do more sophisticated assessments)</li>
<li>We might:
<ul>
<li>retain as is</li>
<li>drop</li>
<li>bring to fence</li>
</ul></li>
</ul>
<p>If bivariate outliers are detected, you should return to cleaning mode to verify that they aren’t result of scoring/coding errors. If they are:</p>
<ul>
<li>Fix in full dataset</li>
<li>Use same train/test split after fixing</li>
</ul>
<div class="cell">
<div class="sourceCode cell-code" id="cb78"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb78-1"><a href="#cb78-1" aria-hidden="true" tabindex="-1"></a>data_trn <span class="sc">|&gt;</span> <span class="fu">plot_scatter</span>(<span class="st">"gr_liv_area"</span>, <span class="st">"sale_price"</span>)</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
<div class="cell-output-display">
<p><img src="002_exploratory_data_analysis_files/figure-html/u2-modeling-19-1.png" class="img-fluid" width="672"></p>
</div>
</div>
<hr>
<p>Here is another example where the relationship might be non-linear</p>
<div class="cell">
<div class="sourceCode cell-code" id="cb79"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb79-1"><a href="#cb79-1" aria-hidden="true" tabindex="-1"></a>data_trn <span class="sc">|&gt;</span> <span class="fu">plot_scatter</span>(<span class="st">"year_built"</span>, <span class="st">"sale_price"</span>)</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
<div class="cell-output-display">
<p><img src="002_exploratory_data_analysis_files/figure-html/u2-modeling-21-1.png" class="img-fluid" width="672"></p>
</div>
</div>
<hr>
<p>A transformation of <code>sale_price</code> might help the relationship with <span class="math inline">\(year\_built\)</span> but might hurt <code>gr_liv_area</code></p>
<p>Maybe need to transform both <code>sale_price</code> and <code>gr_liv_area</code> as both were skewed</p>
<p>This might require some more EDA but here is a start</p>
<ul>
<li>Quick and temporary Log (base e) of <code>sale_price</code></li>
<li>This doesn’t seem promising by itself</li>
</ul>
<div class="cell">
<div class="sourceCode cell-code" id="cb80"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb80-1"><a href="#cb80-1" aria-hidden="true" tabindex="-1"></a>data_trn <span class="sc">|&gt;</span> </span>
<span id="cb80-2"><a href="#cb80-2" aria-hidden="true" tabindex="-1"></a>  <span class="fu">mutate</span>(<span class="at">sale_price =</span> <span class="fu">log</span>(sale_price)) <span class="sc">|&gt;</span> </span>
<span id="cb80-3"><a href="#cb80-3" aria-hidden="true" tabindex="-1"></a>  <span class="fu">plot_scatter</span>(<span class="st">"gr_liv_area"</span>, <span class="st">"sale_price"</span>)</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
<div class="cell-output-display">
<p><img src="002_exploratory_data_analysis_files/figure-html/u2-modeling-22-1.png" class="img-fluid" width="672"></p>
</div>
<div class="sourceCode cell-code" id="cb81"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb81-1"><a href="#cb81-1" aria-hidden="true" tabindex="-1"></a>data_trn <span class="sc">|&gt;</span> </span>
<span id="cb81-2"><a href="#cb81-2" aria-hidden="true" tabindex="-1"></a>  <span class="fu">mutate</span>(<span class="at">sale_price =</span> <span class="fu">log</span>(sale_price)) <span class="sc">|&gt;</span></span>
<span id="cb81-3"><a href="#cb81-3" aria-hidden="true" tabindex="-1"></a>  <span class="fu">plot_scatter</span>(<span class="st">"year_built"</span>, <span class="st">"sale_price"</span>)</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
<div class="cell-output-display">
<p><img src="002_exploratory_data_analysis_files/figure-html/u2-modeling-22-2.png" class="img-fluid" width="672"></p>
</div>
</div>
<hr>
<p>Can make scatterplots for ordered factors as well</p>
<ul>
<li>But other (perhaps better) options also exist for this combination of variable classes.</li>
<li>Use <code>as.numeric()</code> to allow for lm and LOWESS lines on otherwise categorical variable</li>
</ul>
<div class="cell">
<div class="sourceCode cell-code" id="cb82"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb82-1"><a href="#cb82-1" aria-hidden="true" tabindex="-1"></a>data_trn <span class="sc">|&gt;</span> </span>
<span id="cb82-2"><a href="#cb82-2" aria-hidden="true" tabindex="-1"></a>  <span class="fu">mutate</span>(<span class="at">overall_qual =</span> <span class="fu">as.numeric</span>(overall_qual)) <span class="sc">|&gt;</span> </span>
<span id="cb82-3"><a href="#cb82-3" aria-hidden="true" tabindex="-1"></a>  <span class="fu">plot_scatter</span>(<span class="st">"overall_qual"</span>, <span class="st">"sale_price"</span>)</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
<div class="cell-output-display">
<p><img src="002_exploratory_data_analysis_files/figure-html/u2-modeling-23-1.png" class="img-fluid" width="672"></p>
</div>
</div>
<hr>
<p><strong>Coding sidebar</strong>: Use <code>jitter()</code> with x to help with overplotting</p>
<div class="cell">
<div class="sourceCode cell-code" id="cb83"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb83-1"><a href="#cb83-1" aria-hidden="true" tabindex="-1"></a>data_trn <span class="sc">|&gt;</span> </span>
<span id="cb83-2"><a href="#cb83-2" aria-hidden="true" tabindex="-1"></a>  <span class="fu">mutate</span>(<span class="at">overall_qual =</span> <span class="fu">jitter</span>(<span class="fu">as.numeric</span>(overall_qual))) <span class="sc">|&gt;</span> </span>
<span id="cb83-3"><a href="#cb83-3" aria-hidden="true" tabindex="-1"></a>  <span class="fu">plot_scatter</span>(<span class="st">"overall_qual"</span>, <span class="st">"sale_price"</span>)</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
<div class="cell-output-display">
<p><img src="002_exploratory_data_analysis_files/figure-html/u2-modeling-24-1.png" class="img-fluid" width="672"></p>
</div>
</div>
<hr>
</section>
<section id="correlations-correlation-plots-for-numeric-variables-bivariate" class="level3" data-number="2.5.12">
<h3 data-number="2.5.12" class="anchored" data-anchor-id="correlations-correlation-plots-for-numeric-variables-bivariate"><span class="header-section-number">2.5.12</span> Correlations &amp; Correlation Plots for Numeric Variables (Bivariate)</h3>
<p>Correlations are useful summary statistics for numeric variables</p>
<p>Some statistical algorithms are sensitive to high correlations among features (multi-collinearity)</p>
<p>At best, highly correlated features add unnecessary flexibility and can lead to overfitting</p>
<hr>
<p>We can visualize correlations among predictors/features using <code>corrplot.mixed()</code> from <code>corrplot</code> package</p>
<ul>
<li>Best for numeric variables</li>
<li>Can include ordered categorical or two level unordered categorical variables if transformed to numeric</li>
<li>Can include unordered categorical variables with &gt; 2 levels if first transformed appropriately (e.g., dummy features, not demonstrated yet)</li>
<li>Works best with relatively small set of variables</li>
<li>Need to consider how to handle missing values</li>
</ul>
<hr>
<div class="cell">
<div class="sourceCode cell-code" id="cb84"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb84-1"><a href="#cb84-1" aria-hidden="true" tabindex="-1"></a>data_trn <span class="sc">|&gt;</span> </span>
<span id="cb84-2"><a href="#cb84-2" aria-hidden="true" tabindex="-1"></a>  <span class="fu">mutate</span>(<span class="at">overall_qual =</span> <span class="fu">as.numeric</span>(overall_qual),</span>
<span id="cb84-3"><a href="#cb84-3" aria-hidden="true" tabindex="-1"></a>         <span class="at">garage_qual =</span> <span class="fu">as.numeric</span>(garage_qual)) <span class="sc">|&gt;</span> </span>
<span id="cb84-4"><a href="#cb84-4" aria-hidden="true" tabindex="-1"></a>  <span class="fu">select</span>(<span class="fu">where</span>(is.numeric)) <span class="sc">|&gt;</span> </span>
<span id="cb84-5"><a href="#cb84-5" aria-hidden="true" tabindex="-1"></a>  <span class="fu">cor</span>(<span class="at">use =</span> <span class="st">"pairwise.complete.obs"</span>) <span class="sc">|&gt;</span> </span>
<span id="cb84-6"><a href="#cb84-6" aria-hidden="true" tabindex="-1"></a>  corrplot<span class="sc">::</span><span class="fu">corrplot.mixed</span>() <span class="co"># &lt;1&gt;</span></span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
<div class="cell-output-display">
<p><img src="002_exploratory_data_analysis_files/figure-html/u2-modeling-27-1.png" class="img-fluid" width="672"></p>
</div>
</div>
<ol type="1">
<li>Note use of namespace (<code>corrplot::corrplot.mixed()</code>) to call this function from <code>corrplot</code> package</li>
</ol>
<hr>
</section>
<section id="grouped-box-violin-plots-for-categorical-and-numeric-bivariate" class="level3" data-number="2.5.13">
<h3 data-number="2.5.13" class="anchored" data-anchor-id="grouped-box-violin-plots-for-categorical-and-numeric-bivariate"><span class="header-section-number">2.5.13</span> Grouped Box + Violin Plots for Categorical and Numeric (Bivariate)</h3>
<p>A grouped version of the combined box and violin plot is our preferred visualization for relationship between categorical and numeric variables (included in <code>fun_plots.r</code>)</p>
<ul>
<li>Often best when feature is categorical and outcome is numeric but can reverse</li>
<li>Can use with ordered or unordered categorical variable</li>
<li><span class="citation" data-cites="RDS">Wickham, Çetinkaya-Rundel, and Grolemund (<a href="#ref-RDS" role="doc-biblioref">2023</a>)</span> also describes use of grouped frequency polygons for this combination of variable classes</li>
</ul>
<div class="cell">
<div class="sourceCode cell-code" id="cb85"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb85-1"><a href="#cb85-1" aria-hidden="true" tabindex="-1"></a>plot_grouped_box_violin <span class="ot">&lt;-</span> <span class="cf">function</span>(df, x, y){</span>
<span id="cb85-2"><a href="#cb85-2" aria-hidden="true" tabindex="-1"></a>  x_label_size <span class="ot">&lt;-</span> <span class="fu">if_else</span>(skimr<span class="sc">::</span><span class="fu">n_unique</span>(df[[x]]) <span class="sc">&lt;</span> <span class="dv">7</span>, <span class="dv">11</span>, <span class="dv">7</span>)</span>
<span id="cb85-3"><a href="#cb85-3" aria-hidden="true" tabindex="-1"></a>  </span>
<span id="cb85-4"><a href="#cb85-4" aria-hidden="true" tabindex="-1"></a>  df <span class="sc">|&gt;</span></span>
<span id="cb85-5"><a href="#cb85-5" aria-hidden="true" tabindex="-1"></a>    <span class="fu">ggplot</span>(<span class="fu">aes</span>(<span class="at">x =</span> .data[[x]], <span class="at">y =</span> .data[[y]])) <span class="sc">+</span></span>
<span id="cb85-6"><a href="#cb85-6" aria-hidden="true" tabindex="-1"></a>    <span class="fu">geom_violin</span>(<span class="at">fill =</span> <span class="st">"green"</span>, <span class="at">color =</span> <span class="cn">NA</span>) <span class="sc">+</span></span>
<span id="cb85-7"><a href="#cb85-7" aria-hidden="true" tabindex="-1"></a>    <span class="fu">geom_boxplot</span>(<span class="at">width =</span> .<span class="dv">1</span>, <span class="at">fill =</span> <span class="cn">NA</span>, <span class="at">lwd =</span> <span class="fl">1.1</span>, <span class="at">fatten =</span> <span class="fl">1.1</span>) <span class="sc">+</span></span>
<span id="cb85-8"><a href="#cb85-8" aria-hidden="true" tabindex="-1"></a>    <span class="fu">theme</span>(<span class="at">axis.text.x =</span> <span class="fu">element_text</span>(<span class="at">angle =</span> <span class="dv">90</span>, <span class="at">size =</span> x_label_size, </span>
<span id="cb85-9"><a href="#cb85-9" aria-hidden="true" tabindex="-1"></a>                                     <span class="at">vjust =</span> <span class="fl">0.5</span>, <span class="at">hjust =</span> <span class="dv">1</span>),</span>
<span id="cb85-10"><a href="#cb85-10" aria-hidden="true" tabindex="-1"></a>          <span class="at">axis.text.y =</span> <span class="fu">element_text</span>(<span class="at">size =</span> <span class="dv">11</span>))</span>
<span id="cb85-11"><a href="#cb85-11" aria-hidden="true" tabindex="-1"></a>}</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
</div>
<hr>
<p>Here is the relationship between <code>overall_qual</code> and <code>sale_price</code></p>
<ul>
<li>Tend to prefer this over the scatterplot (with <code>as.numeric()</code>) for ordered categorical variables</li>
<li>Increasing spread of <code>sale_price</code> at higher levels of <code>overall_qual</code> is clearer in this plot</li>
</ul>
<div class="cell">
<div class="sourceCode cell-code" id="cb86"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb86-1"><a href="#cb86-1" aria-hidden="true" tabindex="-1"></a>data_trn <span class="sc">|&gt;</span> <span class="fu">plot_grouped_box_violin</span>(<span class="st">"overall_qual"</span>, <span class="st">"sale_price"</span>)</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
<div class="cell-output-display">
<p><img src="002_exploratory_data_analysis_files/figure-html/u2-modeling-29-1.png" class="img-fluid" width="672"></p>
</div>
</div>
<hr>
<p>Here is a grouped box + violin with an unordered categorical variable</p>
<ul>
<li>More variation and skew in <code>sale_price</code> for one family homes (additional features, moderators?)</li>
<li>Position of townhouse (interior vs.&nbsp;exterior) seems to matter (don’t collapse?)</li>
</ul>
<div class="cell">
<div class="sourceCode cell-code" id="cb87"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb87-1"><a href="#cb87-1" aria-hidden="true" tabindex="-1"></a>data_trn <span class="sc">|&gt;</span> <span class="fu">plot_grouped_box_violin</span>(<span class="st">"bldg_type"</span>, <span class="st">"sale_price"</span>)</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
<div class="cell-output-display">
<p><img src="002_exploratory_data_analysis_files/figure-html/u2-modeling-30-1.png" class="img-fluid" width="672"></p>
</div>
</div>
<hr>
<p>When we have a categorical predictor (ordered or unordered) and a numeric outcome, we often want to see both the relationship between the variables AND the variability on the categorical variable alone.</p>
<p>We like this combined plot enough when doing EDA to provide a specific function (included in <code>fun_plots.r</code>)!</p>
<p>It is our go to for understanding the potential effect of a categorical predictor</p>
<div class="cell">
<div class="sourceCode cell-code" id="cb88"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb88-1"><a href="#cb88-1" aria-hidden="true" tabindex="-1"></a>plot_categorical <span class="ot">&lt;-</span> <span class="cf">function</span>(df, x, y, <span class="at">ordered =</span> <span class="cn">FALSE</span>){</span>
<span id="cb88-2"><a href="#cb88-2" aria-hidden="true" tabindex="-1"></a>  <span class="cf">if</span> (ordered) {</span>
<span id="cb88-3"><a href="#cb88-3" aria-hidden="true" tabindex="-1"></a>    df <span class="ot">&lt;-</span> df <span class="sc">|&gt;</span></span>
<span id="cb88-4"><a href="#cb88-4" aria-hidden="true" tabindex="-1"></a>      <span class="fu">mutate</span>(<span class="sc">!!</span><span class="at">x :=</span> <span class="fu">fct_reorder</span>(.data[[x]], .data[[y]]))</span>
<span id="cb88-5"><a href="#cb88-5" aria-hidden="true" tabindex="-1"></a>  }</span>
<span id="cb88-6"><a href="#cb88-6" aria-hidden="true" tabindex="-1"></a>  </span>
<span id="cb88-7"><a href="#cb88-7" aria-hidden="true" tabindex="-1"></a>  x_label_size <span class="ot">&lt;-</span> <span class="fu">if_else</span>(skimr<span class="sc">::</span><span class="fu">n_unique</span>(df[[x]]) <span class="sc">&lt;</span> <span class="dv">7</span>, <span class="dv">11</span>, <span class="dv">7</span>)</span>
<span id="cb88-8"><a href="#cb88-8" aria-hidden="true" tabindex="-1"></a>  </span>
<span id="cb88-9"><a href="#cb88-9" aria-hidden="true" tabindex="-1"></a>  p_bar <span class="ot">&lt;-</span> df <span class="sc">|&gt;</span></span>
<span id="cb88-10"><a href="#cb88-10" aria-hidden="true" tabindex="-1"></a>    <span class="fu">ggplot</span>(<span class="fu">aes</span>(<span class="at">x =</span> .data[[x]])) <span class="sc">+</span></span>
<span id="cb88-11"><a href="#cb88-11" aria-hidden="true" tabindex="-1"></a>    <span class="fu">geom_bar</span>()  <span class="sc">+</span></span>
<span id="cb88-12"><a href="#cb88-12" aria-hidden="true" tabindex="-1"></a>    <span class="fu">theme</span>(<span class="at">axis.text.x =</span> <span class="fu">element_text</span>(<span class="at">angle =</span> <span class="dv">90</span>, <span class="at">size =</span> x_label_size, </span>
<span id="cb88-13"><a href="#cb88-13" aria-hidden="true" tabindex="-1"></a>                                     <span class="at">vjust =</span> <span class="fl">0.5</span>, <span class="at">hjust =</span> <span class="dv">1</span>),</span>
<span id="cb88-14"><a href="#cb88-14" aria-hidden="true" tabindex="-1"></a>          <span class="at">axis.text.y =</span> <span class="fu">element_text</span>(<span class="at">size =</span> <span class="dv">11</span>))</span>
<span id="cb88-15"><a href="#cb88-15" aria-hidden="true" tabindex="-1"></a>  </span>
<span id="cb88-16"><a href="#cb88-16" aria-hidden="true" tabindex="-1"></a>  p_box <span class="ot">&lt;-</span> df <span class="sc">|&gt;</span></span>
<span id="cb88-17"><a href="#cb88-17" aria-hidden="true" tabindex="-1"></a>    <span class="fu">ggplot</span>(<span class="fu">aes</span>(<span class="at">x =</span> .data[[x]], <span class="at">y =</span> .data[[y]])) <span class="sc">+</span></span>
<span id="cb88-18"><a href="#cb88-18" aria-hidden="true" tabindex="-1"></a>    <span class="fu">geom_violin</span>(<span class="at">fill =</span> <span class="st">"green"</span>, <span class="at">color =</span> <span class="cn">NA</span>) <span class="sc">+</span></span>
<span id="cb88-19"><a href="#cb88-19" aria-hidden="true" tabindex="-1"></a>    <span class="fu">geom_boxplot</span>(<span class="at">width =</span> .<span class="dv">1</span>, <span class="at">fill =</span> <span class="cn">NA</span>, <span class="at">lwd =</span> <span class="fl">1.1</span>, <span class="at">fatten =</span> <span class="fl">1.1</span>) <span class="sc">+</span></span>
<span id="cb88-20"><a href="#cb88-20" aria-hidden="true" tabindex="-1"></a>    <span class="fu">theme</span>(<span class="at">axis.text.x =</span> <span class="fu">element_text</span>(<span class="at">angle =</span> <span class="dv">90</span>, <span class="at">size =</span> x_label_size, </span>
<span id="cb88-21"><a href="#cb88-21" aria-hidden="true" tabindex="-1"></a>                                     <span class="at">vjust =</span> <span class="fl">0.5</span>, <span class="at">hjust =</span> <span class="dv">1</span>),</span>
<span id="cb88-22"><a href="#cb88-22" aria-hidden="true" tabindex="-1"></a>          <span class="at">axis.text.y =</span> <span class="fu">element_text</span>(<span class="at">size =</span> <span class="dv">11</span>))</span>
<span id="cb88-23"><a href="#cb88-23" aria-hidden="true" tabindex="-1"></a>  </span>
<span id="cb88-24"><a href="#cb88-24" aria-hidden="true" tabindex="-1"></a>  <span class="fu">return</span>(<span class="fu">list</span>(p_bar, p_box))</span>
<span id="cb88-25"><a href="#cb88-25" aria-hidden="true" tabindex="-1"></a>}</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
</div>
<hr>
<p><code>sale_price</code> by <code>bldg_type</code></p>
<div class="cell">
<div class="sourceCode cell-code" id="cb89"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb89-1"><a href="#cb89-1" aria-hidden="true" tabindex="-1"></a>data_trn <span class="sc">|&gt;</span> <span class="fu">plot_categorical</span>(<span class="st">"bldg_type"</span>, <span class="st">"sale_price"</span>) <span class="sc">|&gt;</span> </span>
<span id="cb89-2"><a href="#cb89-2" aria-hidden="true" tabindex="-1"></a>  <span class="fu">plot_grid</span>(<span class="at">plotlist =</span> _, <span class="at">ncol =</span> <span class="dv">1</span>)</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
<div class="cell-output-display">
<p><img src="002_exploratory_data_analysis_files/figure-html/unnamed-chunk-17-1.png" class="img-fluid" width="672"></p>
</div>
</div>
<hr>
</section>
<section id="stacked-barplots-for-categorical-bivariate" class="level3" data-number="2.5.14">
<h3 data-number="2.5.14" class="anchored" data-anchor-id="stacked-barplots-for-categorical-bivariate"><span class="header-section-number">2.5.14</span> Stacked Barplots for Categorical (Bivariate)</h3>
<p>Stacked Barplots:</p>
<ul>
<li>Can be useful with both ordered and unordered categorical variables</li>
<li>Can create with either raw counts or percentages.
<ul>
<li>Displays different perspective (particularly with uneven distributions across levels)</li>
<li>Depends on your question</li>
</ul></li>
<li>Often, you will place the outcome on the x-axis and the feature is coded by fill</li>
</ul>
<div class="cell">
<div class="sourceCode cell-code" id="cb90"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb90-1"><a href="#cb90-1" aria-hidden="true" tabindex="-1"></a>plot_grouped_barplot_count <span class="ot">&lt;-</span> <span class="cf">function</span>(df, x, y){</span>
<span id="cb90-2"><a href="#cb90-2" aria-hidden="true" tabindex="-1"></a>  x_label_size <span class="ot">&lt;-</span> <span class="fu">if_else</span>(skimr<span class="sc">::</span><span class="fu">n_unique</span>(df[[x]]) <span class="sc">&lt;</span> <span class="dv">7</span>, <span class="dv">11</span>, <span class="dv">7</span>)</span>
<span id="cb90-3"><a href="#cb90-3" aria-hidden="true" tabindex="-1"></a>  </span>
<span id="cb90-4"><a href="#cb90-4" aria-hidden="true" tabindex="-1"></a>  df <span class="sc">|&gt;</span></span>
<span id="cb90-5"><a href="#cb90-5" aria-hidden="true" tabindex="-1"></a>    <span class="fu">ggplot</span>(<span class="fu">aes</span>(<span class="at">x =</span> .data[[y]], <span class="at">fill =</span> .data[[x]])) <span class="sc">+</span></span>
<span id="cb90-6"><a href="#cb90-6" aria-hidden="true" tabindex="-1"></a>    <span class="fu">geom_bar</span>(<span class="at">position =</span> <span class="st">"stack"</span>) <span class="sc">+</span></span>
<span id="cb90-7"><a href="#cb90-7" aria-hidden="true" tabindex="-1"></a>    <span class="fu">theme</span>(<span class="at">axis.text.x =</span> <span class="fu">element_text</span>(<span class="at">angle =</span> <span class="dv">90</span>, <span class="at">size =</span> x_label_size, </span>
<span id="cb90-8"><a href="#cb90-8" aria-hidden="true" tabindex="-1"></a>                                     <span class="at">vjust =</span> <span class="fl">0.5</span>, <span class="at">hjust =</span> <span class="dv">1</span>),</span>
<span id="cb90-9"><a href="#cb90-9" aria-hidden="true" tabindex="-1"></a>          <span class="at">axis.text.y =</span> <span class="fu">element_text</span>(<span class="at">size =</span> <span class="dv">11</span>))</span>
<span id="cb90-10"><a href="#cb90-10" aria-hidden="true" tabindex="-1"></a>}</span>
<span id="cb90-11"><a href="#cb90-11" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb90-12"><a href="#cb90-12" aria-hidden="true" tabindex="-1"></a>plot_grouped_barplot_percent <span class="ot">&lt;-</span> <span class="cf">function</span>(df, x, y){</span>
<span id="cb90-13"><a href="#cb90-13" aria-hidden="true" tabindex="-1"></a>  x_label_size <span class="ot">&lt;-</span> <span class="fu">if_else</span>(skimr<span class="sc">::</span><span class="fu">n_unique</span>(df[[x]]) <span class="sc">&lt;</span> <span class="dv">7</span>, <span class="dv">11</span>, <span class="dv">7</span>)</span>
<span id="cb90-14"><a href="#cb90-14" aria-hidden="true" tabindex="-1"></a>  </span>
<span id="cb90-15"><a href="#cb90-15" aria-hidden="true" tabindex="-1"></a>  df <span class="sc">|&gt;</span></span>
<span id="cb90-16"><a href="#cb90-16" aria-hidden="true" tabindex="-1"></a>    <span class="fu">ggplot</span>(<span class="fu">aes</span>(<span class="at">x =</span> .data[[y]], <span class="at">fill =</span> .data[[x]])) <span class="sc">+</span></span>
<span id="cb90-17"><a href="#cb90-17" aria-hidden="true" tabindex="-1"></a>    <span class="fu">geom_bar</span>(<span class="at">position =</span> <span class="st">"fill"</span>) <span class="sc">+</span></span>
<span id="cb90-18"><a href="#cb90-18" aria-hidden="true" tabindex="-1"></a>    <span class="fu">labs</span>(<span class="at">y =</span> <span class="st">"Proportion"</span>) <span class="sc">+</span></span>
<span id="cb90-19"><a href="#cb90-19" aria-hidden="true" tabindex="-1"></a>    <span class="fu">theme</span>(<span class="at">axis.text.x =</span> <span class="fu">element_text</span>(<span class="at">angle =</span> <span class="dv">90</span>, <span class="at">size =</span> x_label_size, </span>
<span id="cb90-20"><a href="#cb90-20" aria-hidden="true" tabindex="-1"></a>                                     <span class="at">vjust =</span> <span class="fl">0.5</span>, <span class="at">hjust =</span> <span class="dv">1</span>),</span>
<span id="cb90-21"><a href="#cb90-21" aria-hidden="true" tabindex="-1"></a>          <span class="at">axis.text.y =</span> <span class="fu">element_text</span>(<span class="at">size =</span> <span class="dv">11</span>))</span>
<span id="cb90-22"><a href="#cb90-22" aria-hidden="true" tabindex="-1"></a>}</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
</div>
<hr>
<p>For example, if we wanted to learn about how <code>bldg_type</code> varies by <code>lot_config</code>, see these plots</p>
<div class="cell">
<div class="sourceCode cell-code" id="cb91"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb91-1"><a href="#cb91-1" aria-hidden="true" tabindex="-1"></a>data_trn <span class="sc">|&gt;</span> <span class="fu">plot_grouped_barplot_count</span>(<span class="st">"lot_config"</span>, <span class="st">"bldg_type"</span>)</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
<div class="cell-output-display">
<p><img src="002_exploratory_data_analysis_files/figure-html/u2-modeling-33-1.png" class="img-fluid" width="672"></p>
</div>
</div>
<div class="cell">
<div class="sourceCode cell-code" id="cb92"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb92-1"><a href="#cb92-1" aria-hidden="true" tabindex="-1"></a>data_trn <span class="sc">|&gt;</span> <span class="fu">plot_grouped_barplot_percent</span>(<span class="st">"lot_config"</span>, <span class="st">"bldg_type"</span>)</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
<div class="cell-output-display">
<p><img src="002_exploratory_data_analysis_files/figure-html/u2-modeling-34-1.png" class="img-fluid" width="672"></p>
</div>
</div>
<hr>
<p>May want to plot both ways</p>
<div class="cell">
<div class="sourceCode cell-code" id="cb93"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb93-1"><a href="#cb93-1" aria-hidden="true" tabindex="-1"></a>data_trn <span class="sc">|&gt;</span> <span class="fu">plot_grouped_barplot_percent</span>(<span class="st">"lot_config"</span>, <span class="st">"bldg_type"</span>)</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
<div class="cell-output-display">
<p><img src="002_exploratory_data_analysis_files/figure-html/u2-modeling-35-1.png" class="img-fluid" width="672"></p>
</div>
</div>
<div class="cell">
<div class="sourceCode cell-code" id="cb94"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb94-1"><a href="#cb94-1" aria-hidden="true" tabindex="-1"></a>data_trn <span class="sc">|&gt;</span> <span class="fu">plot_grouped_barplot_percent</span>(<span class="st">"bldg_type"</span>, <span class="st">"lot_config"</span>)</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
<div class="cell-output-display">
<p><img src="002_exploratory_data_analysis_files/figure-html/u2-modeling-36-1.png" class="img-fluid" width="672"></p>
</div>
</div>
<hr>
</section>
<section id="tile-plot-for-ordered-categorical-bivariate" class="level3" data-number="2.5.15">
<h3 data-number="2.5.15" class="anchored" data-anchor-id="tile-plot-for-ordered-categorical-bivariate"><span class="header-section-number">2.5.15</span> Tile Plot for Ordered Categorical (Bivariate)</h3>
<p>Tile plots may be useful if both categorical variables are ordered</p>
<div class="cell">
<div class="sourceCode cell-code" id="cb95"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb95-1"><a href="#cb95-1" aria-hidden="true" tabindex="-1"></a>plot_tile <span class="ot">&lt;-</span> <span class="cf">function</span>(df, x, y){</span>
<span id="cb95-2"><a href="#cb95-2" aria-hidden="true" tabindex="-1"></a>  df <span class="sc">|&gt;</span></span>
<span id="cb95-3"><a href="#cb95-3" aria-hidden="true" tabindex="-1"></a>    <span class="fu">count</span>(.data[[x]], .data[[y]]) <span class="sc">|&gt;</span></span>
<span id="cb95-4"><a href="#cb95-4" aria-hidden="true" tabindex="-1"></a>    <span class="fu">ggplot</span>(<span class="fu">aes</span>(<span class="at">x =</span> .data[[x]], <span class="at">y =</span> .data[[y]])) <span class="sc">+</span></span>
<span id="cb95-5"><a href="#cb95-5" aria-hidden="true" tabindex="-1"></a>    <span class="fu">geom_tile</span>(<span class="at">mapping =</span> <span class="fu">aes</span>(<span class="at">fill =</span> n))</span>
<span id="cb95-6"><a href="#cb95-6" aria-hidden="true" tabindex="-1"></a>}</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
</div>
<hr>
<div class="cell">
<div class="sourceCode cell-code" id="cb96"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb96-1"><a href="#cb96-1" aria-hidden="true" tabindex="-1"></a>data_trn <span class="sc">|&gt;</span> <span class="fu">plot_tile</span>(<span class="st">"overall_qual"</span>, <span class="st">"garage_qual"</span>)</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
<div class="cell-output-display">
<p><img src="002_exploratory_data_analysis_files/figure-html/u2-modeling-38-1.png" class="img-fluid" width="672"></p>
</div>
</div>
<hr>
<p>You might also consider a scatterplot with jitter in this instance</p>
<div class="cell">
<div class="sourceCode cell-code" id="cb97"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb97-1"><a href="#cb97-1" aria-hidden="true" tabindex="-1"></a>data_trn <span class="sc">|&gt;</span> </span>
<span id="cb97-2"><a href="#cb97-2" aria-hidden="true" tabindex="-1"></a>  <span class="fu">mutate</span>(<span class="at">overall_qual =</span> <span class="fu">jitter</span>(<span class="fu">as.numeric</span>(overall_qual)),</span>
<span id="cb97-3"><a href="#cb97-3" aria-hidden="true" tabindex="-1"></a>         <span class="at">garage_qual =</span> <span class="fu">as.numeric</span>(garage_qual)) <span class="sc">|&gt;</span> </span>
<span id="cb97-4"><a href="#cb97-4" aria-hidden="true" tabindex="-1"></a>  <span class="fu">plot_scatter</span>(<span class="st">"overall_qual"</span>, <span class="st">"garage_qual"</span>)</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
<div class="cell-output-display">
<p><img src="002_exploratory_data_analysis_files/figure-html/u2-modeling-39-1.png" class="img-fluid" width="672"></p>
</div>
</div>
<hr>
</section>
<section id="two-way-tables-for-categorical-variables-bivariate" class="level3" data-number="2.5.16">
<h3 data-number="2.5.16" class="anchored" data-anchor-id="two-way-tables-for-categorical-variables-bivariate"><span class="header-section-number">2.5.16</span> Two-way Tables for Categorical Variables (Bivariate)</h3>
<p>Two-way tables are sometimes a useful summary statistic for two categorical variables. We can use a 2-variable form of the tab function, <code>tab2()</code>, from my function scripts for this</p>
<p>For example, the relationship between <code>bldg_type</code> and <code>lot_config</code></p>
<div class="cell">
<div class="sourceCode cell-code" id="cb98"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb98-1"><a href="#cb98-1" aria-hidden="true" tabindex="-1"></a>data_trn <span class="sc">|&gt;</span> <span class="fu">tab2</span>(bldg_type, lot_config)</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
<div class="cell-output cell-output-stdout">
<pre><code>   bldg_type corner culdsac fr2 fr3 inside
      duplex     13       0   3   0     47
     one_fam    221      73  29   1    892
    town_end      8       5   3   0     92
 town_inside      0       3   3   0     40
     two_fam      6       0   1   1     24</code></pre>
</div>
</div>
<hr>
</section>
</section>
<section id="working-with-recipes" class="level2" data-number="2.6">
<h2 data-number="2.6" class="anchored" data-anchor-id="working-with-recipes"><span class="header-section-number">2.6</span> Working with Recipes</h2>
<p>Recipes are used for feature engineering in <code>tidymodels</code> using the <a href="https://recipes.tidymodels.org/"><code>recipes</code></a> package</p>
<ul>
<li>Used for transforming raw predictors into features used in our models</li>
<li>Describes all steps to make feature matrix. For example:
<ul>
<li>Transforming factors into “dummy” features if needed</li>
<li>Linear and non-linear transformations (e.g., log, box-cox)</li>
<li>Polynomials and interactions (i.e., <code>x1 * x1</code> or <code>x1 * x2</code>)</li>
<li>Missing value imputations</li>
</ul></li>
<li>Proper use of recipes is an important tool to prevent data leakage between train and either validation or test.</li>
<li>Recipes use only information from the training set in all feature engineering</li>
<li>Consider example of standardizing <code>x1</code> for a feature in train vs.&nbsp;validation and test. Must use mean and sd from TRAIN to standardize <code>x1</code> in train, validate, and test. VERY IMPORTANT.</li>
</ul>
<p>We use recipes in a two step process - <code>prep()</code> and <code>bake()</code></p>
<ul>
<li>“Prepping” a recipe involves calculating any statistics needed for the transformations that will be applied to engineer features (e.g., mean and standard deviation to normalize a numeric variable).
<ul>
<li>Prepping is done with the <code>prep()</code> function.</li>
<li>Prepping is <strong>always</strong> done only with training data. A “prepped” recipe does not derive any statistics from validation or test sets.</li>
</ul></li>
<li>“Baking” is the process of calculating the features
<ul>
<li>Baking is done with the <code>bake()</code> function.</li>
<li>We used our prepped recipe when we bake.</li>
<li>Whereas we only prep a recipe with training data, we can use a prepped recipe to bake features from any dataset (training, validation, or test).</li>
</ul></li>
</ul>
<hr>
<p>We will work with recipes extensively when model building starting in unit 3</p>
<p>For now, we will only use the recipe to indicate roles as a gentle introduction.</p>
<p>We will expand on this recipe in unit 3</p>
<p>Recipe syntax is very similar to generic <code>tidyverse</code> syntax (created by same group)</p>
<ul>
<li>Actually a subset of <code>tidyverse</code> functions</li>
<li>Less flexible/powerful but focused on our needs and easier to learn</li>
<li>You will eventually know both</li>
</ul>
<hr>
<p>Recipes are used in Modeling scripts (which is a third type of script after cleaning and modeling EDA scripts)</p>
<ul>
<li>Lets reload training again to pretend we are starting a new script</li>
</ul>
<div class="cell">
<div class="sourceCode cell-code" id="cb100"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb100-1"><a href="#cb100-1" aria-hidden="true" tabindex="-1"></a> data_trn <span class="ot">&lt;-</span> <span class="fu">read_csv</span>(<span class="fu">file.path</span>(path_data, <span class="st">"ames_clean_class_trn.csv"</span>), </span>
<span id="cb100-2"><a href="#cb100-2" aria-hidden="true" tabindex="-1"></a>                      <span class="at">col_types =</span> <span class="fu">cols</span>()) <span class="sc">|&gt;</span> </span>
<span id="cb100-3"><a href="#cb100-3" aria-hidden="true" tabindex="-1"></a>  <span class="fu">class_ames</span>() <span class="sc">|&gt;</span> <span class="co"># &lt;1&gt; </span></span>
<span id="cb100-4"><a href="#cb100-4" aria-hidden="true" tabindex="-1"></a>  <span class="fu">glimpse</span>()</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
<div class="cell-output cell-output-stderr">
<pre><code>Warning: There was 1 warning in `mutate()`.
ℹ In argument: `garage_qual = fct_relevel(...)`.
Caused by warning:
! 1 unknown level in `f`: ex</code></pre>
</div>
<div class="cell-output cell-output-stdout">
<pre><code>Rows: 1,465
Columns: 10
$ sale_price   &lt;dbl&gt; 105000, 126000, 115000, 120000, 99500, 112000, 122000, 12…
$ gr_liv_area  &lt;dbl&gt; 896, 882, 864, 836, 918, 1902, 900, 1225, 1728, 858, 1306…
$ lot_area     &lt;dbl&gt; 11622, 8400, 10500, 2280, 7892, 8930, 9819, 9320, 13260, …
$ year_built   &lt;dbl&gt; 1961, 1970, 1971, 1975, 1979, 1978, 1967, 1959, 1962, 195…
$ overall_qual &lt;fct&gt; 5, 4, 4, 7, 6, 6, 5, 4, 5, 5, 3, 5, 4, 5, 3, 5, 2, 6, 5, …
$ garage_cars  &lt;dbl&gt; 1, 2, 0, 1, 1, 2, 1, 0, 0, 0, 0, 1, 2, 2, 1, 1, 2, 2, 1, …
$ garage_qual  &lt;fct&gt; ta, ta, no_garage, ta, ta, ta, ta, no_garage, no_garage, …
$ ms_zoning    &lt;fct&gt; res_high, res_low, res_low, res_low, res_low, res_med, re…
$ lot_config   &lt;fct&gt; inside, corner, fr2, fr2, inside, inside, inside, inside,…
$ bldg_type    &lt;fct&gt; one_fam, one_fam, one_fam, town_inside, town_end, duplex,…</code></pre>
</div>
</div>
<ol type="1">
<li>Remember our function for classing!</li>
</ol>
<hr>
<p>Recipes can be used to indicate the outcome and predictors that will be used in the model</p>
<ul>
<li>Can use <code>.</code> to indicate all predictors
<ul>
<li>Currently, our preferred method with some exceptions</li>
<li>We can exclude some predictors later by changing their role, removing them with a later recipe step (<span class="math inline">\(step\_rm()\)</span>), or specifying a more precise formula when we fit the model</li>
<li>See <a href="https://recipes.tidymodels.org/articles/Roles.html">Roles in Recipes</a> for more info</li>
</ul></li>
<li>Can use specific names of predictors along with <span class="math inline">\(+\)</span> if only a few predictors
<ul>
<li>e.g., <code>sale_price ~ lot_area + year_built + overall_qual</code></li>
</ul></li>
<li>Do NOT indicate interactions here
<ul>
<li>All predictors are combined with <code>+</code></li>
<li>Interactions are specified by a later explicit feature engineering step</li>
</ul></li>
</ul>
<div class="cell">
<div class="sourceCode cell-code" id="cb103"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb103-1"><a href="#cb103-1" aria-hidden="true" tabindex="-1"></a>rec <span class="ot">&lt;-</span> <span class="fu">recipe</span>(sale_price <span class="sc">~</span> ., <span class="at">data =</span> data_trn)</span>
<span id="cb103-2"><a href="#cb103-2" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb103-3"><a href="#cb103-3" aria-hidden="true" tabindex="-1"></a>rec</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
<div class="cell-output cell-output-stderr">
<pre><code></code></pre>
</div>
<div class="cell-output cell-output-stderr">
<pre><code>── Recipe ──────────────────────────────────────────────────────────────────────</code></pre>
</div>
<div class="cell-output cell-output-stderr">
<pre><code></code></pre>
</div>
<div class="cell-output cell-output-stderr">
<pre><code>── Inputs </code></pre>
</div>
<div class="cell-output cell-output-stderr">
<pre><code>Number of variables by role</code></pre>
</div>
<div class="cell-output cell-output-stderr">
<pre><code>outcome:   1
predictor: 9</code></pre>
</div>
<div class="sourceCode cell-code" id="cb110"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb110-1"><a href="#cb110-1" aria-hidden="true" tabindex="-1"></a><span class="fu">summary</span>(rec)</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
<div class="cell-output cell-output-stdout">
<pre><code># A tibble: 10 × 4
   variable     type      role      source  
   &lt;chr&gt;        &lt;list&gt;    &lt;chr&gt;     &lt;chr&gt;   
 1 gr_liv_area  &lt;chr [2]&gt; predictor original
 2 lot_area     &lt;chr [2]&gt; predictor original
 3 year_built   &lt;chr [2]&gt; predictor original
 4 overall_qual &lt;chr [3]&gt; predictor original
 5 garage_cars  &lt;chr [2]&gt; predictor original
 6 garage_qual  &lt;chr [3]&gt; predictor original
 7 ms_zoning    &lt;chr [3]&gt; predictor original
 8 lot_config   &lt;chr [3]&gt; predictor original
 9 bldg_type    &lt;chr [3]&gt; predictor original
10 sale_price   &lt;chr [2]&gt; outcome   original</code></pre>
</div>
</div>
<hr>
<section id="prepping-and-baking-a-recipe" class="level3" data-number="2.6.1">
<h3 data-number="2.6.1" class="anchored" data-anchor-id="prepping-and-baking-a-recipe"><span class="header-section-number">2.6.1</span> Prepping and Baking a Recipe</h3>
<p>Let’s make a feature matrix from the training set</p>
<p>There are two discrete (and important) steps - <code>prep()</code> - <code>bake()</code></p>
<p>First we prep the recipe using the training data</p>
<div class="cell">
<div class="sourceCode cell-code" id="cb112"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb112-1"><a href="#cb112-1" aria-hidden="true" tabindex="-1"></a>rec_prep <span class="ot">&lt;-</span> rec <span class="sc">|&gt;</span> <span class="co"># &lt;1&gt;</span></span>
<span id="cb112-2"><a href="#cb112-2" aria-hidden="true" tabindex="-1"></a>  <span class="fu">prep</span>(<span class="at">training =</span> data_trn) <span class="co">#&lt;2&gt;</span></span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
</div>
<ol type="1">
<li>We start by prepping our raw/original recipe (<code>rec</code>)</li>
<li>We use the <code>prep()</code> function on on the training data. Recipes are ALWAYS prepped using training data. This makes sure that are recipes will always only use information from the training set when making features for any subsequent dataset.</li>
</ol>
<hr>
<p>Second, we bake the training data using this prepped recipe to get a feature matrix from it.</p>
<div class="cell">
<div class="sourceCode cell-code" id="cb113"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb113-1"><a href="#cb113-1" aria-hidden="true" tabindex="-1"></a>feat_trn <span class="ot">&lt;-</span> rec_prep <span class="sc">|&gt;</span> </span>
<span id="cb113-2"><a href="#cb113-2" aria-hidden="true" tabindex="-1"></a>  <span class="fu">bake</span>(<span class="at">new_data =</span> data_trn)</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
</div>
<hr>
<p>Finally, we should generally at least glimpse and/or skim (and typically do some more EDA) on our features to make sure our recipe is doing what we expect.</p>
<ul>
<li>glimpse</li>
</ul>
<div class="cell">
<div class="sourceCode cell-code" id="cb114"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb114-1"><a href="#cb114-1" aria-hidden="true" tabindex="-1"></a>feat_trn <span class="sc">|&gt;</span> <span class="fu">glimpse</span>()</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
<div class="cell-output cell-output-stdout">
<pre><code>Rows: 1,465
Columns: 10
$ gr_liv_area  &lt;dbl&gt; 896, 882, 864, 836, 918, 1902, 900, 1225, 1728, 858, 1306…
$ lot_area     &lt;dbl&gt; 11622, 8400, 10500, 2280, 7892, 8930, 9819, 9320, 13260, …
$ year_built   &lt;dbl&gt; 1961, 1970, 1971, 1975, 1979, 1978, 1967, 1959, 1962, 195…
$ overall_qual &lt;fct&gt; 5, 4, 4, 7, 6, 6, 5, 4, 5, 5, 3, 5, 4, 5, 3, 5, 2, 6, 5, …
$ garage_cars  &lt;dbl&gt; 1, 2, 0, 1, 1, 2, 1, 0, 0, 0, 0, 1, 2, 2, 1, 1, 2, 2, 1, …
$ garage_qual  &lt;fct&gt; ta, ta, no_garage, ta, ta, ta, ta, no_garage, no_garage, …
$ ms_zoning    &lt;fct&gt; res_high, res_low, res_low, res_low, res_low, res_med, re…
$ lot_config   &lt;fct&gt; inside, corner, fr2, fr2, inside, inside, inside, inside,…
$ bldg_type    &lt;fct&gt; one_fam, one_fam, one_fam, town_inside, town_end, duplex,…
$ sale_price   &lt;dbl&gt; 105000, 126000, 115000, 120000, 99500, 112000, 122000, 12…</code></pre>
</div>
</div>
<hr>
<ul>
<li>skim</li>
</ul>
<div class="cell">
<div class="sourceCode cell-code" id="cb116"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb116-1"><a href="#cb116-1" aria-hidden="true" tabindex="-1"></a>feat_trn <span class="sc">|&gt;</span> <span class="fu">skim_all</span>()</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
<div class="cell-output-display">

<table style="width: auto;" class="table table-condensed">
<caption>
Data summary
</caption>
<tbody>
<tr>
<td style="text-align:left;">
Name
</td>
<td style="text-align:left;">
feat_trn
</td>
</tr>
<tr>
<td style="text-align:left;">
Number of rows
</td>
<td style="text-align:left;">
1465
</td>
</tr>
<tr>
<td style="text-align:left;">
Number of columns
</td>
<td style="text-align:left;">
10
</td>
</tr>
<tr>
<td style="text-align:left;">
_______________________
</td>
<td style="text-align:left;">
</td>
</tr>
<tr>
<td style="text-align:left;">
Column type frequency:
</td>
<td style="text-align:left;">
</td>
</tr>
<tr>
<td style="text-align:left;">
factor
</td>
<td style="text-align:left;">
5
</td>
</tr>
<tr>
<td style="text-align:left;">
numeric
</td>
<td style="text-align:left;">
5
</td>
</tr>
<tr>
<td style="text-align:left;">
________________________
</td>
<td style="text-align:left;">
</td>
</tr>
<tr>
<td style="text-align:left;">
Group variables
</td>
<td style="text-align:left;">
None
</td>
</tr>
</tbody>

</table>
<p><strong>Variable type: factor</strong></p>

<table>
<thead>
<tr>
<th style="text-align:left;">
skim_variable
</th>
<th style="text-align:right;">
n_missing
</th>
<th style="text-align:right;">
complete_rate
</th>
<th style="text-align:right;">
n_unique
</th>
<th style="text-align:left;">
top_counts
</th>
</tr>
</thead>
<tbody>
<tr>
<td style="text-align:left;">
overall_qual
</td>
<td style="text-align:right;">
0
</td>
<td style="text-align:right;">
1
</td>
<td style="text-align:right;">
10
</td>
<td style="text-align:left;">
5: 424, 6: 350, 7: 304, 8: 176
</td>
</tr>
<tr>
<td style="text-align:left;">
garage_qual
</td>
<td style="text-align:right;">
0
</td>
<td style="text-align:right;">
1
</td>
<td style="text-align:right;">
5
</td>
<td style="text-align:left;">
ta: 1312, no_: 81, fa: 57, gd: 13
</td>
</tr>
<tr>
<td style="text-align:left;">
ms_zoning
</td>
<td style="text-align:right;">
0
</td>
<td style="text-align:right;">
1
</td>
<td style="text-align:right;">
7
</td>
<td style="text-align:left;">
res: 1157, res: 217, flo: 66, com: 13
</td>
</tr>
<tr>
<td style="text-align:left;">
lot_config
</td>
<td style="text-align:right;">
0
</td>
<td style="text-align:right;">
1
</td>
<td style="text-align:right;">
5
</td>
<td style="text-align:left;">
ins: 1095, cor: 248, cul: 81, fr2: 39
</td>
</tr>
<tr>
<td style="text-align:left;">
bldg_type
</td>
<td style="text-align:right;">
0
</td>
<td style="text-align:right;">
1
</td>
<td style="text-align:right;">
5
</td>
<td style="text-align:left;">
one: 1216, tow: 108, dup: 63, tow: 46
</td>
</tr>
</tbody>

</table>
<p><strong>Variable type: numeric</strong></p>

<table>
<thead>
<tr>
<th style="text-align:left;">
skim_variable
</th>
<th style="text-align:right;">
n_missing
</th>
<th style="text-align:right;">
complete_rate
</th>
<th style="text-align:right;">
mean
</th>
<th style="text-align:right;">
sd
</th>
<th style="text-align:right;">
p0
</th>
<th style="text-align:right;">
p25
</th>
<th style="text-align:right;">
p50
</th>
<th style="text-align:right;">
p75
</th>
<th style="text-align:right;">
p100
</th>
<th style="text-align:right;">
skew
</th>
<th style="text-align:right;">
kurtosis
</th>
</tr>
</thead>
<tbody>
<tr>
<td style="text-align:left;">
gr_liv_area
</td>
<td style="text-align:right;">
0
</td>
<td style="text-align:right;">
1
</td>
<td style="text-align:right;">
1506.84
</td>
<td style="text-align:right;">
511.44
</td>
<td style="text-align:right;">
438
</td>
<td style="text-align:right;">
1128
</td>
<td style="text-align:right;">
1450
</td>
<td style="text-align:right;">
1759
</td>
<td style="text-align:right;">
5642
</td>
<td style="text-align:right;">
1.43
</td>
<td style="text-align:right;">
5.19
</td>
</tr>
<tr>
<td style="text-align:left;">
lot_area
</td>
<td style="text-align:right;">
0
</td>
<td style="text-align:right;">
1
</td>
<td style="text-align:right;">
10144.16
</td>
<td style="text-align:right;">
8177.55
</td>
<td style="text-align:right;">
1476
</td>
<td style="text-align:right;">
7500
</td>
<td style="text-align:right;">
9375
</td>
<td style="text-align:right;">
11362
</td>
<td style="text-align:right;">
164660
</td>
<td style="text-align:right;">
11.20
</td>
<td style="text-align:right;">
182.91
</td>
</tr>
<tr>
<td style="text-align:left;">
year_built
</td>
<td style="text-align:right;">
0
</td>
<td style="text-align:right;">
1
</td>
<td style="text-align:right;">
1971.35
</td>
<td style="text-align:right;">
29.65
</td>
<td style="text-align:right;">
1880
</td>
<td style="text-align:right;">
1953
</td>
<td style="text-align:right;">
1972
</td>
<td style="text-align:right;">
2000
</td>
<td style="text-align:right;">
2010
</td>
<td style="text-align:right;">
-0.54
</td>
<td style="text-align:right;">
-0.62
</td>
</tr>
<tr>
<td style="text-align:left;">
garage_cars
</td>
<td style="text-align:right;">
1
</td>
<td style="text-align:right;">
1
</td>
<td style="text-align:right;">
1.78
</td>
<td style="text-align:right;">
0.76
</td>
<td style="text-align:right;">
0
</td>
<td style="text-align:right;">
1
</td>
<td style="text-align:right;">
2
</td>
<td style="text-align:right;">
2
</td>
<td style="text-align:right;">
4
</td>
<td style="text-align:right;">
-0.26
</td>
<td style="text-align:right;">
0.10
</td>
</tr>
<tr>
<td style="text-align:left;">
sale_price
</td>
<td style="text-align:right;">
0
</td>
<td style="text-align:right;">
1
</td>
<td style="text-align:right;">
180696.15
</td>
<td style="text-align:right;">
78836.41
</td>
<td style="text-align:right;">
12789
</td>
<td style="text-align:right;">
129500
</td>
<td style="text-align:right;">
160000
</td>
<td style="text-align:right;">
213500
</td>
<td style="text-align:right;">
745000
</td>
<td style="text-align:right;">
1.64
</td>
<td style="text-align:right;">
4.60
</td>
</tr>
</tbody>

</table>
</div>
</div>
<hr>
<p>We can now use our features from training to train models, but that will take place in the next unit!</p>
<p>We could also use the prepped recipe to bake validation or test data to evaluate trained models. That too will happen in the next unit!</p>
<hr>
</section>
</section>
<section id="discussion-topics" class="level2" data-number="2.7">
<h2 data-number="2.7" class="anchored" data-anchor-id="discussion-topics"><span class="header-section-number">2.7</span> Discussion Topics</h2>
<ol start="0" type="1">
<li><p>House keeping</p>
<ul>
<li>Unit 2 solutions</li>
<li>Quizzes</li>
<li>Course evals for extra credit (to quiz score)!</li>
<li>Unit 3 homework
<ul>
<li>test set predictions</li>
<li>free lunch!</li>
</ul></li>
</ul></li>
<li><p>Review</p>
<ul>
<li>Goal is to develop model that closely approximates DGP</li>
<li>Goal is to evaluate (estimate) how close our model is to the DGP (how much error) with as little error as possible</li>
<li>Bias, overfitting/variance for any estimate (model and performance of model)</li>
<li>candidate model configurations</li>
<li>fit, select, evaluate</li>
<li>training, validation, test</li>
</ul></li>
<li><p>Review: 2.2.1 Stages of Data Analysis and Model Development</p></li>
<li><p>Best practices (discuss quickly)</p>
<ul>
<li>csv for data sharing, viewing, git (though be careful with data in github or other public repo!)</li>
<li>variable values saved as text when nominal and ordinal (self-documenting)</li>
<li>Create data dictionary - Documentation is critical!!</li>
<li>snake_case for variables and self-documenting names (systematic names too)</li>
</ul></li>
<li><p>Review: 2.3.1 Data Leakage Issues</p>
<ul>
<li>Review section in webbook</li>
<li>Cleaning EDA is done with full dataset (but univariate). Very limited (variable names, values, find errors)</li>
<li>Modeling EDA is only done with a training set (or even “eyeball” sample) - NEVER use validate or test set</li>
<li>Never estimate anything with full data set (e.g., missing values, standardize, etc)</li>
<li>Use recipes, prep (all estimation) with held in data than bake the appropriate set</li>
<li>Put test aside</li>
<li>You work with validation but never explore with validation (will still catch leakage with test but will be mislead to be overly optimistic and spoil test)</li>
</ul></li>
<li><p>Functions sidenote - fun_modeling.R on <a href="https://github.com/jjcurtin/lab_support">github</a></p></li>
<li><p>Review: 2.4.2 Prepping and Baking a Recipe</p>
<ul>
<li>Review section in web book</li>
<li>prep always with held in data, bake with held in &amp; out data.</li>
</ul></li>
<li><p>EDA for modeling</p>
<ul>
<li>limitless, just scratched the surface</li>
<li>Differs some based on dimenstionality of dataset</li>
<li>Learning about DGP
<ul>
<li>understand univariate distributions, frequencies</li>
<li>bivariate relationships</li>
<li>interactions (3 or more variables)</li>
<li>patterns in data</li>
</ul></li>
</ul></li>
<li><p>Extra topics, time permitting</p></li>
</ol>
<p>8.1. Missing data</p>
<pre><code>- Exclude vs. Impute in training data.  Outcomes?
- How to impute
- Missing in validate or test (can't exclude?). Exclude cases with missing outcomes.</code></pre>
<p>8.2. Outliers - Drop or fix errors! - Goal is always to estimate DGP - Exclude - Retain - Bring to fence - Don’t exclude/change outcome in validate/test</p>
<p>8.3. Issues with high dimensionality</p>
<pre><code>- Hard to do predictor level EDA
- Common choices (normality transformations)
- observed vs. predicted plots
- Methods for automated variable selection (glmnet)</code></pre>
<p>8.4. Distributional Shape</p>
<pre><code>- Measurement issues (interval scale)
- Implications for relationships with other variables
- Solutions?</code></pre>
<p>8.5. Linearity vs.&nbsp;More Complex Relationships</p>
<pre><code>- Transformations
- Choice of statistical algorithm
- Do you need a linear model?</code></pre>
<p>8.6. Interactions</p>
<pre><code>- Domain expertise
- Visual options for interactions
- But what do do with high dimensional data?
- Explanatory vs. prediction goals (algorithms that accommodate interactions)</code></pre>
<p>8.7. How to handle all of these decisions in the machine learning framework</p>
<pre><code>- Goal is to develop a model that most closely approximates the DGP
- How does validation and test help this?
- Preregistration?
  - Pre-reg for performance metric, resampling method   
  - Use of resampling for other decisions
  - Use of resampling to find correct model to test explanatory goals</code></pre>
<p>8.8. Model Assumptions</p>
<pre><code>- Why do we make assumptions?
  - Inference
  - Flexibility wrt DGP</code></pre>


<div id="refs" class="references csl-bib-body hanging-indent" role="doc-bibliography">
<div id="ref-AR" class="csl-entry" role="doc-biblioentry">
Wickham, Hadley. 2019. <em>Advanced r</em>. 2nd ed. <a href="https://adv-r.hadley.nz/">https://adv-r.hadley.nz/</a>.
</div>
<div id="ref-RDS" class="csl-entry" role="doc-biblioentry">
Wickham, Hadley, Çetinkaya-Rundel Mine, and Garrett Grolemund. 2023. <em>R for Data Science: Visualize, Model, Transform, and Import Data</em>. 2nd ed. <a href="https://r4ds.hadley.nz/">https://r4ds.hadley.nz/</a>.
</div>
</div>
</section>

</main> <!-- /main -->
<script id="quarto-html-after-body" type="application/javascript">
window.document.addEventListener("DOMContentLoaded", function (event) {
  const toggleBodyColorMode = (bsSheetEl) => {
    const mode = bsSheetEl.getAttribute("data-mode");
    const bodyEl = window.document.querySelector("body");
    if (mode === "dark") {
      bodyEl.classList.add("quarto-dark");
      bodyEl.classList.remove("quarto-light");
    } else {
      bodyEl.classList.add("quarto-light");
      bodyEl.classList.remove("quarto-dark");
    }
  }
  const toggleBodyColorPrimary = () => {
    const bsSheetEl = window.document.querySelector("link#quarto-bootstrap");
    if (bsSheetEl) {
      toggleBodyColorMode(bsSheetEl);
    }
  }
  toggleBodyColorPrimary();  
  const icon = "";
  const anchorJS = new window.AnchorJS();
  anchorJS.options = {
    placement: 'right',
    icon: icon
  };
  anchorJS.add('.anchored');
  const clipboard = new window.ClipboardJS('.code-copy-button', {
    target: function(trigger) {
      return trigger.previousElementSibling;
    }
  });
  clipboard.on('success', function(e) {
    // button target
    const button = e.trigger;
    // don't keep focus
    button.blur();
    // flash "checked"
    button.classList.add('code-copy-button-checked');
    var currentTitle = button.getAttribute("title");
    button.setAttribute("title", "Copied!");
    let tooltip;
    if (window.bootstrap) {
      button.setAttribute("data-bs-toggle", "tooltip");
      button.setAttribute("data-bs-placement", "left");
      button.setAttribute("data-bs-title", "Copied!");
      tooltip = new bootstrap.Tooltip(button, 
        { trigger: "manual", 
          customClass: "code-copy-button-tooltip",
          offset: [0, -8]});
      tooltip.show();    
    }
    setTimeout(function() {
      if (tooltip) {
        tooltip.hide();
        button.removeAttribute("data-bs-title");
        button.removeAttribute("data-bs-toggle");
        button.removeAttribute("data-bs-placement");
      }
      button.setAttribute("title", currentTitle);
      button.classList.remove('code-copy-button-checked');
    }, 1000);
    // clear code selection
    e.clearSelection();
  });
  function tippyHover(el, contentFn) {
    const config = {
      allowHTML: true,
      content: contentFn,
      maxWidth: 500,
      delay: 100,
      arrow: false,
      appendTo: function(el) {
          return el.parentElement;
      },
      interactive: true,
      interactiveBorder: 10,
      theme: 'quarto',
      placement: 'bottom-start'
    };
    window.tippy(el, config); 
  }
  const noterefs = window.document.querySelectorAll('a[role="doc-noteref"]');
  for (var i=0; i<noterefs.length; i++) {
    const ref = noterefs[i];
    tippyHover(ref, function() {
      // use id or data attribute instead here
      let href = ref.getAttribute('data-footnote-href') || ref.getAttribute('href');
      try { href = new URL(href).hash; } catch {}
      const id = href.replace(/^#\/?/, "");
      const note = window.document.getElementById(id);
      return note.innerHTML;
    });
  }
  const findCites = (el) => {
    const parentEl = el.parentElement;
    if (parentEl) {
      const cites = parentEl.dataset.cites;
      if (cites) {
        return {
          el,
          cites: cites.split(' ')
        };
      } else {
        return findCites(el.parentElement)
      }
    } else {
      return undefined;
    }
  };
  var bibliorefs = window.document.querySelectorAll('a[role="doc-biblioref"]');
  for (var i=0; i<bibliorefs.length; i++) {
    const ref = bibliorefs[i];
    const citeInfo = findCites(ref);
    if (citeInfo) {
      tippyHover(citeInfo.el, function() {
        var popup = window.document.createElement('div');
        citeInfo.cites.forEach(function(cite) {
          var citeDiv = window.document.createElement('div');
          citeDiv.classList.add('hanging-indent');
          citeDiv.classList.add('csl-entry');
          var biblioDiv = window.document.getElementById('ref-' + cite);
          if (biblioDiv) {
            citeDiv.innerHTML = biblioDiv.innerHTML;
          }
          popup.appendChild(citeDiv);
        });
        return popup.innerHTML;
      });
    }
  }
});
</script>
<nav class="page-navigation">
  <div class="nav-page nav-page-previous">
      <a href="./001_overview.html" class="pagination-link">
        <i class="bi bi-arrow-left-short"></i> <span class="nav-page-text"><span class="chapter-number">1</span>&nbsp; <span class="chapter-title">Overview of Machine Learning</span></span>
      </a>          
  </div>
  <div class="nav-page nav-page-next">
      <a href="./003_regression.html" class="pagination-link">
        <span class="nav-page-text"><span class="chapter-number">3</span>&nbsp; <span class="chapter-title">Introduction to Regression Models</span></span> <i class="bi bi-arrow-right-short"></i>
      </a>
  </div>
</nav>
</div> <!-- /content -->



</body></html>