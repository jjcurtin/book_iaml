<!DOCTYPE html>
<html xmlns="http://www.w3.org/1999/xhtml" lang="en" xml:lang="en"><head>

<meta charset="utf-8">
<meta name="generator" content="quarto-1.3.361">

<meta name="viewport" content="width=device-width, initial-scale=1.0, user-scalable=yes">


<title>Introduction to Applied Machine Learning - 2&nbsp; Exploratory Data Analysis</title>
<style>
code{white-space: pre-wrap;}
span.smallcaps{font-variant: small-caps;}
div.columns{display: flex; gap: min(4vw, 1.5em);}
div.column{flex: auto; overflow-x: auto;}
div.hanging-indent{margin-left: 1.5em; text-indent: -1.5em;}
ul.task-list{list-style: none;}
ul.task-list li input[type="checkbox"] {
  width: 0.8em;
  margin: 0 0.8em 0.2em -1em; /* quarto-specific, see https://github.com/quarto-dev/quarto-cli/issues/4556 */ 
  vertical-align: middle;
}
/* CSS for syntax highlighting */
pre > code.sourceCode { white-space: pre; position: relative; }
pre > code.sourceCode > span { display: inline-block; line-height: 1.25; }
pre > code.sourceCode > span:empty { height: 1.2em; }
.sourceCode { overflow: visible; }
code.sourceCode > span { color: inherit; text-decoration: inherit; }
div.sourceCode { margin: 1em 0; }
pre.sourceCode { margin: 0; }
@media screen {
div.sourceCode { overflow: auto; }
}
@media print {
pre > code.sourceCode { white-space: pre-wrap; }
pre > code.sourceCode > span { text-indent: -5em; padding-left: 5em; }
}
pre.numberSource code
  { counter-reset: source-line 0; }
pre.numberSource code > span
  { position: relative; left: -4em; counter-increment: source-line; }
pre.numberSource code > span > a:first-child::before
  { content: counter(source-line);
    position: relative; left: -1em; text-align: right; vertical-align: baseline;
    border: none; display: inline-block;
    -webkit-touch-callout: none; -webkit-user-select: none;
    -khtml-user-select: none; -moz-user-select: none;
    -ms-user-select: none; user-select: none;
    padding: 0 4px; width: 4em;
  }
pre.numberSource { margin-left: 3em;  padding-left: 4px; }
div.sourceCode
  {   }
@media screen {
pre > code.sourceCode > span > a:first-child::before { text-decoration: underline; }
}
/* CSS for citations */
div.csl-bib-body { }
div.csl-entry {
  clear: both;
}
.hanging-indent div.csl-entry {
  margin-left:2em;
  text-indent:-2em;
}
div.csl-left-margin {
  min-width:2em;
  float:left;
}
div.csl-right-inline {
  margin-left:2em;
  padding-left:1em;
}
div.csl-indent {
  margin-left: 2em;
}</style>


<script src="site_libs/quarto-nav/quarto-nav.js"></script>
<script src="site_libs/quarto-nav/headroom.min.js"></script>
<script src="site_libs/clipboard/clipboard.min.js"></script>
<script src="site_libs/quarto-search/autocomplete.umd.js"></script>
<script src="site_libs/quarto-search/fuse.min.js"></script>
<script src="site_libs/quarto-search/quarto-search.js"></script>
<meta name="quarto:offset" content="./">
<link href="./003_regression.html" rel="next">
<link href="./001_overview.html" rel="prev">
<script src="site_libs/quarto-html/quarto.js"></script>
<script src="site_libs/quarto-html/popper.min.js"></script>
<script src="site_libs/quarto-html/tippy.umd.min.js"></script>
<script src="site_libs/quarto-html/anchor.min.js"></script>
<link href="site_libs/quarto-html/tippy.css" rel="stylesheet">
<link href="site_libs/quarto-html/quarto-syntax-highlighting.css" rel="stylesheet" id="quarto-text-highlighting-styles">
<script src="site_libs/bootstrap/bootstrap.min.js"></script>
<link href="site_libs/bootstrap/bootstrap-icons.css" rel="stylesheet">
<link href="site_libs/bootstrap/bootstrap.min.css" rel="stylesheet" id="quarto-bootstrap" data-mode="light">
<script id="quarto-search-options" type="application/json">{
  "location": "sidebar",
  "copy-button": false,
  "collapse-after": 3,
  "panel-placement": "start",
  "type": "textbox",
  "limit": 20,
  "language": {
    "search-no-results-text": "No results",
    "search-matching-documents-text": "matching documents",
    "search-copy-link-title": "Copy link to search",
    "search-hide-matches-text": "Hide additional matches",
    "search-more-match-text": "more match in this document",
    "search-more-matches-text": "more matches in this document",
    "search-clear-button-title": "Clear",
    "search-detached-cancel-button-title": "Cancel",
    "search-submit-button-title": "Submit",
    "search-label": "Search"
  }
}</script>

<script src="site_libs/kePrint-0.0.1/kePrint.js"></script>
<link href="site_libs/lightable-0.0.1/lightable.css" rel="stylesheet">

  <script src="https://polyfill.io/v3/polyfill.min.js?features=es6"></script>
  <script src="https://cdn.jsdelivr.net/npm/mathjax@3/es5/tex-chtml-full.js" type="text/javascript"></script>

<link rel="stylesheet" href="style.css">
</head>

<body class="nav-sidebar floating">

<div id="quarto-search-results"></div>
  <header id="quarto-header" class="headroom fixed-top">
  <nav class="quarto-secondary-nav">
    <div class="container-fluid d-flex">
      <button type="button" class="quarto-btn-toggle btn" data-bs-toggle="collapse" data-bs-target="#quarto-sidebar,#quarto-sidebar-glass" aria-controls="quarto-sidebar" aria-expanded="false" aria-label="Toggle sidebar navigation" onclick="if (window.quartoToggleHeadroom) { window.quartoToggleHeadroom(); }">
        <i class="bi bi-layout-text-sidebar-reverse"></i>
      </button>
      <nav class="quarto-page-breadcrumbs" aria-label="breadcrumb"><ol class="breadcrumb"><li class="breadcrumb-item"><a href="./002_exploratory_data_analysis.html"><span class="chapter-number">2</span>&nbsp; <span class="chapter-title">Exploratory Data Analysis</span></a></li></ol></nav>
      <a class="flex-grow-1" role="button" data-bs-toggle="collapse" data-bs-target="#quarto-sidebar,#quarto-sidebar-glass" aria-controls="quarto-sidebar" aria-expanded="false" aria-label="Toggle sidebar navigation" onclick="if (window.quartoToggleHeadroom) { window.quartoToggleHeadroom(); }">      
      </a>
      <button type="button" class="btn quarto-search-button" aria-label="" onclick="window.quartoOpenSearch();">
        <i class="bi bi-search"></i>
      </button>
    </div>
  </nav>
</header>
<!-- content -->
<div id="quarto-content" class="quarto-container page-columns page-rows-contents page-layout-article">
<!-- sidebar -->
  <nav id="quarto-sidebar" class="sidebar collapse collapse-horizontal sidebar-navigation floating overflow-auto">
    <div class="pt-lg-2 mt-2 text-left sidebar-header">
    <div class="sidebar-title mb-0 py-0">
      <a href="./">Introduction to Applied Machine Learning</a> 
        <div class="sidebar-tools-main">
    <a href="https://github.com/jjcurtin/book_iaml" title="Source Code" class="quarto-navigation-tool px-1" aria-label="Source Code"><i class="bi bi-github"></i></a>
    <div class="dropdown">
      <a href="" title="Share" id="quarto-navigation-tool-dropdown-0" class="quarto-navigation-tool dropdown-toggle px-1" data-bs-toggle="dropdown" aria-expanded="false" aria-label="Share"><i class="bi bi-share"></i></a>
      <ul class="dropdown-menu" aria-labelledby="quarto-navigation-tool-dropdown-0">
          <li>
            <a class="dropdown-item sidebar-tools-main-item" href="https://www.facebook.com/sharer/sharer.php?u=|url|">
              <i class="bi bi-bi-facebook pe-1"></i>
            Facebook
            </a>
          </li>
          <li>
            <a class="dropdown-item sidebar-tools-main-item" href="https://www.linkedin.com/sharing/share-offsite/?url=|url|">
              <i class="bi bi-bi-linkedin pe-1"></i>
            LinkedIn
            </a>
          </li>
      </ul>
    </div>
</div>
    </div>
      </div>
        <div class="mt-2 flex-shrink-0 align-items-center">
        <div class="sidebar-search">
        <div id="quarto-search" class="" title="Search"></div>
        </div>
        </div>
    <div class="sidebar-menu-container"> 
    <ul class="list-unstyled mt-1">
        <li class="sidebar-item">
  <div class="sidebar-item-container"> 
  <a href="./index.html" class="sidebar-item-text sidebar-link">
 <span class="menu-text">Course Syllabus</span></a>
  </div>
</li>
        <li class="sidebar-item">
  <div class="sidebar-item-container"> 
  <a href="./001_overview.html" class="sidebar-item-text sidebar-link">
 <span class="menu-text"><span class="chapter-number">1</span>&nbsp; <span class="chapter-title">Overview of Machine Learning</span></span></a>
  </div>
</li>
        <li class="sidebar-item">
  <div class="sidebar-item-container"> 
  <a href="./002_exploratory_data_analysis.html" class="sidebar-item-text sidebar-link active">
 <span class="menu-text"><span class="chapter-number">2</span>&nbsp; <span class="chapter-title">Exploratory Data Analysis</span></span></a>
  </div>
</li>
        <li class="sidebar-item">
  <div class="sidebar-item-container"> 
  <a href="./003_regression.html" class="sidebar-item-text sidebar-link">
 <span class="menu-text"><span class="chapter-number">3</span>&nbsp; <span class="chapter-title">Introduction to Regression Models</span></span></a>
  </div>
</li>
        <li class="sidebar-item">
  <div class="sidebar-item-container"> 
  <a href="./004_classification.html" class="sidebar-item-text sidebar-link">
 <span class="menu-text"><span class="chapter-number">4</span>&nbsp; <span class="chapter-title">Introduction to Classification Models</span></span></a>
  </div>
</li>
        <li class="sidebar-item">
  <div class="sidebar-item-container"> 
  <a href="./005_resampling.html" class="sidebar-item-text sidebar-link">
 <span class="menu-text"><span class="chapter-number">5</span>&nbsp; <span class="chapter-title">Resampling Methods for Model Selection and Evaluation</span></span></a>
  </div>
</li>
        <li class="sidebar-item">
  <div class="sidebar-item-container"> 
  <a href="./006_regularization.html" class="sidebar-item-text sidebar-link">
 <span class="menu-text"><span class="chapter-number">6</span>&nbsp; <span class="chapter-title">Regularization and Penalized Models</span></span></a>
  </div>
</li>
        <li class="sidebar-item">
  <div class="sidebar-item-container"> 
  <a href="./007_midterm.html" class="sidebar-item-text sidebar-link">
 <span class="menu-text"><span class="chapter-number">7</span>&nbsp; <span class="chapter-title">Midterm Exam</span></span></a>
  </div>
</li>
        <li class="sidebar-item">
  <div class="sidebar-item-container"> 
  <a href="./008_advanced_performance_metrics.html" class="sidebar-item-text sidebar-link">
 <span class="menu-text"><span class="chapter-number">8</span>&nbsp; <span class="chapter-title">Advanced Performance Metrics</span></span></a>
  </div>
</li>
        <li class="sidebar-item">
  <div class="sidebar-item-container"> 
  <a href="./009_model_comparisons.html" class="sidebar-item-text sidebar-link">
 <span class="menu-text"><span class="chapter-number">9</span>&nbsp; <span class="chapter-title">Model Comparisons and Other Explanatory Goals</span></span></a>
  </div>
</li>
        <li class="sidebar-item">
  <div class="sidebar-item-container"> 
  <a href="./010_random_forest.html" class="sidebar-item-text sidebar-link">
 <span class="menu-text"><span class="chapter-number">10</span>&nbsp; <span class="chapter-title">Advanced Models: Decision Trees, Bagging Trees, and Random Forest</span></span></a>
  </div>
</li>
        <li class="sidebar-item">
  <div class="sidebar-item-container"> 
  <a href="./011_neural_networks.html" class="sidebar-item-text sidebar-link">
 <span class="menu-text"><span class="chapter-number">11</span>&nbsp; <span class="chapter-title">Advanced Models: Neural Networks</span></span></a>
  </div>
</li>
        <li class="sidebar-item">
  <div class="sidebar-item-container"> 
  <a href="./012_nlp.html" class="sidebar-item-text sidebar-link">
 <span class="menu-text"><span class="chapter-number">12</span>&nbsp; <span class="chapter-title">Natural Language Processing: Text Processing and Feature Engineering</span></span></a>
  </div>
</li>
        <li class="sidebar-item">
  <div class="sidebar-item-container"> 
  <a href="./013_applications.html" class="sidebar-item-text sidebar-link">
 <span class="menu-text"><span class="chapter-number">13</span>&nbsp; <span class="chapter-title">Applications for Machine Learning: Synthesis and Concept Generalization</span></span></a>
  </div>
</li>
        <li class="sidebar-item">
  <div class="sidebar-item-container"> 
  <a href="./014_ethics.html" class="sidebar-item-text sidebar-link">
 <span class="menu-text"><span class="chapter-number">14</span>&nbsp; <span class="chapter-title">Ethical Issues in Machine Learning Research and Applications</span></span></a>
  </div>
</li>
        <li class="sidebar-item">
  <div class="sidebar-item-container"> 
  <a href="./015_final.html" class="sidebar-item-text sidebar-link">
 <span class="menu-text"><span class="chapter-number">15</span>&nbsp; <span class="chapter-title">Final Exam and Project</span></span></a>
  </div>
</li>
        <li class="sidebar-item sidebar-item-section">
      <div class="sidebar-item-container"> 
            <a class="sidebar-item-text sidebar-link text-start" data-bs-toggle="collapse" data-bs-target="#quarto-sidebar-section-1" aria-expanded="true">
 <span class="menu-text">Appendices</span></a>
          <a class="sidebar-item-toggle text-start" data-bs-toggle="collapse" data-bs-target="#quarto-sidebar-section-1" aria-expanded="true" aria-label="Toggle section">
            <i class="bi bi-chevron-right ms-2"></i>
          </a> 
      </div>
      <ul id="quarto-sidebar-section-1" class="collapse list-unstyled sidebar-section depth1 show">  
          <li class="sidebar-item">
  <div class="sidebar-item-container"> 
  <a href="./101_novel_levels.html" class="sidebar-item-text sidebar-link">
 <span class="menu-text"><span class="chapter-number">16</span>&nbsp; <span class="chapter-title">Handling Novel Values in Held Out Sets</span></span></a>
  </div>
</li>
          <li class="sidebar-item">
  <div class="sidebar-item-container"> 
  <a href="./101_recipes.html" class="sidebar-item-text sidebar-link">
 <span class="menu-text"><span class="chapter-number">17</span>&nbsp; <span class="chapter-title">Appendix 1: Feature Engineering with Recipes</span></span></a>
  </div>
</li>
          <li class="sidebar-item">
  <div class="sidebar-item-container"> 
  <a href="./102_model_performance_simulations.html" class="sidebar-item-text sidebar-link">
 <span class="menu-text"><span class="chapter-number">18</span>&nbsp; <span class="chapter-title">Appendix 2: Simulations of Model Performance Bias and Variance by Resampling Techniques</span></span></a>
  </div>
</li>
          <li class="sidebar-item">
  <div class="sidebar-item-container"> 
  <a href="./103_shap.html" class="sidebar-item-text sidebar-link">
 <span class="menu-text"><span class="chapter-number">19</span>&nbsp; <span class="chapter-title">Appendix 3: Understanding Shapley Values from SHAP</span></span></a>
  </div>
</li>
          <li class="sidebar-item">
  <div class="sidebar-item-container"> 
  <a href="./104_bootstrapping.html" class="sidebar-item-text sidebar-link">
 <span class="menu-text"><span class="chapter-number">20</span>&nbsp; <span class="chapter-title">Appendix 4: Bootstrapping Standard Errors &amp; Confidence Intervals</span></span></a>
  </div>
</li>
          <li class="sidebar-item">
  <div class="sidebar-item-container"> 
  <a href="./test.html" class="sidebar-item-text sidebar-link">
 <span class="menu-text"><span class="chapter-number">21</span>&nbsp; <span class="chapter-title">Test</span></span></a>
  </div>
</li>
      </ul>
  </li>
    </ul>
    </div>
</nav>
<div id="quarto-sidebar-glass" data-bs-toggle="collapse" data-bs-target="#quarto-sidebar,#quarto-sidebar-glass"></div>
<!-- margin-sidebar -->
    <div id="quarto-margin-sidebar" class="sidebar margin-sidebar">
        <nav id="TOC" role="doc-toc" class="toc-active">
    <h2 id="toc-title">Table of contents</h2>
   
  <ul>
  <li><a href="#overview-of-unit" id="toc-overview-of-unit" class="nav-link active" data-scroll-target="#overview-of-unit"><span class="header-section-number">2.1</span> Overview of Unit</a></li>
  <li><a href="#overview-of-exploratory-data-analysis" id="toc-overview-of-exploratory-data-analysis" class="nav-link" data-scroll-target="#overview-of-exploratory-data-analysis"><span class="header-section-number">2.2</span> Overview of Exploratory Data Analysis</a>
  <ul class="collapse">
  <li><a href="#stages-of-data-analysis-and-model-development" id="toc-stages-of-data-analysis-and-model-development" class="nav-link" data-scroll-target="#stages-of-data-analysis-and-model-development"><span class="header-section-number">2.2.1</span> Stages of Data Analysis and Model Development</a></li>
  <li><a href="#data-file-formats" id="toc-data-file-formats" class="nav-link" data-scroll-target="#data-file-formats"><span class="header-section-number">2.2.2</span> Data file formats</a></li>
  <li><a href="#classing-variables" id="toc-classing-variables" class="nav-link" data-scroll-target="#classing-variables"><span class="header-section-number">2.2.3</span> Classing Variables</a></li>
  <li><a href="#data-dictionaries" id="toc-data-dictionaries" class="nav-link" data-scroll-target="#data-dictionaries"><span class="header-section-number">2.2.4</span> Data Dictionaries</a></li>
  <li><a href="#the-ames-housing-prices-dataset" id="toc-the-ames-housing-prices-dataset" class="nav-link" data-scroll-target="#the-ames-housing-prices-dataset"><span class="header-section-number">2.2.5</span> The Ames Housing Prices Dataset</a></li>
  </ul></li>
  <li><a href="#exploratory-data-analysis-for-data-cleaning" id="toc-exploratory-data-analysis-for-data-cleaning" class="nav-link" data-scroll-target="#exploratory-data-analysis-for-data-cleaning"><span class="header-section-number">2.3</span> Exploratory Data Analysis for Data Cleaning</a>
  <ul class="collapse">
  <li><a href="#data-leakage-issues" id="toc-data-leakage-issues" class="nav-link" data-scroll-target="#data-leakage-issues"><span class="header-section-number">2.3.1</span> Data Leakage Issues</a></li>
  <li><a href="#tidy-variable-names" id="toc-tidy-variable-names" class="nav-link" data-scroll-target="#tidy-variable-names"><span class="header-section-number">2.3.2</span> Tidy variable names</a></li>
  <li><a href="#explore-variable-classes" id="toc-explore-variable-classes" class="nav-link" data-scroll-target="#explore-variable-classes"><span class="header-section-number">2.3.3</span> Explore variable classes</a></li>
  <li><a href="#skimming-the-data" id="toc-skimming-the-data" class="nav-link" data-scroll-target="#skimming-the-data"><span class="header-section-number">2.3.4</span> Skimming the data</a></li>
  <li><a href="#missing-data---all-variables" id="toc-missing-data---all-variables" class="nav-link" data-scroll-target="#missing-data---all-variables"><span class="header-section-number">2.3.5</span> Missing Data - All variables</a></li>
  <li><a href="#explore-minmax-response-for-numeric-variables" id="toc-explore-minmax-response-for-numeric-variables" class="nav-link" data-scroll-target="#explore-minmax-response-for-numeric-variables"><span class="header-section-number">2.3.6</span> Explore Min/Max Response for Numeric Variables</a></li>
  <li><a href="#explore-all-responses-for-categorical-variables" id="toc-explore-all-responses-for-categorical-variables" class="nav-link" data-scroll-target="#explore-all-responses-for-categorical-variables"><span class="header-section-number">2.3.7</span> Explore All Responses for Categorical Variables</a></li>
  <li><a href="#tidy-responses-for-categorical-variables" id="toc-tidy-responses-for-categorical-variables" class="nav-link" data-scroll-target="#tidy-responses-for-categorical-variables"><span class="header-section-number">2.3.8</span> Tidy Responses for Categorical Variables</a></li>
  <li><a href="#trainvalidatetest-splits" id="toc-trainvalidatetest-splits" class="nav-link" data-scroll-target="#trainvalidatetest-splits"><span class="header-section-number">2.3.9</span> Train/Validate/Test Splits</a></li>
  </ul></li>
  <li><a href="#exploratory-data-analysis-for-modeling" id="toc-exploratory-data-analysis-for-modeling" class="nav-link" data-scroll-target="#exploratory-data-analysis-for-modeling"><span class="header-section-number">2.4</span> Exploratory Data Analysis for Modeling</a>
  <ul class="collapse">
  <li><a href="#overall-summary-of-feature-matrix" id="toc-overall-summary-of-feature-matrix" class="nav-link" data-scroll-target="#overall-summary-of-feature-matrix"><span class="header-section-number">2.4.1</span> Overall Summary of Feature Matrix</a></li>
  <li><a href="#univariate-distributions" id="toc-univariate-distributions" class="nav-link" data-scroll-target="#univariate-distributions"><span class="header-section-number">2.4.2</span> Univariate Distributions</a></li>
  <li><a href="#bivariate-relationships-with-outcome" id="toc-bivariate-relationships-with-outcome" class="nav-link" data-scroll-target="#bivariate-relationships-with-outcome"><span class="header-section-number">2.4.3</span> Bivariate Relationships with Outcome</a></li>
  </ul></li>
  <li><a href="#working-with-recipes" id="toc-working-with-recipes" class="nav-link" data-scroll-target="#working-with-recipes"><span class="header-section-number">2.5</span> Working with Recipes</a>
  <ul class="collapse">
  <li><a href="#prepping-and-baking-a-recipe" id="toc-prepping-and-baking-a-recipe" class="nav-link" data-scroll-target="#prepping-and-baking-a-recipe"><span class="header-section-number">2.5.1</span> Prepping and Baking a Recipe</a></li>
  </ul></li>
  <li><a href="#discussion-topics" id="toc-discussion-topics" class="nav-link" data-scroll-target="#discussion-topics"><span class="header-section-number">2.6</span> Discussion Topics</a></li>
  </ul>
<div class="toc-actions"><div><i class="bi bi-github"></i></div><div class="action-links"><p><a href="https://github.com/jjcurtin/book_iaml/edit/main/002_exploratory_data_analysis.qmd" class="toc-action">Edit this page</a></p></div></div></nav>
    </div>
<!-- main -->
<main class="content" id="quarto-document-content">

<header id="title-block-header" class="quarto-title-block default">
<div class="quarto-title">
<h1 class="title"><span class="chapter-number">2</span>&nbsp; <span class="chapter-title">Exploratory Data Analysis</span></h1>
</div>



<div class="quarto-title-meta">

    
  
    
  </div>
  

</header>

<section id="overview-of-unit" class="level2" data-number="2.1">
<h2 data-number="2.1" class="anchored" data-anchor-id="overview-of-unit"><span class="header-section-number">2.1</span> Overview of Unit</h2>
<p><strong>Learning Objectives</strong></p>
<ul>
<li>Stages of Analysis</li>
<li>Best practices for data storage, variable classing, data dictionaries</li>
<li>Problems and solutions regarding data leakage</li>
<li>Key goals and techniques cleaning EDA
<ul>
<li>Tidying names and response labels</li>
<li>Appropriate visualizations based on variable class</li>
<li>Summary statistics based on variable class</li>
</ul></li>
<li>Proper splitting for training/validation and test sets</li>
<li>Key goals and techniques modeling EDA
<ul>
<li>Appropriate visualizations based on variable class</li>
<li>Summary statistics based on variable class</li>
</ul></li>
<li>Introductory use of recipes for feature engineering</li>
</ul>
<p><strong>Readings</strong> [NOTE: These are short chapters. You are reading to understand the framework of visualizing data in R. Don’t feel like you have to memorize the details. These are reference materials that you can turn back to when you need to write code!]</p>
<ul>
<li><span class="citation" data-cites="RDS">Wickham, Çetinkaya-Rundel, and Grolemund (<a href="#ref-RDS" role="doc-biblioref">2023</a>)</span> <a href="https://r4ds.hadley.nz/data-visualize">Chapter 1, Data Visualization</a></li>
<li><span class="citation" data-cites="RDS">Wickham, Çetinkaya-Rundel, and Grolemund (<a href="#ref-RDS" role="doc-biblioref">2023</a>)</span> <a href="https://r4ds.hadley.nz/layers">Chapter 9, Layers</a></li>
<li><span class="citation" data-cites="RDS">Wickham, Çetinkaya-Rundel, and Grolemund (<a href="#ref-RDS" role="doc-biblioref">2023</a>)</span> <a href="https://r4ds.hadley.nz/eda">Chapter 10, Exploratory Data Analysis</a></li>
</ul>
<p><strong>Lecture Videos</strong></p>
<ul>
<li><a href="">Lecture 1: Overview of EDA</a>; ~ 24 mins</li>
<li><a href="">Lecture 2: EDA for Cleaning</a>; ~ 33 mins</li>
<li><a href="">Lecture 3: Introduction to Recipes</a>; ~ 17 mins</li>
<li><a href="">Lecture 4: EDA for Modeling Part I</a>; ~ 17 mins</li>
<li><a href="">Lecture 5: EDA for Modeling Part II</a>; ~ 22 mins</li>
<li><a href="">Discussion</a></li>
</ul>
<p>Post questions or discuss readings or lectures in Slack</p>
<p><strong>Application Assignment</strong></p>
<ul>
<li><a href="https://dionysus.psych.wisc.edu/iaml/homework/unit_2/ames_raw_class.csv">data</a></li>
<li><a href="https://dionysus.psych.wisc.edu/iaml/homework/unit_2/ames_data_dictionary.pdf">data dictionary</a></li>
<li>cleaning EDA: <a href="https://dionysus.psych.wisc.edu/iaml/homework/unit_2/hw_unit_2_cleaning.Rmd">rmd</a> <a href="https://dionysus.psych.wisc.edu/iaml/homework/unit_2/hw_unit_2_cleaning.html">html</a></li>
<li>modeling EDA: <a href="https://dionysus.psych.wisc.edu/iaml/homework/unit_2/hw_unit_2_modeling.Rmd">rmd</a> <a href="https://dionysus.psych.wisc.edu/iaml/homework/unit_2/hw_unit_2_modeling.html">html</a></li>
<li><a href="&quot;https://github.com/jjcurtin/lab_support/blob/main/fun_modeling.R?raw=true&quot;">fun_modeling.R</a></li>
<li>solutions: <a href="https://dionysus.psych.wisc.edu/iaml/homework/unit_2/key_unit_2_cleaning.html">knit cleaning EDA</a>; <a href="https://dionysus.psych.wisc.edu/iaml/homework/unit_2/key_unit_2_modeling.html">knit modeling EDA</a></li>
</ul>
<p>Submit the <a href="">application assignment</a> and <a href="">unit quiz</a> by 8 pm on Wednesday, January 31st</p>
</section>
<section id="overview-of-exploratory-data-analysis" class="level2" data-number="2.2">
<h2 data-number="2.2" class="anchored" data-anchor-id="overview-of-exploratory-data-analysis"><span class="header-section-number">2.2</span> Overview of Exploratory Data Analysis</h2>
<section id="stages-of-data-analysis-and-model-development" class="level3" data-number="2.2.1">
<h3 data-number="2.2.1" class="anchored" data-anchor-id="stages-of-data-analysis-and-model-development"><span class="header-section-number">2.2.1</span> Stages of Data Analysis and Model Development</h3>
<p>These are the main stages of data analysis for machine learning and the data that are used</p>
<ol type="1">
<li><p>EDA: Cleaning (full dataset)</p></li>
<li><p>EDA: Split data into training, validation and test set(s)</p></li>
<li><p>EDA: Modeling (training sets)</p></li>
<li><p>Model Building: Feature engineering (training sets)</p></li>
<li><p>Model Building: Fit many models configurations (training set)</p></li>
<li><p>Model Building: Evaluate many models configurations (validation sets)</p></li>
<li><p>Final Model Evaluation: Select final/best model configuration (validation sets)</p></li>
<li><p>Final Model Evaluation: Fit best model configuration (use both training and validation sets)</p></li>
<li><p>Final Model Evaluation: Evaluate final model configuration (test sets)</p></li>
<li><p>Final Model Evaluation: Fit best model configuration to ALL data (training, validation, and test sets) if you plan to use it for applications.</p></li>
</ol>
<p>The earlier stages are highly iterative:</p>
<ul>
<li>You may iterate some through EDA stages 1-3 if you find further errors to clean in stage 3 [<strong>But make sure you resplit into the same sets</strong>]</li>
<li>You will iterate many times though stages 3-6 as you learn more about your data both through EDA for modeling and evaluating actual models in validation</li>
</ul>
<p>You will NOT iterate back to earlier stages after you select a final model configuration</p>
<ul>
<li>Stages 7 - 10 are performed ONLY ONCE</li>
<li>Only one model configuration is selected and re-fit and only that model is brought into test for evaluation</li>
<li>Any more than this is essentially equivalent to p-hacking in traditional analyses</li>
<li>Step 10 only happens if you plan to use the model in some application</li>
</ul>
</section>
<section id="data-file-formats" class="level3" data-number="2.2.2">
<h3 data-number="2.2.2" class="anchored" data-anchor-id="data-file-formats"><span class="header-section-number">2.2.2</span> Data file formats</h3>
<p>We generally store data as CSV [comma-separated value] files</p>
<ul>
<li>Easy to <strong>view directly</strong> in a text editor</li>
<li>Easy to <strong>share</strong> because others can use/import into any data analysis platform</li>
<li>Works with <strong>version control</strong> (e.g.&nbsp;git, svn)</li>
<li>use <code>read_csv()</code> and <code>write_csv()</code></li>
</ul>
<p>Exceptions include:</p>
<ul>
<li>We <strong>may</strong> consider binary (.rds) format for very big files because read/write can be slow for csv files.<br>
</li>
<li>Binary file format provides a modest additional protection for sensitive data (which we also don’t share)</li>
<li>use <code>read_rds()</code> and <code>write_rds()</code></li>
</ul>
<p>See <a href="https://r4ds.hadley.nz/data-import">chapter 7 - Data Import</a> in <span class="citation" data-cites="RDS">Wickham, Çetinkaya-Rundel, and Grolemund (<a href="#ref-RDS" role="doc-biblioref">2023</a>)</span> for more details and advanced techniques for importing data using <code>read_csv()</code></p>
</section>
<section id="classing-variables" class="level3" data-number="2.2.3">
<h3 data-number="2.2.3" class="anchored" data-anchor-id="classing-variables"><span class="header-section-number">2.2.3</span> Classing Variables</h3>
<p>We store and class variables in R based on their data type.</p>
<p>For <strong>nominal</strong> variables:</p>
<ul>
<li>We store (in csv files) these variables as character class with descriptive text labels for the levels
<ul>
<li>Easier to share/document</li>
<li>Reduces errors</li>
</ul></li>
<li>We class these variables in R as factors when we load them (using <code>read_csv()</code>)</li>
<li>In some cases, we should pay attention to the order of the levels of the variable. e.g.,
<ul>
<li>For a dichotomous outcome variable, the positive/event level of dichotomous factor outcome should be first level of the factor</li>
<li>The order of levels may also matter for factor predictors (e.g., <code>step_dummy()</code> uses first level as reference).</li>
</ul></li>
</ul>
<p>For <strong>ordinal</strong> variables:</p>
<ul>
<li>We store (in csv files) these variables as character class with descriptive text labels for the levels
<ul>
<li>Easier to share/document</li>
<li>Reduces errors</li>
</ul></li>
<li>We class these variables in R as factors (just like nominal variables)
<ul>
<li>It is easier to do EDA with these variables classes as factors</li>
<li>We use standard factors (not ordered)</li>
</ul></li>
<li>Confirm that the order of the levels is set up correctly. This is very important for ordinal variables.</li>
<li>During feature engineering stage, we can then either
<ul>
<li>Treat as a nominal variable and create features using <code>step_dummy()</code></li>
<li>Treat as an interval variable using <code>step_ordinalscore()</code></li>
</ul></li>
</ul>
<p>For <strong>interval and ratio</strong> variables:</p>
<ul>
<li>We store these variables as numeric</li>
<li>We class these variables as numeric (either integer or double - let R decide) during the read and clean stage (They are typically already in this class when read in)</li>
</ul>
<hr>
<p>We will refer to both nominal and ordinal variables as categorical variables</p>
<ul>
<li>They are stored as character</li>
<li>They are classed as factors</li>
<li>They include a limited number of unique responses</li>
<li>We can indicate the order of the levels</li>
<li>Similar EDA approaches are used with both</li>
<li>Ordinal variables may show non-linear relations b/c they may not be evenly spaced. In these instances, we can use feature engineering approaches that are also used for nominal variables</li>
</ul>
<p>We will often refer to interval and ratio variables as numeric variables</p>
<ul>
<li>The are stored as numeric</li>
<li>They are classed with one of two numeric data types</li>
<li>They have many (infinite?) unique responses</li>
<li>Similar EDA approaches are used with both</li>
<li>Similar feature engineering approaches are used with both</li>
</ul>
</section>
<section id="data-dictionaries" class="level3" data-number="2.2.4">
<h3 data-number="2.2.4" class="anchored" data-anchor-id="data-dictionaries"><span class="header-section-number">2.2.4</span> Data Dictionaries</h3>
<p>You should always make a data dictionary for use with your data files.</p>
<ul>
<li>Ideally, these are created during the planning phase of your study, prior to the start of data collection</li>
<li>Still useful if created at the start of data analysis</li>
</ul>
<p>Data dictionaries:</p>
<ul>
<li>help you keep track of your variables and their characteristics (e.g., valid ranges, valid responses)</li>
<li>can be used by you to check your data during EDA</li>
<li>can be provided to others when you share your data (data are not generally useful to others without a data dictionary)</li>
</ul>
<p>We will see a variety of data dictionaries throughout the course. Many are not great as you will learn.</p>
</section>
<section id="the-ames-housing-prices-dataset" class="level3" data-number="2.2.5">
<h3 data-number="2.2.5" class="anchored" data-anchor-id="the-ames-housing-prices-dataset"><span class="header-section-number">2.2.5</span> The Ames Housing Prices Dataset</h3>
<p>We will use the Ames Housing Prices dataset as a running example this unit (and some future units and application assignments as well)</p>
<ul>
<li><p>You can <a href="http://jse.amstat.org/v19n3/decock.pdf">read more</a> about the original dataset created by Dean DeCock</p></li>
<li><p>The data set contains data from home sales of individual residential property in Ames, Iowa from 2006 to 2010</p></li>
<li><p>The original data set includes 2930 observations of sales price and a large number of explanatory variables (23 nominal, 23 ordinal, 14 discrete, and 20 continuous)</p></li>
<li><p>This is the <a href="data/ames_data_dictionary.pdf">original data dictionary</a></p></li>
<li><p>The challenge with this dataset is to build the best possible prediction model for the sale price of the homes.</p></li>
</ul>
<hr>
<p>First, lets set up our environment with functions from important packages. I strongly recommend reviewing our recommendations for best practices regarding <a href="https://jjcurtin.github.io/book_dwvt/conflicts.html">managing function conflicts</a> now. It will save you a lot of headaches in the future.</p>
<ul>
<li>First we set a conflicts policy that will produce errors if we have unanticipated conflicts.</li>
<li>We next source a library of functions that we use for common tasks in machine learning. This includes a function (<code>tidymodels_conflictRules()</code>) that sets conflict rules to allow us to attach <code>tidymodels</code> functions without conflicts with <code>tidyverse</code> functions. You can <a href="https://github.com/jjcurtin/lab_support/blob/main/fun_ml.R?raw=true">review</a> that function to see what it does (search for that function name at the link)</li>
<li>Then we use that function</li>
</ul>
<div class="cell">
<div class="sourceCode cell-code" id="cb1"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb1-1"><a href="#cb1-1" aria-hidden="true" tabindex="-1"></a><span class="fu">options</span>(<span class="at">conflicts.policy =</span> <span class="st">"depends.ok"</span>)</span>
<span id="cb1-2"><a href="#cb1-2" aria-hidden="true" tabindex="-1"></a>devtools<span class="sc">::</span><span class="fu">source_url</span>(<span class="st">"https://github.com/jjcurtin/lab_support/blob/main/fun_ml.R?raw=true"</span>)</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
<div class="cell-output cell-output-stderr">
<pre><code>ℹ SHA-1 hash of file is "175d942e14f108d74912bfb2593b77637328ecb1"</code></pre>
</div>
<div class="sourceCode cell-code" id="cb3"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb3-1"><a href="#cb3-1" aria-hidden="true" tabindex="-1"></a><span class="fu">tidymodels_conflictRules</span>()</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
</div>
<p>Now we load packages for functions that we will use regularly. There are five things to note RE best practices</p>
<ol type="1">
<li>If we will use a lot of functions from a package (e.g., <code>tidyverse</code>, <code>tidymodels</code>), we attach the full package</li>
<li>If we will use only several functions from a package (but plan to use them repeatedly), we use the <code>include.only</code> parameter to just attach those functions.</li>
<li>At times, if we plan to use a single function from a package only 1-2x times, we may not even attach that function at all. Instead, we just call it using its namespace (i.e.&nbsp;<code>packagename::functionname</code>)</li>
<li>If a package has a function that conflicts with our primary packages and we don’t plan to use that function, we load the package but exclude the function. If we really needed it, we can call it with its namespace as per option 3 above.</li>
<li>Pay attention to conflicts that were allowed to make sure you understand and accept them. (I left the package messages and warnings in the book this time to see them. I will hide them to avoid cluttering book in later units but you should always review them.)</li>
</ol>
<div class="cell">
<div class="sourceCode cell-code" id="cb4"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb4-1"><a href="#cb4-1" aria-hidden="true" tabindex="-1"></a><span class="fu">library</span>(janitor, <span class="at">include.only =</span> <span class="st">"clean_names"</span>)</span>
<span id="cb4-2"><a href="#cb4-2" aria-hidden="true" tabindex="-1"></a><span class="fu">library</span>(cowplot, <span class="at">include.only =</span> <span class="st">"plot_grid"</span>) <span class="co"># for plot_grid()</span></span>
<span id="cb4-3"><a href="#cb4-3" aria-hidden="true" tabindex="-1"></a><span class="fu">library</span>(kableExtra, <span class="at">exclude =</span> <span class="st">"group_rows"</span>) <span class="co"># exclude dplyr conflict</span></span>
<span id="cb4-4"><a href="#cb4-4" aria-hidden="true" tabindex="-1"></a><span class="fu">library</span>(tidyverse) <span class="co"># for general data wrangling</span></span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
<div class="cell-output cell-output-stderr">
<pre><code>── Attaching core tidyverse packages ──────────────────────── tidyverse 2.0.0 ──
✔ dplyr     1.1.2     ✔ readr     2.1.4
✔ forcats   1.0.0     ✔ stringr   1.5.0
✔ ggplot2   3.4.2     ✔ tibble    3.2.1
✔ lubridate 1.9.2     ✔ tidyr     1.3.0
✔ purrr     1.0.1     
── Conflicts ────────────────────────────────────────── tidyverse_conflicts() ──
✖ dplyr::filter() masks stats::filter()
✖ dplyr::lag()    masks stats::lag()
ℹ Use the conflicted package (&lt;http://conflicted.r-lib.org/&gt;) to force all conflicts to become errors</code></pre>
</div>
<div class="sourceCode cell-code" id="cb6"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb6-1"><a href="#cb6-1" aria-hidden="true" tabindex="-1"></a><span class="fu">library</span>(tidymodels) <span class="co"># for modeling</span></span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
<div class="cell-output cell-output-stderr">
<pre><code>── Attaching packages ────────────────────────────────────── tidymodels 1.1.0 ──
✔ broom        1.0.4     ✔ rsample      1.1.1
✔ dials        1.2.0     ✔ tune         1.1.1
✔ infer        1.0.4     ✔ workflows    1.1.3
✔ modeldata    1.1.0     ✔ workflowsets 1.0.1
✔ parsnip      1.1.0     ✔ yardstick    1.2.0
✔ recipes      1.0.6     
── Conflicts ───────────────────────────────────────── tidymodels_conflicts() ──
✖ scales::discard() masks purrr::discard()
✖ dplyr::filter()   masks stats::filter()
✖ recipes::fixed()  masks stringr::fixed()
✖ dplyr::lag()      masks stats::lag()
✖ yardstick::spec() masks readr::spec()
✖ recipes::step()   masks stats::step()
• Learn how to get started at https://www.tidymodels.org/start/</code></pre>
</div>
</div>
<p>Then we source (from github) two other libraries of functions that we use commonly for exploratory data analyses. You should review these function scripts to see how I’ve written this code.</p>
<div class="cell">
<div class="sourceCode cell-code" id="cb8"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb8-1"><a href="#cb8-1" aria-hidden="true" tabindex="-1"></a>devtools<span class="sc">::</span><span class="fu">source_url</span>(<span class="st">"https://github.com/jjcurtin/lab_support/blob/main/fun_eda.R?raw=true"</span>)</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
<div class="cell-output cell-output-stderr">
<pre><code>ℹ SHA-1 hash of file is "c045eee2655a18dc85e715b78182f176327358a7"</code></pre>
</div>
<div class="sourceCode cell-code" id="cb10"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb10-1"><a href="#cb10-1" aria-hidden="true" tabindex="-1"></a>devtools<span class="sc">::</span><span class="fu">source_url</span>(<span class="st">"https://github.com/jjcurtin/lab_support/blob/main/fun_plots.R?raw=true"</span>)</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
<div class="cell-output cell-output-stderr">
<pre><code>ℹ SHA-1 hash of file is "def6ce26ed7b2493931fde811adff9287ee8d874"</code></pre>
</div>
</div>
<p>Finally, we tune our environment a bit more by setting plot themes and print options</p>
<div class="cell">
<div class="sourceCode cell-code" id="cb12"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb12-1"><a href="#cb12-1" aria-hidden="true" tabindex="-1"></a><span class="fu">theme_set</span>(<span class="fu">theme_classic</span>())</span>
<span id="cb12-2"><a href="#cb12-2" aria-hidden="true" tabindex="-1"></a><span class="fu">options</span>(<span class="at">tibble.width =</span> <span class="cn">Inf</span>,</span>
<span id="cb12-3"><a href="#cb12-3" aria-hidden="true" tabindex="-1"></a>        <span class="at">pillar.bold =</span> <span class="cn">TRUE</span>)</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
</div>
<p>And we set a relative path to our data. This assumes you are using an RStudio project with the path to the data relative to that project file. I’ve provided more detail <a href="https://jjcurtin.github.io/book_dwvt/file_and_path_management.html">elsewhere</a> on best practices for managing files and paths.</p>
<div class="cell">
<div class="sourceCode cell-code" id="cb13"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb13-1"><a href="#cb13-1" aria-hidden="true" tabindex="-1"></a>path_data <span class="ot">&lt;-</span> <span class="st">"data"</span></span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
</div>
<p>Here is a quick glimpse of the subset of observations we will work with in Units 2-3 and the first two application assignments. Note that we re-class all character variables as unordered factors for now</p>
<div class="cell">
<div class="sourceCode cell-code" id="annotated-cell-9"><pre class="sourceCode r code-annotation-code code-with-copy code-annotated"><code class="sourceCode r"><a class="code-annotation-anchor" data-target-cell="annotated-cell-9" data-target-annotation="1" onclick="event.preventDefault();">1</a><span id="annotated-cell-9-1" class="code-annotation-target"><a href="#annotated-cell-9-1" aria-hidden="true" tabindex="-1"></a>data_all <span class="ot">&lt;-</span> <span class="fu">read_csv</span>(here<span class="sc">::</span><span class="fu">here</span>(path_data, <span class="st">"ames_raw_class.csv"</span>),</span>
<a class="code-annotation-anchor" data-target-cell="annotated-cell-9" data-target-annotation="2" onclick="event.preventDefault();">2</a><span id="annotated-cell-9-2" class="code-annotation-target"><a href="#annotated-cell-9-2" aria-hidden="true" tabindex="-1"></a>                     <span class="at">col_types =</span> <span class="fu">cols</span>()) <span class="sc">|&gt;</span></span>
<a class="code-annotation-anchor" data-target-cell="annotated-cell-9" data-target-annotation="3" onclick="event.preventDefault();">3</a><span id="annotated-cell-9-3" class="code-annotation-target"><a href="#annotated-cell-9-3" aria-hidden="true" tabindex="-1"></a>  <span class="fu">mutate</span>(<span class="fu">across</span>(<span class="fu">where</span>(is.character), factor)) <span class="sc">|&gt;</span></span>
<a class="code-annotation-anchor" data-target-cell="annotated-cell-9" data-target-annotation="4" onclick="event.preventDefault();">4</a><span id="annotated-cell-9-4" class="code-annotation-target"><a href="#annotated-cell-9-4" aria-hidden="true" tabindex="-1"></a>  <span class="fu">glimpse</span>()</span><div class="code-annotation-gutter-bg"></div><div class="code-annotation-gutter"></div></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
<div class="cell-annotation">
<dl class="code-annotation-container-grid">
<dt data-target-cell="annotated-cell-9" data-target-annotation="1">1</dt>
<dd>
<span data-code-annotation="1" data-code-lines="1" data-code-cell="annotated-cell-9">First we read data using a relative path and the <code>here::here()</code> function. This is a replacement for <code>file.path()</code> that works better for both interactive use and rendering in Quarto when using projects.</span>
</dd>
<dt data-target-cell="annotated-cell-9" data-target-annotation="2">2</dt>
<dd>
<span data-code-annotation="2" data-code-lines="2" data-code-cell="annotated-cell-9">We use <code>col_types = cols()</code> to let R guess the correct class for each column. This suppresses messages that aren’t important at this point prior to EDA.</span>
</dd>
<dt data-target-cell="annotated-cell-9" data-target-annotation="3">3</dt>
<dd>
<span data-code-annotation="3" data-code-lines="3" data-code-cell="annotated-cell-9">Then we use a mutate to re-class all character data to factors. This should handle most of our nominal and ordinal variables. We may need to still class some that were missed because they appeared to be numeric. I prefer <code>factor()</code> to <code>forcats::fct()</code> because factor orders the levels alphabetically. Be aware that this <em>could</em> change if your code is used in a region of the world where this sorting is different. I still prefer this to the alternative (in <code>fct()</code>) that orders by the order the levels are found in your data.</span>
</dd>
<dt data-target-cell="annotated-cell-9" data-target-annotation="4">4</dt>
<dd>
<span data-code-annotation="4" data-code-lines="4" data-code-cell="annotated-cell-9">It is good practice to always <code>glimpse()</code> data after you read it.</span>
</dd>
</dl>
</div>
<div class="cell-output cell-output-stdout">
<pre><code>Rows: 1,955
Columns: 81
$ PID               &lt;fct&gt; 0526301100, 0526350040, 0526351010, 0527105010, 0527…
$ `MS SubClass`     &lt;fct&gt; 020, 020, 020, 060, 120, 120, 120, 060, 060, 060, 02…
$ `MS Zoning`       &lt;fct&gt; RL, RH, RL, RL, RL, RL, RL, RL, RL, RL, RL, RL, RL, …
$ `Lot Frontage`    &lt;dbl&gt; 141, 80, 81, 74, 41, 43, 39, 60, 75, 63, 85, NA, 47,…
$ `Lot Area`        &lt;dbl&gt; 31770, 11622, 14267, 13830, 4920, 5005, 5389, 7500, …
$ Street            &lt;fct&gt; Pave, Pave, Pave, Pave, Pave, Pave, Pave, Pave, Pave…
$ Alley             &lt;fct&gt; NA, NA, NA, NA, NA, NA, NA, NA, NA, NA, NA, NA, NA, …
$ `Lot Shape`       &lt;fct&gt; IR1, Reg, IR1, IR1, Reg, IR1, IR1, Reg, IR1, IR1, Re…
$ `Land Contour`    &lt;fct&gt; Lvl, Lvl, Lvl, Lvl, Lvl, HLS, Lvl, Lvl, Lvl, Lvl, Lv…
$ Utilities         &lt;fct&gt; AllPub, AllPub, AllPub, AllPub, AllPub, AllPub, AllP…
$ `Lot Config`      &lt;fct&gt; Corner, Inside, Corner, Inside, Inside, Inside, Insi…
$ `Land Slope`      &lt;fct&gt; Gtl, Gtl, Gtl, Gtl, Gtl, Gtl, Gtl, Gtl, Gtl, Gtl, Gt…
$ Neighborhood      &lt;fct&gt; NAmes, NAmes, NAmes, Gilbert, StoneBr, StoneBr, Ston…
$ `Condition 1`     &lt;fct&gt; Norm, Feedr, Norm, Norm, Norm, Norm, Norm, Norm, Nor…
$ `Condition 2`     &lt;fct&gt; Norm, Norm, Norm, Norm, Norm, Norm, Norm, Norm, Norm…
$ `Bldg Type`       &lt;fct&gt; 1Fam, 1Fam, 1Fam, 1Fam, TwnhsE, TwnhsE, TwnhsE, 1Fam…
$ `House Style`     &lt;fct&gt; 1Story, 1Story, 1Story, 2Story, 1Story, 1Story, 1Sto…
$ `Overall Qual`    &lt;dbl&gt; 6, 5, 6, 5, 8, 8, 8, 7, 6, 6, 7, 8, 8, 8, 9, 4, 6, 6…
$ `Overall Cond`    &lt;dbl&gt; 5, 6, 6, 5, 5, 5, 5, 5, 5, 5, 5, 5, 5, 7, 2, 5, 6, 6…
$ `Year Built`      &lt;dbl&gt; 1960, 1961, 1958, 1997, 2001, 1992, 1995, 1999, 1993…
$ `Year Remod/Add`  &lt;dbl&gt; 1960, 1961, 1958, 1998, 2001, 1992, 1996, 1999, 1994…
$ `Roof Style`      &lt;fct&gt; Hip, Gable, Hip, Gable, Gable, Gable, Gable, Gable, …
$ `Roof Matl`       &lt;fct&gt; CompShg, CompShg, CompShg, CompShg, CompShg, CompShg…
$ `Exterior 1st`    &lt;fct&gt; BrkFace, VinylSd, Wd Sdng, VinylSd, CemntBd, HdBoard…
$ `Exterior 2nd`    &lt;fct&gt; Plywood, VinylSd, Wd Sdng, VinylSd, CmentBd, HdBoard…
$ `Mas Vnr Type`    &lt;fct&gt; Stone, None, BrkFace, None, None, None, None, None, …
$ `Mas Vnr Area`    &lt;dbl&gt; 112, 0, 108, 0, 0, 0, 0, 0, 0, 0, 0, 0, 603, 0, 350,…
$ `Exter Qual`      &lt;fct&gt; TA, TA, TA, TA, Gd, Gd, Gd, TA, TA, TA, TA, Gd, Ex, …
$ `Exter Cond`      &lt;fct&gt; TA, TA, TA, TA, TA, TA, TA, TA, TA, TA, TA, TA, TA, …
$ Foundation        &lt;fct&gt; CBlock, CBlock, CBlock, PConc, PConc, PConc, PConc, …
$ `Bsmt Qual`       &lt;fct&gt; TA, TA, TA, Gd, Gd, Gd, Gd, TA, Gd, Gd, Gd, Gd, Gd, …
$ `Bsmt Cond`       &lt;fct&gt; Gd, TA, TA, TA, TA, TA, TA, TA, TA, TA, TA, TA, TA, …
$ `Bsmt Exposure`   &lt;fct&gt; Gd, No, No, No, Mn, No, No, No, No, No, Gd, Av, Gd, …
$ `BsmtFin Type 1`  &lt;fct&gt; BLQ, Rec, ALQ, GLQ, GLQ, ALQ, GLQ, Unf, Unf, Unf, GL…
$ `BsmtFin SF 1`    &lt;dbl&gt; 639, 468, 923, 791, 616, 263, 1180, 0, 0, 0, 637, 36…
$ `BsmtFin Type 2`  &lt;fct&gt; Unf, LwQ, Unf, Unf, Unf, Unf, Unf, Unf, Unf, Unf, Un…
$ `BsmtFin SF 2`    &lt;dbl&gt; 0, 144, 0, 0, 0, 0, 0, 0, 0, 0, 0, 1120, 0, 0, 0, 0,…
$ `Bsmt Unf SF`     &lt;dbl&gt; 441, 270, 406, 137, 722, 1017, 415, 994, 763, 789, 6…
$ `Total Bsmt SF`   &lt;dbl&gt; 1080, 882, 1329, 928, 1338, 1280, 1595, 994, 763, 78…
$ Heating           &lt;fct&gt; GasA, GasA, GasA, GasA, GasA, GasA, GasA, GasA, GasA…
$ `Heating QC`      &lt;fct&gt; Fa, TA, TA, Gd, Ex, Ex, Ex, Gd, Gd, Gd, Gd, TA, Ex, …
$ `Central Air`     &lt;fct&gt; Y, Y, Y, Y, Y, Y, Y, Y, Y, Y, Y, Y, Y, Y, Y, Y, Y, Y…
$ Electrical        &lt;fct&gt; SBrkr, SBrkr, SBrkr, SBrkr, SBrkr, SBrkr, SBrkr, SBr…
$ `1st Flr SF`      &lt;dbl&gt; 1656, 896, 1329, 928, 1338, 1280, 1616, 1028, 763, 7…
$ `2nd Flr SF`      &lt;dbl&gt; 0, 0, 0, 701, 0, 0, 0, 776, 892, 676, 0, 0, 1589, 67…
$ `Low Qual Fin SF` &lt;dbl&gt; 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0…
$ `Gr Liv Area`     &lt;dbl&gt; 1656, 896, 1329, 1629, 1338, 1280, 1616, 1804, 1655,…
$ `Bsmt Full Bath`  &lt;dbl&gt; 1, 0, 0, 0, 1, 0, 1, 0, 0, 0, 1, 1, 1, 0, 1, 0, 1, 0…
$ `Bsmt Half Bath`  &lt;dbl&gt; 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0…
$ `Full Bath`       &lt;dbl&gt; 1, 1, 1, 2, 2, 2, 2, 2, 2, 2, 1, 1, 3, 2, 1, 1, 2, 2…
$ `Half Bath`       &lt;dbl&gt; 0, 0, 1, 1, 0, 0, 0, 1, 1, 1, 1, 1, 1, 0, 1, 0, 0, 0…
$ `Bedroom AbvGr`   &lt;dbl&gt; 3, 2, 3, 3, 2, 2, 2, 3, 3, 3, 2, 1, 4, 4, 1, 2, 3, 3…
$ `Kitchen AbvGr`   &lt;dbl&gt; 1, 1, 1, 1, 1, 1, 1, 1, 1, 1, 1, 1, 1, 1, 1, 1, 1, 1…
$ `Kitchen Qual`    &lt;fct&gt; TA, TA, Gd, TA, Gd, Gd, Gd, Gd, TA, TA, Gd, Gd, Ex, …
$ `TotRms AbvGrd`   &lt;dbl&gt; 7, 5, 6, 6, 6, 5, 5, 7, 7, 7, 5, 4, 12, 8, 8, 4, 7, …
$ Functional        &lt;fct&gt; Typ, Typ, Typ, Typ, Typ, Typ, Typ, Typ, Typ, Typ, Ty…
$ Fireplaces        &lt;dbl&gt; 2, 0, 0, 1, 0, 0, 1, 1, 1, 1, 1, 0, 1, 0, 1, 0, 2, 1…
$ `Fireplace Qu`    &lt;fct&gt; Gd, NA, NA, TA, NA, NA, TA, TA, TA, Gd, Po, NA, Gd, …
$ `Garage Type`     &lt;fct&gt; Attchd, Attchd, Attchd, Attchd, Attchd, Attchd, Attc…
$ `Garage Yr Blt`   &lt;dbl&gt; 1960, 1961, 1958, 1997, 2001, 1992, 1995, 1999, 1993…
$ `Garage Finish`   &lt;fct&gt; Fin, Unf, Unf, Fin, Fin, RFn, RFn, Fin, Fin, Fin, Un…
$ `Garage Cars`     &lt;dbl&gt; 2, 1, 1, 2, 2, 2, 2, 2, 2, 2, 2, 2, 3, 2, 3, 2, 2, 2…
$ `Garage Area`     &lt;dbl&gt; 528, 730, 312, 482, 582, 506, 608, 442, 440, 393, 50…
$ `Garage Qual`     &lt;fct&gt; TA, TA, TA, TA, TA, TA, TA, TA, TA, TA, TA, TA, TA, …
$ `Garage Cond`     &lt;fct&gt; TA, TA, TA, TA, TA, TA, TA, TA, TA, TA, TA, TA, TA, …
$ `Paved Drive`     &lt;fct&gt; P, Y, Y, Y, Y, Y, Y, Y, Y, Y, Y, Y, Y, Y, Y, Y, Y, Y…
$ `Wood Deck SF`    &lt;dbl&gt; 210, 140, 393, 212, 0, 0, 237, 140, 157, 0, 192, 0, …
$ `Open Porch SF`   &lt;dbl&gt; 62, 0, 36, 34, 0, 82, 152, 60, 84, 75, 0, 54, 36, 12…
$ `Enclosed Porch`  &lt;dbl&gt; 0, 0, 0, 0, 170, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0,…
$ `3Ssn Porch`      &lt;dbl&gt; 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0…
$ `Screen Porch`    &lt;dbl&gt; 0, 120, 0, 0, 0, 144, 0, 0, 0, 0, 0, 140, 210, 0, 0,…
$ `Pool Area`       &lt;dbl&gt; 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0…
$ `Pool QC`         &lt;fct&gt; NA, NA, NA, NA, NA, NA, NA, NA, NA, NA, NA, NA, NA, …
$ Fence             &lt;fct&gt; NA, MnPrv, NA, MnPrv, NA, NA, NA, NA, NA, NA, NA, NA…
$ `Misc Feature`    &lt;fct&gt; NA, NA, Gar2, NA, NA, NA, NA, NA, NA, NA, NA, NA, NA…
$ `Misc Val`        &lt;dbl&gt; 0, 0, 12500, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, …
$ `Mo Sold`         &lt;dbl&gt; 5, 6, 6, 3, 4, 1, 3, 6, 4, 5, 2, 6, 6, 6, 6, 6, 2, 1…
$ `Yr Sold`         &lt;dbl&gt; 2010, 2010, 2010, 2010, 2010, 2010, 2010, 2010, 2010…
$ `Sale Type`       &lt;fct&gt; WD, WD, WD, WD, WD, WD, WD, WD, WD, WD, WD, WD, WD, …
$ `Sale Condition`  &lt;fct&gt; Normal, Normal, Normal, Normal, Normal, Normal, Norm…
$ SalePrice         &lt;dbl&gt; 215000, 105000, 172000, 189900, 213500, 191500, 2365…</code></pre>
</div>
</div>
<hr>
<p>Dataset Notes:</p>
<ul>
<li><p>Dataset has N = 1955 rather than 2930.</p>
<ul>
<li>I have held out remaining observations to serve as a test set for a friendly competition in Unit 3</li>
<li>I will judge your models’ performance with this test set at that time!</li>
<li>More on the importance of held out test sets as we progress through the course</li>
</ul></li>
<li><p>This full dataset has 81 variables. For the lecture examples in units 2-3 we will only use a subset of the predictors</p></li>
<li><p>You will use different predictors in the next two application assignments</p></li>
</ul>
<div class="cell">
<div class="sourceCode cell-code" id="cb15"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb15-1"><a href="#cb15-1" aria-hidden="true" tabindex="-1"></a>data_all <span class="ot">&lt;-</span> data_all <span class="sc">|&gt;</span> </span>
<span id="cb15-2"><a href="#cb15-2" aria-hidden="true" tabindex="-1"></a>  <span class="fu">select</span>(SalePrice,</span>
<span id="cb15-3"><a href="#cb15-3" aria-hidden="true" tabindex="-1"></a>         <span class="st">`</span><span class="at">Gr Liv Area</span><span class="st">`</span>, </span>
<span id="cb15-4"><a href="#cb15-4" aria-hidden="true" tabindex="-1"></a>         <span class="st">`</span><span class="at">Lot Area</span><span class="st">`</span>, </span>
<span id="cb15-5"><a href="#cb15-5" aria-hidden="true" tabindex="-1"></a>         <span class="st">`</span><span class="at">Year Built</span><span class="st">`</span>, </span>
<span id="cb15-6"><a href="#cb15-6" aria-hidden="true" tabindex="-1"></a>         <span class="st">`</span><span class="at">Overall Qual</span><span class="st">`</span>, </span>
<span id="cb15-7"><a href="#cb15-7" aria-hidden="true" tabindex="-1"></a>         <span class="st">`</span><span class="at">Garage Cars</span><span class="st">`</span>,</span>
<span id="cb15-8"><a href="#cb15-8" aria-hidden="true" tabindex="-1"></a>         <span class="st">`</span><span class="at">Garage Qual</span><span class="st">`</span>,</span>
<span id="cb15-9"><a href="#cb15-9" aria-hidden="true" tabindex="-1"></a>         <span class="st">`</span><span class="at">MS Zoning</span><span class="st">`</span>,</span>
<span id="cb15-10"><a href="#cb15-10" aria-hidden="true" tabindex="-1"></a>         <span class="st">`</span><span class="at">Lot Config</span><span class="st">`</span> ,</span>
<span id="cb15-11"><a href="#cb15-11" aria-hidden="true" tabindex="-1"></a>         <span class="st">`</span><span class="at">Bldg Type</span><span class="st">`</span>) <span class="sc">|&gt;</span> </span>
<span id="cb15-12"><a href="#cb15-12" aria-hidden="true" tabindex="-1"></a>  <span class="fu">glimpse</span>()</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
<div class="cell-output cell-output-stdout">
<pre><code>Rows: 1,955
Columns: 10
$ SalePrice      &lt;dbl&gt; 215000, 105000, 172000, 189900, 213500, 191500, 236500,…
$ `Gr Liv Area`  &lt;dbl&gt; 1656, 896, 1329, 1629, 1338, 1280, 1616, 1804, 1655, 14…
$ `Lot Area`     &lt;dbl&gt; 31770, 11622, 14267, 13830, 4920, 5005, 5389, 7500, 100…
$ `Year Built`   &lt;dbl&gt; 1960, 1961, 1958, 1997, 2001, 1992, 1995, 1999, 1993, 1…
$ `Overall Qual` &lt;dbl&gt; 6, 5, 6, 5, 8, 8, 8, 7, 6, 6, 7, 8, 8, 8, 9, 4, 6, 6, 7…
$ `Garage Cars`  &lt;dbl&gt; 2, 1, 1, 2, 2, 2, 2, 2, 2, 2, 2, 2, 3, 2, 3, 2, 2, 2, 2…
$ `Garage Qual`  &lt;fct&gt; TA, TA, TA, TA, TA, TA, TA, TA, TA, TA, TA, TA, TA, TA,…
$ `MS Zoning`    &lt;fct&gt; RL, RH, RL, RL, RL, RL, RL, RL, RL, RL, RL, RL, RL, RL,…
$ `Lot Config`   &lt;fct&gt; Corner, Inside, Corner, Inside, Inside, Inside, Inside,…
$ `Bldg Type`    &lt;fct&gt; 1Fam, 1Fam, 1Fam, 1Fam, TwnhsE, TwnhsE, TwnhsE, 1Fam, 1…</code></pre>
</div>
</div>
<p><strong>Coding Sidebar</strong>:</p>
<ul>
<li>Notice the non-standard variable names that include spaces.<br>
</li>
<li>We use the back-ticks around the variable names to allow us reference those variables.<br>
</li>
<li>We will fix this during the cleaning process.</li>
<li>Never use spaces in variable names when setting up your own data!!! (More on this in a moment…)</li>
</ul>
</section>
</section>
<section id="exploratory-data-analysis-for-data-cleaning" class="level2" data-number="2.3">
<h2 data-number="2.3" class="anchored" data-anchor-id="exploratory-data-analysis-for-data-cleaning"><span class="header-section-number">2.3</span> Exploratory Data Analysis for Data Cleaning</h2>
<p>EDA <em>could</em> be done using either <code>tidyverse</code> packages and functions or <code>tidymodels</code> (mostly using the <code>recipes</code> package.)</p>
<ul>
<li><p>We prefer to use the richer set of functions available in the tidyverse (and <code>dplyr</code> and <code>purrr</code> packages in particular).</p></li>
<li><p>We will reserve the use of recipes for feature engineering only when we are building features for models that we will fit in our training sets and evaluation in our validation and test sets.</p></li>
</ul>
<section id="data-leakage-issues" class="level3" data-number="2.3.1">
<h3 data-number="2.3.1" class="anchored" data-anchor-id="data-leakage-issues"><span class="header-section-number">2.3.1</span> Data Leakage Issues</h3>
<p>Data leakage refers to a mistake made by the creator of a machine learning model in which they accidentally share information between their training set and held-out validation or test sets</p>
<ul>
<li><p>Training sets are used to fit models with different configurations</p></li>
<li><p>Validation sets are used to select the best model among those with different configurations (not needed if you only have one configuration)</p></li>
<li><p>Test sets are used to evaluate a best model</p></li>
<li><p>When splitting data-sets into training, validation and test sets, the goal is to ensure that no data (or information more broadly) are shared between the three</p>
<ul>
<li>No data or information from test should influence either fitting or selecting models</li>
<li>Test should only be used once to evaluate a best/final model</li>
<li>Train and validation set also must be segregated (although validation sets may be used to evaluate many models)</li>
<li>Information necessary for transformations and other feature engineering (e.g., means/sds for centering/scaling, procedures for missing data imputation) must all be based only on training data.</li>
<li>Data leakage is common if you are not careful.</li>
</ul></li>
</ul>
<p>In particular, if we begin to use test data or information about test during model fitting</p>
<ul>
<li>We risk overfitting</li>
<li>This is essentially the equivalent of p-hacking in traditional analyses</li>
<li>Will report too optimistic performance estimate, which could have harmful real-world consequences.</li>
</ul>
</section>
<section id="tidy-variable-names" class="level3" data-number="2.3.2">
<h3 data-number="2.3.2" class="anchored" data-anchor-id="tidy-variable-names"><span class="header-section-number">2.3.2</span> Tidy variable names</h3>
<p>Use snake case for variable names</p>
<ul>
<li><code>clean_names()</code> from <code>janitor</code> package is useful for this.</li>
<li>May need to do further correction of variable names using <code>rename()</code></li>
<li>See more details about tidy names for objects (e.g., variables, dfs, functions) per <a href="https://style.tidyverse.org/syntax.html#object-names">Tidy Style Guide</a></li>
</ul>
<div class="cell">
<div class="sourceCode cell-code" id="cb17"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb17-1"><a href="#cb17-1" aria-hidden="true" tabindex="-1"></a>data_all <span class="ot">&lt;-</span> data_all <span class="sc">|&gt;</span> </span>
<span id="cb17-2"><a href="#cb17-2" aria-hidden="true" tabindex="-1"></a>  <span class="fu">clean_names</span>(<span class="st">"snake"</span>)</span>
<span id="cb17-3"><a href="#cb17-3" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb17-4"><a href="#cb17-4" aria-hidden="true" tabindex="-1"></a>data_all <span class="sc">|&gt;</span> <span class="fu">names</span>()</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
<div class="cell-output cell-output-stdout">
<pre><code> [1] "sale_price"   "gr_liv_area"  "lot_area"     "year_built"   "overall_qual"
 [6] "garage_cars"  "garage_qual"  "ms_zoning"    "lot_config"   "bldg_type"   </code></pre>
</div>
</div>
</section>
<section id="explore-variable-classes" class="level3" data-number="2.3.3">
<h3 data-number="2.3.3" class="anchored" data-anchor-id="explore-variable-classes"><span class="header-section-number">2.3.3</span> Explore variable classes</h3>
<p>At this point, variables should be classed as either numeric or factor</p>
<ul>
<li>Interval and ratio variables use numeric classes (dbl or int)</li>
<li>Nominal and ordinal variable use factor class</li>
<li>Useful for variable selection later (e.g., <code>where(is.numeric)</code>, <code>where(is.factor)</code>)</li>
</ul>
<p>Subsequent cleaning steps are clearer if we have this established/confirmed now</p>
<hr>
<p>We have one variable to change to factor class</p>
<div class="cell">
<div class="sourceCode cell-code" id="cb19"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb19-1"><a href="#cb19-1" aria-hidden="true" tabindex="-1"></a>data_all <span class="sc">|&gt;</span> <span class="fu">glimpse</span>()</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
<div class="cell-output cell-output-stdout">
<pre><code>Rows: 1,955
Columns: 10
$ sale_price   &lt;dbl&gt; 215000, 105000, 172000, 189900, 213500, 191500, 236500, 1…
$ gr_liv_area  &lt;dbl&gt; 1656, 896, 1329, 1629, 1338, 1280, 1616, 1804, 1655, 1465…
$ lot_area     &lt;dbl&gt; 31770, 11622, 14267, 13830, 4920, 5005, 5389, 7500, 10000…
$ year_built   &lt;dbl&gt; 1960, 1961, 1958, 1997, 2001, 1992, 1995, 1999, 1993, 199…
$ overall_qual &lt;dbl&gt; 6, 5, 6, 5, 8, 8, 8, 7, 6, 6, 7, 8, 8, 8, 9, 4, 6, 6, 7, …
$ garage_cars  &lt;dbl&gt; 2, 1, 1, 2, 2, 2, 2, 2, 2, 2, 2, 2, 3, 2, 3, 2, 2, 2, 2, …
$ garage_qual  &lt;fct&gt; TA, TA, TA, TA, TA, TA, TA, TA, TA, TA, TA, TA, TA, TA, T…
$ ms_zoning    &lt;fct&gt; RL, RH, RL, RL, RL, RL, RL, RL, RL, RL, RL, RL, RL, RL, R…
$ lot_config   &lt;fct&gt; Corner, Inside, Corner, Inside, Inside, Inside, Inside, I…
$ bldg_type    &lt;fct&gt; 1Fam, 1Fam, 1Fam, 1Fam, TwnhsE, TwnhsE, TwnhsE, 1Fam, 1Fa…</code></pre>
</div>
</div>
<p><code>overall_qual</code> is ordinal.<br>
* We should convert it to a factor and confirm the levels are ordered properly.<br>
* The data dictionary indicates that valid values range from 1 - 10.</p>
<div class="cell">
<div class="sourceCode cell-code" id="annotated-cell-13"><pre class="sourceCode r code-annotation-code code-with-copy code-annotated"><code class="sourceCode r"><a class="code-annotation-anchor" data-target-cell="annotated-cell-13" data-target-annotation="1" onclick="event.preventDefault();">1</a><span id="annotated-cell-13-1" class="code-annotation-target"><a href="#annotated-cell-13-1" aria-hidden="true" tabindex="-1"></a>oq_levels <span class="ot">&lt;-</span> <span class="dv">1</span><span class="sc">:</span><span class="dv">10</span></span>
<span id="annotated-cell-13-2"><a href="#annotated-cell-13-2" aria-hidden="true" tabindex="-1"></a></span>
<span id="annotated-cell-13-3"><a href="#annotated-cell-13-3" aria-hidden="true" tabindex="-1"></a>t <span class="ot">&lt;-</span>  data_all <span class="sc">|&gt;</span> </span>
<span id="annotated-cell-13-4"><a href="#annotated-cell-13-4" aria-hidden="true" tabindex="-1"></a>  <span class="fu">mutate</span>(<span class="at">overall_qual =</span> <span class="fu">factor</span>(overall_qual, </span>
<a class="code-annotation-anchor" data-target-cell="annotated-cell-13" data-target-annotation="2" onclick="event.preventDefault();">2</a><span id="annotated-cell-13-5" class="code-annotation-target"><a href="#annotated-cell-13-5" aria-hidden="true" tabindex="-1"></a>                               <span class="at">levels =</span> oq_levels)) <span class="sc">|&gt;</span></span>
<span id="annotated-cell-13-6"><a href="#annotated-cell-13-6" aria-hidden="true" tabindex="-1"></a>  <span class="fu">glimpse</span>()</span><div class="code-annotation-gutter-bg"></div><div class="code-annotation-gutter"></div></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
<div class="cell-annotation">
<dl class="code-annotation-container-grid">
<dt data-target-cell="annotated-cell-13" data-target-annotation="1">1</dt>
<dd>
<span data-code-annotation="1" data-code-lines="1" data-code-cell="annotated-cell-13">It is always best to explicitly set the levels of an ordinal factor in the order you prefer. It is not necessary here because <code>overall_qual</code> was numeric and therefore sorts in the expected order. However, if it had been numbers stores as characters, it could sort incorrectly (e.g., 1, 10, 2, 3, …). And obviously if the orders levels were names, the order would have to be specified.</span>
</dd>
<dt data-target-cell="annotated-cell-13" data-target-annotation="2">2</dt>
<dd>
<span data-code-annotation="2" data-code-lines="5" data-code-cell="annotated-cell-13">We indicate the levels here.</span>
</dd>
</dl>
</div>
<div class="cell-output cell-output-stdout">
<pre><code>Rows: 1,955
Columns: 10
$ sale_price   &lt;dbl&gt; 215000, 105000, 172000, 189900, 213500, 191500, 236500, 1…
$ gr_liv_area  &lt;dbl&gt; 1656, 896, 1329, 1629, 1338, 1280, 1616, 1804, 1655, 1465…
$ lot_area     &lt;dbl&gt; 31770, 11622, 14267, 13830, 4920, 5005, 5389, 7500, 10000…
$ year_built   &lt;dbl&gt; 1960, 1961, 1958, 1997, 2001, 1992, 1995, 1999, 1993, 199…
$ overall_qual &lt;fct&gt; 6, 5, 6, 5, 8, 8, 8, 7, 6, 6, 7, 8, 8, 8, 9, 4, 6, 6, 7, …
$ garage_cars  &lt;dbl&gt; 2, 1, 1, 2, 2, 2, 2, 2, 2, 2, 2, 2, 3, 2, 3, 2, 2, 2, 2, …
$ garage_qual  &lt;fct&gt; TA, TA, TA, TA, TA, TA, TA, TA, TA, TA, TA, TA, TA, TA, T…
$ ms_zoning    &lt;fct&gt; RL, RH, RL, RL, RL, RL, RL, RL, RL, RL, RL, RL, RL, RL, R…
$ lot_config   &lt;fct&gt; Corner, Inside, Corner, Inside, Inside, Inside, Inside, I…
$ bldg_type    &lt;fct&gt; 1Fam, 1Fam, 1Fam, 1Fam, TwnhsE, TwnhsE, TwnhsE, 1Fam, 1Fa…</code></pre>
</div>
</div>
</section>
<section id="skimming-the-data" class="level3" data-number="2.3.4">
<h3 data-number="2.3.4" class="anchored" data-anchor-id="skimming-the-data"><span class="header-section-number">2.3.4</span> Skimming the data</h3>
<p><code>skim()</code> from the <code>skimr</code> package is a wonderful and customizable function for summary statistics</p>
<ul>
<li>It is highly customizable so we can write our own versions for our own needs</li>
<li>We use different versions for cleaning and modeling EDA</li>
<li>For cleaning EDA, we just remove some stats that we don’t want to see at this time</li>
<li>We can get many of the summary stats for cleaning in one call</li>
<li>We have a custom skim defined in the <code>fun_eda.R</code> library that we use regularly. Here is the code but you can use the function directly if you sourced <code>fun_eda.R</code> (as we did above)</li>
</ul>
<div class="cell">
<div class="sourceCode cell-code" id="cb22"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb22-1"><a href="#cb22-1" aria-hidden="true" tabindex="-1"></a>skim_some <span class="ot">&lt;-</span> <span class="fu">skim_with</span>(<span class="at">numeric =</span> <span class="fu">sfl</span>(<span class="at">mean =</span> <span class="cn">NULL</span>, <span class="at">sd =</span> <span class="cn">NULL</span>, <span class="at">p25 =</span> <span class="cn">NULL</span>, <span class="at">p50 =</span> <span class="cn">NULL</span>, <span class="at">p75 =</span> <span class="cn">NULL</span>, <span class="at">hist =</span> <span class="cn">NULL</span>))</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
</div>
<hr>
<p>Here is what we get with our new <code>skim_some()</code> function</p>
<ul>
<li>We will refer to this again for each characteristic we want to review for instructional purposes</li>
<li>We can already see that we can use <code>skim_some()</code> to confirm that we only have numeric and character classes</li>
</ul>
<div class="cell">
<div class="sourceCode cell-code" id="cb23"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb23-1"><a href="#cb23-1" aria-hidden="true" tabindex="-1"></a>data_all <span class="sc">|&gt;</span> </span>
<span id="cb23-2"><a href="#cb23-2" aria-hidden="true" tabindex="-1"></a>  <span class="fu">skim_some</span>()</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
<div class="cell-output-display">

<table style="width: auto;" class="table table-condensed">
<caption>
Data summary
</caption>
<tbody>
<tr>
<td style="text-align:left;">
Name
</td>
<td style="text-align:left;">
data_all
</td>
</tr>
<tr>
<td style="text-align:left;">
Number of rows
</td>
<td style="text-align:left;">
1955
</td>
</tr>
<tr>
<td style="text-align:left;">
Number of columns
</td>
<td style="text-align:left;">
10
</td>
</tr>
<tr>
<td style="text-align:left;">
_______________________
</td>
<td style="text-align:left;">
</td>
</tr>
<tr>
<td style="text-align:left;">
Column type frequency:
</td>
<td style="text-align:left;">
</td>
</tr>
<tr>
<td style="text-align:left;">
factor
</td>
<td style="text-align:left;">
4
</td>
</tr>
<tr>
<td style="text-align:left;">
numeric
</td>
<td style="text-align:left;">
6
</td>
</tr>
<tr>
<td style="text-align:left;">
________________________
</td>
<td style="text-align:left;">
</td>
</tr>
<tr>
<td style="text-align:left;">
Group variables
</td>
<td style="text-align:left;">
None
</td>
</tr>
</tbody>

</table>
<p><strong>Variable type: factor</strong></p>

<table>
<thead>
<tr>
<th style="text-align:left;">
skim_variable
</th>
<th style="text-align:right;">
n_missing
</th>
<th style="text-align:right;">
complete_rate
</th>
<th style="text-align:left;">
ordered
</th>
<th style="text-align:right;">
n_unique
</th>
<th style="text-align:left;">
top_counts
</th>
</tr>
</thead>
<tbody>
<tr>
<td style="text-align:left;">
garage_qual
</td>
<td style="text-align:right;">
109
</td>
<td style="text-align:right;">
0.94
</td>
<td style="text-align:left;">
FALSE
</td>
<td style="text-align:right;">
5
</td>
<td style="text-align:left;">
TA: 1745, Fa: 79, Gd: 16, Po: 4
</td>
</tr>
<tr>
<td style="text-align:left;">
ms_zoning
</td>
<td style="text-align:right;">
0
</td>
<td style="text-align:right;">
1.00
</td>
<td style="text-align:left;">
FALSE
</td>
<td style="text-align:right;">
7
</td>
<td style="text-align:left;">
RL: 1530, RM: 297, FV: 91, C (: 19
</td>
</tr>
<tr>
<td style="text-align:left;">
lot_config
</td>
<td style="text-align:right;">
0
</td>
<td style="text-align:right;">
1.00
</td>
<td style="text-align:left;">
FALSE
</td>
<td style="text-align:right;">
5
</td>
<td style="text-align:left;">
Ins: 1454, Cor: 328, Cul: 114, FR2: 55
</td>
</tr>
<tr>
<td style="text-align:left;">
bldg_type
</td>
<td style="text-align:right;">
0
</td>
<td style="text-align:right;">
1.00
</td>
<td style="text-align:left;">
FALSE
</td>
<td style="text-align:right;">
5
</td>
<td style="text-align:left;">
1Fa: 1631, Twn: 145, Dup: 77, Twn: 64
</td>
</tr>
</tbody>

</table>
<p><strong>Variable type: numeric</strong></p>

<table>
<thead>
<tr>
<th style="text-align:left;">
skim_variable
</th>
<th style="text-align:right;">
n_missing
</th>
<th style="text-align:right;">
complete_rate
</th>
<th style="text-align:right;">
p0
</th>
<th style="text-align:right;">
p100
</th>
</tr>
</thead>
<tbody>
<tr>
<td style="text-align:left;">
sale_price
</td>
<td style="text-align:right;">
0
</td>
<td style="text-align:right;">
1
</td>
<td style="text-align:right;">
12789
</td>
<td style="text-align:right;">
745000
</td>
</tr>
<tr>
<td style="text-align:left;">
gr_liv_area
</td>
<td style="text-align:right;">
0
</td>
<td style="text-align:right;">
1
</td>
<td style="text-align:right;">
438
</td>
<td style="text-align:right;">
5642
</td>
</tr>
<tr>
<td style="text-align:left;">
lot_area
</td>
<td style="text-align:right;">
0
</td>
<td style="text-align:right;">
1
</td>
<td style="text-align:right;">
1476
</td>
<td style="text-align:right;">
215245
</td>
</tr>
<tr>
<td style="text-align:left;">
year_built
</td>
<td style="text-align:right;">
0
</td>
<td style="text-align:right;">
1
</td>
<td style="text-align:right;">
1875
</td>
<td style="text-align:right;">
2010
</td>
</tr>
<tr>
<td style="text-align:left;">
overall_qual
</td>
<td style="text-align:right;">
0
</td>
<td style="text-align:right;">
1
</td>
<td style="text-align:right;">
1
</td>
<td style="text-align:right;">
10
</td>
</tr>
<tr>
<td style="text-align:left;">
garage_cars
</td>
<td style="text-align:right;">
1
</td>
<td style="text-align:right;">
1
</td>
<td style="text-align:right;">
0
</td>
<td style="text-align:right;">
4
</td>
</tr>
</tbody>

</table>
</div>
</div>
<p><strong>Coding sidebar 1:</strong></p>
<ul>
<li>Write functions whenever you will repeat code often. You can now reuse <code>skim_some()</code></li>
<li><code>skim_with()</code> is an example of a function factory - a function that is used to create a new function
<ul>
<li><code>partial()</code> and <code>compose()</code> are two other function factories we will use at times</li>
<li>More details on function factories is available in <a href="https://adv-r.hadley.nz/function-factories.html">Advanced R</a></li>
</ul></li>
</ul>
<hr>
<p><strong>Coding sidebar 2:</strong></p>
<ul>
<li>Gather useful functions together in a script that you can reuse.</li>
<li>All of the reusable functions in this and later units are available to you in one of my <a href="https://github.com/jjcurtin/lab_support">public github repositories</a>.</li>
<li>You can load these functions into your workspace directly from github using <code>devtools::source_url()</code>. For example: <code>devtools::source_url("https://github.com/jjcurtin/lab_support/blob/main/fun_modeling.R?raw=true")</code></li>
<li>You should start to gather your favorite custom functions together in your own script(s).<br>
</li>
<li>You can save your own scripts in a local file and load them into your workspace using <code>source()</code> or you can make your own github repo so you can begin to share your code with others!</li>
</ul>
</section>
<section id="missing-data---all-variables" class="level3" data-number="2.3.5">
<h3 data-number="2.3.5" class="anchored" data-anchor-id="missing-data---all-variables"><span class="header-section-number">2.3.5</span> Missing Data - All variables</h3>
<p><code>skim_some()</code> provides us with missing data counts and complete data proportions for each variable</p>
<div class="cell">
<div class="sourceCode cell-code" id="cb24"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb24-1"><a href="#cb24-1" aria-hidden="true" tabindex="-1"></a>data_all <span class="sc">|&gt;</span> </span>
<span id="cb24-2"><a href="#cb24-2" aria-hidden="true" tabindex="-1"></a>  <span class="fu">skim_some</span>()</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
<div class="cell-output-display">

<table style="width: auto;" class="table table-condensed">
<caption>
Data summary
</caption>
<tbody>
<tr>
<td style="text-align:left;">
Name
</td>
<td style="text-align:left;">
data_all
</td>
</tr>
<tr>
<td style="text-align:left;">
Number of rows
</td>
<td style="text-align:left;">
1955
</td>
</tr>
<tr>
<td style="text-align:left;">
Number of columns
</td>
<td style="text-align:left;">
10
</td>
</tr>
<tr>
<td style="text-align:left;">
_______________________
</td>
<td style="text-align:left;">
</td>
</tr>
<tr>
<td style="text-align:left;">
Column type frequency:
</td>
<td style="text-align:left;">
</td>
</tr>
<tr>
<td style="text-align:left;">
factor
</td>
<td style="text-align:left;">
4
</td>
</tr>
<tr>
<td style="text-align:left;">
numeric
</td>
<td style="text-align:left;">
6
</td>
</tr>
<tr>
<td style="text-align:left;">
________________________
</td>
<td style="text-align:left;">
</td>
</tr>
<tr>
<td style="text-align:left;">
Group variables
</td>
<td style="text-align:left;">
None
</td>
</tr>
</tbody>

</table>
<p><strong>Variable type: factor</strong></p>

<table>
<thead>
<tr>
<th style="text-align:left;">
skim_variable
</th>
<th style="text-align:right;">
n_missing
</th>
<th style="text-align:right;">
complete_rate
</th>
<th style="text-align:left;">
ordered
</th>
<th style="text-align:right;">
n_unique
</th>
<th style="text-align:left;">
top_counts
</th>
</tr>
</thead>
<tbody>
<tr>
<td style="text-align:left;">
garage_qual
</td>
<td style="text-align:right;">
109
</td>
<td style="text-align:right;">
0.94
</td>
<td style="text-align:left;">
FALSE
</td>
<td style="text-align:right;">
5
</td>
<td style="text-align:left;">
TA: 1745, Fa: 79, Gd: 16, Po: 4
</td>
</tr>
<tr>
<td style="text-align:left;">
ms_zoning
</td>
<td style="text-align:right;">
0
</td>
<td style="text-align:right;">
1.00
</td>
<td style="text-align:left;">
FALSE
</td>
<td style="text-align:right;">
7
</td>
<td style="text-align:left;">
RL: 1530, RM: 297, FV: 91, C (: 19
</td>
</tr>
<tr>
<td style="text-align:left;">
lot_config
</td>
<td style="text-align:right;">
0
</td>
<td style="text-align:right;">
1.00
</td>
<td style="text-align:left;">
FALSE
</td>
<td style="text-align:right;">
5
</td>
<td style="text-align:left;">
Ins: 1454, Cor: 328, Cul: 114, FR2: 55
</td>
</tr>
<tr>
<td style="text-align:left;">
bldg_type
</td>
<td style="text-align:right;">
0
</td>
<td style="text-align:right;">
1.00
</td>
<td style="text-align:left;">
FALSE
</td>
<td style="text-align:right;">
5
</td>
<td style="text-align:left;">
1Fa: 1631, Twn: 145, Dup: 77, Twn: 64
</td>
</tr>
</tbody>

</table>
<p><strong>Variable type: numeric</strong></p>

<table>
<thead>
<tr>
<th style="text-align:left;">
skim_variable
</th>
<th style="text-align:right;">
n_missing
</th>
<th style="text-align:right;">
complete_rate
</th>
<th style="text-align:right;">
p0
</th>
<th style="text-align:right;">
p100
</th>
</tr>
</thead>
<tbody>
<tr>
<td style="text-align:left;">
sale_price
</td>
<td style="text-align:right;">
0
</td>
<td style="text-align:right;">
1
</td>
<td style="text-align:right;">
12789
</td>
<td style="text-align:right;">
745000
</td>
</tr>
<tr>
<td style="text-align:left;">
gr_liv_area
</td>
<td style="text-align:right;">
0
</td>
<td style="text-align:right;">
1
</td>
<td style="text-align:right;">
438
</td>
<td style="text-align:right;">
5642
</td>
</tr>
<tr>
<td style="text-align:left;">
lot_area
</td>
<td style="text-align:right;">
0
</td>
<td style="text-align:right;">
1
</td>
<td style="text-align:right;">
1476
</td>
<td style="text-align:right;">
215245
</td>
</tr>
<tr>
<td style="text-align:left;">
year_built
</td>
<td style="text-align:right;">
0
</td>
<td style="text-align:right;">
1
</td>
<td style="text-align:right;">
1875
</td>
<td style="text-align:right;">
2010
</td>
</tr>
<tr>
<td style="text-align:left;">
overall_qual
</td>
<td style="text-align:right;">
0
</td>
<td style="text-align:right;">
1
</td>
<td style="text-align:right;">
1
</td>
<td style="text-align:right;">
10
</td>
</tr>
<tr>
<td style="text-align:left;">
garage_cars
</td>
<td style="text-align:right;">
1
</td>
<td style="text-align:right;">
1
</td>
<td style="text-align:right;">
0
</td>
<td style="text-align:right;">
4
</td>
</tr>
</tbody>

</table>
</div>
</div>
<hr>
<p>View full observation for missing value</p>
<ul>
<li><code>print()</code> will print only 20 rows and number of columns that will display for width of page
<ul>
<li>Set <code>options()</code> if you will do a lot of printing and want full dataframe printed</li>
</ul></li>
<li>Use <code>kbl()</code> from <code>kableExtra</code> package for formatted tables</li>
<li>Use <code>View()</code> interactively in R Studio</li>
</ul>
<p><strong>Option 1 (Simple)</strong>: Use print() with <code>options()</code></p>
<div class="cell">
<div class="sourceCode cell-code" id="cb25"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb25-1"><a href="#cb25-1" aria-hidden="true" tabindex="-1"></a><span class="fu">options</span>(<span class="at">tibble.width =</span> <span class="cn">Inf</span>, <span class="at">tibble.print_max =</span> <span class="cn">Inf</span>)</span>
<span id="cb25-2"><a href="#cb25-2" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb25-3"><a href="#cb25-3" aria-hidden="true" tabindex="-1"></a>data_all <span class="sc">|&gt;</span> <span class="fu">filter</span>(<span class="fu">is.na</span>(garage_cars)) <span class="sc">|&gt;</span> </span>
<span id="cb25-4"><a href="#cb25-4" aria-hidden="true" tabindex="-1"></a>  <span class="fu">print</span>()</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
<div class="cell-output cell-output-stdout">
<pre><code># A tibble: 1 × 10
  sale_price gr_liv_area lot_area year_built overall_qual garage_cars
       &lt;dbl&gt;       &lt;dbl&gt;    &lt;dbl&gt;      &lt;dbl&gt;        &lt;dbl&gt;       &lt;dbl&gt;
1     150909        1828     9060       1923            5          NA
  garage_qual ms_zoning lot_config bldg_type
  &lt;fct&gt;       &lt;fct&gt;     &lt;fct&gt;      &lt;fct&gt;    
1 &lt;NA&gt;        RM        Inside     1Fam     </code></pre>
</div>
<div class="sourceCode cell-code" id="cb27"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb27-1"><a href="#cb27-1" aria-hidden="true" tabindex="-1"></a>data_all <span class="sc">|&gt;</span> <span class="fu">filter</span>(<span class="fu">is.na</span>(garage_qual)) <span class="sc">|&gt;</span> </span>
<span id="cb27-2"><a href="#cb27-2" aria-hidden="true" tabindex="-1"></a>  <span class="fu">print</span>()</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
<div class="cell-output cell-output-stdout">
<pre><code># A tibble: 109 × 10
    sale_price gr_liv_area lot_area year_built overall_qual garage_cars
         &lt;dbl&gt;       &lt;dbl&gt;    &lt;dbl&gt;      &lt;dbl&gt;        &lt;dbl&gt;       &lt;dbl&gt;
  1     115000         864    10500       1971            4           0
  2     128950        1225     9320       1959            4           0
  3      84900        1728    13260       1962            5           0
  4     116500         858     7207       1958            5           0
  5      76500        1306     5350       1940            3           0
  6      76500        2256     9045       1910            5           0
  7     159900        1560    12900       1912            6           0
  8      55000        1092     5600       1930            4           0
  9      93369        1884     6449       1907            4           0
 10      94000        1020     6342       1875            5           0
 11     136000        1832    10773       1967            4           0
 12     100000        1664     9825       1965            5           0
 13      90000         960     6410       1958            4           0
 14     100000        1666     9839       1931            5           0
 15     139000        1824     9400       1971            6           0
 16      76000        1092     1476       1970            4           0
 17      75500         630     1491       1972            4           0
 18      88250        1092     1900       1970            4           0
 19     136000        1792     9000       1974            5           0
 20     142000        1114    13072       2004            5           0
 21      82500         708     5330       1940            4           0
 22     129000        1464     9900       1910            5           0
 23      94550        1701     7627       1920            4           0
 24     103000        1447    10134       1910            5           0
 25      37900         968     5925       1910            3           0
 26     113000        1452     4456       1920            4           0
 27      58500         816     3300       1910            4           0
 28      34900         720     7879       1920            4           0
 29      60000         800     6120       1936            2           0
 30      62500        2128     3000       1922            5           0
 31      97500        1864     5852       1902            7           0
 32      70000         892     5160       1923            4           0
 33     179000        1200    10800       1987            5           0
 34     179000        1200    10800       1987            5           0
 35      61000         904    10020       1922            1           0
 36     118000         698     9405       1947            5           0
 37      99900         864     4060       1922            5           0
 38     119900        1678    10926       1959            5           0
 39     112000         833     8780       1985            5           0
 40     141000        1080     7500       2004            7           0
 41     106250        1294    10800       1900            4           0
 42     130000        1800     8513       1961            5           0
 43     120000        1027     5400       1920            7           0
 44      95000        1080     5914       1890            5           0
 45      65000        1588    12205       1949            3           0
 46     129400        1540     6000       1905            5           0
 47     160000        1984     8094       1910            6           1
 48      89500        1406     7920       1920            6           0
 49      79900        1198     5586       1920            6           0
 50      82375        1344    10320       1915            3           0
 51     127500        1355    10106       1940            5           0
 52      80000        1006     9000       1959            5           0
 53     260000        1518    19550       1940            5           0
 54      99600         864     9350       1975            5           0
 55     107500        1347     7000       1910            5           0
 56      79000        1096     9600       1924            6           0
 57      85000         796     8777       1910            5           0
 58     145900        2200     8777       1900            5           0
 59      82000        1152     6040       1955            4           0
 60      82000        1152     6012       1955            4           0
 61     118000        1440    12108       1955            4           0
 62      82500        1152     6845       1955            4           0
 63      91900         784     6931       1955            4           0
 64     120000        1053    12180       1938            5           0
 65      96000        1137     8050       1947            5           0
 66      98000         864     5604       1925            5           0
 67      67000         864     8248       1914            3           0
 68     135900        1716     5687       1912            5           0
 69     119000        1200     8155       1930            5           0
 70      81000         630     1890       1972            4           0
 71     146000        1100     7500       2006            6           0
 72      64000         670     3500       1945            3           0
 73     103200         882     5500       1956            4           0
 74     148000        1534    10800       1895            5           0
 75     110500         866     3880       1945            5           0
 76     127000        1355     6882       1914            6           0
 77     200500        3086    18030       1946            5           0
 78     150000        1440     7711       1977            4           0
 79      86000         605     9098       1920            4           0
 80     123600         990     8070       1994            4           0
 81      98500        1195     8741       1946            5           0
 82      79000         774     4270       1931            3           0
 83     200000        3395    10896       1914            6           0
 84     150000        2592    10890       1923            5           0
 85     115000        1517     8500       1919            5           0
 86     150909        1828     9060       1923            5          NA
 87     119600        1991     8250       1895            5           0
 88     147000        1120     8402       2007            5           0
 89      93900        1092     1495       1970            4           0
 90      84500         630     1936       1970            4           0
 91     139500        1142     7733       2005            6           0
 92     132000        1131    13072       2005            6           0
 93      85500         869     5900       1923            4           0
 94     135000        1192    10800       1949            4           0
 95     119000        1556     8512       1960            5           0
 96     124000        1025     7000       1962            5           0
 97      64500        1020     4761       1918            3           0
 98     100000         788     7446       1941            4           0
 99      80500         912     6240       1947            4           0
100      72000         819     9000       1919            5           0
101     117250         914     8050       2002            6           0
102      81000        1184     8410       1910            5           0
103      83000        1414     8248       1922            4           0
104     102000        1522     6000       1926            5           0
105      72000         672     8534       1925            4           0
106     115000        1396     9000       1951            5           0
107      78000         936     8520       1916            3           0
108      92000         630     1533       1970            5           0
109      90500        1092     1936       1970            4           0
    garage_qual ms_zoning lot_config bldg_type
    &lt;fct&gt;       &lt;fct&gt;     &lt;fct&gt;      &lt;fct&gt;    
  1 &lt;NA&gt;        RL        FR2        1Fam     
  2 &lt;NA&gt;        RL        Inside     1Fam     
  3 &lt;NA&gt;        RL        Inside     Duplex   
  4 &lt;NA&gt;        RL        Inside     1Fam     
  5 &lt;NA&gt;        RL        Inside     1Fam     
  6 &lt;NA&gt;        RM        Inside     2fmCon   
  7 &lt;NA&gt;        RM        Inside     1Fam     
  8 &lt;NA&gt;        RM        Inside     2fmCon   
  9 &lt;NA&gt;        C (all)   Inside     1Fam     
 10 &lt;NA&gt;        RL        Inside     1Fam     
 11 &lt;NA&gt;        RL        Inside     Duplex   
 12 &lt;NA&gt;        RL        Inside     Duplex   
 13 &lt;NA&gt;        RL        Inside     1Fam     
 14 &lt;NA&gt;        RL        Inside     1Fam     
 15 &lt;NA&gt;        RL        Corner     Duplex   
 16 &lt;NA&gt;        RM        Inside     Twnhs    
 17 &lt;NA&gt;        RM        Inside     TwnhsE   
 18 &lt;NA&gt;        RM        Inside     TwnhsE   
 19 &lt;NA&gt;        RL        FR2        Duplex   
 20 &lt;NA&gt;        RL        Inside     1Fam     
 21 &lt;NA&gt;        RL        Inside     1Fam     
 22 &lt;NA&gt;        RM        Corner     1Fam     
 23 &lt;NA&gt;        RM        Corner     2fmCon   
 24 &lt;NA&gt;        RM        Inside     1Fam     
 25 &lt;NA&gt;        RM        Inside     1Fam     
 26 &lt;NA&gt;        RM        Inside     2fmCon   
 27 &lt;NA&gt;        C (all)   Inside     1Fam     
 28 &lt;NA&gt;        C (all)   Inside     1Fam     
 29 &lt;NA&gt;        RM        Inside     1Fam     
 30 &lt;NA&gt;        RM        Inside     Duplex   
 31 &lt;NA&gt;        RM        Corner     2fmCon   
 32 &lt;NA&gt;        RM        Inside     1Fam     
 33 &lt;NA&gt;        RL        Inside     Duplex   
 34 &lt;NA&gt;        RL        Inside     Duplex   
 35 &lt;NA&gt;        RL        Inside     1Fam     
 36 &lt;NA&gt;        RL        Inside     1Fam     
 37 &lt;NA&gt;        RL        Corner     1Fam     
 38 &lt;NA&gt;        RL        Inside     Duplex   
 39 &lt;NA&gt;        RL        Corner     1Fam     
 40 &lt;NA&gt;        RL        Inside     1Fam     
 41 &lt;NA&gt;        RL        Inside     2fmCon   
 42 &lt;NA&gt;        RL        Corner     Duplex   
 43 &lt;NA&gt;        RM        Inside     1Fam     
 44 &lt;NA&gt;        RM        Inside     1Fam     
 45 &lt;NA&gt;        RM        Inside     1Fam     
 46 &lt;NA&gt;        RM        Corner     1Fam     
 47 &lt;NA&gt;        RM        Inside     2fmCon   
 48 &lt;NA&gt;        RM        Inside     1Fam     
 49 &lt;NA&gt;        RM        Inside     1Fam     
 50 &lt;NA&gt;        RM        Inside     2fmCon   
 51 &lt;NA&gt;        RL        Inside     2fmCon   
 52 &lt;NA&gt;        RL        Inside     1Fam     
 53 &lt;NA&gt;        RL        Inside     1Fam     
 54 &lt;NA&gt;        RL        Inside     Duplex   
 55 &lt;NA&gt;        RL        Inside     2fmCon   
 56 &lt;NA&gt;        RL        Corner     1Fam     
 57 &lt;NA&gt;        RL        Inside     1Fam     
 58 &lt;NA&gt;        RL        Inside     Duplex   
 59 &lt;NA&gt;        RL        Inside     Duplex   
 60 &lt;NA&gt;        RL        Corner     Duplex   
 61 &lt;NA&gt;        RL        Inside     Duplex   
 62 &lt;NA&gt;        RL        Inside     Duplex   
 63 &lt;NA&gt;        RL        Inside     2fmCon   
 64 &lt;NA&gt;        RL        Inside     1Fam     
 65 &lt;NA&gt;        RL        Inside     1Fam     
 66 &lt;NA&gt;        RL        Inside     1Fam     
 67 &lt;NA&gt;        RL        Inside     1Fam     
 68 &lt;NA&gt;        RL        Inside     2fmCon   
 69 &lt;NA&gt;        RM        Inside     1Fam     
 70 &lt;NA&gt;        RM        Inside     Twnhs    
 71 &lt;NA&gt;        RL        Inside     1Fam     
 72 &lt;NA&gt;        RL        Inside     1Fam     
 73 &lt;NA&gt;        RL        Inside     1Fam     
 74 &lt;NA&gt;        RL        Inside     1Fam     
 75 &lt;NA&gt;        RM        Inside     1Fam     
 76 &lt;NA&gt;        RM        Inside     1Fam     
 77 &lt;NA&gt;        RL        Inside     1Fam     
 78 &lt;NA&gt;        RL        Inside     Duplex   
 79 &lt;NA&gt;        RL        Inside     1Fam     
 80 &lt;NA&gt;        RL        Inside     1Fam     
 81 &lt;NA&gt;        RL        Inside     Duplex   
 82 &lt;NA&gt;        RH        Inside     1Fam     
 83 &lt;NA&gt;        RH        Inside     2fmCon   
 84 &lt;NA&gt;        RL        Inside     Duplex   
 85 &lt;NA&gt;        RM        Corner     1Fam     
 86 &lt;NA&gt;        RM        Inside     1Fam     
 87 &lt;NA&gt;        C (all)   Inside     2fmCon   
 88 &lt;NA&gt;        RL        Inside     1Fam     
 89 &lt;NA&gt;        RM        Inside     TwnhsE   
 90 &lt;NA&gt;        RM        Inside     Twnhs    
 91 &lt;NA&gt;        RL        Inside     1Fam     
 92 &lt;NA&gt;        RL        Inside     1Fam     
 93 &lt;NA&gt;        RL        Inside     1Fam     
 94 &lt;NA&gt;        RL        Inside     1Fam     
 95 &lt;NA&gt;        RL        Corner     Duplex   
 96 &lt;NA&gt;        RL        Inside     2fmCon   
 97 &lt;NA&gt;        C (all)   Corner     1Fam     
 98 &lt;NA&gt;        RL        Corner     1Fam     
 99 &lt;NA&gt;        RM        Inside     1Fam     
100 &lt;NA&gt;        RM        Inside     1Fam     
101 &lt;NA&gt;        RL        Inside     1Fam     
102 &lt;NA&gt;        RL        FR2        1Fam     
103 &lt;NA&gt;        RL        Inside     1Fam     
104 &lt;NA&gt;        RL        Inside     1Fam     
105 &lt;NA&gt;        RM        Inside     1Fam     
106 &lt;NA&gt;        C (all)   Inside     2fmCon   
107 &lt;NA&gt;        C (all)   Inside     1Fam     
108 &lt;NA&gt;        RM        Inside     Twnhs    
109 &lt;NA&gt;        RM        Inside     Twnhs    </code></pre>
</div>
</div>
<hr>
<p>Here are some more advanced options using <code>kbl()</code> for the df with many rows</p>
<ul>
<li><code>kable()</code> tables from <code>knitr</code> package and <code>kableExtra</code> extensions (including <code>kbl()</code>) are very useful during EDA and also final publication quality tables</li>
<li>use <code>library(kableExtra)</code></li>
<li>see <a href="https://cran.r-project.org/web/packages/kableExtra/vignettes/awesome_table_in_html.html">vignettes for kableExtra</a></li>
</ul>
<p><strong>Option 2 (more advanced)</strong>: Use a function for kables that we created. Code is displayed here but the function is available to you if you source fun_eda.R from Github</p>
<div class="cell">
<div class="sourceCode cell-code" id="annotated-cell-19"><pre class="sourceCode r code-annotation-code code-with-copy code-annotated"><code class="sourceCode r"><span id="annotated-cell-19-1"><a href="#annotated-cell-19-1" aria-hidden="true" tabindex="-1"></a><span class="co"># Might want to use height = "100%" if only printing a few rows</span></span>
<a class="code-annotation-anchor" data-target-cell="annotated-cell-19" data-target-annotation="1" onclick="event.preventDefault();">1</a><span id="annotated-cell-19-2" class="code-annotation-target"><a href="#annotated-cell-19-2" aria-hidden="true" tabindex="-1"></a>print_kbl <span class="ot">&lt;-</span> <span class="cf">function</span>(data, <span class="at">height =</span> <span class="st">"500px"</span>) {</span>
<span id="annotated-cell-19-3"><a href="#annotated-cell-19-3" aria-hidden="true" tabindex="-1"></a>  data <span class="sc">|&gt;</span> </span>
<span id="annotated-cell-19-4"><a href="#annotated-cell-19-4" aria-hidden="true" tabindex="-1"></a>    <span class="fu">kbl</span>(<span class="at">align =</span> <span class="st">"r"</span>) <span class="sc">|&gt;</span> </span>
<span id="annotated-cell-19-5"><a href="#annotated-cell-19-5" aria-hidden="true" tabindex="-1"></a>    <span class="fu">kable_styling</span>(<span class="at">bootstrap_options =</span> <span class="fu">c</span>(<span class="st">"striped"</span>, <span class="st">"condensed"</span>)) <span class="sc">|&gt;</span> </span>
<a class="code-annotation-anchor" data-target-cell="annotated-cell-19" data-target-annotation="2" onclick="event.preventDefault();">2</a><span id="annotated-cell-19-6" class="code-annotation-target"><a href="#annotated-cell-19-6" aria-hidden="true" tabindex="-1"></a>    <span class="fu">scroll_box</span>(<span class="at">height =</span> height, <span class="at">width =</span> <span class="st">"100%"</span>)</span>
<span id="annotated-cell-19-7"><a href="#annotated-cell-19-7" aria-hidden="true" tabindex="-1"></a>}</span><div class="code-annotation-gutter-bg"></div><div class="code-annotation-gutter"></div></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
<div class="cell-annotation">
<dl class="code-annotation-container-grid">
<dt data-target-cell="annotated-cell-19" data-target-annotation="1">1</dt>
<dd>
<span data-code-annotation="1" data-code-lines="2" data-code-cell="annotated-cell-19">Defaults to a output box of height = “500px”. Can set to other values if preferred.</span>
</dd>
<dt data-target-cell="annotated-cell-19" data-target-annotation="2">2</dt>
<dd>
<span data-code-annotation="2" data-code-lines="6" data-code-cell="annotated-cell-19">Might want to use <code>height = "100%"</code> if only printing a few rows.</span>
</dd>
</dl>
</div>
</div>
<hr>
<div class="cell">
<div class="sourceCode cell-code" id="cb29"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb29-1"><a href="#cb29-1" aria-hidden="true" tabindex="-1"></a>data_all <span class="sc">|&gt;</span> <span class="fu">filter</span>(<span class="fu">is.na</span>(garage_qual)) <span class="sc">|&gt;</span> </span>
<span id="cb29-2"><a href="#cb29-2" aria-hidden="true" tabindex="-1"></a>  <span class="fu">print_kbl</span>()</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
<div class="cell-output-display">
<div style="border: 1px solid #ddd; padding: 0px; overflow-y: scroll; height:500px; overflow-x: scroll; width:100%; ">
<table class="table table-striped table-condensed table-sm small" data-quarto-postprocess="true">
<thead>
<tr class="header">
<th data-quarto-table-cell-role="th" style="text-align: right; position: sticky; top: 0; background-color: #FFFFFF;">sale_price</th>
<th data-quarto-table-cell-role="th" style="text-align: right; position: sticky; top: 0; background-color: #FFFFFF;">gr_liv_area</th>
<th data-quarto-table-cell-role="th" style="text-align: right; position: sticky; top: 0; background-color: #FFFFFF;">lot_area</th>
<th data-quarto-table-cell-role="th" style="text-align: right; position: sticky; top: 0; background-color: #FFFFFF;">year_built</th>
<th data-quarto-table-cell-role="th" style="text-align: right; position: sticky; top: 0; background-color: #FFFFFF;">overall_qual</th>
<th data-quarto-table-cell-role="th" style="text-align: right; position: sticky; top: 0; background-color: #FFFFFF;">garage_cars</th>
<th data-quarto-table-cell-role="th" style="text-align: right; position: sticky; top: 0; background-color: #FFFFFF;">garage_qual</th>
<th data-quarto-table-cell-role="th" style="text-align: right; position: sticky; top: 0; background-color: #FFFFFF;">ms_zoning</th>
<th data-quarto-table-cell-role="th" style="text-align: right; position: sticky; top: 0; background-color: #FFFFFF;">lot_config</th>
<th data-quarto-table-cell-role="th" style="text-align: right; position: sticky; top: 0; background-color: #FFFFFF;">bldg_type</th>
</tr>
</thead>
<tbody>
<tr class="odd">
<td style="text-align: right;">115000</td>
<td style="text-align: right;">864</td>
<td style="text-align: right;">10500</td>
<td style="text-align: right;">1971</td>
<td style="text-align: right;">4</td>
<td style="text-align: right;">0</td>
<td style="text-align: right;">NA</td>
<td style="text-align: right;">RL</td>
<td style="text-align: right;">FR2</td>
<td style="text-align: right;">1Fam</td>
</tr>
<tr class="even">
<td style="text-align: right;">128950</td>
<td style="text-align: right;">1225</td>
<td style="text-align: right;">9320</td>
<td style="text-align: right;">1959</td>
<td style="text-align: right;">4</td>
<td style="text-align: right;">0</td>
<td style="text-align: right;">NA</td>
<td style="text-align: right;">RL</td>
<td style="text-align: right;">Inside</td>
<td style="text-align: right;">1Fam</td>
</tr>
<tr class="odd">
<td style="text-align: right;">84900</td>
<td style="text-align: right;">1728</td>
<td style="text-align: right;">13260</td>
<td style="text-align: right;">1962</td>
<td style="text-align: right;">5</td>
<td style="text-align: right;">0</td>
<td style="text-align: right;">NA</td>
<td style="text-align: right;">RL</td>
<td style="text-align: right;">Inside</td>
<td style="text-align: right;">Duplex</td>
</tr>
<tr class="even">
<td style="text-align: right;">116500</td>
<td style="text-align: right;">858</td>
<td style="text-align: right;">7207</td>
<td style="text-align: right;">1958</td>
<td style="text-align: right;">5</td>
<td style="text-align: right;">0</td>
<td style="text-align: right;">NA</td>
<td style="text-align: right;">RL</td>
<td style="text-align: right;">Inside</td>
<td style="text-align: right;">1Fam</td>
</tr>
<tr class="odd">
<td style="text-align: right;">76500</td>
<td style="text-align: right;">1306</td>
<td style="text-align: right;">5350</td>
<td style="text-align: right;">1940</td>
<td style="text-align: right;">3</td>
<td style="text-align: right;">0</td>
<td style="text-align: right;">NA</td>
<td style="text-align: right;">RL</td>
<td style="text-align: right;">Inside</td>
<td style="text-align: right;">1Fam</td>
</tr>
<tr class="even">
<td style="text-align: right;">76500</td>
<td style="text-align: right;">2256</td>
<td style="text-align: right;">9045</td>
<td style="text-align: right;">1910</td>
<td style="text-align: right;">5</td>
<td style="text-align: right;">0</td>
<td style="text-align: right;">NA</td>
<td style="text-align: right;">RM</td>
<td style="text-align: right;">Inside</td>
<td style="text-align: right;">2fmCon</td>
</tr>
<tr class="odd">
<td style="text-align: right;">159900</td>
<td style="text-align: right;">1560</td>
<td style="text-align: right;">12900</td>
<td style="text-align: right;">1912</td>
<td style="text-align: right;">6</td>
<td style="text-align: right;">0</td>
<td style="text-align: right;">NA</td>
<td style="text-align: right;">RM</td>
<td style="text-align: right;">Inside</td>
<td style="text-align: right;">1Fam</td>
</tr>
<tr class="even">
<td style="text-align: right;">55000</td>
<td style="text-align: right;">1092</td>
<td style="text-align: right;">5600</td>
<td style="text-align: right;">1930</td>
<td style="text-align: right;">4</td>
<td style="text-align: right;">0</td>
<td style="text-align: right;">NA</td>
<td style="text-align: right;">RM</td>
<td style="text-align: right;">Inside</td>
<td style="text-align: right;">2fmCon</td>
</tr>
<tr class="odd">
<td style="text-align: right;">93369</td>
<td style="text-align: right;">1884</td>
<td style="text-align: right;">6449</td>
<td style="text-align: right;">1907</td>
<td style="text-align: right;">4</td>
<td style="text-align: right;">0</td>
<td style="text-align: right;">NA</td>
<td style="text-align: right;">C (all)</td>
<td style="text-align: right;">Inside</td>
<td style="text-align: right;">1Fam</td>
</tr>
<tr class="even">
<td style="text-align: right;">94000</td>
<td style="text-align: right;">1020</td>
<td style="text-align: right;">6342</td>
<td style="text-align: right;">1875</td>
<td style="text-align: right;">5</td>
<td style="text-align: right;">0</td>
<td style="text-align: right;">NA</td>
<td style="text-align: right;">RL</td>
<td style="text-align: right;">Inside</td>
<td style="text-align: right;">1Fam</td>
</tr>
<tr class="odd">
<td style="text-align: right;">136000</td>
<td style="text-align: right;">1832</td>
<td style="text-align: right;">10773</td>
<td style="text-align: right;">1967</td>
<td style="text-align: right;">4</td>
<td style="text-align: right;">0</td>
<td style="text-align: right;">NA</td>
<td style="text-align: right;">RL</td>
<td style="text-align: right;">Inside</td>
<td style="text-align: right;">Duplex</td>
</tr>
<tr class="even">
<td style="text-align: right;">100000</td>
<td style="text-align: right;">1664</td>
<td style="text-align: right;">9825</td>
<td style="text-align: right;">1965</td>
<td style="text-align: right;">5</td>
<td style="text-align: right;">0</td>
<td style="text-align: right;">NA</td>
<td style="text-align: right;">RL</td>
<td style="text-align: right;">Inside</td>
<td style="text-align: right;">Duplex</td>
</tr>
<tr class="odd">
<td style="text-align: right;">90000</td>
<td style="text-align: right;">960</td>
<td style="text-align: right;">6410</td>
<td style="text-align: right;">1958</td>
<td style="text-align: right;">4</td>
<td style="text-align: right;">0</td>
<td style="text-align: right;">NA</td>
<td style="text-align: right;">RL</td>
<td style="text-align: right;">Inside</td>
<td style="text-align: right;">1Fam</td>
</tr>
<tr class="even">
<td style="text-align: right;">100000</td>
<td style="text-align: right;">1666</td>
<td style="text-align: right;">9839</td>
<td style="text-align: right;">1931</td>
<td style="text-align: right;">5</td>
<td style="text-align: right;">0</td>
<td style="text-align: right;">NA</td>
<td style="text-align: right;">RL</td>
<td style="text-align: right;">Inside</td>
<td style="text-align: right;">1Fam</td>
</tr>
<tr class="odd">
<td style="text-align: right;">139000</td>
<td style="text-align: right;">1824</td>
<td style="text-align: right;">9400</td>
<td style="text-align: right;">1971</td>
<td style="text-align: right;">6</td>
<td style="text-align: right;">0</td>
<td style="text-align: right;">NA</td>
<td style="text-align: right;">RL</td>
<td style="text-align: right;">Corner</td>
<td style="text-align: right;">Duplex</td>
</tr>
<tr class="even">
<td style="text-align: right;">76000</td>
<td style="text-align: right;">1092</td>
<td style="text-align: right;">1476</td>
<td style="text-align: right;">1970</td>
<td style="text-align: right;">4</td>
<td style="text-align: right;">0</td>
<td style="text-align: right;">NA</td>
<td style="text-align: right;">RM</td>
<td style="text-align: right;">Inside</td>
<td style="text-align: right;">Twnhs</td>
</tr>
<tr class="odd">
<td style="text-align: right;">75500</td>
<td style="text-align: right;">630</td>
<td style="text-align: right;">1491</td>
<td style="text-align: right;">1972</td>
<td style="text-align: right;">4</td>
<td style="text-align: right;">0</td>
<td style="text-align: right;">NA</td>
<td style="text-align: right;">RM</td>
<td style="text-align: right;">Inside</td>
<td style="text-align: right;">TwnhsE</td>
</tr>
<tr class="even">
<td style="text-align: right;">88250</td>
<td style="text-align: right;">1092</td>
<td style="text-align: right;">1900</td>
<td style="text-align: right;">1970</td>
<td style="text-align: right;">4</td>
<td style="text-align: right;">0</td>
<td style="text-align: right;">NA</td>
<td style="text-align: right;">RM</td>
<td style="text-align: right;">Inside</td>
<td style="text-align: right;">TwnhsE</td>
</tr>
<tr class="odd">
<td style="text-align: right;">136000</td>
<td style="text-align: right;">1792</td>
<td style="text-align: right;">9000</td>
<td style="text-align: right;">1974</td>
<td style="text-align: right;">5</td>
<td style="text-align: right;">0</td>
<td style="text-align: right;">NA</td>
<td style="text-align: right;">RL</td>
<td style="text-align: right;">FR2</td>
<td style="text-align: right;">Duplex</td>
</tr>
<tr class="even">
<td style="text-align: right;">142000</td>
<td style="text-align: right;">1114</td>
<td style="text-align: right;">13072</td>
<td style="text-align: right;">2004</td>
<td style="text-align: right;">5</td>
<td style="text-align: right;">0</td>
<td style="text-align: right;">NA</td>
<td style="text-align: right;">RL</td>
<td style="text-align: right;">Inside</td>
<td style="text-align: right;">1Fam</td>
</tr>
<tr class="odd">
<td style="text-align: right;">82500</td>
<td style="text-align: right;">708</td>
<td style="text-align: right;">5330</td>
<td style="text-align: right;">1940</td>
<td style="text-align: right;">4</td>
<td style="text-align: right;">0</td>
<td style="text-align: right;">NA</td>
<td style="text-align: right;">RL</td>
<td style="text-align: right;">Inside</td>
<td style="text-align: right;">1Fam</td>
</tr>
<tr class="even">
<td style="text-align: right;">129000</td>
<td style="text-align: right;">1464</td>
<td style="text-align: right;">9900</td>
<td style="text-align: right;">1910</td>
<td style="text-align: right;">5</td>
<td style="text-align: right;">0</td>
<td style="text-align: right;">NA</td>
<td style="text-align: right;">RM</td>
<td style="text-align: right;">Corner</td>
<td style="text-align: right;">1Fam</td>
</tr>
<tr class="odd">
<td style="text-align: right;">94550</td>
<td style="text-align: right;">1701</td>
<td style="text-align: right;">7627</td>
<td style="text-align: right;">1920</td>
<td style="text-align: right;">4</td>
<td style="text-align: right;">0</td>
<td style="text-align: right;">NA</td>
<td style="text-align: right;">RM</td>
<td style="text-align: right;">Corner</td>
<td style="text-align: right;">2fmCon</td>
</tr>
<tr class="even">
<td style="text-align: right;">103000</td>
<td style="text-align: right;">1447</td>
<td style="text-align: right;">10134</td>
<td style="text-align: right;">1910</td>
<td style="text-align: right;">5</td>
<td style="text-align: right;">0</td>
<td style="text-align: right;">NA</td>
<td style="text-align: right;">RM</td>
<td style="text-align: right;">Inside</td>
<td style="text-align: right;">1Fam</td>
</tr>
<tr class="odd">
<td style="text-align: right;">37900</td>
<td style="text-align: right;">968</td>
<td style="text-align: right;">5925</td>
<td style="text-align: right;">1910</td>
<td style="text-align: right;">3</td>
<td style="text-align: right;">0</td>
<td style="text-align: right;">NA</td>
<td style="text-align: right;">RM</td>
<td style="text-align: right;">Inside</td>
<td style="text-align: right;">1Fam</td>
</tr>
<tr class="even">
<td style="text-align: right;">113000</td>
<td style="text-align: right;">1452</td>
<td style="text-align: right;">4456</td>
<td style="text-align: right;">1920</td>
<td style="text-align: right;">4</td>
<td style="text-align: right;">0</td>
<td style="text-align: right;">NA</td>
<td style="text-align: right;">RM</td>
<td style="text-align: right;">Inside</td>
<td style="text-align: right;">2fmCon</td>
</tr>
<tr class="odd">
<td style="text-align: right;">58500</td>
<td style="text-align: right;">816</td>
<td style="text-align: right;">3300</td>
<td style="text-align: right;">1910</td>
<td style="text-align: right;">4</td>
<td style="text-align: right;">0</td>
<td style="text-align: right;">NA</td>
<td style="text-align: right;">C (all)</td>
<td style="text-align: right;">Inside</td>
<td style="text-align: right;">1Fam</td>
</tr>
<tr class="even">
<td style="text-align: right;">34900</td>
<td style="text-align: right;">720</td>
<td style="text-align: right;">7879</td>
<td style="text-align: right;">1920</td>
<td style="text-align: right;">4</td>
<td style="text-align: right;">0</td>
<td style="text-align: right;">NA</td>
<td style="text-align: right;">C (all)</td>
<td style="text-align: right;">Inside</td>
<td style="text-align: right;">1Fam</td>
</tr>
<tr class="odd">
<td style="text-align: right;">60000</td>
<td style="text-align: right;">800</td>
<td style="text-align: right;">6120</td>
<td style="text-align: right;">1936</td>
<td style="text-align: right;">2</td>
<td style="text-align: right;">0</td>
<td style="text-align: right;">NA</td>
<td style="text-align: right;">RM</td>
<td style="text-align: right;">Inside</td>
<td style="text-align: right;">1Fam</td>
</tr>
<tr class="even">
<td style="text-align: right;">62500</td>
<td style="text-align: right;">2128</td>
<td style="text-align: right;">3000</td>
<td style="text-align: right;">1922</td>
<td style="text-align: right;">5</td>
<td style="text-align: right;">0</td>
<td style="text-align: right;">NA</td>
<td style="text-align: right;">RM</td>
<td style="text-align: right;">Inside</td>
<td style="text-align: right;">Duplex</td>
</tr>
<tr class="odd">
<td style="text-align: right;">97500</td>
<td style="text-align: right;">1864</td>
<td style="text-align: right;">5852</td>
<td style="text-align: right;">1902</td>
<td style="text-align: right;">7</td>
<td style="text-align: right;">0</td>
<td style="text-align: right;">NA</td>
<td style="text-align: right;">RM</td>
<td style="text-align: right;">Corner</td>
<td style="text-align: right;">2fmCon</td>
</tr>
<tr class="even">
<td style="text-align: right;">70000</td>
<td style="text-align: right;">892</td>
<td style="text-align: right;">5160</td>
<td style="text-align: right;">1923</td>
<td style="text-align: right;">4</td>
<td style="text-align: right;">0</td>
<td style="text-align: right;">NA</td>
<td style="text-align: right;">RM</td>
<td style="text-align: right;">Inside</td>
<td style="text-align: right;">1Fam</td>
</tr>
<tr class="odd">
<td style="text-align: right;">179000</td>
<td style="text-align: right;">1200</td>
<td style="text-align: right;">10800</td>
<td style="text-align: right;">1987</td>
<td style="text-align: right;">5</td>
<td style="text-align: right;">0</td>
<td style="text-align: right;">NA</td>
<td style="text-align: right;">RL</td>
<td style="text-align: right;">Inside</td>
<td style="text-align: right;">Duplex</td>
</tr>
<tr class="even">
<td style="text-align: right;">179000</td>
<td style="text-align: right;">1200</td>
<td style="text-align: right;">10800</td>
<td style="text-align: right;">1987</td>
<td style="text-align: right;">5</td>
<td style="text-align: right;">0</td>
<td style="text-align: right;">NA</td>
<td style="text-align: right;">RL</td>
<td style="text-align: right;">Inside</td>
<td style="text-align: right;">Duplex</td>
</tr>
<tr class="odd">
<td style="text-align: right;">61000</td>
<td style="text-align: right;">904</td>
<td style="text-align: right;">10020</td>
<td style="text-align: right;">1922</td>
<td style="text-align: right;">1</td>
<td style="text-align: right;">0</td>
<td style="text-align: right;">NA</td>
<td style="text-align: right;">RL</td>
<td style="text-align: right;">Inside</td>
<td style="text-align: right;">1Fam</td>
</tr>
<tr class="even">
<td style="text-align: right;">118000</td>
<td style="text-align: right;">698</td>
<td style="text-align: right;">9405</td>
<td style="text-align: right;">1947</td>
<td style="text-align: right;">5</td>
<td style="text-align: right;">0</td>
<td style="text-align: right;">NA</td>
<td style="text-align: right;">RL</td>
<td style="text-align: right;">Inside</td>
<td style="text-align: right;">1Fam</td>
</tr>
<tr class="odd">
<td style="text-align: right;">99900</td>
<td style="text-align: right;">864</td>
<td style="text-align: right;">4060</td>
<td style="text-align: right;">1922</td>
<td style="text-align: right;">5</td>
<td style="text-align: right;">0</td>
<td style="text-align: right;">NA</td>
<td style="text-align: right;">RL</td>
<td style="text-align: right;">Corner</td>
<td style="text-align: right;">1Fam</td>
</tr>
<tr class="even">
<td style="text-align: right;">119900</td>
<td style="text-align: right;">1678</td>
<td style="text-align: right;">10926</td>
<td style="text-align: right;">1959</td>
<td style="text-align: right;">5</td>
<td style="text-align: right;">0</td>
<td style="text-align: right;">NA</td>
<td style="text-align: right;">RL</td>
<td style="text-align: right;">Inside</td>
<td style="text-align: right;">Duplex</td>
</tr>
<tr class="odd">
<td style="text-align: right;">112000</td>
<td style="text-align: right;">833</td>
<td style="text-align: right;">8780</td>
<td style="text-align: right;">1985</td>
<td style="text-align: right;">5</td>
<td style="text-align: right;">0</td>
<td style="text-align: right;">NA</td>
<td style="text-align: right;">RL</td>
<td style="text-align: right;">Corner</td>
<td style="text-align: right;">1Fam</td>
</tr>
<tr class="even">
<td style="text-align: right;">141000</td>
<td style="text-align: right;">1080</td>
<td style="text-align: right;">7500</td>
<td style="text-align: right;">2004</td>
<td style="text-align: right;">7</td>
<td style="text-align: right;">0</td>
<td style="text-align: right;">NA</td>
<td style="text-align: right;">RL</td>
<td style="text-align: right;">Inside</td>
<td style="text-align: right;">1Fam</td>
</tr>
<tr class="odd">
<td style="text-align: right;">106250</td>
<td style="text-align: right;">1294</td>
<td style="text-align: right;">10800</td>
<td style="text-align: right;">1900</td>
<td style="text-align: right;">4</td>
<td style="text-align: right;">0</td>
<td style="text-align: right;">NA</td>
<td style="text-align: right;">RL</td>
<td style="text-align: right;">Inside</td>
<td style="text-align: right;">2fmCon</td>
</tr>
<tr class="even">
<td style="text-align: right;">130000</td>
<td style="text-align: right;">1800</td>
<td style="text-align: right;">8513</td>
<td style="text-align: right;">1961</td>
<td style="text-align: right;">5</td>
<td style="text-align: right;">0</td>
<td style="text-align: right;">NA</td>
<td style="text-align: right;">RL</td>
<td style="text-align: right;">Corner</td>
<td style="text-align: right;">Duplex</td>
</tr>
<tr class="odd">
<td style="text-align: right;">120000</td>
<td style="text-align: right;">1027</td>
<td style="text-align: right;">5400</td>
<td style="text-align: right;">1920</td>
<td style="text-align: right;">7</td>
<td style="text-align: right;">0</td>
<td style="text-align: right;">NA</td>
<td style="text-align: right;">RM</td>
<td style="text-align: right;">Inside</td>
<td style="text-align: right;">1Fam</td>
</tr>
<tr class="even">
<td style="text-align: right;">95000</td>
<td style="text-align: right;">1080</td>
<td style="text-align: right;">5914</td>
<td style="text-align: right;">1890</td>
<td style="text-align: right;">5</td>
<td style="text-align: right;">0</td>
<td style="text-align: right;">NA</td>
<td style="text-align: right;">RM</td>
<td style="text-align: right;">Inside</td>
<td style="text-align: right;">1Fam</td>
</tr>
<tr class="odd">
<td style="text-align: right;">65000</td>
<td style="text-align: right;">1588</td>
<td style="text-align: right;">12205</td>
<td style="text-align: right;">1949</td>
<td style="text-align: right;">3</td>
<td style="text-align: right;">0</td>
<td style="text-align: right;">NA</td>
<td style="text-align: right;">RM</td>
<td style="text-align: right;">Inside</td>
<td style="text-align: right;">1Fam</td>
</tr>
<tr class="even">
<td style="text-align: right;">129400</td>
<td style="text-align: right;">1540</td>
<td style="text-align: right;">6000</td>
<td style="text-align: right;">1905</td>
<td style="text-align: right;">5</td>
<td style="text-align: right;">0</td>
<td style="text-align: right;">NA</td>
<td style="text-align: right;">RM</td>
<td style="text-align: right;">Corner</td>
<td style="text-align: right;">1Fam</td>
</tr>
<tr class="odd">
<td style="text-align: right;">160000</td>
<td style="text-align: right;">1984</td>
<td style="text-align: right;">8094</td>
<td style="text-align: right;">1910</td>
<td style="text-align: right;">6</td>
<td style="text-align: right;">1</td>
<td style="text-align: right;">NA</td>
<td style="text-align: right;">RM</td>
<td style="text-align: right;">Inside</td>
<td style="text-align: right;">2fmCon</td>
</tr>
<tr class="even">
<td style="text-align: right;">89500</td>
<td style="text-align: right;">1406</td>
<td style="text-align: right;">7920</td>
<td style="text-align: right;">1920</td>
<td style="text-align: right;">6</td>
<td style="text-align: right;">0</td>
<td style="text-align: right;">NA</td>
<td style="text-align: right;">RM</td>
<td style="text-align: right;">Inside</td>
<td style="text-align: right;">1Fam</td>
</tr>
<tr class="odd">
<td style="text-align: right;">79900</td>
<td style="text-align: right;">1198</td>
<td style="text-align: right;">5586</td>
<td style="text-align: right;">1920</td>
<td style="text-align: right;">6</td>
<td style="text-align: right;">0</td>
<td style="text-align: right;">NA</td>
<td style="text-align: right;">RM</td>
<td style="text-align: right;">Inside</td>
<td style="text-align: right;">1Fam</td>
</tr>
<tr class="even">
<td style="text-align: right;">82375</td>
<td style="text-align: right;">1344</td>
<td style="text-align: right;">10320</td>
<td style="text-align: right;">1915</td>
<td style="text-align: right;">3</td>
<td style="text-align: right;">0</td>
<td style="text-align: right;">NA</td>
<td style="text-align: right;">RM</td>
<td style="text-align: right;">Inside</td>
<td style="text-align: right;">2fmCon</td>
</tr>
<tr class="odd">
<td style="text-align: right;">127500</td>
<td style="text-align: right;">1355</td>
<td style="text-align: right;">10106</td>
<td style="text-align: right;">1940</td>
<td style="text-align: right;">5</td>
<td style="text-align: right;">0</td>
<td style="text-align: right;">NA</td>
<td style="text-align: right;">RL</td>
<td style="text-align: right;">Inside</td>
<td style="text-align: right;">2fmCon</td>
</tr>
<tr class="even">
<td style="text-align: right;">80000</td>
<td style="text-align: right;">1006</td>
<td style="text-align: right;">9000</td>
<td style="text-align: right;">1959</td>
<td style="text-align: right;">5</td>
<td style="text-align: right;">0</td>
<td style="text-align: right;">NA</td>
<td style="text-align: right;">RL</td>
<td style="text-align: right;">Inside</td>
<td style="text-align: right;">1Fam</td>
</tr>
<tr class="odd">
<td style="text-align: right;">260000</td>
<td style="text-align: right;">1518</td>
<td style="text-align: right;">19550</td>
<td style="text-align: right;">1940</td>
<td style="text-align: right;">5</td>
<td style="text-align: right;">0</td>
<td style="text-align: right;">NA</td>
<td style="text-align: right;">RL</td>
<td style="text-align: right;">Inside</td>
<td style="text-align: right;">1Fam</td>
</tr>
<tr class="even">
<td style="text-align: right;">99600</td>
<td style="text-align: right;">864</td>
<td style="text-align: right;">9350</td>
<td style="text-align: right;">1975</td>
<td style="text-align: right;">5</td>
<td style="text-align: right;">0</td>
<td style="text-align: right;">NA</td>
<td style="text-align: right;">RL</td>
<td style="text-align: right;">Inside</td>
<td style="text-align: right;">Duplex</td>
</tr>
<tr class="odd">
<td style="text-align: right;">107500</td>
<td style="text-align: right;">1347</td>
<td style="text-align: right;">7000</td>
<td style="text-align: right;">1910</td>
<td style="text-align: right;">5</td>
<td style="text-align: right;">0</td>
<td style="text-align: right;">NA</td>
<td style="text-align: right;">RL</td>
<td style="text-align: right;">Inside</td>
<td style="text-align: right;">2fmCon</td>
</tr>
<tr class="even">
<td style="text-align: right;">79000</td>
<td style="text-align: right;">1096</td>
<td style="text-align: right;">9600</td>
<td style="text-align: right;">1924</td>
<td style="text-align: right;">6</td>
<td style="text-align: right;">0</td>
<td style="text-align: right;">NA</td>
<td style="text-align: right;">RL</td>
<td style="text-align: right;">Corner</td>
<td style="text-align: right;">1Fam</td>
</tr>
<tr class="odd">
<td style="text-align: right;">85000</td>
<td style="text-align: right;">796</td>
<td style="text-align: right;">8777</td>
<td style="text-align: right;">1910</td>
<td style="text-align: right;">5</td>
<td style="text-align: right;">0</td>
<td style="text-align: right;">NA</td>
<td style="text-align: right;">RL</td>
<td style="text-align: right;">Inside</td>
<td style="text-align: right;">1Fam</td>
</tr>
<tr class="even">
<td style="text-align: right;">145900</td>
<td style="text-align: right;">2200</td>
<td style="text-align: right;">8777</td>
<td style="text-align: right;">1900</td>
<td style="text-align: right;">5</td>
<td style="text-align: right;">0</td>
<td style="text-align: right;">NA</td>
<td style="text-align: right;">RL</td>
<td style="text-align: right;">Inside</td>
<td style="text-align: right;">Duplex</td>
</tr>
<tr class="odd">
<td style="text-align: right;">82000</td>
<td style="text-align: right;">1152</td>
<td style="text-align: right;">6040</td>
<td style="text-align: right;">1955</td>
<td style="text-align: right;">4</td>
<td style="text-align: right;">0</td>
<td style="text-align: right;">NA</td>
<td style="text-align: right;">RL</td>
<td style="text-align: right;">Inside</td>
<td style="text-align: right;">Duplex</td>
</tr>
<tr class="even">
<td style="text-align: right;">82000</td>
<td style="text-align: right;">1152</td>
<td style="text-align: right;">6012</td>
<td style="text-align: right;">1955</td>
<td style="text-align: right;">4</td>
<td style="text-align: right;">0</td>
<td style="text-align: right;">NA</td>
<td style="text-align: right;">RL</td>
<td style="text-align: right;">Corner</td>
<td style="text-align: right;">Duplex</td>
</tr>
<tr class="odd">
<td style="text-align: right;">118000</td>
<td style="text-align: right;">1440</td>
<td style="text-align: right;">12108</td>
<td style="text-align: right;">1955</td>
<td style="text-align: right;">4</td>
<td style="text-align: right;">0</td>
<td style="text-align: right;">NA</td>
<td style="text-align: right;">RL</td>
<td style="text-align: right;">Inside</td>
<td style="text-align: right;">Duplex</td>
</tr>
<tr class="even">
<td style="text-align: right;">82500</td>
<td style="text-align: right;">1152</td>
<td style="text-align: right;">6845</td>
<td style="text-align: right;">1955</td>
<td style="text-align: right;">4</td>
<td style="text-align: right;">0</td>
<td style="text-align: right;">NA</td>
<td style="text-align: right;">RL</td>
<td style="text-align: right;">Inside</td>
<td style="text-align: right;">Duplex</td>
</tr>
<tr class="odd">
<td style="text-align: right;">91900</td>
<td style="text-align: right;">784</td>
<td style="text-align: right;">6931</td>
<td style="text-align: right;">1955</td>
<td style="text-align: right;">4</td>
<td style="text-align: right;">0</td>
<td style="text-align: right;">NA</td>
<td style="text-align: right;">RL</td>
<td style="text-align: right;">Inside</td>
<td style="text-align: right;">2fmCon</td>
</tr>
<tr class="even">
<td style="text-align: right;">120000</td>
<td style="text-align: right;">1053</td>
<td style="text-align: right;">12180</td>
<td style="text-align: right;">1938</td>
<td style="text-align: right;">5</td>
<td style="text-align: right;">0</td>
<td style="text-align: right;">NA</td>
<td style="text-align: right;">RL</td>
<td style="text-align: right;">Inside</td>
<td style="text-align: right;">1Fam</td>
</tr>
<tr class="odd">
<td style="text-align: right;">96000</td>
<td style="text-align: right;">1137</td>
<td style="text-align: right;">8050</td>
<td style="text-align: right;">1947</td>
<td style="text-align: right;">5</td>
<td style="text-align: right;">0</td>
<td style="text-align: right;">NA</td>
<td style="text-align: right;">RL</td>
<td style="text-align: right;">Inside</td>
<td style="text-align: right;">1Fam</td>
</tr>
<tr class="even">
<td style="text-align: right;">98000</td>
<td style="text-align: right;">864</td>
<td style="text-align: right;">5604</td>
<td style="text-align: right;">1925</td>
<td style="text-align: right;">5</td>
<td style="text-align: right;">0</td>
<td style="text-align: right;">NA</td>
<td style="text-align: right;">RL</td>
<td style="text-align: right;">Inside</td>
<td style="text-align: right;">1Fam</td>
</tr>
<tr class="odd">
<td style="text-align: right;">67000</td>
<td style="text-align: right;">864</td>
<td style="text-align: right;">8248</td>
<td style="text-align: right;">1914</td>
<td style="text-align: right;">3</td>
<td style="text-align: right;">0</td>
<td style="text-align: right;">NA</td>
<td style="text-align: right;">RL</td>
<td style="text-align: right;">Inside</td>
<td style="text-align: right;">1Fam</td>
</tr>
<tr class="even">
<td style="text-align: right;">135900</td>
<td style="text-align: right;">1716</td>
<td style="text-align: right;">5687</td>
<td style="text-align: right;">1912</td>
<td style="text-align: right;">5</td>
<td style="text-align: right;">0</td>
<td style="text-align: right;">NA</td>
<td style="text-align: right;">RL</td>
<td style="text-align: right;">Inside</td>
<td style="text-align: right;">2fmCon</td>
</tr>
<tr class="odd">
<td style="text-align: right;">119000</td>
<td style="text-align: right;">1200</td>
<td style="text-align: right;">8155</td>
<td style="text-align: right;">1930</td>
<td style="text-align: right;">5</td>
<td style="text-align: right;">0</td>
<td style="text-align: right;">NA</td>
<td style="text-align: right;">RM</td>
<td style="text-align: right;">Inside</td>
<td style="text-align: right;">1Fam</td>
</tr>
<tr class="even">
<td style="text-align: right;">81000</td>
<td style="text-align: right;">630</td>
<td style="text-align: right;">1890</td>
<td style="text-align: right;">1972</td>
<td style="text-align: right;">4</td>
<td style="text-align: right;">0</td>
<td style="text-align: right;">NA</td>
<td style="text-align: right;">RM</td>
<td style="text-align: right;">Inside</td>
<td style="text-align: right;">Twnhs</td>
</tr>
<tr class="odd">
<td style="text-align: right;">146000</td>
<td style="text-align: right;">1100</td>
<td style="text-align: right;">7500</td>
<td style="text-align: right;">2006</td>
<td style="text-align: right;">6</td>
<td style="text-align: right;">0</td>
<td style="text-align: right;">NA</td>
<td style="text-align: right;">RL</td>
<td style="text-align: right;">Inside</td>
<td style="text-align: right;">1Fam</td>
</tr>
<tr class="even">
<td style="text-align: right;">64000</td>
<td style="text-align: right;">670</td>
<td style="text-align: right;">3500</td>
<td style="text-align: right;">1945</td>
<td style="text-align: right;">3</td>
<td style="text-align: right;">0</td>
<td style="text-align: right;">NA</td>
<td style="text-align: right;">RL</td>
<td style="text-align: right;">Inside</td>
<td style="text-align: right;">1Fam</td>
</tr>
<tr class="odd">
<td style="text-align: right;">103200</td>
<td style="text-align: right;">882</td>
<td style="text-align: right;">5500</td>
<td style="text-align: right;">1956</td>
<td style="text-align: right;">4</td>
<td style="text-align: right;">0</td>
<td style="text-align: right;">NA</td>
<td style="text-align: right;">RL</td>
<td style="text-align: right;">Inside</td>
<td style="text-align: right;">1Fam</td>
</tr>
<tr class="even">
<td style="text-align: right;">148000</td>
<td style="text-align: right;">1534</td>
<td style="text-align: right;">10800</td>
<td style="text-align: right;">1895</td>
<td style="text-align: right;">5</td>
<td style="text-align: right;">0</td>
<td style="text-align: right;">NA</td>
<td style="text-align: right;">RL</td>
<td style="text-align: right;">Inside</td>
<td style="text-align: right;">1Fam</td>
</tr>
<tr class="odd">
<td style="text-align: right;">110500</td>
<td style="text-align: right;">866</td>
<td style="text-align: right;">3880</td>
<td style="text-align: right;">1945</td>
<td style="text-align: right;">5</td>
<td style="text-align: right;">0</td>
<td style="text-align: right;">NA</td>
<td style="text-align: right;">RM</td>
<td style="text-align: right;">Inside</td>
<td style="text-align: right;">1Fam</td>
</tr>
<tr class="even">
<td style="text-align: right;">127000</td>
<td style="text-align: right;">1355</td>
<td style="text-align: right;">6882</td>
<td style="text-align: right;">1914</td>
<td style="text-align: right;">6</td>
<td style="text-align: right;">0</td>
<td style="text-align: right;">NA</td>
<td style="text-align: right;">RM</td>
<td style="text-align: right;">Inside</td>
<td style="text-align: right;">1Fam</td>
</tr>
<tr class="odd">
<td style="text-align: right;">200500</td>
<td style="text-align: right;">3086</td>
<td style="text-align: right;">18030</td>
<td style="text-align: right;">1946</td>
<td style="text-align: right;">5</td>
<td style="text-align: right;">0</td>
<td style="text-align: right;">NA</td>
<td style="text-align: right;">RL</td>
<td style="text-align: right;">Inside</td>
<td style="text-align: right;">1Fam</td>
</tr>
<tr class="even">
<td style="text-align: right;">150000</td>
<td style="text-align: right;">1440</td>
<td style="text-align: right;">7711</td>
<td style="text-align: right;">1977</td>
<td style="text-align: right;">4</td>
<td style="text-align: right;">0</td>
<td style="text-align: right;">NA</td>
<td style="text-align: right;">RL</td>
<td style="text-align: right;">Inside</td>
<td style="text-align: right;">Duplex</td>
</tr>
<tr class="odd">
<td style="text-align: right;">86000</td>
<td style="text-align: right;">605</td>
<td style="text-align: right;">9098</td>
<td style="text-align: right;">1920</td>
<td style="text-align: right;">4</td>
<td style="text-align: right;">0</td>
<td style="text-align: right;">NA</td>
<td style="text-align: right;">RL</td>
<td style="text-align: right;">Inside</td>
<td style="text-align: right;">1Fam</td>
</tr>
<tr class="even">
<td style="text-align: right;">123600</td>
<td style="text-align: right;">990</td>
<td style="text-align: right;">8070</td>
<td style="text-align: right;">1994</td>
<td style="text-align: right;">4</td>
<td style="text-align: right;">0</td>
<td style="text-align: right;">NA</td>
<td style="text-align: right;">RL</td>
<td style="text-align: right;">Inside</td>
<td style="text-align: right;">1Fam</td>
</tr>
<tr class="odd">
<td style="text-align: right;">98500</td>
<td style="text-align: right;">1195</td>
<td style="text-align: right;">8741</td>
<td style="text-align: right;">1946</td>
<td style="text-align: right;">5</td>
<td style="text-align: right;">0</td>
<td style="text-align: right;">NA</td>
<td style="text-align: right;">RL</td>
<td style="text-align: right;">Inside</td>
<td style="text-align: right;">Duplex</td>
</tr>
<tr class="even">
<td style="text-align: right;">79000</td>
<td style="text-align: right;">774</td>
<td style="text-align: right;">4270</td>
<td style="text-align: right;">1931</td>
<td style="text-align: right;">3</td>
<td style="text-align: right;">0</td>
<td style="text-align: right;">NA</td>
<td style="text-align: right;">RH</td>
<td style="text-align: right;">Inside</td>
<td style="text-align: right;">1Fam</td>
</tr>
<tr class="odd">
<td style="text-align: right;">200000</td>
<td style="text-align: right;">3395</td>
<td style="text-align: right;">10896</td>
<td style="text-align: right;">1914</td>
<td style="text-align: right;">6</td>
<td style="text-align: right;">0</td>
<td style="text-align: right;">NA</td>
<td style="text-align: right;">RH</td>
<td style="text-align: right;">Inside</td>
<td style="text-align: right;">2fmCon</td>
</tr>
<tr class="even">
<td style="text-align: right;">150000</td>
<td style="text-align: right;">2592</td>
<td style="text-align: right;">10890</td>
<td style="text-align: right;">1923</td>
<td style="text-align: right;">5</td>
<td style="text-align: right;">0</td>
<td style="text-align: right;">NA</td>
<td style="text-align: right;">RL</td>
<td style="text-align: right;">Inside</td>
<td style="text-align: right;">Duplex</td>
</tr>
<tr class="odd">
<td style="text-align: right;">115000</td>
<td style="text-align: right;">1517</td>
<td style="text-align: right;">8500</td>
<td style="text-align: right;">1919</td>
<td style="text-align: right;">5</td>
<td style="text-align: right;">0</td>
<td style="text-align: right;">NA</td>
<td style="text-align: right;">RM</td>
<td style="text-align: right;">Corner</td>
<td style="text-align: right;">1Fam</td>
</tr>
<tr class="even">
<td style="text-align: right;">150909</td>
<td style="text-align: right;">1828</td>
<td style="text-align: right;">9060</td>
<td style="text-align: right;">1923</td>
<td style="text-align: right;">5</td>
<td style="text-align: right;">NA</td>
<td style="text-align: right;">NA</td>
<td style="text-align: right;">RM</td>
<td style="text-align: right;">Inside</td>
<td style="text-align: right;">1Fam</td>
</tr>
<tr class="odd">
<td style="text-align: right;">119600</td>
<td style="text-align: right;">1991</td>
<td style="text-align: right;">8250</td>
<td style="text-align: right;">1895</td>
<td style="text-align: right;">5</td>
<td style="text-align: right;">0</td>
<td style="text-align: right;">NA</td>
<td style="text-align: right;">C (all)</td>
<td style="text-align: right;">Inside</td>
<td style="text-align: right;">2fmCon</td>
</tr>
<tr class="even">
<td style="text-align: right;">147000</td>
<td style="text-align: right;">1120</td>
<td style="text-align: right;">8402</td>
<td style="text-align: right;">2007</td>
<td style="text-align: right;">5</td>
<td style="text-align: right;">0</td>
<td style="text-align: right;">NA</td>
<td style="text-align: right;">RL</td>
<td style="text-align: right;">Inside</td>
<td style="text-align: right;">1Fam</td>
</tr>
<tr class="odd">
<td style="text-align: right;">93900</td>
<td style="text-align: right;">1092</td>
<td style="text-align: right;">1495</td>
<td style="text-align: right;">1970</td>
<td style="text-align: right;">4</td>
<td style="text-align: right;">0</td>
<td style="text-align: right;">NA</td>
<td style="text-align: right;">RM</td>
<td style="text-align: right;">Inside</td>
<td style="text-align: right;">TwnhsE</td>
</tr>
<tr class="even">
<td style="text-align: right;">84500</td>
<td style="text-align: right;">630</td>
<td style="text-align: right;">1936</td>
<td style="text-align: right;">1970</td>
<td style="text-align: right;">4</td>
<td style="text-align: right;">0</td>
<td style="text-align: right;">NA</td>
<td style="text-align: right;">RM</td>
<td style="text-align: right;">Inside</td>
<td style="text-align: right;">Twnhs</td>
</tr>
<tr class="odd">
<td style="text-align: right;">139500</td>
<td style="text-align: right;">1142</td>
<td style="text-align: right;">7733</td>
<td style="text-align: right;">2005</td>
<td style="text-align: right;">6</td>
<td style="text-align: right;">0</td>
<td style="text-align: right;">NA</td>
<td style="text-align: right;">RL</td>
<td style="text-align: right;">Inside</td>
<td style="text-align: right;">1Fam</td>
</tr>
<tr class="even">
<td style="text-align: right;">132000</td>
<td style="text-align: right;">1131</td>
<td style="text-align: right;">13072</td>
<td style="text-align: right;">2005</td>
<td style="text-align: right;">6</td>
<td style="text-align: right;">0</td>
<td style="text-align: right;">NA</td>
<td style="text-align: right;">RL</td>
<td style="text-align: right;">Inside</td>
<td style="text-align: right;">1Fam</td>
</tr>
<tr class="odd">
<td style="text-align: right;">85500</td>
<td style="text-align: right;">869</td>
<td style="text-align: right;">5900</td>
<td style="text-align: right;">1923</td>
<td style="text-align: right;">4</td>
<td style="text-align: right;">0</td>
<td style="text-align: right;">NA</td>
<td style="text-align: right;">RL</td>
<td style="text-align: right;">Inside</td>
<td style="text-align: right;">1Fam</td>
</tr>
<tr class="even">
<td style="text-align: right;">135000</td>
<td style="text-align: right;">1192</td>
<td style="text-align: right;">10800</td>
<td style="text-align: right;">1949</td>
<td style="text-align: right;">4</td>
<td style="text-align: right;">0</td>
<td style="text-align: right;">NA</td>
<td style="text-align: right;">RL</td>
<td style="text-align: right;">Inside</td>
<td style="text-align: right;">1Fam</td>
</tr>
<tr class="odd">
<td style="text-align: right;">119000</td>
<td style="text-align: right;">1556</td>
<td style="text-align: right;">8512</td>
<td style="text-align: right;">1960</td>
<td style="text-align: right;">5</td>
<td style="text-align: right;">0</td>
<td style="text-align: right;">NA</td>
<td style="text-align: right;">RL</td>
<td style="text-align: right;">Corner</td>
<td style="text-align: right;">Duplex</td>
</tr>
<tr class="even">
<td style="text-align: right;">124000</td>
<td style="text-align: right;">1025</td>
<td style="text-align: right;">7000</td>
<td style="text-align: right;">1962</td>
<td style="text-align: right;">5</td>
<td style="text-align: right;">0</td>
<td style="text-align: right;">NA</td>
<td style="text-align: right;">RL</td>
<td style="text-align: right;">Inside</td>
<td style="text-align: right;">2fmCon</td>
</tr>
<tr class="odd">
<td style="text-align: right;">64500</td>
<td style="text-align: right;">1020</td>
<td style="text-align: right;">4761</td>
<td style="text-align: right;">1918</td>
<td style="text-align: right;">3</td>
<td style="text-align: right;">0</td>
<td style="text-align: right;">NA</td>
<td style="text-align: right;">C (all)</td>
<td style="text-align: right;">Corner</td>
<td style="text-align: right;">1Fam</td>
</tr>
<tr class="even">
<td style="text-align: right;">100000</td>
<td style="text-align: right;">788</td>
<td style="text-align: right;">7446</td>
<td style="text-align: right;">1941</td>
<td style="text-align: right;">4</td>
<td style="text-align: right;">0</td>
<td style="text-align: right;">NA</td>
<td style="text-align: right;">RL</td>
<td style="text-align: right;">Corner</td>
<td style="text-align: right;">1Fam</td>
</tr>
<tr class="odd">
<td style="text-align: right;">80500</td>
<td style="text-align: right;">912</td>
<td style="text-align: right;">6240</td>
<td style="text-align: right;">1947</td>
<td style="text-align: right;">4</td>
<td style="text-align: right;">0</td>
<td style="text-align: right;">NA</td>
<td style="text-align: right;">RM</td>
<td style="text-align: right;">Inside</td>
<td style="text-align: right;">1Fam</td>
</tr>
<tr class="even">
<td style="text-align: right;">72000</td>
<td style="text-align: right;">819</td>
<td style="text-align: right;">9000</td>
<td style="text-align: right;">1919</td>
<td style="text-align: right;">5</td>
<td style="text-align: right;">0</td>
<td style="text-align: right;">NA</td>
<td style="text-align: right;">RM</td>
<td style="text-align: right;">Inside</td>
<td style="text-align: right;">1Fam</td>
</tr>
<tr class="odd">
<td style="text-align: right;">117250</td>
<td style="text-align: right;">914</td>
<td style="text-align: right;">8050</td>
<td style="text-align: right;">2002</td>
<td style="text-align: right;">6</td>
<td style="text-align: right;">0</td>
<td style="text-align: right;">NA</td>
<td style="text-align: right;">RL</td>
<td style="text-align: right;">Inside</td>
<td style="text-align: right;">1Fam</td>
</tr>
<tr class="even">
<td style="text-align: right;">81000</td>
<td style="text-align: right;">1184</td>
<td style="text-align: right;">8410</td>
<td style="text-align: right;">1910</td>
<td style="text-align: right;">5</td>
<td style="text-align: right;">0</td>
<td style="text-align: right;">NA</td>
<td style="text-align: right;">RL</td>
<td style="text-align: right;">FR2</td>
<td style="text-align: right;">1Fam</td>
</tr>
<tr class="odd">
<td style="text-align: right;">83000</td>
<td style="text-align: right;">1414</td>
<td style="text-align: right;">8248</td>
<td style="text-align: right;">1922</td>
<td style="text-align: right;">4</td>
<td style="text-align: right;">0</td>
<td style="text-align: right;">NA</td>
<td style="text-align: right;">RL</td>
<td style="text-align: right;">Inside</td>
<td style="text-align: right;">1Fam</td>
</tr>
<tr class="even">
<td style="text-align: right;">102000</td>
<td style="text-align: right;">1522</td>
<td style="text-align: right;">6000</td>
<td style="text-align: right;">1926</td>
<td style="text-align: right;">5</td>
<td style="text-align: right;">0</td>
<td style="text-align: right;">NA</td>
<td style="text-align: right;">RL</td>
<td style="text-align: right;">Inside</td>
<td style="text-align: right;">1Fam</td>
</tr>
<tr class="odd">
<td style="text-align: right;">72000</td>
<td style="text-align: right;">672</td>
<td style="text-align: right;">8534</td>
<td style="text-align: right;">1925</td>
<td style="text-align: right;">4</td>
<td style="text-align: right;">0</td>
<td style="text-align: right;">NA</td>
<td style="text-align: right;">RM</td>
<td style="text-align: right;">Inside</td>
<td style="text-align: right;">1Fam</td>
</tr>
<tr class="even">
<td style="text-align: right;">115000</td>
<td style="text-align: right;">1396</td>
<td style="text-align: right;">9000</td>
<td style="text-align: right;">1951</td>
<td style="text-align: right;">5</td>
<td style="text-align: right;">0</td>
<td style="text-align: right;">NA</td>
<td style="text-align: right;">C (all)</td>
<td style="text-align: right;">Inside</td>
<td style="text-align: right;">2fmCon</td>
</tr>
<tr class="odd">
<td style="text-align: right;">78000</td>
<td style="text-align: right;">936</td>
<td style="text-align: right;">8520</td>
<td style="text-align: right;">1916</td>
<td style="text-align: right;">3</td>
<td style="text-align: right;">0</td>
<td style="text-align: right;">NA</td>
<td style="text-align: right;">C (all)</td>
<td style="text-align: right;">Inside</td>
<td style="text-align: right;">1Fam</td>
</tr>
<tr class="even">
<td style="text-align: right;">92000</td>
<td style="text-align: right;">630</td>
<td style="text-align: right;">1533</td>
<td style="text-align: right;">1970</td>
<td style="text-align: right;">5</td>
<td style="text-align: right;">0</td>
<td style="text-align: right;">NA</td>
<td style="text-align: right;">RM</td>
<td style="text-align: right;">Inside</td>
<td style="text-align: right;">Twnhs</td>
</tr>
<tr class="odd">
<td style="text-align: right;">90500</td>
<td style="text-align: right;">1092</td>
<td style="text-align: right;">1936</td>
<td style="text-align: right;">1970</td>
<td style="text-align: right;">4</td>
<td style="text-align: right;">0</td>
<td style="text-align: right;">NA</td>
<td style="text-align: right;">RM</td>
<td style="text-align: right;">Inside</td>
<td style="text-align: right;">Twnhs</td>
</tr>
</tbody>
</table>
</div>

</div>
</div>
<p><strong>Option 3 (Most advanced)</strong>: Line by line kable table. You can make this as complicated and customized as you like. This is a simple example of options</p>
<div class="cell">
<div class="sourceCode cell-code" id="cb30"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb30-1"><a href="#cb30-1" aria-hidden="true" tabindex="-1"></a>data_all <span class="sc">|&gt;</span> <span class="fu">filter</span>(<span class="fu">is.na</span>(garage_qual)) <span class="sc">|&gt;</span> </span>
<span id="cb30-2"><a href="#cb30-2" aria-hidden="true" tabindex="-1"></a>  <span class="fu">kbl</span>(<span class="at">align =</span> <span class="st">"r"</span>) <span class="sc">|&gt;</span> </span>
<span id="cb30-3"><a href="#cb30-3" aria-hidden="true" tabindex="-1"></a>  <span class="fu">kable_styling</span>(<span class="at">bootstrap_options =</span> <span class="fu">c</span>(<span class="st">"striped"</span>, <span class="st">"condensed"</span>)) <span class="sc">|&gt;</span> </span>
<span id="cb30-4"><a href="#cb30-4" aria-hidden="true" tabindex="-1"></a>  <span class="fu">scroll_box</span>(<span class="at">height =</span> <span class="st">"500px"</span>, <span class="at">width =</span> <span class="st">"100%"</span>)</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
<div class="cell-output-display">
<div style="border: 1px solid #ddd; padding: 0px; overflow-y: scroll; height:500px; overflow-x: scroll; width:100%; ">
<table class="table table-striped table-condensed table-sm small" data-quarto-postprocess="true">
<thead>
<tr class="header">
<th data-quarto-table-cell-role="th" style="text-align: right; position: sticky; top: 0; background-color: #FFFFFF;">sale_price</th>
<th data-quarto-table-cell-role="th" style="text-align: right; position: sticky; top: 0; background-color: #FFFFFF;">gr_liv_area</th>
<th data-quarto-table-cell-role="th" style="text-align: right; position: sticky; top: 0; background-color: #FFFFFF;">lot_area</th>
<th data-quarto-table-cell-role="th" style="text-align: right; position: sticky; top: 0; background-color: #FFFFFF;">year_built</th>
<th data-quarto-table-cell-role="th" style="text-align: right; position: sticky; top: 0; background-color: #FFFFFF;">overall_qual</th>
<th data-quarto-table-cell-role="th" style="text-align: right; position: sticky; top: 0; background-color: #FFFFFF;">garage_cars</th>
<th data-quarto-table-cell-role="th" style="text-align: right; position: sticky; top: 0; background-color: #FFFFFF;">garage_qual</th>
<th data-quarto-table-cell-role="th" style="text-align: right; position: sticky; top: 0; background-color: #FFFFFF;">ms_zoning</th>
<th data-quarto-table-cell-role="th" style="text-align: right; position: sticky; top: 0; background-color: #FFFFFF;">lot_config</th>
<th data-quarto-table-cell-role="th" style="text-align: right; position: sticky; top: 0; background-color: #FFFFFF;">bldg_type</th>
</tr>
</thead>
<tbody>
<tr class="odd">
<td style="text-align: right;">115000</td>
<td style="text-align: right;">864</td>
<td style="text-align: right;">10500</td>
<td style="text-align: right;">1971</td>
<td style="text-align: right;">4</td>
<td style="text-align: right;">0</td>
<td style="text-align: right;">NA</td>
<td style="text-align: right;">RL</td>
<td style="text-align: right;">FR2</td>
<td style="text-align: right;">1Fam</td>
</tr>
<tr class="even">
<td style="text-align: right;">128950</td>
<td style="text-align: right;">1225</td>
<td style="text-align: right;">9320</td>
<td style="text-align: right;">1959</td>
<td style="text-align: right;">4</td>
<td style="text-align: right;">0</td>
<td style="text-align: right;">NA</td>
<td style="text-align: right;">RL</td>
<td style="text-align: right;">Inside</td>
<td style="text-align: right;">1Fam</td>
</tr>
<tr class="odd">
<td style="text-align: right;">84900</td>
<td style="text-align: right;">1728</td>
<td style="text-align: right;">13260</td>
<td style="text-align: right;">1962</td>
<td style="text-align: right;">5</td>
<td style="text-align: right;">0</td>
<td style="text-align: right;">NA</td>
<td style="text-align: right;">RL</td>
<td style="text-align: right;">Inside</td>
<td style="text-align: right;">Duplex</td>
</tr>
<tr class="even">
<td style="text-align: right;">116500</td>
<td style="text-align: right;">858</td>
<td style="text-align: right;">7207</td>
<td style="text-align: right;">1958</td>
<td style="text-align: right;">5</td>
<td style="text-align: right;">0</td>
<td style="text-align: right;">NA</td>
<td style="text-align: right;">RL</td>
<td style="text-align: right;">Inside</td>
<td style="text-align: right;">1Fam</td>
</tr>
<tr class="odd">
<td style="text-align: right;">76500</td>
<td style="text-align: right;">1306</td>
<td style="text-align: right;">5350</td>
<td style="text-align: right;">1940</td>
<td style="text-align: right;">3</td>
<td style="text-align: right;">0</td>
<td style="text-align: right;">NA</td>
<td style="text-align: right;">RL</td>
<td style="text-align: right;">Inside</td>
<td style="text-align: right;">1Fam</td>
</tr>
<tr class="even">
<td style="text-align: right;">76500</td>
<td style="text-align: right;">2256</td>
<td style="text-align: right;">9045</td>
<td style="text-align: right;">1910</td>
<td style="text-align: right;">5</td>
<td style="text-align: right;">0</td>
<td style="text-align: right;">NA</td>
<td style="text-align: right;">RM</td>
<td style="text-align: right;">Inside</td>
<td style="text-align: right;">2fmCon</td>
</tr>
<tr class="odd">
<td style="text-align: right;">159900</td>
<td style="text-align: right;">1560</td>
<td style="text-align: right;">12900</td>
<td style="text-align: right;">1912</td>
<td style="text-align: right;">6</td>
<td style="text-align: right;">0</td>
<td style="text-align: right;">NA</td>
<td style="text-align: right;">RM</td>
<td style="text-align: right;">Inside</td>
<td style="text-align: right;">1Fam</td>
</tr>
<tr class="even">
<td style="text-align: right;">55000</td>
<td style="text-align: right;">1092</td>
<td style="text-align: right;">5600</td>
<td style="text-align: right;">1930</td>
<td style="text-align: right;">4</td>
<td style="text-align: right;">0</td>
<td style="text-align: right;">NA</td>
<td style="text-align: right;">RM</td>
<td style="text-align: right;">Inside</td>
<td style="text-align: right;">2fmCon</td>
</tr>
<tr class="odd">
<td style="text-align: right;">93369</td>
<td style="text-align: right;">1884</td>
<td style="text-align: right;">6449</td>
<td style="text-align: right;">1907</td>
<td style="text-align: right;">4</td>
<td style="text-align: right;">0</td>
<td style="text-align: right;">NA</td>
<td style="text-align: right;">C (all)</td>
<td style="text-align: right;">Inside</td>
<td style="text-align: right;">1Fam</td>
</tr>
<tr class="even">
<td style="text-align: right;">94000</td>
<td style="text-align: right;">1020</td>
<td style="text-align: right;">6342</td>
<td style="text-align: right;">1875</td>
<td style="text-align: right;">5</td>
<td style="text-align: right;">0</td>
<td style="text-align: right;">NA</td>
<td style="text-align: right;">RL</td>
<td style="text-align: right;">Inside</td>
<td style="text-align: right;">1Fam</td>
</tr>
<tr class="odd">
<td style="text-align: right;">136000</td>
<td style="text-align: right;">1832</td>
<td style="text-align: right;">10773</td>
<td style="text-align: right;">1967</td>
<td style="text-align: right;">4</td>
<td style="text-align: right;">0</td>
<td style="text-align: right;">NA</td>
<td style="text-align: right;">RL</td>
<td style="text-align: right;">Inside</td>
<td style="text-align: right;">Duplex</td>
</tr>
<tr class="even">
<td style="text-align: right;">100000</td>
<td style="text-align: right;">1664</td>
<td style="text-align: right;">9825</td>
<td style="text-align: right;">1965</td>
<td style="text-align: right;">5</td>
<td style="text-align: right;">0</td>
<td style="text-align: right;">NA</td>
<td style="text-align: right;">RL</td>
<td style="text-align: right;">Inside</td>
<td style="text-align: right;">Duplex</td>
</tr>
<tr class="odd">
<td style="text-align: right;">90000</td>
<td style="text-align: right;">960</td>
<td style="text-align: right;">6410</td>
<td style="text-align: right;">1958</td>
<td style="text-align: right;">4</td>
<td style="text-align: right;">0</td>
<td style="text-align: right;">NA</td>
<td style="text-align: right;">RL</td>
<td style="text-align: right;">Inside</td>
<td style="text-align: right;">1Fam</td>
</tr>
<tr class="even">
<td style="text-align: right;">100000</td>
<td style="text-align: right;">1666</td>
<td style="text-align: right;">9839</td>
<td style="text-align: right;">1931</td>
<td style="text-align: right;">5</td>
<td style="text-align: right;">0</td>
<td style="text-align: right;">NA</td>
<td style="text-align: right;">RL</td>
<td style="text-align: right;">Inside</td>
<td style="text-align: right;">1Fam</td>
</tr>
<tr class="odd">
<td style="text-align: right;">139000</td>
<td style="text-align: right;">1824</td>
<td style="text-align: right;">9400</td>
<td style="text-align: right;">1971</td>
<td style="text-align: right;">6</td>
<td style="text-align: right;">0</td>
<td style="text-align: right;">NA</td>
<td style="text-align: right;">RL</td>
<td style="text-align: right;">Corner</td>
<td style="text-align: right;">Duplex</td>
</tr>
<tr class="even">
<td style="text-align: right;">76000</td>
<td style="text-align: right;">1092</td>
<td style="text-align: right;">1476</td>
<td style="text-align: right;">1970</td>
<td style="text-align: right;">4</td>
<td style="text-align: right;">0</td>
<td style="text-align: right;">NA</td>
<td style="text-align: right;">RM</td>
<td style="text-align: right;">Inside</td>
<td style="text-align: right;">Twnhs</td>
</tr>
<tr class="odd">
<td style="text-align: right;">75500</td>
<td style="text-align: right;">630</td>
<td style="text-align: right;">1491</td>
<td style="text-align: right;">1972</td>
<td style="text-align: right;">4</td>
<td style="text-align: right;">0</td>
<td style="text-align: right;">NA</td>
<td style="text-align: right;">RM</td>
<td style="text-align: right;">Inside</td>
<td style="text-align: right;">TwnhsE</td>
</tr>
<tr class="even">
<td style="text-align: right;">88250</td>
<td style="text-align: right;">1092</td>
<td style="text-align: right;">1900</td>
<td style="text-align: right;">1970</td>
<td style="text-align: right;">4</td>
<td style="text-align: right;">0</td>
<td style="text-align: right;">NA</td>
<td style="text-align: right;">RM</td>
<td style="text-align: right;">Inside</td>
<td style="text-align: right;">TwnhsE</td>
</tr>
<tr class="odd">
<td style="text-align: right;">136000</td>
<td style="text-align: right;">1792</td>
<td style="text-align: right;">9000</td>
<td style="text-align: right;">1974</td>
<td style="text-align: right;">5</td>
<td style="text-align: right;">0</td>
<td style="text-align: right;">NA</td>
<td style="text-align: right;">RL</td>
<td style="text-align: right;">FR2</td>
<td style="text-align: right;">Duplex</td>
</tr>
<tr class="even">
<td style="text-align: right;">142000</td>
<td style="text-align: right;">1114</td>
<td style="text-align: right;">13072</td>
<td style="text-align: right;">2004</td>
<td style="text-align: right;">5</td>
<td style="text-align: right;">0</td>
<td style="text-align: right;">NA</td>
<td style="text-align: right;">RL</td>
<td style="text-align: right;">Inside</td>
<td style="text-align: right;">1Fam</td>
</tr>
<tr class="odd">
<td style="text-align: right;">82500</td>
<td style="text-align: right;">708</td>
<td style="text-align: right;">5330</td>
<td style="text-align: right;">1940</td>
<td style="text-align: right;">4</td>
<td style="text-align: right;">0</td>
<td style="text-align: right;">NA</td>
<td style="text-align: right;">RL</td>
<td style="text-align: right;">Inside</td>
<td style="text-align: right;">1Fam</td>
</tr>
<tr class="even">
<td style="text-align: right;">129000</td>
<td style="text-align: right;">1464</td>
<td style="text-align: right;">9900</td>
<td style="text-align: right;">1910</td>
<td style="text-align: right;">5</td>
<td style="text-align: right;">0</td>
<td style="text-align: right;">NA</td>
<td style="text-align: right;">RM</td>
<td style="text-align: right;">Corner</td>
<td style="text-align: right;">1Fam</td>
</tr>
<tr class="odd">
<td style="text-align: right;">94550</td>
<td style="text-align: right;">1701</td>
<td style="text-align: right;">7627</td>
<td style="text-align: right;">1920</td>
<td style="text-align: right;">4</td>
<td style="text-align: right;">0</td>
<td style="text-align: right;">NA</td>
<td style="text-align: right;">RM</td>
<td style="text-align: right;">Corner</td>
<td style="text-align: right;">2fmCon</td>
</tr>
<tr class="even">
<td style="text-align: right;">103000</td>
<td style="text-align: right;">1447</td>
<td style="text-align: right;">10134</td>
<td style="text-align: right;">1910</td>
<td style="text-align: right;">5</td>
<td style="text-align: right;">0</td>
<td style="text-align: right;">NA</td>
<td style="text-align: right;">RM</td>
<td style="text-align: right;">Inside</td>
<td style="text-align: right;">1Fam</td>
</tr>
<tr class="odd">
<td style="text-align: right;">37900</td>
<td style="text-align: right;">968</td>
<td style="text-align: right;">5925</td>
<td style="text-align: right;">1910</td>
<td style="text-align: right;">3</td>
<td style="text-align: right;">0</td>
<td style="text-align: right;">NA</td>
<td style="text-align: right;">RM</td>
<td style="text-align: right;">Inside</td>
<td style="text-align: right;">1Fam</td>
</tr>
<tr class="even">
<td style="text-align: right;">113000</td>
<td style="text-align: right;">1452</td>
<td style="text-align: right;">4456</td>
<td style="text-align: right;">1920</td>
<td style="text-align: right;">4</td>
<td style="text-align: right;">0</td>
<td style="text-align: right;">NA</td>
<td style="text-align: right;">RM</td>
<td style="text-align: right;">Inside</td>
<td style="text-align: right;">2fmCon</td>
</tr>
<tr class="odd">
<td style="text-align: right;">58500</td>
<td style="text-align: right;">816</td>
<td style="text-align: right;">3300</td>
<td style="text-align: right;">1910</td>
<td style="text-align: right;">4</td>
<td style="text-align: right;">0</td>
<td style="text-align: right;">NA</td>
<td style="text-align: right;">C (all)</td>
<td style="text-align: right;">Inside</td>
<td style="text-align: right;">1Fam</td>
</tr>
<tr class="even">
<td style="text-align: right;">34900</td>
<td style="text-align: right;">720</td>
<td style="text-align: right;">7879</td>
<td style="text-align: right;">1920</td>
<td style="text-align: right;">4</td>
<td style="text-align: right;">0</td>
<td style="text-align: right;">NA</td>
<td style="text-align: right;">C (all)</td>
<td style="text-align: right;">Inside</td>
<td style="text-align: right;">1Fam</td>
</tr>
<tr class="odd">
<td style="text-align: right;">60000</td>
<td style="text-align: right;">800</td>
<td style="text-align: right;">6120</td>
<td style="text-align: right;">1936</td>
<td style="text-align: right;">2</td>
<td style="text-align: right;">0</td>
<td style="text-align: right;">NA</td>
<td style="text-align: right;">RM</td>
<td style="text-align: right;">Inside</td>
<td style="text-align: right;">1Fam</td>
</tr>
<tr class="even">
<td style="text-align: right;">62500</td>
<td style="text-align: right;">2128</td>
<td style="text-align: right;">3000</td>
<td style="text-align: right;">1922</td>
<td style="text-align: right;">5</td>
<td style="text-align: right;">0</td>
<td style="text-align: right;">NA</td>
<td style="text-align: right;">RM</td>
<td style="text-align: right;">Inside</td>
<td style="text-align: right;">Duplex</td>
</tr>
<tr class="odd">
<td style="text-align: right;">97500</td>
<td style="text-align: right;">1864</td>
<td style="text-align: right;">5852</td>
<td style="text-align: right;">1902</td>
<td style="text-align: right;">7</td>
<td style="text-align: right;">0</td>
<td style="text-align: right;">NA</td>
<td style="text-align: right;">RM</td>
<td style="text-align: right;">Corner</td>
<td style="text-align: right;">2fmCon</td>
</tr>
<tr class="even">
<td style="text-align: right;">70000</td>
<td style="text-align: right;">892</td>
<td style="text-align: right;">5160</td>
<td style="text-align: right;">1923</td>
<td style="text-align: right;">4</td>
<td style="text-align: right;">0</td>
<td style="text-align: right;">NA</td>
<td style="text-align: right;">RM</td>
<td style="text-align: right;">Inside</td>
<td style="text-align: right;">1Fam</td>
</tr>
<tr class="odd">
<td style="text-align: right;">179000</td>
<td style="text-align: right;">1200</td>
<td style="text-align: right;">10800</td>
<td style="text-align: right;">1987</td>
<td style="text-align: right;">5</td>
<td style="text-align: right;">0</td>
<td style="text-align: right;">NA</td>
<td style="text-align: right;">RL</td>
<td style="text-align: right;">Inside</td>
<td style="text-align: right;">Duplex</td>
</tr>
<tr class="even">
<td style="text-align: right;">179000</td>
<td style="text-align: right;">1200</td>
<td style="text-align: right;">10800</td>
<td style="text-align: right;">1987</td>
<td style="text-align: right;">5</td>
<td style="text-align: right;">0</td>
<td style="text-align: right;">NA</td>
<td style="text-align: right;">RL</td>
<td style="text-align: right;">Inside</td>
<td style="text-align: right;">Duplex</td>
</tr>
<tr class="odd">
<td style="text-align: right;">61000</td>
<td style="text-align: right;">904</td>
<td style="text-align: right;">10020</td>
<td style="text-align: right;">1922</td>
<td style="text-align: right;">1</td>
<td style="text-align: right;">0</td>
<td style="text-align: right;">NA</td>
<td style="text-align: right;">RL</td>
<td style="text-align: right;">Inside</td>
<td style="text-align: right;">1Fam</td>
</tr>
<tr class="even">
<td style="text-align: right;">118000</td>
<td style="text-align: right;">698</td>
<td style="text-align: right;">9405</td>
<td style="text-align: right;">1947</td>
<td style="text-align: right;">5</td>
<td style="text-align: right;">0</td>
<td style="text-align: right;">NA</td>
<td style="text-align: right;">RL</td>
<td style="text-align: right;">Inside</td>
<td style="text-align: right;">1Fam</td>
</tr>
<tr class="odd">
<td style="text-align: right;">99900</td>
<td style="text-align: right;">864</td>
<td style="text-align: right;">4060</td>
<td style="text-align: right;">1922</td>
<td style="text-align: right;">5</td>
<td style="text-align: right;">0</td>
<td style="text-align: right;">NA</td>
<td style="text-align: right;">RL</td>
<td style="text-align: right;">Corner</td>
<td style="text-align: right;">1Fam</td>
</tr>
<tr class="even">
<td style="text-align: right;">119900</td>
<td style="text-align: right;">1678</td>
<td style="text-align: right;">10926</td>
<td style="text-align: right;">1959</td>
<td style="text-align: right;">5</td>
<td style="text-align: right;">0</td>
<td style="text-align: right;">NA</td>
<td style="text-align: right;">RL</td>
<td style="text-align: right;">Inside</td>
<td style="text-align: right;">Duplex</td>
</tr>
<tr class="odd">
<td style="text-align: right;">112000</td>
<td style="text-align: right;">833</td>
<td style="text-align: right;">8780</td>
<td style="text-align: right;">1985</td>
<td style="text-align: right;">5</td>
<td style="text-align: right;">0</td>
<td style="text-align: right;">NA</td>
<td style="text-align: right;">RL</td>
<td style="text-align: right;">Corner</td>
<td style="text-align: right;">1Fam</td>
</tr>
<tr class="even">
<td style="text-align: right;">141000</td>
<td style="text-align: right;">1080</td>
<td style="text-align: right;">7500</td>
<td style="text-align: right;">2004</td>
<td style="text-align: right;">7</td>
<td style="text-align: right;">0</td>
<td style="text-align: right;">NA</td>
<td style="text-align: right;">RL</td>
<td style="text-align: right;">Inside</td>
<td style="text-align: right;">1Fam</td>
</tr>
<tr class="odd">
<td style="text-align: right;">106250</td>
<td style="text-align: right;">1294</td>
<td style="text-align: right;">10800</td>
<td style="text-align: right;">1900</td>
<td style="text-align: right;">4</td>
<td style="text-align: right;">0</td>
<td style="text-align: right;">NA</td>
<td style="text-align: right;">RL</td>
<td style="text-align: right;">Inside</td>
<td style="text-align: right;">2fmCon</td>
</tr>
<tr class="even">
<td style="text-align: right;">130000</td>
<td style="text-align: right;">1800</td>
<td style="text-align: right;">8513</td>
<td style="text-align: right;">1961</td>
<td style="text-align: right;">5</td>
<td style="text-align: right;">0</td>
<td style="text-align: right;">NA</td>
<td style="text-align: right;">RL</td>
<td style="text-align: right;">Corner</td>
<td style="text-align: right;">Duplex</td>
</tr>
<tr class="odd">
<td style="text-align: right;">120000</td>
<td style="text-align: right;">1027</td>
<td style="text-align: right;">5400</td>
<td style="text-align: right;">1920</td>
<td style="text-align: right;">7</td>
<td style="text-align: right;">0</td>
<td style="text-align: right;">NA</td>
<td style="text-align: right;">RM</td>
<td style="text-align: right;">Inside</td>
<td style="text-align: right;">1Fam</td>
</tr>
<tr class="even">
<td style="text-align: right;">95000</td>
<td style="text-align: right;">1080</td>
<td style="text-align: right;">5914</td>
<td style="text-align: right;">1890</td>
<td style="text-align: right;">5</td>
<td style="text-align: right;">0</td>
<td style="text-align: right;">NA</td>
<td style="text-align: right;">RM</td>
<td style="text-align: right;">Inside</td>
<td style="text-align: right;">1Fam</td>
</tr>
<tr class="odd">
<td style="text-align: right;">65000</td>
<td style="text-align: right;">1588</td>
<td style="text-align: right;">12205</td>
<td style="text-align: right;">1949</td>
<td style="text-align: right;">3</td>
<td style="text-align: right;">0</td>
<td style="text-align: right;">NA</td>
<td style="text-align: right;">RM</td>
<td style="text-align: right;">Inside</td>
<td style="text-align: right;">1Fam</td>
</tr>
<tr class="even">
<td style="text-align: right;">129400</td>
<td style="text-align: right;">1540</td>
<td style="text-align: right;">6000</td>
<td style="text-align: right;">1905</td>
<td style="text-align: right;">5</td>
<td style="text-align: right;">0</td>
<td style="text-align: right;">NA</td>
<td style="text-align: right;">RM</td>
<td style="text-align: right;">Corner</td>
<td style="text-align: right;">1Fam</td>
</tr>
<tr class="odd">
<td style="text-align: right;">160000</td>
<td style="text-align: right;">1984</td>
<td style="text-align: right;">8094</td>
<td style="text-align: right;">1910</td>
<td style="text-align: right;">6</td>
<td style="text-align: right;">1</td>
<td style="text-align: right;">NA</td>
<td style="text-align: right;">RM</td>
<td style="text-align: right;">Inside</td>
<td style="text-align: right;">2fmCon</td>
</tr>
<tr class="even">
<td style="text-align: right;">89500</td>
<td style="text-align: right;">1406</td>
<td style="text-align: right;">7920</td>
<td style="text-align: right;">1920</td>
<td style="text-align: right;">6</td>
<td style="text-align: right;">0</td>
<td style="text-align: right;">NA</td>
<td style="text-align: right;">RM</td>
<td style="text-align: right;">Inside</td>
<td style="text-align: right;">1Fam</td>
</tr>
<tr class="odd">
<td style="text-align: right;">79900</td>
<td style="text-align: right;">1198</td>
<td style="text-align: right;">5586</td>
<td style="text-align: right;">1920</td>
<td style="text-align: right;">6</td>
<td style="text-align: right;">0</td>
<td style="text-align: right;">NA</td>
<td style="text-align: right;">RM</td>
<td style="text-align: right;">Inside</td>
<td style="text-align: right;">1Fam</td>
</tr>
<tr class="even">
<td style="text-align: right;">82375</td>
<td style="text-align: right;">1344</td>
<td style="text-align: right;">10320</td>
<td style="text-align: right;">1915</td>
<td style="text-align: right;">3</td>
<td style="text-align: right;">0</td>
<td style="text-align: right;">NA</td>
<td style="text-align: right;">RM</td>
<td style="text-align: right;">Inside</td>
<td style="text-align: right;">2fmCon</td>
</tr>
<tr class="odd">
<td style="text-align: right;">127500</td>
<td style="text-align: right;">1355</td>
<td style="text-align: right;">10106</td>
<td style="text-align: right;">1940</td>
<td style="text-align: right;">5</td>
<td style="text-align: right;">0</td>
<td style="text-align: right;">NA</td>
<td style="text-align: right;">RL</td>
<td style="text-align: right;">Inside</td>
<td style="text-align: right;">2fmCon</td>
</tr>
<tr class="even">
<td style="text-align: right;">80000</td>
<td style="text-align: right;">1006</td>
<td style="text-align: right;">9000</td>
<td style="text-align: right;">1959</td>
<td style="text-align: right;">5</td>
<td style="text-align: right;">0</td>
<td style="text-align: right;">NA</td>
<td style="text-align: right;">RL</td>
<td style="text-align: right;">Inside</td>
<td style="text-align: right;">1Fam</td>
</tr>
<tr class="odd">
<td style="text-align: right;">260000</td>
<td style="text-align: right;">1518</td>
<td style="text-align: right;">19550</td>
<td style="text-align: right;">1940</td>
<td style="text-align: right;">5</td>
<td style="text-align: right;">0</td>
<td style="text-align: right;">NA</td>
<td style="text-align: right;">RL</td>
<td style="text-align: right;">Inside</td>
<td style="text-align: right;">1Fam</td>
</tr>
<tr class="even">
<td style="text-align: right;">99600</td>
<td style="text-align: right;">864</td>
<td style="text-align: right;">9350</td>
<td style="text-align: right;">1975</td>
<td style="text-align: right;">5</td>
<td style="text-align: right;">0</td>
<td style="text-align: right;">NA</td>
<td style="text-align: right;">RL</td>
<td style="text-align: right;">Inside</td>
<td style="text-align: right;">Duplex</td>
</tr>
<tr class="odd">
<td style="text-align: right;">107500</td>
<td style="text-align: right;">1347</td>
<td style="text-align: right;">7000</td>
<td style="text-align: right;">1910</td>
<td style="text-align: right;">5</td>
<td style="text-align: right;">0</td>
<td style="text-align: right;">NA</td>
<td style="text-align: right;">RL</td>
<td style="text-align: right;">Inside</td>
<td style="text-align: right;">2fmCon</td>
</tr>
<tr class="even">
<td style="text-align: right;">79000</td>
<td style="text-align: right;">1096</td>
<td style="text-align: right;">9600</td>
<td style="text-align: right;">1924</td>
<td style="text-align: right;">6</td>
<td style="text-align: right;">0</td>
<td style="text-align: right;">NA</td>
<td style="text-align: right;">RL</td>
<td style="text-align: right;">Corner</td>
<td style="text-align: right;">1Fam</td>
</tr>
<tr class="odd">
<td style="text-align: right;">85000</td>
<td style="text-align: right;">796</td>
<td style="text-align: right;">8777</td>
<td style="text-align: right;">1910</td>
<td style="text-align: right;">5</td>
<td style="text-align: right;">0</td>
<td style="text-align: right;">NA</td>
<td style="text-align: right;">RL</td>
<td style="text-align: right;">Inside</td>
<td style="text-align: right;">1Fam</td>
</tr>
<tr class="even">
<td style="text-align: right;">145900</td>
<td style="text-align: right;">2200</td>
<td style="text-align: right;">8777</td>
<td style="text-align: right;">1900</td>
<td style="text-align: right;">5</td>
<td style="text-align: right;">0</td>
<td style="text-align: right;">NA</td>
<td style="text-align: right;">RL</td>
<td style="text-align: right;">Inside</td>
<td style="text-align: right;">Duplex</td>
</tr>
<tr class="odd">
<td style="text-align: right;">82000</td>
<td style="text-align: right;">1152</td>
<td style="text-align: right;">6040</td>
<td style="text-align: right;">1955</td>
<td style="text-align: right;">4</td>
<td style="text-align: right;">0</td>
<td style="text-align: right;">NA</td>
<td style="text-align: right;">RL</td>
<td style="text-align: right;">Inside</td>
<td style="text-align: right;">Duplex</td>
</tr>
<tr class="even">
<td style="text-align: right;">82000</td>
<td style="text-align: right;">1152</td>
<td style="text-align: right;">6012</td>
<td style="text-align: right;">1955</td>
<td style="text-align: right;">4</td>
<td style="text-align: right;">0</td>
<td style="text-align: right;">NA</td>
<td style="text-align: right;">RL</td>
<td style="text-align: right;">Corner</td>
<td style="text-align: right;">Duplex</td>
</tr>
<tr class="odd">
<td style="text-align: right;">118000</td>
<td style="text-align: right;">1440</td>
<td style="text-align: right;">12108</td>
<td style="text-align: right;">1955</td>
<td style="text-align: right;">4</td>
<td style="text-align: right;">0</td>
<td style="text-align: right;">NA</td>
<td style="text-align: right;">RL</td>
<td style="text-align: right;">Inside</td>
<td style="text-align: right;">Duplex</td>
</tr>
<tr class="even">
<td style="text-align: right;">82500</td>
<td style="text-align: right;">1152</td>
<td style="text-align: right;">6845</td>
<td style="text-align: right;">1955</td>
<td style="text-align: right;">4</td>
<td style="text-align: right;">0</td>
<td style="text-align: right;">NA</td>
<td style="text-align: right;">RL</td>
<td style="text-align: right;">Inside</td>
<td style="text-align: right;">Duplex</td>
</tr>
<tr class="odd">
<td style="text-align: right;">91900</td>
<td style="text-align: right;">784</td>
<td style="text-align: right;">6931</td>
<td style="text-align: right;">1955</td>
<td style="text-align: right;">4</td>
<td style="text-align: right;">0</td>
<td style="text-align: right;">NA</td>
<td style="text-align: right;">RL</td>
<td style="text-align: right;">Inside</td>
<td style="text-align: right;">2fmCon</td>
</tr>
<tr class="even">
<td style="text-align: right;">120000</td>
<td style="text-align: right;">1053</td>
<td style="text-align: right;">12180</td>
<td style="text-align: right;">1938</td>
<td style="text-align: right;">5</td>
<td style="text-align: right;">0</td>
<td style="text-align: right;">NA</td>
<td style="text-align: right;">RL</td>
<td style="text-align: right;">Inside</td>
<td style="text-align: right;">1Fam</td>
</tr>
<tr class="odd">
<td style="text-align: right;">96000</td>
<td style="text-align: right;">1137</td>
<td style="text-align: right;">8050</td>
<td style="text-align: right;">1947</td>
<td style="text-align: right;">5</td>
<td style="text-align: right;">0</td>
<td style="text-align: right;">NA</td>
<td style="text-align: right;">RL</td>
<td style="text-align: right;">Inside</td>
<td style="text-align: right;">1Fam</td>
</tr>
<tr class="even">
<td style="text-align: right;">98000</td>
<td style="text-align: right;">864</td>
<td style="text-align: right;">5604</td>
<td style="text-align: right;">1925</td>
<td style="text-align: right;">5</td>
<td style="text-align: right;">0</td>
<td style="text-align: right;">NA</td>
<td style="text-align: right;">RL</td>
<td style="text-align: right;">Inside</td>
<td style="text-align: right;">1Fam</td>
</tr>
<tr class="odd">
<td style="text-align: right;">67000</td>
<td style="text-align: right;">864</td>
<td style="text-align: right;">8248</td>
<td style="text-align: right;">1914</td>
<td style="text-align: right;">3</td>
<td style="text-align: right;">0</td>
<td style="text-align: right;">NA</td>
<td style="text-align: right;">RL</td>
<td style="text-align: right;">Inside</td>
<td style="text-align: right;">1Fam</td>
</tr>
<tr class="even">
<td style="text-align: right;">135900</td>
<td style="text-align: right;">1716</td>
<td style="text-align: right;">5687</td>
<td style="text-align: right;">1912</td>
<td style="text-align: right;">5</td>
<td style="text-align: right;">0</td>
<td style="text-align: right;">NA</td>
<td style="text-align: right;">RL</td>
<td style="text-align: right;">Inside</td>
<td style="text-align: right;">2fmCon</td>
</tr>
<tr class="odd">
<td style="text-align: right;">119000</td>
<td style="text-align: right;">1200</td>
<td style="text-align: right;">8155</td>
<td style="text-align: right;">1930</td>
<td style="text-align: right;">5</td>
<td style="text-align: right;">0</td>
<td style="text-align: right;">NA</td>
<td style="text-align: right;">RM</td>
<td style="text-align: right;">Inside</td>
<td style="text-align: right;">1Fam</td>
</tr>
<tr class="even">
<td style="text-align: right;">81000</td>
<td style="text-align: right;">630</td>
<td style="text-align: right;">1890</td>
<td style="text-align: right;">1972</td>
<td style="text-align: right;">4</td>
<td style="text-align: right;">0</td>
<td style="text-align: right;">NA</td>
<td style="text-align: right;">RM</td>
<td style="text-align: right;">Inside</td>
<td style="text-align: right;">Twnhs</td>
</tr>
<tr class="odd">
<td style="text-align: right;">146000</td>
<td style="text-align: right;">1100</td>
<td style="text-align: right;">7500</td>
<td style="text-align: right;">2006</td>
<td style="text-align: right;">6</td>
<td style="text-align: right;">0</td>
<td style="text-align: right;">NA</td>
<td style="text-align: right;">RL</td>
<td style="text-align: right;">Inside</td>
<td style="text-align: right;">1Fam</td>
</tr>
<tr class="even">
<td style="text-align: right;">64000</td>
<td style="text-align: right;">670</td>
<td style="text-align: right;">3500</td>
<td style="text-align: right;">1945</td>
<td style="text-align: right;">3</td>
<td style="text-align: right;">0</td>
<td style="text-align: right;">NA</td>
<td style="text-align: right;">RL</td>
<td style="text-align: right;">Inside</td>
<td style="text-align: right;">1Fam</td>
</tr>
<tr class="odd">
<td style="text-align: right;">103200</td>
<td style="text-align: right;">882</td>
<td style="text-align: right;">5500</td>
<td style="text-align: right;">1956</td>
<td style="text-align: right;">4</td>
<td style="text-align: right;">0</td>
<td style="text-align: right;">NA</td>
<td style="text-align: right;">RL</td>
<td style="text-align: right;">Inside</td>
<td style="text-align: right;">1Fam</td>
</tr>
<tr class="even">
<td style="text-align: right;">148000</td>
<td style="text-align: right;">1534</td>
<td style="text-align: right;">10800</td>
<td style="text-align: right;">1895</td>
<td style="text-align: right;">5</td>
<td style="text-align: right;">0</td>
<td style="text-align: right;">NA</td>
<td style="text-align: right;">RL</td>
<td style="text-align: right;">Inside</td>
<td style="text-align: right;">1Fam</td>
</tr>
<tr class="odd">
<td style="text-align: right;">110500</td>
<td style="text-align: right;">866</td>
<td style="text-align: right;">3880</td>
<td style="text-align: right;">1945</td>
<td style="text-align: right;">5</td>
<td style="text-align: right;">0</td>
<td style="text-align: right;">NA</td>
<td style="text-align: right;">RM</td>
<td style="text-align: right;">Inside</td>
<td style="text-align: right;">1Fam</td>
</tr>
<tr class="even">
<td style="text-align: right;">127000</td>
<td style="text-align: right;">1355</td>
<td style="text-align: right;">6882</td>
<td style="text-align: right;">1914</td>
<td style="text-align: right;">6</td>
<td style="text-align: right;">0</td>
<td style="text-align: right;">NA</td>
<td style="text-align: right;">RM</td>
<td style="text-align: right;">Inside</td>
<td style="text-align: right;">1Fam</td>
</tr>
<tr class="odd">
<td style="text-align: right;">200500</td>
<td style="text-align: right;">3086</td>
<td style="text-align: right;">18030</td>
<td style="text-align: right;">1946</td>
<td style="text-align: right;">5</td>
<td style="text-align: right;">0</td>
<td style="text-align: right;">NA</td>
<td style="text-align: right;">RL</td>
<td style="text-align: right;">Inside</td>
<td style="text-align: right;">1Fam</td>
</tr>
<tr class="even">
<td style="text-align: right;">150000</td>
<td style="text-align: right;">1440</td>
<td style="text-align: right;">7711</td>
<td style="text-align: right;">1977</td>
<td style="text-align: right;">4</td>
<td style="text-align: right;">0</td>
<td style="text-align: right;">NA</td>
<td style="text-align: right;">RL</td>
<td style="text-align: right;">Inside</td>
<td style="text-align: right;">Duplex</td>
</tr>
<tr class="odd">
<td style="text-align: right;">86000</td>
<td style="text-align: right;">605</td>
<td style="text-align: right;">9098</td>
<td style="text-align: right;">1920</td>
<td style="text-align: right;">4</td>
<td style="text-align: right;">0</td>
<td style="text-align: right;">NA</td>
<td style="text-align: right;">RL</td>
<td style="text-align: right;">Inside</td>
<td style="text-align: right;">1Fam</td>
</tr>
<tr class="even">
<td style="text-align: right;">123600</td>
<td style="text-align: right;">990</td>
<td style="text-align: right;">8070</td>
<td style="text-align: right;">1994</td>
<td style="text-align: right;">4</td>
<td style="text-align: right;">0</td>
<td style="text-align: right;">NA</td>
<td style="text-align: right;">RL</td>
<td style="text-align: right;">Inside</td>
<td style="text-align: right;">1Fam</td>
</tr>
<tr class="odd">
<td style="text-align: right;">98500</td>
<td style="text-align: right;">1195</td>
<td style="text-align: right;">8741</td>
<td style="text-align: right;">1946</td>
<td style="text-align: right;">5</td>
<td style="text-align: right;">0</td>
<td style="text-align: right;">NA</td>
<td style="text-align: right;">RL</td>
<td style="text-align: right;">Inside</td>
<td style="text-align: right;">Duplex</td>
</tr>
<tr class="even">
<td style="text-align: right;">79000</td>
<td style="text-align: right;">774</td>
<td style="text-align: right;">4270</td>
<td style="text-align: right;">1931</td>
<td style="text-align: right;">3</td>
<td style="text-align: right;">0</td>
<td style="text-align: right;">NA</td>
<td style="text-align: right;">RH</td>
<td style="text-align: right;">Inside</td>
<td style="text-align: right;">1Fam</td>
</tr>
<tr class="odd">
<td style="text-align: right;">200000</td>
<td style="text-align: right;">3395</td>
<td style="text-align: right;">10896</td>
<td style="text-align: right;">1914</td>
<td style="text-align: right;">6</td>
<td style="text-align: right;">0</td>
<td style="text-align: right;">NA</td>
<td style="text-align: right;">RH</td>
<td style="text-align: right;">Inside</td>
<td style="text-align: right;">2fmCon</td>
</tr>
<tr class="even">
<td style="text-align: right;">150000</td>
<td style="text-align: right;">2592</td>
<td style="text-align: right;">10890</td>
<td style="text-align: right;">1923</td>
<td style="text-align: right;">5</td>
<td style="text-align: right;">0</td>
<td style="text-align: right;">NA</td>
<td style="text-align: right;">RL</td>
<td style="text-align: right;">Inside</td>
<td style="text-align: right;">Duplex</td>
</tr>
<tr class="odd">
<td style="text-align: right;">115000</td>
<td style="text-align: right;">1517</td>
<td style="text-align: right;">8500</td>
<td style="text-align: right;">1919</td>
<td style="text-align: right;">5</td>
<td style="text-align: right;">0</td>
<td style="text-align: right;">NA</td>
<td style="text-align: right;">RM</td>
<td style="text-align: right;">Corner</td>
<td style="text-align: right;">1Fam</td>
</tr>
<tr class="even">
<td style="text-align: right;">150909</td>
<td style="text-align: right;">1828</td>
<td style="text-align: right;">9060</td>
<td style="text-align: right;">1923</td>
<td style="text-align: right;">5</td>
<td style="text-align: right;">NA</td>
<td style="text-align: right;">NA</td>
<td style="text-align: right;">RM</td>
<td style="text-align: right;">Inside</td>
<td style="text-align: right;">1Fam</td>
</tr>
<tr class="odd">
<td style="text-align: right;">119600</td>
<td style="text-align: right;">1991</td>
<td style="text-align: right;">8250</td>
<td style="text-align: right;">1895</td>
<td style="text-align: right;">5</td>
<td style="text-align: right;">0</td>
<td style="text-align: right;">NA</td>
<td style="text-align: right;">C (all)</td>
<td style="text-align: right;">Inside</td>
<td style="text-align: right;">2fmCon</td>
</tr>
<tr class="even">
<td style="text-align: right;">147000</td>
<td style="text-align: right;">1120</td>
<td style="text-align: right;">8402</td>
<td style="text-align: right;">2007</td>
<td style="text-align: right;">5</td>
<td style="text-align: right;">0</td>
<td style="text-align: right;">NA</td>
<td style="text-align: right;">RL</td>
<td style="text-align: right;">Inside</td>
<td style="text-align: right;">1Fam</td>
</tr>
<tr class="odd">
<td style="text-align: right;">93900</td>
<td style="text-align: right;">1092</td>
<td style="text-align: right;">1495</td>
<td style="text-align: right;">1970</td>
<td style="text-align: right;">4</td>
<td style="text-align: right;">0</td>
<td style="text-align: right;">NA</td>
<td style="text-align: right;">RM</td>
<td style="text-align: right;">Inside</td>
<td style="text-align: right;">TwnhsE</td>
</tr>
<tr class="even">
<td style="text-align: right;">84500</td>
<td style="text-align: right;">630</td>
<td style="text-align: right;">1936</td>
<td style="text-align: right;">1970</td>
<td style="text-align: right;">4</td>
<td style="text-align: right;">0</td>
<td style="text-align: right;">NA</td>
<td style="text-align: right;">RM</td>
<td style="text-align: right;">Inside</td>
<td style="text-align: right;">Twnhs</td>
</tr>
<tr class="odd">
<td style="text-align: right;">139500</td>
<td style="text-align: right;">1142</td>
<td style="text-align: right;">7733</td>
<td style="text-align: right;">2005</td>
<td style="text-align: right;">6</td>
<td style="text-align: right;">0</td>
<td style="text-align: right;">NA</td>
<td style="text-align: right;">RL</td>
<td style="text-align: right;">Inside</td>
<td style="text-align: right;">1Fam</td>
</tr>
<tr class="even">
<td style="text-align: right;">132000</td>
<td style="text-align: right;">1131</td>
<td style="text-align: right;">13072</td>
<td style="text-align: right;">2005</td>
<td style="text-align: right;">6</td>
<td style="text-align: right;">0</td>
<td style="text-align: right;">NA</td>
<td style="text-align: right;">RL</td>
<td style="text-align: right;">Inside</td>
<td style="text-align: right;">1Fam</td>
</tr>
<tr class="odd">
<td style="text-align: right;">85500</td>
<td style="text-align: right;">869</td>
<td style="text-align: right;">5900</td>
<td style="text-align: right;">1923</td>
<td style="text-align: right;">4</td>
<td style="text-align: right;">0</td>
<td style="text-align: right;">NA</td>
<td style="text-align: right;">RL</td>
<td style="text-align: right;">Inside</td>
<td style="text-align: right;">1Fam</td>
</tr>
<tr class="even">
<td style="text-align: right;">135000</td>
<td style="text-align: right;">1192</td>
<td style="text-align: right;">10800</td>
<td style="text-align: right;">1949</td>
<td style="text-align: right;">4</td>
<td style="text-align: right;">0</td>
<td style="text-align: right;">NA</td>
<td style="text-align: right;">RL</td>
<td style="text-align: right;">Inside</td>
<td style="text-align: right;">1Fam</td>
</tr>
<tr class="odd">
<td style="text-align: right;">119000</td>
<td style="text-align: right;">1556</td>
<td style="text-align: right;">8512</td>
<td style="text-align: right;">1960</td>
<td style="text-align: right;">5</td>
<td style="text-align: right;">0</td>
<td style="text-align: right;">NA</td>
<td style="text-align: right;">RL</td>
<td style="text-align: right;">Corner</td>
<td style="text-align: right;">Duplex</td>
</tr>
<tr class="even">
<td style="text-align: right;">124000</td>
<td style="text-align: right;">1025</td>
<td style="text-align: right;">7000</td>
<td style="text-align: right;">1962</td>
<td style="text-align: right;">5</td>
<td style="text-align: right;">0</td>
<td style="text-align: right;">NA</td>
<td style="text-align: right;">RL</td>
<td style="text-align: right;">Inside</td>
<td style="text-align: right;">2fmCon</td>
</tr>
<tr class="odd">
<td style="text-align: right;">64500</td>
<td style="text-align: right;">1020</td>
<td style="text-align: right;">4761</td>
<td style="text-align: right;">1918</td>
<td style="text-align: right;">3</td>
<td style="text-align: right;">0</td>
<td style="text-align: right;">NA</td>
<td style="text-align: right;">C (all)</td>
<td style="text-align: right;">Corner</td>
<td style="text-align: right;">1Fam</td>
</tr>
<tr class="even">
<td style="text-align: right;">100000</td>
<td style="text-align: right;">788</td>
<td style="text-align: right;">7446</td>
<td style="text-align: right;">1941</td>
<td style="text-align: right;">4</td>
<td style="text-align: right;">0</td>
<td style="text-align: right;">NA</td>
<td style="text-align: right;">RL</td>
<td style="text-align: right;">Corner</td>
<td style="text-align: right;">1Fam</td>
</tr>
<tr class="odd">
<td style="text-align: right;">80500</td>
<td style="text-align: right;">912</td>
<td style="text-align: right;">6240</td>
<td style="text-align: right;">1947</td>
<td style="text-align: right;">4</td>
<td style="text-align: right;">0</td>
<td style="text-align: right;">NA</td>
<td style="text-align: right;">RM</td>
<td style="text-align: right;">Inside</td>
<td style="text-align: right;">1Fam</td>
</tr>
<tr class="even">
<td style="text-align: right;">72000</td>
<td style="text-align: right;">819</td>
<td style="text-align: right;">9000</td>
<td style="text-align: right;">1919</td>
<td style="text-align: right;">5</td>
<td style="text-align: right;">0</td>
<td style="text-align: right;">NA</td>
<td style="text-align: right;">RM</td>
<td style="text-align: right;">Inside</td>
<td style="text-align: right;">1Fam</td>
</tr>
<tr class="odd">
<td style="text-align: right;">117250</td>
<td style="text-align: right;">914</td>
<td style="text-align: right;">8050</td>
<td style="text-align: right;">2002</td>
<td style="text-align: right;">6</td>
<td style="text-align: right;">0</td>
<td style="text-align: right;">NA</td>
<td style="text-align: right;">RL</td>
<td style="text-align: right;">Inside</td>
<td style="text-align: right;">1Fam</td>
</tr>
<tr class="even">
<td style="text-align: right;">81000</td>
<td style="text-align: right;">1184</td>
<td style="text-align: right;">8410</td>
<td style="text-align: right;">1910</td>
<td style="text-align: right;">5</td>
<td style="text-align: right;">0</td>
<td style="text-align: right;">NA</td>
<td style="text-align: right;">RL</td>
<td style="text-align: right;">FR2</td>
<td style="text-align: right;">1Fam</td>
</tr>
<tr class="odd">
<td style="text-align: right;">83000</td>
<td style="text-align: right;">1414</td>
<td style="text-align: right;">8248</td>
<td style="text-align: right;">1922</td>
<td style="text-align: right;">4</td>
<td style="text-align: right;">0</td>
<td style="text-align: right;">NA</td>
<td style="text-align: right;">RL</td>
<td style="text-align: right;">Inside</td>
<td style="text-align: right;">1Fam</td>
</tr>
<tr class="even">
<td style="text-align: right;">102000</td>
<td style="text-align: right;">1522</td>
<td style="text-align: right;">6000</td>
<td style="text-align: right;">1926</td>
<td style="text-align: right;">5</td>
<td style="text-align: right;">0</td>
<td style="text-align: right;">NA</td>
<td style="text-align: right;">RL</td>
<td style="text-align: right;">Inside</td>
<td style="text-align: right;">1Fam</td>
</tr>
<tr class="odd">
<td style="text-align: right;">72000</td>
<td style="text-align: right;">672</td>
<td style="text-align: right;">8534</td>
<td style="text-align: right;">1925</td>
<td style="text-align: right;">4</td>
<td style="text-align: right;">0</td>
<td style="text-align: right;">NA</td>
<td style="text-align: right;">RM</td>
<td style="text-align: right;">Inside</td>
<td style="text-align: right;">1Fam</td>
</tr>
<tr class="even">
<td style="text-align: right;">115000</td>
<td style="text-align: right;">1396</td>
<td style="text-align: right;">9000</td>
<td style="text-align: right;">1951</td>
<td style="text-align: right;">5</td>
<td style="text-align: right;">0</td>
<td style="text-align: right;">NA</td>
<td style="text-align: right;">C (all)</td>
<td style="text-align: right;">Inside</td>
<td style="text-align: right;">2fmCon</td>
</tr>
<tr class="odd">
<td style="text-align: right;">78000</td>
<td style="text-align: right;">936</td>
<td style="text-align: right;">8520</td>
<td style="text-align: right;">1916</td>
<td style="text-align: right;">3</td>
<td style="text-align: right;">0</td>
<td style="text-align: right;">NA</td>
<td style="text-align: right;">C (all)</td>
<td style="text-align: right;">Inside</td>
<td style="text-align: right;">1Fam</td>
</tr>
<tr class="even">
<td style="text-align: right;">92000</td>
<td style="text-align: right;">630</td>
<td style="text-align: right;">1533</td>
<td style="text-align: right;">1970</td>
<td style="text-align: right;">5</td>
<td style="text-align: right;">0</td>
<td style="text-align: right;">NA</td>
<td style="text-align: right;">RM</td>
<td style="text-align: right;">Inside</td>
<td style="text-align: right;">Twnhs</td>
</tr>
<tr class="odd">
<td style="text-align: right;">90500</td>
<td style="text-align: right;">1092</td>
<td style="text-align: right;">1936</td>
<td style="text-align: right;">1970</td>
<td style="text-align: right;">4</td>
<td style="text-align: right;">0</td>
<td style="text-align: right;">NA</td>
<td style="text-align: right;">RM</td>
<td style="text-align: right;">Inside</td>
<td style="text-align: right;">Twnhs</td>
</tr>
</tbody>
</table>
</div>

</div>
</div>
<hr>
<p><strong>Coding sidebar:</strong></p>
<ul>
<li>In the above example, we created a function (<code>print_kbl()</code>) from scratch (rather than using a function factory)</li>
<li>See <a href="https://r4ds.hadley.nz/functions.html">functions chapter</a> in <span class="citation" data-cites="RDS">Wickham, Çetinkaya-Rundel, and Grolemund (<a href="#ref-RDS" role="doc-biblioref">2023</a>)</span> for help.</li>
<li>See <a href="https://adv-r.hadley.nz/functionals.html">functionals chapter</a> in <span class="citation" data-cites="AR">Wickham (<a href="#ref-AR" role="doc-biblioref">2019</a>)</span>.</li>
</ul>
<hr>
<p>In this instance, if we consult our <a href="data/ames_data_dictionary.pdf">data dictionary</a>, we see that <code>NA</code> for <code>garage_qual</code> should be coded as “no garage”. We will correct this in our data set.</p>
<p>This is a pretty poor choice on the part of the researchers who created the dataset because it becomes impossible to distinguish between <code>NA</code> that means no garage vs.&nbsp;true NA for the variable. In fact, if you later do really careful EDA on the full data set with all variables, you will see this problem likely exists in this dataset</p>
<p>Anyway, let’s correct all the <code>NA</code> for <code>garage_qual</code> to “no_garage” using <code>mutate()</code></p>
<div class="cell">
<div class="sourceCode cell-code" id="annotated-cell-22"><pre class="sourceCode r code-annotation-code code-with-copy code-annotated"><code class="sourceCode r"><span id="annotated-cell-22-1"><a href="#annotated-cell-22-1" aria-hidden="true" tabindex="-1"></a>data_all <span class="ot">&lt;-</span> data_all <span class="sc">|&gt;</span> </span>
<a class="code-annotation-anchor" data-target-cell="annotated-cell-22" data-target-annotation="1" onclick="event.preventDefault();">1</a><span id="annotated-cell-22-2" class="code-annotation-target"><a href="#annotated-cell-22-2" aria-hidden="true" tabindex="-1"></a>  <span class="fu">mutate</span>(<span class="at">garage_qual =</span> <span class="fu">fct_expand</span>(garage_qual, <span class="st">"no_garage"</span>),</span>
<a class="code-annotation-anchor" data-target-cell="annotated-cell-22" data-target-annotation="2" onclick="event.preventDefault();">2</a><span id="annotated-cell-22-3" class="code-annotation-target"><a href="#annotated-cell-22-3" aria-hidden="true" tabindex="-1"></a>         <span class="at">garage_qual =</span> <span class="fu">replace_na</span>(garage_qual, <span class="st">"no_garage"</span>))</span><div class="code-annotation-gutter-bg"></div><div class="code-annotation-gutter"></div></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
<div class="cell-annotation">
<dl class="code-annotation-container-grid">
<dt data-target-cell="annotated-cell-22" data-target-annotation="1">1</dt>
<dd>
<span data-code-annotation="1" data-code-lines="2" data-code-cell="annotated-cell-22">First add a new level to the factor</span>
</dd>
<dt data-target-cell="annotated-cell-22" data-target-annotation="2">2</dt>
<dd>
<span data-code-annotation="2" data-code-lines="3" data-code-cell="annotated-cell-22">Then recode NA to that new level</span>
</dd>
</dl>
</div>
</div>
<p>We will leave the <code>NA</code> for <code>garage_cars</code> as <code>NA</code> because its not clear if that is truly missing or not, based on further EDA not shown here.</p>
<hr>
<p>We have one other issue with <code>garage_qual</code>. It is an ordinal variable but we never reviewed the order of its levels. The data dictionary indicates the levels are ordered (best to worst) as:</p>
<ul>
<li>Ex (excellent)</li>
<li>Gd (good)</li>
<li>TA (typical/average)</li>
<li>Fa (fair)</li>
<li>Po (poor)</li>
</ul>
<p>And we might assume that no garage is even worse than a poor garage. Lets see what they are.</p>
<div class="cell">
<div class="sourceCode cell-code" id="cb31"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb31-1"><a href="#cb31-1" aria-hidden="true" tabindex="-1"></a>data_all<span class="sc">$</span>garage_qual <span class="sc">|&gt;</span> <span class="fu">levels</span>()</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
<div class="cell-output cell-output-stdout">
<pre><code>[1] "Ex"        "Fa"        "Gd"        "Po"        "TA"        "no_garage"</code></pre>
</div>
</div>
<p>To fix this, we can use <code>forcats::fct_relevel()</code>.</p>
<div class="cell">
<div class="sourceCode cell-code" id="annotated-cell-24"><pre class="sourceCode r code-annotation-code code-with-copy code-annotated"><code class="sourceCode r"><a class="code-annotation-anchor" data-target-cell="annotated-cell-24" data-target-annotation="1" onclick="event.preventDefault();">1</a><span id="annotated-cell-24-1" class="code-annotation-target"><a href="#annotated-cell-24-1" aria-hidden="true" tabindex="-1"></a>gq_levels <span class="ot">&lt;-</span> <span class="fu">c</span>(<span class="st">"no_garage"</span>, <span class="st">"Po"</span>, <span class="st">"Fa"</span>, <span class="st">"TA"</span>, <span class="st">"Gd"</span>, <span class="st">"Ex"</span>)</span>
<span id="annotated-cell-24-2"><a href="#annotated-cell-24-2" aria-hidden="true" tabindex="-1"></a>data_all <span class="ot">&lt;-</span> data_all <span class="sc">|&gt;</span> </span>
<a class="code-annotation-anchor" data-target-cell="annotated-cell-24" data-target-annotation="2" onclick="event.preventDefault();">2</a><span id="annotated-cell-24-3" class="code-annotation-target"><a href="#annotated-cell-24-3" aria-hidden="true" tabindex="-1"></a>  <span class="fu">mutate</span>(<span class="at">garage_qual =</span> <span class="fu">fct_relevel</span>(garage_qual, gq_levels))</span>
<span id="annotated-cell-24-4"><a href="#annotated-cell-24-4" aria-hidden="true" tabindex="-1"></a></span>
<a class="code-annotation-anchor" data-target-cell="annotated-cell-24" data-target-annotation="3" onclick="event.preventDefault();">3</a><span id="annotated-cell-24-5" class="code-annotation-target"><a href="#annotated-cell-24-5" aria-hidden="true" tabindex="-1"></a>data_all<span class="sc">$</span>garage_qual <span class="sc">|&gt;</span> <span class="fu">levels</span>()</span><div class="code-annotation-gutter-bg"></div><div class="code-annotation-gutter"></div></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
<div class="cell-annotation">
<dl class="code-annotation-container-grid">
<dt data-target-cell="annotated-cell-24" data-target-annotation="1">1</dt>
<dd>
<span data-code-annotation="1" data-code-lines="1" data-code-cell="annotated-cell-24">Make a vector that indicates the valid levels in order</span>
</dd>
<dt data-target-cell="annotated-cell-24" data-target-annotation="2">2</dt>
<dd>
<span data-code-annotation="2" data-code-lines="3" data-code-cell="annotated-cell-24">Pass that into <code>fct_relevel()</code>. See <code>?fct_relevel</code> for other ways to adjust the levels of a factor.</span>
</dd>
<dt data-target-cell="annotated-cell-24" data-target-annotation="3">3</dt>
<dd>
<span data-code-annotation="3" data-code-lines="5" data-code-cell="annotated-cell-24">Confirm that the levels are now correct</span>
</dd>
</dl>
</div>
<div class="cell-output cell-output-stdout">
<pre><code>[1] "no_garage" "Po"        "Fa"        "TA"        "Gd"        "Ex"       </code></pre>
</div>
</div>
</section>
<section id="explore-minmax-response-for-numeric-variables" class="level3" data-number="2.3.6">
<h3 data-number="2.3.6" class="anchored" data-anchor-id="explore-minmax-response-for-numeric-variables"><span class="header-section-number">2.3.6</span> Explore Min/Max Response for Numeric Variables</h3>
<p>We should explore mins and maxes for all numeric variables to detect out of valid range numeric responses</p>
<p>Could also do this for ordinal variables that are coded with numbers</p>
<ul>
<li>e.g., <code>overall_qual</code> (1-10) vs.&nbsp;<code>garage_qual</code> (no_garage, Po, Fa, TA, Gd, Ex)</li>
<li>This is only a temporary mutation of <code>overall_qual</code> for this check</li>
</ul>
<p>We can use <code>skim_some()</code> again</p>
<ul>
<li>p0 = min</li>
<li>p100 = max</li>
</ul>
<div class="cell">
<div class="sourceCode cell-code" id="cb34"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb34-1"><a href="#cb34-1" aria-hidden="true" tabindex="-1"></a>data_all <span class="sc">|&gt;</span></span>
<span id="cb34-2"><a href="#cb34-2" aria-hidden="true" tabindex="-1"></a>  <span class="fu">mutate</span>(<span class="at">overall_qual =</span> <span class="fu">as.numeric</span>(overall_qual)) <span class="sc">|&gt;</span> </span>
<span id="cb34-3"><a href="#cb34-3" aria-hidden="true" tabindex="-1"></a>  <span class="fu">skim_some</span>()</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
<div class="cell-output-display">

<table style="width: auto;" class="table table-condensed">
<caption>
Data summary
</caption>
<tbody>
<tr>
<td style="text-align:left;">
Name
</td>
<td style="text-align:left;">
mutate(data_all, overall_…
</td>
</tr>
<tr>
<td style="text-align:left;">
Number of rows
</td>
<td style="text-align:left;">
1955
</td>
</tr>
<tr>
<td style="text-align:left;">
Number of columns
</td>
<td style="text-align:left;">
10
</td>
</tr>
<tr>
<td style="text-align:left;">
_______________________
</td>
<td style="text-align:left;">
</td>
</tr>
<tr>
<td style="text-align:left;">
Column type frequency:
</td>
<td style="text-align:left;">
</td>
</tr>
<tr>
<td style="text-align:left;">
factor
</td>
<td style="text-align:left;">
4
</td>
</tr>
<tr>
<td style="text-align:left;">
numeric
</td>
<td style="text-align:left;">
6
</td>
</tr>
<tr>
<td style="text-align:left;">
________________________
</td>
<td style="text-align:left;">
</td>
</tr>
<tr>
<td style="text-align:left;">
Group variables
</td>
<td style="text-align:left;">
None
</td>
</tr>
</tbody>

</table>
<p><strong>Variable type: factor</strong></p>

<table>
<thead>
<tr>
<th style="text-align:left;">
skim_variable
</th>
<th style="text-align:right;">
n_missing
</th>
<th style="text-align:right;">
complete_rate
</th>
<th style="text-align:left;">
ordered
</th>
<th style="text-align:right;">
n_unique
</th>
<th style="text-align:left;">
top_counts
</th>
</tr>
</thead>
<tbody>
<tr>
<td style="text-align:left;">
garage_qual
</td>
<td style="text-align:right;">
0
</td>
<td style="text-align:right;">
1
</td>
<td style="text-align:left;">
FALSE
</td>
<td style="text-align:right;">
6
</td>
<td style="text-align:left;">
TA: 1745, no_: 109, Fa: 79, Gd: 16
</td>
</tr>
<tr>
<td style="text-align:left;">
ms_zoning
</td>
<td style="text-align:right;">
0
</td>
<td style="text-align:right;">
1
</td>
<td style="text-align:left;">
FALSE
</td>
<td style="text-align:right;">
7
</td>
<td style="text-align:left;">
RL: 1530, RM: 297, FV: 91, C (: 19
</td>
</tr>
<tr>
<td style="text-align:left;">
lot_config
</td>
<td style="text-align:right;">
0
</td>
<td style="text-align:right;">
1
</td>
<td style="text-align:left;">
FALSE
</td>
<td style="text-align:right;">
5
</td>
<td style="text-align:left;">
Ins: 1454, Cor: 328, Cul: 114, FR2: 55
</td>
</tr>
<tr>
<td style="text-align:left;">
bldg_type
</td>
<td style="text-align:right;">
0
</td>
<td style="text-align:right;">
1
</td>
<td style="text-align:left;">
FALSE
</td>
<td style="text-align:right;">
5
</td>
<td style="text-align:left;">
1Fa: 1631, Twn: 145, Dup: 77, Twn: 64
</td>
</tr>
</tbody>

</table>
<p><strong>Variable type: numeric</strong></p>

<table>
<thead>
<tr>
<th style="text-align:left;">
skim_variable
</th>
<th style="text-align:right;">
n_missing
</th>
<th style="text-align:right;">
complete_rate
</th>
<th style="text-align:right;">
p0
</th>
<th style="text-align:right;">
p100
</th>
</tr>
</thead>
<tbody>
<tr>
<td style="text-align:left;">
sale_price
</td>
<td style="text-align:right;">
0
</td>
<td style="text-align:right;">
1
</td>
<td style="text-align:right;">
12789
</td>
<td style="text-align:right;">
745000
</td>
</tr>
<tr>
<td style="text-align:left;">
gr_liv_area
</td>
<td style="text-align:right;">
0
</td>
<td style="text-align:right;">
1
</td>
<td style="text-align:right;">
438
</td>
<td style="text-align:right;">
5642
</td>
</tr>
<tr>
<td style="text-align:left;">
lot_area
</td>
<td style="text-align:right;">
0
</td>
<td style="text-align:right;">
1
</td>
<td style="text-align:right;">
1476
</td>
<td style="text-align:right;">
215245
</td>
</tr>
<tr>
<td style="text-align:left;">
year_built
</td>
<td style="text-align:right;">
0
</td>
<td style="text-align:right;">
1
</td>
<td style="text-align:right;">
1875
</td>
<td style="text-align:right;">
2010
</td>
</tr>
<tr>
<td style="text-align:left;">
overall_qual
</td>
<td style="text-align:right;">
0
</td>
<td style="text-align:right;">
1
</td>
<td style="text-align:right;">
1
</td>
<td style="text-align:right;">
10
</td>
</tr>
<tr>
<td style="text-align:left;">
garage_cars
</td>
<td style="text-align:right;">
1
</td>
<td style="text-align:right;">
1
</td>
<td style="text-align:right;">
0
</td>
<td style="text-align:right;">
4
</td>
</tr>
</tbody>

</table>
</div>
</div>
</section>
<section id="explore-all-responses-for-categorical-variables" class="level3" data-number="2.3.7">
<h3 data-number="2.3.7" class="anchored" data-anchor-id="explore-all-responses-for-categorical-variables"><span class="header-section-number">2.3.7</span> Explore All Responses for Categorical Variables</h3>
<p>We should explore all unique responses for nominal variables</p>
<p>Might also do this for ordinal variables that are coded with labels vs.&nbsp;numbers.</p>
<div class="cell">
<div class="sourceCode cell-code" id="cb35"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb35-1"><a href="#cb35-1" aria-hidden="true" tabindex="-1"></a>data_all <span class="sc">|&gt;</span> </span>
<span id="cb35-2"><a href="#cb35-2" aria-hidden="true" tabindex="-1"></a>  <span class="fu">select</span>(<span class="fu">where</span>(is.factor)) <span class="sc">|&gt;</span></span>
<span id="cb35-3"><a href="#cb35-3" aria-hidden="true" tabindex="-1"></a>  <span class="fu">walk</span>(\(column) <span class="fu">print</span>(<span class="fu">levels</span>(column)))</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
<div class="cell-output cell-output-stdout">
<pre><code>[1] "no_garage" "Po"        "Fa"        "TA"        "Gd"        "Ex"       
[1] "A (agr)" "C (all)" "FV"      "I (all)" "RH"      "RL"      "RM"     
[1] "Corner"  "CulDSac" "FR2"     "FR3"     "Inside" 
[1] "1Fam"   "2fmCon" "Duplex" "Twnhs"  "TwnhsE"</code></pre>
</div>
</div>
<p><strong>Coding sidebar</strong>:</p>
<ul>
<li>Above, we demonstrate the use of an anonymous function (<code>\(column) print(levels(column))</code>), which is a function we use once that we don’t bother to assign a name (since we won’t reuse it). We often use anonymous functions when using the functions from the <code>purrr</code> package (e.g., <code>map()</code>, <code>walk()</code>)</li>
<li>We use <code>walk()</code> from the <code>purrr</code> package to apply our anonymous function to all columns of the data frame at once</li>
<li>Just copy this code for now</li>
<li>We will see simpler uses later that will help you understand iteration with <code>purrr</code> functions</li>
<li>See the chapter on <a href="https://r4ds.hadley.nz/iteration">iteration</a> in <em>R for Data Science (2e)</em> for more info on <code>map()</code> and <code>walk()</code></li>
</ul>
</section>
<section id="tidy-responses-for-categorical-variables" class="level3" data-number="2.3.8">
<h3 data-number="2.3.8" class="anchored" data-anchor-id="tidy-responses-for-categorical-variables"><span class="header-section-number">2.3.8</span> Tidy Responses for Categorical Variables</h3>
<p>Feature engineering with nominal and ordinal variables typically involves</p>
<ul>
<li>Converting to factors</li>
<li>Often creating dummy features from these factors</li>
</ul>
<p>This feature engineering will use response labels for naming new features</p>
<ul>
<li>Therefore, it is a good idea to have the responses snake-cased and cleaned up a bit so that these new feature names are clean/clear.</li>
</ul>
<p>Here is an easy way to convert responses for character variables to snake case using a function (<code>tidy_responses()</code>) we share in <code>fun_eda.R</code> (reproduced here).</p>
<ul>
<li>This uses regular expressions (regex), which will will learn about in a later unit on text processing.</li>
<li>You could expand this cleaning function if you encounter other issues that need to be cleaned in the factor levels.</li>
</ul>
<div class="cell">
<div class="sourceCode cell-code" id="cb37"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb37-1"><a href="#cb37-1" aria-hidden="true" tabindex="-1"></a>tidy_responses <span class="ot">&lt;-</span> <span class="cf">function</span>(column){</span>
<span id="cb37-2"><a href="#cb37-2" aria-hidden="true" tabindex="-1"></a>  <span class="co"># replace all non-alphanumeric with _</span></span>
<span id="cb37-3"><a href="#cb37-3" aria-hidden="true" tabindex="-1"></a>  column <span class="ot">&lt;-</span> <span class="fu">fct_relabel</span>(column, \(column) <span class="fu">str_replace_all</span>(column, <span class="st">"</span><span class="sc">\\</span><span class="st">W"</span>, <span class="st">"_"</span>))</span>
<span id="cb37-4"><a href="#cb37-4" aria-hidden="true" tabindex="-1"></a>  <span class="co"># replace whitespace with _</span></span>
<span id="cb37-5"><a href="#cb37-5" aria-hidden="true" tabindex="-1"></a>  column <span class="ot">&lt;-</span> <span class="fu">fct_relabel</span>(column, \(column) <span class="fu">str_replace_all</span>(column, <span class="st">"</span><span class="sc">\\</span><span class="st">s+"</span>, <span class="st">"_"</span>))</span>
<span id="cb37-6"><a href="#cb37-6" aria-hidden="true" tabindex="-1"></a>  <span class="co"># replace multiple _ with single _</span></span>
<span id="cb37-7"><a href="#cb37-7" aria-hidden="true" tabindex="-1"></a>  column <span class="ot">&lt;-</span> <span class="fu">fct_relabel</span>(column, \(column) <span class="fu">str_replace_all</span>(column, <span class="st">"</span><span class="sc">\\</span><span class="st">_+"</span>, <span class="st">"_"</span>))</span>
<span id="cb37-8"><a href="#cb37-8" aria-hidden="true" tabindex="-1"></a>  <span class="co">#remove _ at end of string</span></span>
<span id="cb37-9"><a href="#cb37-9" aria-hidden="true" tabindex="-1"></a>  column <span class="ot">&lt;-</span> <span class="fu">fct_relabel</span>(column, \(column) <span class="fu">str_replace_all</span>(column, <span class="st">"</span><span class="sc">\\</span><span class="st">_$"</span>, <span class="st">""</span>))</span>
<span id="cb37-10"><a href="#cb37-10" aria-hidden="true" tabindex="-1"></a>  <span class="co"># remove _ at start of string</span></span>
<span id="cb37-11"><a href="#cb37-11" aria-hidden="true" tabindex="-1"></a>  column <span class="ot">&lt;-</span> <span class="fu">fct_relabel</span>(column, \(column) <span class="fu">str_replace_all</span>(column, <span class="st">"</span><span class="sc">\\</span><span class="st">^_"</span>, <span class="st">""</span>))</span>
<span id="cb37-12"><a href="#cb37-12" aria-hidden="true" tabindex="-1"></a>  <span class="co"># convert to lowercase</span></span>
<span id="cb37-13"><a href="#cb37-13" aria-hidden="true" tabindex="-1"></a>  column <span class="ot">&lt;-</span> <span class="fu">fct_relabel</span>(column, tolower)</span>
<span id="cb37-14"><a href="#cb37-14" aria-hidden="true" tabindex="-1"></a>  <span class="fu">factor</span>(column)</span>
<span id="cb37-15"><a href="#cb37-15" aria-hidden="true" tabindex="-1"></a>}</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
</div>
<p>Let’s use the function</p>
<div class="cell">
<div class="sourceCode cell-code" id="cb38"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb38-1"><a href="#cb38-1" aria-hidden="true" tabindex="-1"></a>data_all <span class="ot">&lt;-</span> data_all <span class="sc">|&gt;</span> </span>
<span id="cb38-2"><a href="#cb38-2" aria-hidden="true" tabindex="-1"></a>  <span class="fu">mutate</span>(<span class="fu">across</span>(<span class="fu">where</span>(is.factor), tidy_responses)) <span class="sc">|&gt;</span> </span>
<span id="cb38-3"><a href="#cb38-3" aria-hidden="true" tabindex="-1"></a>  <span class="fu">glimpse</span>()</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
<div class="cell-output cell-output-stdout">
<pre><code>Rows: 1,955
Columns: 10
$ sale_price   &lt;dbl&gt; 215000, 105000, 172000, 189900, 213500, 191500, 236500, 1…
$ gr_liv_area  &lt;dbl&gt; 1656, 896, 1329, 1629, 1338, 1280, 1616, 1804, 1655, 1465…
$ lot_area     &lt;dbl&gt; 31770, 11622, 14267, 13830, 4920, 5005, 5389, 7500, 10000…
$ year_built   &lt;dbl&gt; 1960, 1961, 1958, 1997, 2001, 1992, 1995, 1999, 1993, 199…
$ overall_qual &lt;dbl&gt; 6, 5, 6, 5, 8, 8, 8, 7, 6, 6, 7, 8, 8, 8, 9, 4, 6, 6, 7, …
$ garage_cars  &lt;dbl&gt; 2, 1, 1, 2, 2, 2, 2, 2, 2, 2, 2, 2, 3, 2, 3, 2, 2, 2, 2, …
$ garage_qual  &lt;fct&gt; ta, ta, ta, ta, ta, ta, ta, ta, ta, ta, ta, ta, ta, ta, t…
$ ms_zoning    &lt;fct&gt; rl, rh, rl, rl, rl, rl, rl, rl, rl, rl, rl, rl, rl, rl, r…
$ lot_config   &lt;fct&gt; corner, inside, corner, inside, inside, inside, inside, i…
$ bldg_type    &lt;fct&gt; 1fam, 1fam, 1fam, 1fam, twnhse, twnhse, twnhse, 1fam, 1fa…</code></pre>
</div>
</div>
<p><strong>Coding sidebar</strong>: See <a href="https://tidyselect.r-lib.org/reference/language.html">more details</a> on the tidy selection helpers like <code>all_of()</code> and <code>where()</code></p>
<hr>
<p>Alas, these response labels were pretty poorly chosen so some didn’t convert well. And some are really hard to understand too.</p>
<ul>
<li>Avoid this problem and choose good response labels from the start for your own data</li>
<li>Here, we show you what we got from using <code>tidy_responses()</code></li>
</ul>
<div class="cell">
<div class="sourceCode cell-code" id="cb40"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb40-1"><a href="#cb40-1" aria-hidden="true" tabindex="-1"></a>data_all <span class="sc">|&gt;</span> </span>
<span id="cb40-2"><a href="#cb40-2" aria-hidden="true" tabindex="-1"></a>  <span class="fu">select</span>(<span class="fu">where</span>(is.factor)) <span class="sc">|&gt;</span></span>
<span id="cb40-3"><a href="#cb40-3" aria-hidden="true" tabindex="-1"></a>  <span class="fu">walk</span>(\(column) <span class="fu">print</span>(<span class="fu">levels</span>(column)))</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
<div class="cell-output cell-output-stdout">
<pre><code>[1] "no_garage" "po"        "fa"        "ta"        "gd"        "ex"       
[1] "a_agr" "c_all" "fv"    "i_all" "rh"    "rl"    "rm"   
[1] "corner"  "culdsac" "fr2"     "fr3"     "inside" 
[1] "1fam"   "2fmcon" "duplex" "twnhs"  "twnhse"</code></pre>
</div>
</div>
<hr>
<p>Lets clean them up a bit more manually</p>
<div class="cell">
<div class="sourceCode cell-code" id="annotated-cell-30"><pre class="sourceCode r code-annotation-code code-with-copy code-annotated"><code class="sourceCode r"><span id="annotated-cell-30-1"><a href="#annotated-cell-30-1" aria-hidden="true" tabindex="-1"></a>data_all <span class="ot">&lt;-</span> data_all <span class="sc">|&gt;</span> </span>
<span id="annotated-cell-30-2"><a href="#annotated-cell-30-2" aria-hidden="true" tabindex="-1"></a>  <span class="fu">mutate</span>(<span class="at">ms_zoning =</span> <span class="fu">fct_recode</span>(ms_zoning,</span>
<span id="annotated-cell-30-3"><a href="#annotated-cell-30-3" aria-hidden="true" tabindex="-1"></a>                                <span class="at">res_low =</span> <span class="st">"rl"</span>,</span>
<span id="annotated-cell-30-4"><a href="#annotated-cell-30-4" aria-hidden="true" tabindex="-1"></a>                                <span class="at">res_med =</span> <span class="st">"rm"</span>,</span>
<span id="annotated-cell-30-5"><a href="#annotated-cell-30-5" aria-hidden="true" tabindex="-1"></a>                                <span class="at">res_high =</span> <span class="st">"rh"</span>,</span>
<span id="annotated-cell-30-6"><a href="#annotated-cell-30-6" aria-hidden="true" tabindex="-1"></a>                                <span class="at">float =</span> <span class="st">"fv"</span>,</span>
<span id="annotated-cell-30-7"><a href="#annotated-cell-30-7" aria-hidden="true" tabindex="-1"></a>                                <span class="at">agri =</span> <span class="st">"a_agr"</span>,</span>
<span id="annotated-cell-30-8"><a href="#annotated-cell-30-8" aria-hidden="true" tabindex="-1"></a>                                <span class="at">indus =</span> <span class="st">"i_all"</span>,</span>
<span id="annotated-cell-30-9"><a href="#annotated-cell-30-9" aria-hidden="true" tabindex="-1"></a>                                <span class="at">commer =</span> <span class="st">"c_all"</span>),</span>
<a class="code-annotation-anchor" data-target-cell="annotated-cell-30" data-target-annotation="1" onclick="event.preventDefault();">1</a><span id="annotated-cell-30-10" class="code-annotation-target"><a href="#annotated-cell-30-10" aria-hidden="true" tabindex="-1"></a>         <span class="at">bldg_type =</span> <span class="fu">fct_recode</span>(bldg_type,</span>
<span id="annotated-cell-30-11"><a href="#annotated-cell-30-11" aria-hidden="true" tabindex="-1"></a>                                <span class="at">one_fam =</span> <span class="st">"1fam"</span>,</span>
<span id="annotated-cell-30-12"><a href="#annotated-cell-30-12" aria-hidden="true" tabindex="-1"></a>                                <span class="at">two_fam =</span> <span class="st">"2fmcon"</span>,</span>
<span id="annotated-cell-30-13"><a href="#annotated-cell-30-13" aria-hidden="true" tabindex="-1"></a>                                <span class="at">town_end =</span> <span class="st">"twnhse"</span>,</span>
<span id="annotated-cell-30-14"><a href="#annotated-cell-30-14" aria-hidden="true" tabindex="-1"></a>                                <span class="at">town_inside =</span> <span class="st">"twnhs"</span>))</span><div class="code-annotation-gutter-bg"></div><div class="code-annotation-gutter"></div></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
<div class="cell-annotation">
<dl class="code-annotation-container-grid">
<dt data-target-cell="annotated-cell-30" data-target-annotation="1">1</dt>
<dd>
<span data-code-annotation="1" data-code-lines="10" data-code-cell="annotated-cell-30">Note that I did not need to list all levels in the recode. Only the levels I wanted to change.</span>
</dd>
</dl>
</div>
</div>
<p>The full dataset is now clean!</p>
</section>
<section id="trainvalidatetest-splits" class="level3" data-number="2.3.9">
<h3 data-number="2.3.9" class="anchored" data-anchor-id="trainvalidatetest-splits"><span class="header-section-number">2.3.9</span> Train/Validate/Test Splits</h3>
<p>The final task we typically do as part of the data preparation process is to split the full dataset into training, validation and test sets.</p>
<ul>
<li>Test sets are “typically” between 20-30% of your full dataset
<ul>
<li>There are costs and benefits to larger test sets</li>
<li>We will learn about these costs/benefits in the unit on resampling</li>
<li>I have already held out the test set</li>
</ul></li>
<li>There are many approaches to validation sets
<ul>
<li>For now (until unit 5) we will use a single validation set approach</li>
<li>We will use 25% of the remaining data (after holding out the test set) as a validation set for this example</li>
</ul></li>
<li>It is typical to split data on the outcome within strata
<ul>
<li>For a categorical outcome, this makes the proportions of the response categories more balanced across the train, validation, and test sets</li>
<li>For a numeric outcome, we first break up the distribution into temporary bins (see <code>breaks = 4</code> below) and then we split within these bins</li>
</ul></li>
<li><strong>IMPORTANT</strong>: Set a seed so that you can reproduce these splits if you later do more cleaning</li>
</ul>
<div class="cell">
<div class="sourceCode cell-code" id="cb42"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb42-1"><a href="#cb42-1" aria-hidden="true" tabindex="-1"></a><span class="fu">set.seed</span>(<span class="dv">20110522</span>)</span>
<span id="cb42-2"><a href="#cb42-2" aria-hidden="true" tabindex="-1"></a>splits <span class="ot">&lt;-</span> data_all <span class="sc">|&gt;</span> </span>
<span id="cb42-3"><a href="#cb42-3" aria-hidden="true" tabindex="-1"></a>  <span class="fu">initial_split</span>(<span class="at">prop =</span> <span class="dv">3</span><span class="sc">/</span><span class="dv">4</span>, <span class="at">strata =</span> <span class="st">"sale_price"</span>, <span class="at">breaks =</span> <span class="dv">4</span>)</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
</div>
<hr>
<p>We then extract the training set from the splits and save it</p>
<ul>
<li>Training sets are used for “analysis”- hence the name of the function</li>
</ul>
<div class="cell">
<div class="sourceCode cell-code" id="annotated-cell-32"><pre class="sourceCode r code-annotation-code code-with-copy code-annotated"><code class="sourceCode r"><span id="annotated-cell-32-1"><a href="#annotated-cell-32-1" aria-hidden="true" tabindex="-1"></a>splits <span class="sc">|&gt;</span> </span>
<a class="code-annotation-anchor" data-target-cell="annotated-cell-32" data-target-annotation="1" onclick="event.preventDefault();">1</a><span id="annotated-cell-32-2" class="code-annotation-target"><a href="#annotated-cell-32-2" aria-hidden="true" tabindex="-1"></a>  <span class="fu">analysis</span>() <span class="sc">|&gt;</span></span>
<span id="annotated-cell-32-3"><a href="#annotated-cell-32-3" aria-hidden="true" tabindex="-1"></a>  <span class="fu">glimpse</span>() <span class="sc">|&gt;</span> </span>
<span id="annotated-cell-32-4"><a href="#annotated-cell-32-4" aria-hidden="true" tabindex="-1"></a>  <span class="fu">write_csv</span>(here<span class="sc">::</span><span class="fu">here</span>(path_data, <span class="st">"ames_clean_class_trn.csv"</span>))</span><div class="code-annotation-gutter-bg"></div><div class="code-annotation-gutter"></div></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
<div class="cell-annotation">
<dl class="code-annotation-container-grid">
<dt data-target-cell="annotated-cell-32" data-target-annotation="1">1</dt>
<dd>
<span data-code-annotation="1" data-code-lines="2" data-code-cell="annotated-cell-32"><code>analysis()</code> pulls out the training set from our split of <code>data_all</code></span>
</dd>
</dl>
</div>
<div class="cell-output cell-output-stdout">
<pre><code>Rows: 1,465
Columns: 10
$ sale_price   &lt;dbl&gt; 105000, 126000, 115000, 120000, 99500, 112000, 122000, 12…
$ gr_liv_area  &lt;dbl&gt; 896, 882, 864, 836, 918, 1902, 900, 1225, 1728, 858, 1306…
$ lot_area     &lt;dbl&gt; 11622, 8400, 10500, 2280, 7892, 8930, 9819, 9320, 13260, …
$ year_built   &lt;dbl&gt; 1961, 1970, 1971, 1975, 1979, 1978, 1967, 1959, 1962, 195…
$ overall_qual &lt;dbl&gt; 5, 4, 4, 7, 6, 6, 5, 4, 5, 5, 3, 5, 4, 5, 3, 5, 2, 6, 5, …
$ garage_cars  &lt;dbl&gt; 1, 2, 0, 1, 1, 2, 1, 0, 0, 0, 0, 1, 2, 2, 1, 1, 2, 2, 1, …
$ garage_qual  &lt;fct&gt; ta, ta, no_garage, ta, ta, ta, ta, no_garage, no_garage, …
$ ms_zoning    &lt;fct&gt; res_high, res_low, res_low, res_low, res_low, res_med, re…
$ lot_config   &lt;fct&gt; inside, corner, fr2, fr2, inside, inside, inside, inside,…
$ bldg_type    &lt;fct&gt; one_fam, one_fam, one_fam, town_inside, town_end, duplex,…</code></pre>
</div>
</div>
<hr>
<p>We will not need the validation set for modeling EDA</p>
<ul>
<li>It should NOT be used for anything other than evaluating models to select the best model configuration</li>
<li>We do NOT do Modeling EDA or Model Fitting with the validation set</li>
<li>Save it in this clean form for easy use when you need it</li>
<li>We use the validation set to “assess” models that we have fit in training sets - hence the name of the function</li>
</ul>
<div class="cell">
<div class="sourceCode cell-code" id="annotated-cell-33"><pre class="sourceCode r code-annotation-code code-with-copy code-annotated"><code class="sourceCode r"><span id="annotated-cell-33-1"><a href="#annotated-cell-33-1" aria-hidden="true" tabindex="-1"></a>splits <span class="sc">|&gt;</span> </span>
<a class="code-annotation-anchor" data-target-cell="annotated-cell-33" data-target-annotation="1" onclick="event.preventDefault();">1</a><span id="annotated-cell-33-2" class="code-annotation-target"><a href="#annotated-cell-33-2" aria-hidden="true" tabindex="-1"></a>  <span class="fu">assessment</span>() <span class="sc">|&gt;</span></span>
<span id="annotated-cell-33-3"><a href="#annotated-cell-33-3" aria-hidden="true" tabindex="-1"></a>  <span class="fu">glimpse</span>() <span class="sc">|&gt;</span> </span>
<span id="annotated-cell-33-4"><a href="#annotated-cell-33-4" aria-hidden="true" tabindex="-1"></a>  <span class="fu">write_csv</span>(here<span class="sc">::</span><span class="fu">here</span>(path_data, <span class="st">"ames_clean_class_val.csv"</span>))</span><div class="code-annotation-gutter-bg"></div><div class="code-annotation-gutter"></div></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
<div class="cell-annotation">
<dl class="code-annotation-container-grid">
<dt data-target-cell="annotated-cell-33" data-target-annotation="1">1</dt>
<dd>
<span data-code-annotation="1" data-code-lines="2" data-code-cell="annotated-cell-33"><code>assessment()</code> pulls out the validation set from our split of <code>data_all</code></span>
</dd>
</dl>
</div>
<div class="cell-output cell-output-stdout">
<pre><code>Rows: 490
Columns: 10
$ sale_price   &lt;dbl&gt; 215000, 189900, 189000, 171500, 212000, 164000, 394432, 1…
$ gr_liv_area  &lt;dbl&gt; 1656, 1629, 1804, 1341, 1502, 1752, 1856, 1004, 1092, 106…
$ lot_area     &lt;dbl&gt; 31770, 13830, 7500, 10176, 6820, 12134, 11394, 11241, 168…
$ year_built   &lt;dbl&gt; 1960, 1997, 1999, 1990, 1985, 1988, 2010, 1970, 1971, 197…
$ overall_qual &lt;dbl&gt; 6, 5, 7, 7, 8, 8, 9, 6, 5, 6, 7, 9, 8, 8, 7, 8, 6, 5, 5, …
$ garage_cars  &lt;dbl&gt; 2, 2, 2, 2, 2, 2, 3, 2, 1, 2, 2, 2, 2, 3, 2, 3, 1, 1, 2, …
$ garage_qual  &lt;fct&gt; ta, ta, ta, ta, ta, ta, ta, ta, ta, ta, ta, ta, ta, ta, t…
$ ms_zoning    &lt;fct&gt; res_low, res_low, res_low, res_low, res_low, res_low, res…
$ lot_config   &lt;fct&gt; corner, inside, inside, inside, corner, inside, corner, c…
$ bldg_type    &lt;fct&gt; one_fam, one_fam, one_fam, one_fam, town_end, one_fam, on…</code></pre>
</div>
</div>
</section>
</section>
<section id="exploratory-data-analysis-for-modeling" class="level2" data-number="2.4">
<h2 data-number="2.4" class="anchored" data-anchor-id="exploratory-data-analysis-for-modeling"><span class="header-section-number">2.4</span> Exploratory Data Analysis for Modeling</h2>
<p>Now let’s begin our Modeling EDA</p>
<p>We prefer to write separate scripts for Cleaning vs, Modeling EDA (but not displayed here)</p>
<ul>
<li>This keeps these two processes separate in our minds</li>
<li>Cleaning EDA is done with full dataset but Modeling EDA is only done with a training set - NEVER use validation or test set</li>
</ul>
<hr>
<p>Lets re-load (and glimpse) our training set to pretend we are at the start of a new script.</p>
<p>Now that we are done cleaning the data, we should start to fully class our variables for how we will use them for modeling EDA and modeling more generally.</p>
<ul>
<li>Numeric predictors are classes as numeric (int or double)</li>
<li>categorical predictors are classed as unordered or ordered factors.</li>
</ul>
<div class="cell">
<div class="sourceCode cell-code" id="cb45"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb45-1"><a href="#cb45-1" aria-hidden="true" tabindex="-1"></a> data_trn <span class="ot">&lt;-</span> <span class="fu">read_csv</span>(here<span class="sc">::</span><span class="fu">here</span>(path_data, <span class="st">"ames_clean_class_trn.csv"</span>)) <span class="sc">|&gt;</span> </span>
<span id="cb45-2"><a href="#cb45-2" aria-hidden="true" tabindex="-1"></a>  <span class="fu">glimpse</span>()</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
<div class="cell-output cell-output-stderr">
<pre><code>Rows: 1465 Columns: 10
── Column specification ────────────────────────────────────────────────────────
Delimiter: ","
chr (4): garage_qual, ms_zoning, lot_config, bldg_type
dbl (6): sale_price, gr_liv_area, lot_area, year_built, overall_qual, garage...

ℹ Use `spec()` to retrieve the full column specification for this data.
ℹ Specify the column types or set `show_col_types = FALSE` to quiet this message.</code></pre>
</div>
<div class="cell-output cell-output-stdout">
<pre><code>Rows: 1,465
Columns: 10
$ sale_price   &lt;dbl&gt; 105000, 126000, 115000, 120000, 99500, 112000, 122000, 12…
$ gr_liv_area  &lt;dbl&gt; 896, 882, 864, 836, 918, 1902, 900, 1225, 1728, 858, 1306…
$ lot_area     &lt;dbl&gt; 11622, 8400, 10500, 2280, 7892, 8930, 9819, 9320, 13260, …
$ year_built   &lt;dbl&gt; 1961, 1970, 1971, 1975, 1979, 1978, 1967, 1959, 1962, 195…
$ overall_qual &lt;dbl&gt; 5, 4, 4, 7, 6, 6, 5, 4, 5, 5, 3, 5, 4, 5, 3, 5, 2, 6, 5, …
$ garage_cars  &lt;dbl&gt; 1, 2, 0, 1, 1, 2, 1, 0, 0, 0, 0, 1, 2, 2, 1, 1, 2, 2, 1, …
$ garage_qual  &lt;chr&gt; "ta", "ta", "no_garage", "ta", "ta", "ta", "ta", "no_gara…
$ ms_zoning    &lt;chr&gt; "res_high", "res_low", "res_low", "res_low", "res_low", "…
$ lot_config   &lt;chr&gt; "inside", "corner", "fr2", "fr2", "inside", "inside", "in…
$ bldg_type    &lt;chr&gt; "one_fam", "one_fam", "one_fam", "town_inside", "town_end…</code></pre>
</div>
</div>
<p>Opps:</p>
<ul>
<li>Notice that <code>overall_qual</code> is back to being classed as numeric (dbl).
<ul>
<li>This is because <code>read_csv()</code> guesses the type for each column and we used only numbers for this ordinal categorical variable.<br>
</li>
</ul></li>
<li>Notice that your factors are back to character
<ul>
<li>This is because csv files don’t save anything other than the values (labels for factors). They are the cleaned labels though!</li>
</ul></li>
<li>You should class all variables using the same approach as before (often just a copy/paste). My preferred way is via mutates</li>
</ul>
<div class="cell">
<div class="sourceCode cell-code" id="annotated-cell-35"><pre class="sourceCode r code-annotation-code code-with-copy code-annotated"><code class="sourceCode r"><span id="annotated-cell-35-1"><a href="#annotated-cell-35-1" aria-hidden="true" tabindex="-1"></a> data_trn <span class="ot">&lt;-</span> </span>
<span id="annotated-cell-35-2"><a href="#annotated-cell-35-2" aria-hidden="true" tabindex="-1"></a>  <span class="fu">read_csv</span>(here<span class="sc">::</span><span class="fu">here</span>(path_data, <span class="st">"ames_clean_class_trn.csv"</span>), </span>
<a class="code-annotation-anchor" data-target-cell="annotated-cell-35" data-target-annotation="1" onclick="event.preventDefault();">1</a><span id="annotated-cell-35-3" class="code-annotation-target"><a href="#annotated-cell-35-3" aria-hidden="true" tabindex="-1"></a>           <span class="at">col_types =</span> <span class="fu">cols</span>()) <span class="sc">|&gt;</span></span>
<a class="code-annotation-anchor" data-target-cell="annotated-cell-35" data-target-annotation="2" onclick="event.preventDefault();">2</a><span id="annotated-cell-35-4" class="code-annotation-target"><a href="#annotated-cell-35-4" aria-hidden="true" tabindex="-1"></a>  <span class="fu">mutate</span>(<span class="fu">across</span>(<span class="fu">where</span>(is.character), factor)) <span class="sc">|&gt;</span></span>
<a class="code-annotation-anchor" data-target-cell="annotated-cell-35" data-target-annotation="3" onclick="event.preventDefault();">3</a><span id="annotated-cell-35-5" class="code-annotation-target"><a href="#annotated-cell-35-5" aria-hidden="true" tabindex="-1"></a>  <span class="fu">mutate</span>(<span class="at">overall_qual =</span> <span class="fu">factor</span>(overall_qual),</span>
<a class="code-annotation-anchor" data-target-cell="annotated-cell-35" data-target-annotation="4" onclick="event.preventDefault();">4</a><span id="annotated-cell-35-6" class="code-annotation-target"><a href="#annotated-cell-35-6" aria-hidden="true" tabindex="-1"></a>         <span class="at">overall_qual =</span> <span class="fu">fct_relevel</span>(overall_qual, <span class="fu">as.character</span>(<span class="dv">1</span><span class="sc">:</span><span class="dv">10</span>)),</span>
<span id="annotated-cell-35-7"><a href="#annotated-cell-35-7" aria-hidden="true" tabindex="-1"></a>         <span class="at">garage_qual =</span> <span class="fu">fct_relevel</span>(garage_qual, <span class="fu">c</span>(<span class="st">"no_garage"</span>, <span class="st">"po"</span>, <span class="st">"fa"</span>, </span>
<a class="code-annotation-anchor" data-target-cell="annotated-cell-35" data-target-annotation="5" onclick="event.preventDefault();">5</a><span id="annotated-cell-35-8" class="code-annotation-target"><a href="#annotated-cell-35-8" aria-hidden="true" tabindex="-1"></a>                                                  <span class="st">"ta"</span>, <span class="st">"gd"</span>, <span class="st">"ex"</span>))) <span class="sc">|&gt;</span></span>
<span id="annotated-cell-35-9"><a href="#annotated-cell-35-9" aria-hidden="true" tabindex="-1"></a>  <span class="fu">glimpse</span>()</span><div class="code-annotation-gutter-bg"></div><div class="code-annotation-gutter"></div></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
<div class="cell-annotation">
<dl class="code-annotation-container-grid">
<dt data-target-cell="annotated-cell-35" data-target-annotation="1">1</dt>
<dd>
<span data-code-annotation="1" data-code-lines="3" data-code-cell="annotated-cell-35">use col_types = cols() to suppress messages about default class assignments</span>
</dd>
<dt data-target-cell="annotated-cell-35" data-target-annotation="2">2</dt>
<dd>
<span data-code-annotation="2" data-code-lines="4" data-code-cell="annotated-cell-35">use <code>mutate()</code> with <code>across()</code> to change all character variables to factors</span>
</dd>
<dt data-target-cell="annotated-cell-35" data-target-annotation="3">3</dt>
<dd>
<span data-code-annotation="3" data-code-lines="5" data-code-cell="annotated-cell-35">use <code>mutate()</code> with <code>factor()</code> to change numeric variable to factor.</span>
</dd>
<dt data-target-cell="annotated-cell-35" data-target-annotation="4">4</dt>
<dd>
<span data-code-annotation="4" data-code-lines="6" data-code-cell="annotated-cell-35">use <code>mutate()</code> with <code>fct_relevel()</code> to explicitly set levels of an ordered factor</span>
</dd>
<dt data-target-cell="annotated-cell-35" data-target-annotation="5">5</dt>
<dd>
<span data-code-annotation="5" data-code-lines="8" data-code-cell="annotated-cell-35">notice the warning about the unknown level. Always explore warnings! In this instance, its fine. There were only two observations with ex and neither ended up in the training split. Still best to include this level to note it exists!</span>
</dd>
</dl>
</div>
<div class="cell-output cell-output-stdout">
<pre><code>Rows: 1,465
Columns: 10
$ sale_price   &lt;dbl&gt; 105000, 126000, 115000, 120000, 99500, 112000, 122000, 12…
$ gr_liv_area  &lt;dbl&gt; 896, 882, 864, 836, 918, 1902, 900, 1225, 1728, 858, 1306…
$ lot_area     &lt;dbl&gt; 11622, 8400, 10500, 2280, 7892, 8930, 9819, 9320, 13260, …
$ year_built   &lt;dbl&gt; 1961, 1970, 1971, 1975, 1979, 1978, 1967, 1959, 1962, 195…
$ overall_qual &lt;fct&gt; 5, 4, 4, 7, 6, 6, 5, 4, 5, 5, 3, 5, 4, 5, 3, 5, 2, 6, 5, …
$ garage_cars  &lt;dbl&gt; 1, 2, 0, 1, 1, 2, 1, 0, 0, 0, 0, 1, 2, 2, 1, 1, 2, 2, 1, …
$ garage_qual  &lt;fct&gt; ta, ta, no_garage, ta, ta, ta, ta, no_garage, no_garage, …
$ ms_zoning    &lt;fct&gt; res_high, res_low, res_low, res_low, res_low, res_med, re…
$ lot_config   &lt;fct&gt; inside, corner, fr2, fr2, inside, inside, inside, inside,…
$ bldg_type    &lt;fct&gt; one_fam, one_fam, one_fam, town_inside, town_end, duplex,…</code></pre>
</div>
</div>
<hr>
<p><strong>Coding sidebar</strong>: We will likely re-class the Ames dataset many times (for training, validation, test). We could copy/paste these mutates each time but whenever you do something more than twice, I recommend writing a function. We might write this one to re-class the ames variables</p>
<div class="cell">
<div class="sourceCode cell-code" id="cb49"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb49-1"><a href="#cb49-1" aria-hidden="true" tabindex="-1"></a>class_ames <span class="ot">&lt;-</span> <span class="cf">function</span>(df){</span>
<span id="cb49-2"><a href="#cb49-2" aria-hidden="true" tabindex="-1"></a>  </span>
<span id="cb49-3"><a href="#cb49-3" aria-hidden="true" tabindex="-1"></a>  df <span class="sc">|&gt;</span></span>
<span id="cb49-4"><a href="#cb49-4" aria-hidden="true" tabindex="-1"></a>    <span class="fu">mutate</span>(<span class="fu">across</span>(<span class="fu">where</span>(is.character), factor)) <span class="sc">|&gt;</span> </span>
<span id="cb49-5"><a href="#cb49-5" aria-hidden="true" tabindex="-1"></a>    <span class="fu">mutate</span>(<span class="at">overall_qual =</span> <span class="fu">factor</span>(overall_qual), </span>
<span id="cb49-6"><a href="#cb49-6" aria-hidden="true" tabindex="-1"></a>           <span class="at">overall_qual =</span> <span class="fu">fct_relevel</span>(overall_qual, <span class="fu">as.character</span>(<span class="dv">1</span><span class="sc">:</span><span class="dv">10</span>)), </span>
<span id="cb49-7"><a href="#cb49-7" aria-hidden="true" tabindex="-1"></a>           <span class="at">garage_qual =</span> <span class="fu">fct_relevel</span>(garage_qual, <span class="fu">c</span>(<span class="st">"no_garage"</span>, <span class="st">"po"</span>, <span class="st">"fa"</span>, </span>
<span id="cb49-8"><a href="#cb49-8" aria-hidden="true" tabindex="-1"></a>                                                    <span class="st">"ta"</span>, <span class="st">"gd"</span>, <span class="st">"ex"</span>)))</span>
<span id="cb49-9"><a href="#cb49-9" aria-hidden="true" tabindex="-1"></a>}</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
</div>
<p>Now we can use it every time we read in one of the Ames datasets</p>
<div class="cell">
<div class="sourceCode cell-code" id="cb50"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb50-1"><a href="#cb50-1" aria-hidden="true" tabindex="-1"></a>data_trn <span class="ot">&lt;-</span> </span>
<span id="cb50-2"><a href="#cb50-2" aria-hidden="true" tabindex="-1"></a>  <span class="fu">read_csv</span>(here<span class="sc">::</span><span class="fu">here</span>(path_data, <span class="st">"ames_clean_class_trn.csv"</span>), <span class="at">col_types =</span> <span class="fu">cols</span>()) <span class="sc">|&gt;</span> </span>
<span id="cb50-3"><a href="#cb50-3" aria-hidden="true" tabindex="-1"></a>  <span class="fu">class_ames</span>() <span class="sc">|&gt;</span> </span>
<span id="cb50-4"><a href="#cb50-4" aria-hidden="true" tabindex="-1"></a>  <span class="fu">glimpse</span>()</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
<div class="cell-output cell-output-stdout">
<pre><code>Rows: 1,465
Columns: 10
$ sale_price   &lt;dbl&gt; 105000, 126000, 115000, 120000, 99500, 112000, 122000, 12…
$ gr_liv_area  &lt;dbl&gt; 896, 882, 864, 836, 918, 1902, 900, 1225, 1728, 858, 1306…
$ lot_area     &lt;dbl&gt; 11622, 8400, 10500, 2280, 7892, 8930, 9819, 9320, 13260, …
$ year_built   &lt;dbl&gt; 1961, 1970, 1971, 1975, 1979, 1978, 1967, 1959, 1962, 195…
$ overall_qual &lt;fct&gt; 5, 4, 4, 7, 6, 6, 5, 4, 5, 5, 3, 5, 4, 5, 3, 5, 2, 6, 5, …
$ garage_cars  &lt;dbl&gt; 1, 2, 0, 1, 1, 2, 1, 0, 0, 0, 0, 1, 2, 2, 1, 1, 2, 2, 1, …
$ garage_qual  &lt;fct&gt; ta, ta, no_garage, ta, ta, ta, ta, no_garage, no_garage, …
$ ms_zoning    &lt;fct&gt; res_high, res_low, res_low, res_low, res_low, res_med, re…
$ lot_config   &lt;fct&gt; inside, corner, fr2, fr2, inside, inside, inside, inside,…
$ bldg_type    &lt;fct&gt; one_fam, one_fam, one_fam, town_inside, town_end, duplex,…</code></pre>
</div>
</div>
<hr>
<p>There are 3 basic types of Modeling EDA you should always do</p>
<ol type="1">
<li>Explore missingness for predictors</li>
<li>Explore univariate distributions for outcome and predictors</li>
<li>Explore bivariate relationships between predictors and outcome</li>
</ol>
<p>As a result of this exploration, we will:</p>
<ul>
<li>Identify promising predictors</li>
<li>Determine appropriate feature engineering for those predictors (e.g., transformations)</li>
<li>Identify outliers and consider how to handle when model building</li>
<li>Consider how to handle imputation for missing data (if any)</li>
</ul>
<section id="overall-summary-of-feature-matrix" class="level3" data-number="2.4.1">
<h3 data-number="2.4.1" class="anchored" data-anchor-id="overall-summary-of-feature-matrix"><span class="header-section-number">2.4.1</span> Overall Summary of Feature Matrix</h3>
<p>Before we dig into individual variables and their distributions and relationships with the outcome, it’s nice to start with a big picture of the dataset</p>
<ul>
<li>We use another customized version of <code>skim()</code> from the <code>skimr</code> package to provide this</li>
<li>Just needed to augment it with skewness and kurtosis statistics for numeric variables</li>
<li>and remove histogram b/c we don’t find that small histogram useful</li>
<li>included in <code>fun_eda.R</code> on github</li>
</ul>
<div class="cell">
<div class="sourceCode cell-code" id="cb52"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb52-1"><a href="#cb52-1" aria-hidden="true" tabindex="-1"></a>skew_na <span class="ot">&lt;-</span> <span class="fu">partial</span>(e1071<span class="sc">::</span>skewness, <span class="at">na.rm =</span> <span class="cn">TRUE</span>)</span>
<span id="cb52-2"><a href="#cb52-2" aria-hidden="true" tabindex="-1"></a>kurt_na <span class="ot">&lt;-</span> <span class="fu">partial</span>(e1071<span class="sc">::</span>kurtosis, <span class="at">na.rm =</span> <span class="cn">TRUE</span>)</span>
<span id="cb52-3"><a href="#cb52-3" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb52-4"><a href="#cb52-4" aria-hidden="true" tabindex="-1"></a>skim_all <span class="ot">&lt;-</span> skimr<span class="sc">::</span><span class="fu">skim_with</span>(<span class="at">numeric =</span> skimr<span class="sc">::</span><span class="fu">sfl</span>(<span class="at">skew =</span> skew_na, </span>
<span id="cb52-5"><a href="#cb52-5" aria-hidden="true" tabindex="-1"></a>                                                  <span class="at">kurtosis =</span> kurt_na, </span>
<span id="cb52-6"><a href="#cb52-6" aria-hidden="true" tabindex="-1"></a>                                                  <span class="at">hist =</span> <span class="cn">NULL</span>))</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
</div>
<div class="cell">
<div class="sourceCode cell-code" id="cb53"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb53-1"><a href="#cb53-1" aria-hidden="true" tabindex="-1"></a>data_trn <span class="sc">|&gt;</span> </span>
<span id="cb53-2"><a href="#cb53-2" aria-hidden="true" tabindex="-1"></a>  <span class="fu">skim_all</span>()</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
<div class="cell-output-display">

<table style="width: auto;" class="table table-condensed">
<caption>
Data summary
</caption>
<tbody>
<tr>
<td style="text-align:left;">
Name
</td>
<td style="text-align:left;">
data_trn
</td>
</tr>
<tr>
<td style="text-align:left;">
Number of rows
</td>
<td style="text-align:left;">
1465
</td>
</tr>
<tr>
<td style="text-align:left;">
Number of columns
</td>
<td style="text-align:left;">
10
</td>
</tr>
<tr>
<td style="text-align:left;">
_______________________
</td>
<td style="text-align:left;">
</td>
</tr>
<tr>
<td style="text-align:left;">
Column type frequency:
</td>
<td style="text-align:left;">
</td>
</tr>
<tr>
<td style="text-align:left;">
factor
</td>
<td style="text-align:left;">
5
</td>
</tr>
<tr>
<td style="text-align:left;">
numeric
</td>
<td style="text-align:left;">
5
</td>
</tr>
<tr>
<td style="text-align:left;">
________________________
</td>
<td style="text-align:left;">
</td>
</tr>
<tr>
<td style="text-align:left;">
Group variables
</td>
<td style="text-align:left;">
None
</td>
</tr>
</tbody>

</table>
<p><strong>Variable type: factor</strong></p>

<table>
<thead>
<tr>
<th style="text-align:left;">
skim_variable
</th>
<th style="text-align:right;">
n_missing
</th>
<th style="text-align:right;">
complete_rate
</th>
<th style="text-align:right;">
n_unique
</th>
<th style="text-align:left;">
top_counts
</th>
</tr>
</thead>
<tbody>
<tr>
<td style="text-align:left;">
overall_qual
</td>
<td style="text-align:right;">
0
</td>
<td style="text-align:right;">
1
</td>
<td style="text-align:right;">
10
</td>
<td style="text-align:left;">
5: 424, 6: 350, 7: 304, 8: 176
</td>
</tr>
<tr>
<td style="text-align:left;">
garage_qual
</td>
<td style="text-align:right;">
0
</td>
<td style="text-align:right;">
1
</td>
<td style="text-align:right;">
5
</td>
<td style="text-align:left;">
ta: 1312, no_: 81, fa: 57, gd: 13
</td>
</tr>
<tr>
<td style="text-align:left;">
ms_zoning
</td>
<td style="text-align:right;">
0
</td>
<td style="text-align:right;">
1
</td>
<td style="text-align:right;">
7
</td>
<td style="text-align:left;">
res: 1157, res: 217, flo: 66, com: 13
</td>
</tr>
<tr>
<td style="text-align:left;">
lot_config
</td>
<td style="text-align:right;">
0
</td>
<td style="text-align:right;">
1
</td>
<td style="text-align:right;">
5
</td>
<td style="text-align:left;">
ins: 1095, cor: 248, cul: 81, fr2: 39
</td>
</tr>
<tr>
<td style="text-align:left;">
bldg_type
</td>
<td style="text-align:right;">
0
</td>
<td style="text-align:right;">
1
</td>
<td style="text-align:right;">
5
</td>
<td style="text-align:left;">
one: 1216, tow: 108, dup: 63, tow: 46
</td>
</tr>
</tbody>

</table>
<p><strong>Variable type: numeric</strong></p>

<table>
<thead>
<tr>
<th style="text-align:left;">
skim_variable
</th>
<th style="text-align:right;">
n_missing
</th>
<th style="text-align:right;">
complete_rate
</th>
<th style="text-align:right;">
mean
</th>
<th style="text-align:right;">
sd
</th>
<th style="text-align:right;">
p0
</th>
<th style="text-align:right;">
p25
</th>
<th style="text-align:right;">
p50
</th>
<th style="text-align:right;">
p75
</th>
<th style="text-align:right;">
p100
</th>
<th style="text-align:right;">
skew
</th>
<th style="text-align:right;">
kurtosis
</th>
</tr>
</thead>
<tbody>
<tr>
<td style="text-align:left;">
sale_price
</td>
<td style="text-align:right;">
0
</td>
<td style="text-align:right;">
1
</td>
<td style="text-align:right;">
180696.15
</td>
<td style="text-align:right;">
78836.41
</td>
<td style="text-align:right;">
12789
</td>
<td style="text-align:right;">
129500
</td>
<td style="text-align:right;">
160000
</td>
<td style="text-align:right;">
213500
</td>
<td style="text-align:right;">
745000
</td>
<td style="text-align:right;">
1.64
</td>
<td style="text-align:right;">
4.60
</td>
</tr>
<tr>
<td style="text-align:left;">
gr_liv_area
</td>
<td style="text-align:right;">
0
</td>
<td style="text-align:right;">
1
</td>
<td style="text-align:right;">
1506.84
</td>
<td style="text-align:right;">
511.44
</td>
<td style="text-align:right;">
438
</td>
<td style="text-align:right;">
1128
</td>
<td style="text-align:right;">
1450
</td>
<td style="text-align:right;">
1759
</td>
<td style="text-align:right;">
5642
</td>
<td style="text-align:right;">
1.43
</td>
<td style="text-align:right;">
5.19
</td>
</tr>
<tr>
<td style="text-align:left;">
lot_area
</td>
<td style="text-align:right;">
0
</td>
<td style="text-align:right;">
1
</td>
<td style="text-align:right;">
10144.16
</td>
<td style="text-align:right;">
8177.55
</td>
<td style="text-align:right;">
1476
</td>
<td style="text-align:right;">
7500
</td>
<td style="text-align:right;">
9375
</td>
<td style="text-align:right;">
11362
</td>
<td style="text-align:right;">
164660
</td>
<td style="text-align:right;">
11.20
</td>
<td style="text-align:right;">
182.91
</td>
</tr>
<tr>
<td style="text-align:left;">
year_built
</td>
<td style="text-align:right;">
0
</td>
<td style="text-align:right;">
1
</td>
<td style="text-align:right;">
1971.35
</td>
<td style="text-align:right;">
29.65
</td>
<td style="text-align:right;">
1880
</td>
<td style="text-align:right;">
1953
</td>
<td style="text-align:right;">
1972
</td>
<td style="text-align:right;">
2000
</td>
<td style="text-align:right;">
2010
</td>
<td style="text-align:right;">
-0.54
</td>
<td style="text-align:right;">
-0.62
</td>
</tr>
<tr>
<td style="text-align:left;">
garage_cars
</td>
<td style="text-align:right;">
1
</td>
<td style="text-align:right;">
1
</td>
<td style="text-align:right;">
1.78
</td>
<td style="text-align:right;">
0.76
</td>
<td style="text-align:right;">
0
</td>
<td style="text-align:right;">
1
</td>
<td style="text-align:right;">
2
</td>
<td style="text-align:right;">
2
</td>
<td style="text-align:right;">
4
</td>
<td style="text-align:right;">
-0.26
</td>
<td style="text-align:right;">
0.10
</td>
</tr>
</tbody>

</table>
</div>
</div>
<p>Careful review of this output provides a great orientation to our data</p>
</section>
<section id="univariate-distributions" class="level3" data-number="2.4.2">
<h3 data-number="2.4.2" class="anchored" data-anchor-id="univariate-distributions"><span class="header-section-number">2.4.2</span> Univariate Distributions</h3>
<p>Exploration of univariate distributions are useful to</p>
<ul>
<li>Understand variation and distributional shape</li>
<li>May suggest need to consider transformations as part of feature engineering</li>
<li>Can identify univariate outliers (valid but disconnected from distribution so not detected in cleaning)</li>
</ul>
<p>We generally select different visualizations and summary statistics for categorical vs.&nbsp;numeric variables</p>
<section id="categorical-variables" class="level4" data-number="2.4.2.1">
<h4 data-number="2.4.2.1" class="anchored" data-anchor-id="categorical-variables"><span class="header-section-number">2.4.2.1</span> Categorical Variables</h4>
<section id="barplots" class="level5" data-number="2.4.2.1.1">
<h5 data-number="2.4.2.1.1" class="anchored" data-anchor-id="barplots"><span class="header-section-number">2.4.2.1.1</span> Barplots</h5>
<p>The primary visualization for categorical variables is the bar plot</p>
<p>Define and customize it within a function for repeated use. We share this and all the remaining plots used in this unit in <code>fun_plot.R</code>. Source it to use them without having to re-code each time</p>
<div class="cell">
<div class="sourceCode cell-code" id="cb54"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb54-1"><a href="#cb54-1" aria-hidden="true" tabindex="-1"></a>plot_bar <span class="ot">&lt;-</span> <span class="cf">function</span>(df, x){</span>
<span id="cb54-2"><a href="#cb54-2" aria-hidden="true" tabindex="-1"></a>  x_label_size <span class="ot">&lt;-</span> <span class="fu">if_else</span>(skimr<span class="sc">::</span><span class="fu">n_unique</span>(df[[x]]) <span class="sc">&lt;</span> <span class="dv">7</span>, <span class="dv">11</span>, <span class="dv">7</span>)</span>
<span id="cb54-3"><a href="#cb54-3" aria-hidden="true" tabindex="-1"></a>  </span>
<span id="cb54-4"><a href="#cb54-4" aria-hidden="true" tabindex="-1"></a>  df <span class="sc">|&gt;</span></span>
<span id="cb54-5"><a href="#cb54-5" aria-hidden="true" tabindex="-1"></a>    <span class="fu">ggplot</span>(<span class="fu">aes</span>(<span class="at">x =</span> .data[[x]])) <span class="sc">+</span></span>
<span id="cb54-6"><a href="#cb54-6" aria-hidden="true" tabindex="-1"></a>    <span class="fu">geom_bar</span>() <span class="sc">+</span></span>
<span id="cb54-7"><a href="#cb54-7" aria-hidden="true" tabindex="-1"></a>    <span class="fu">theme</span>(<span class="at">axis.text.x =</span> <span class="fu">element_text</span>(<span class="at">angle =</span> <span class="dv">90</span>, <span class="at">size =</span> x_label_size, <span class="at">vjust =</span> <span class="fl">0.5</span>, <span class="at">hjust =</span> <span class="dv">1</span>),</span>
<span id="cb54-8"><a href="#cb54-8" aria-hidden="true" tabindex="-1"></a>          <span class="at">axis.text.y =</span> <span class="fu">element_text</span>(<span class="at">size =</span> <span class="dv">11</span>))</span>
<span id="cb54-9"><a href="#cb54-9" aria-hidden="true" tabindex="-1"></a>}</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
</div>
<p><strong>Coding sidebar</strong>: When defining functions, generally put data as first argument so you can pipe in data using tidy pipelines</p>
<p>There are pros and cons to writing functions that accept variable names that are quoted vs.&nbsp;unquoted</p>
<ul>
<li>It depends a bit on how you will use them.</li>
<li>.data[[argument]] is used in functions with quoted arguments</li>
<li>embracing {{}} is used for unquoted arguments</li>
<li>For these plot functions, I use quoted variable names and then pipe those into <code>map()</code> to make multiple plots (see below)</li>
<li>see <code>?vignette("programming")</code> or info on <a href="https://r4ds.hadley.nz/functions.html#indirection-and-tidy-evaluation">tidy evaluation</a> in <span class="citation" data-cites="RDS">Wickham, Çetinkaya-Rundel, and Grolemund (<a href="#ref-RDS" role="doc-biblioref">2023</a>)</span> for more details</li>
</ul>
<hr>
<p>Bar plots reveal low frequency responses for nominal and ordinal variables</p>
<ul>
<li>See <code>bldg_type</code></li>
</ul>
<div class="cell">
<div class="sourceCode cell-code" id="cb55"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb55-1"><a href="#cb55-1" aria-hidden="true" tabindex="-1"></a>data_trn <span class="sc">|&gt;</span> <span class="fu">plot_bar</span>(<span class="st">"bldg_type"</span>)</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
<div class="cell-output-display">
<p><img src="002_exploratory_data_analysis_files/figure-html/u2-modeling-2-1.png" class="img-fluid" width="672"></p>
</div>
</div>
<hr>
<p>Bar plots can display distributional shape for ordinal variables. May suggest the need for transformations if we later treat the ordinal variable as numeric</p>
<ul>
<li>See <code>overall_qual</code>. Though it is not very skewed.</li>
</ul>
<div class="cell">
<div class="sourceCode cell-code" id="cb56"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb56-1"><a href="#cb56-1" aria-hidden="true" tabindex="-1"></a>data_trn <span class="sc">|&gt;</span> <span class="fu">plot_bar</span>(<span class="st">"overall_qual"</span>)</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
<div class="cell-output-display">
<p><img src="002_exploratory_data_analysis_files/figure-html/u2-modeling-3-1.png" class="img-fluid" width="672"></p>
</div>
</div>
<hr>
<p><strong>Coding sidebar</strong>:</p>
<p>We can make all of our plots iteratively using <code>map()</code> from the `purrr package.</p>
<div class="cell">
<div class="sourceCode cell-code" id="annotated-cell-43"><pre class="sourceCode r code-annotation-code code-with-copy code-annotated"><code class="sourceCode r"><span id="annotated-cell-43-1"><a href="#annotated-cell-43-1" aria-hidden="true" tabindex="-1"></a>data_trn <span class="sc">|&gt;</span> </span>
<a class="code-annotation-anchor" data-target-cell="annotated-cell-43" data-target-annotation="1" onclick="event.preventDefault();">1</a><span id="annotated-cell-43-2" class="code-annotation-target"><a href="#annotated-cell-43-2" aria-hidden="true" tabindex="-1"></a>  <span class="fu">select</span>(<span class="fu">where</span>(is.factor)) <span class="sc">|&gt;</span></span>
<a class="code-annotation-anchor" data-target-cell="annotated-cell-43" data-target-annotation="2" onclick="event.preventDefault();">2</a><span id="annotated-cell-43-3" class="code-annotation-target"><a href="#annotated-cell-43-3" aria-hidden="true" tabindex="-1"></a>  <span class="fu">names</span>() <span class="sc">|&gt;</span></span>
<a class="code-annotation-anchor" data-target-cell="annotated-cell-43" data-target-annotation="3" onclick="event.preventDefault();">3</a><span id="annotated-cell-43-4" class="code-annotation-target"><a href="#annotated-cell-43-4" aria-hidden="true" tabindex="-1"></a>  <span class="fu">map</span>(\(name) <span class="fu">plot_bar</span>(<span class="at">df =</span> data_trn, <span class="at">x =</span> name)) <span class="sc">|&gt;</span></span>
<a class="code-annotation-anchor" data-target-cell="annotated-cell-43" data-target-annotation="4" onclick="event.preventDefault();">4</a><span id="annotated-cell-43-5" class="code-annotation-target"><a href="#annotated-cell-43-5" aria-hidden="true" tabindex="-1"></a>  <span class="fu">plot_grid</span>(<span class="at">plotlist =</span> _, <span class="at">ncol =</span> <span class="dv">2</span>)</span><div class="code-annotation-gutter-bg"></div><div class="code-annotation-gutter"></div></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
<div class="cell-annotation">
<dl class="code-annotation-container-grid">
<dt data-target-cell="annotated-cell-43" data-target-annotation="1">1</dt>
<dd>
<span data-code-annotation="1" data-code-lines="2" data-code-cell="annotated-cell-43">Select only the factor columns</span>
</dd>
<dt data-target-cell="annotated-cell-43" data-target-annotation="2">2</dt>
<dd>
<span data-code-annotation="2" data-code-lines="3" data-code-cell="annotated-cell-43">Get their names as strings (that is why we use quoted variables in these plot functions</span>
</dd>
<dt data-target-cell="annotated-cell-43" data-target-annotation="3">3</dt>
<dd>
<span data-code-annotation="3" data-code-lines="4" data-code-cell="annotated-cell-43">Use <code>map()</code> to iterative <code>plot_bar()</code> over every column. (see <a href="https://r4ds.hadley.nz/iteration.html">iteration</a> in <span class="citation" data-cites="RDS">Wickham, Çetinkaya-Rundel, and Grolemund (<a href="#ref-RDS" role="doc-biblioref">2023</a>)</span>)</span>
</dd>
<dt data-target-cell="annotated-cell-43" data-target-annotation="4">4</dt>
<dd>
<span data-code-annotation="4" data-code-lines="5" data-code-cell="annotated-cell-43">Use <code>plot_grid()</code> from <code>cowplot</code> package to display the list of plots in a grid</span>
</dd>
</dl>
</div>
<div class="cell-output-display">
<p><img src="002_exploratory_data_analysis_files/figure-html/u2-modeling-4-1.png" class="img-fluid" width="672"></p>
</div>
</div>
</section>
<section id="tables" class="level5" data-number="2.4.2.1.2">
<h5 data-number="2.4.2.1.2" class="anchored" data-anchor-id="tables"><span class="header-section-number">2.4.2.1.2</span> Tables</h5>
<p>We tend to prefer visualizations vs.&nbsp;summary statistics for EDA. However, tables can be useful.</p>
<p>Here is a function that was described in <span class="citation" data-cites="RDS">Wickham, Çetinkaya-Rundel, and Grolemund (<a href="#ref-RDS" role="doc-biblioref">2023</a>)</span> that we like because</p>
<ul>
<li>Includes counts and proportions</li>
<li>Includes NA as a category</li>
</ul>
<p>We have included it in <code>fun_eda.R</code> for your use.</p>
<div class="cell">
<div class="sourceCode cell-code" id="cb57"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb57-1"><a href="#cb57-1" aria-hidden="true" tabindex="-1"></a>tab <span class="ot">&lt;-</span> <span class="cf">function</span>(df, var, <span class="at">sort =</span> <span class="cn">FALSE</span>) {</span>
<span id="cb57-2"><a href="#cb57-2" aria-hidden="true" tabindex="-1"></a>  df <span class="sc">|&gt;</span>  dplyr<span class="sc">::</span><span class="fu">count</span>({{ var }}, <span class="at">sort =</span> sort) <span class="sc">|&gt;</span> </span>
<span id="cb57-3"><a href="#cb57-3" aria-hidden="true" tabindex="-1"></a>    dplyr<span class="sc">::</span><span class="fu">mutate</span>(<span class="at">prop =</span> n <span class="sc">/</span> <span class="fu">sum</span>(n))</span>
<span id="cb57-4"><a href="#cb57-4" aria-hidden="true" tabindex="-1"></a>} </span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
</div>
<p>Tables can be used to identify responses that have very low frequency and to think about the need to handle missing values</p>
<ul>
<li>See <code>ms_zoning</code></li>
<li>May want to collapse low frequency (or low percentage) categories to reduce the number of features needed to represent the predictor</li>
</ul>
<div class="cell">
<div class="sourceCode cell-code" id="cb58"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb58-1"><a href="#cb58-1" aria-hidden="true" tabindex="-1"></a>data_trn <span class="sc">|&gt;</span> <span class="fu">tab</span>(ms_zoning)</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
<div class="cell-output cell-output-stdout">
<pre><code># A tibble: 7 × 3
  ms_zoning     n     prop
  &lt;fct&gt;     &lt;int&gt;    &lt;dbl&gt;
1 agri          2 0.00137 
2 commer       13 0.00887 
3 float        66 0.0451  
4 indus         1 0.000683
5 res_high      9 0.00614 
6 res_low    1157 0.790   
7 res_med     217 0.148   </code></pre>
</div>
</div>
<ul>
<li>or maybe sorted</li>
</ul>
<div class="cell">
<div class="sourceCode cell-code" id="cb60"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb60-1"><a href="#cb60-1" aria-hidden="true" tabindex="-1"></a>data_trn <span class="sc">|&gt;</span> <span class="fu">tab</span>(ms_zoning, <span class="at">sort =</span> <span class="cn">TRUE</span>)</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
<div class="cell-output cell-output-stdout">
<pre><code># A tibble: 7 × 3
  ms_zoning     n     prop
  &lt;fct&gt;     &lt;int&gt;    &lt;dbl&gt;
1 res_low    1157 0.790   
2 res_med     217 0.148   
3 float        66 0.0451  
4 commer       13 0.00887 
5 res_high      9 0.00614 
6 agri          2 0.00137 
7 indus         1 0.000683</code></pre>
</div>
</div>
<p>but could see this with plot as well</p>
<div class="cell">
<div class="sourceCode cell-code" id="cb62"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb62-1"><a href="#cb62-1" aria-hidden="true" tabindex="-1"></a>data_trn <span class="sc">|&gt;</span> <span class="fu">plot_bar</span>(<span class="st">"ms_zoning"</span>)</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
<div class="cell-output-display">
<p><img src="002_exploratory_data_analysis_files/figure-html/u2-modeling-6-1.png" class="img-fluid" width="672"></p>
</div>
</div>
</section>
</section>
<section id="numeric-variables" class="level4" data-number="2.4.2.2">
<h4 data-number="2.4.2.2" class="anchored" data-anchor-id="numeric-variables"><span class="header-section-number">2.4.2.2</span> Numeric Variables</h4>
<section id="histograms" class="level5" data-number="2.4.2.2.1">
<h5 data-number="2.4.2.2.1" class="anchored" data-anchor-id="histograms"><span class="header-section-number">2.4.2.2.1</span> Histograms</h5>
<p>Histograms are a useful/common visualization for numeric variables</p>
<p>Let’s define a histogram function (included in <code>fun_plots.r</code>)</p>
<ul>
<li>Bin size should be explored a bit to find best representation</li>
<li>Somewhat dependent on n (my default here is based on this training set)</li>
<li>This is one of the limitations of histograms</li>
</ul>
<div class="cell">
<div class="sourceCode cell-code" id="cb63"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb63-1"><a href="#cb63-1" aria-hidden="true" tabindex="-1"></a>plot_hist <span class="ot">&lt;-</span> <span class="cf">function</span>(df, x, <span class="at">bins =</span> <span class="dv">100</span>){</span>
<span id="cb63-2"><a href="#cb63-2" aria-hidden="true" tabindex="-1"></a>  df <span class="sc">|&gt;</span></span>
<span id="cb63-3"><a href="#cb63-3" aria-hidden="true" tabindex="-1"></a>    <span class="fu">ggplot</span>(<span class="fu">aes</span>(<span class="at">x =</span> .data[[x]])) <span class="sc">+</span></span>
<span id="cb63-4"><a href="#cb63-4" aria-hidden="true" tabindex="-1"></a>    <span class="fu">geom_histogram</span>(<span class="at">bins =</span> bins) <span class="sc">+</span></span>
<span id="cb63-5"><a href="#cb63-5" aria-hidden="true" tabindex="-1"></a>    <span class="fu">theme</span>(<span class="at">axis.text.x =</span> <span class="fu">element_text</span>(<span class="at">size =</span> <span class="dv">11</span>),</span>
<span id="cb63-6"><a href="#cb63-6" aria-hidden="true" tabindex="-1"></a>          <span class="at">axis.text.y =</span> <span class="fu">element_text</span>(<span class="at">size =</span> <span class="dv">11</span>))</span>
<span id="cb63-7"><a href="#cb63-7" aria-hidden="true" tabindex="-1"></a>}</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
</div>
<p>Let’s look at <code>sale_price</code></p>
<ul>
<li>It is positively skewed</li>
<li>May suggest units (dollars) are not interval in nature (makes sense)</li>
<li>Could cause problems for some algorithms (e.g., lm) when features are normal</li>
</ul>
<div class="cell">
<div class="sourceCode cell-code" id="cb64"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb64-1"><a href="#cb64-1" aria-hidden="true" tabindex="-1"></a>data_trn <span class="sc">|&gt;</span> <span class="fu">plot_hist</span>(<span class="st">"sale_price"</span>)</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
<div class="cell-output-display">
<p><img src="002_exploratory_data_analysis_files/figure-html/u2-modeling-9-1.png" class="img-fluid" width="672"></p>
</div>
</div>
</section>
<section id="smoothed-frequency-polygons" class="level5" data-number="2.4.2.2.2">
<h5 data-number="2.4.2.2.2" class="anchored" data-anchor-id="smoothed-frequency-polygons"><span class="header-section-number">2.4.2.2.2</span> Smoothed Frequency Polygons</h5>
<p>Frequency polygons are also commonly used</p>
<p>Define a frequency polygon function and use it (included in <code>fun_plots.r</code>)</p>
<ul>
<li>Bins may matter again</li>
</ul>
<div class="cell">
<div class="sourceCode cell-code" id="cb65"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb65-1"><a href="#cb65-1" aria-hidden="true" tabindex="-1"></a>plot_freqpoly <span class="ot">&lt;-</span> <span class="cf">function</span>(df, x, <span class="at">bins =</span> <span class="dv">50</span>){</span>
<span id="cb65-2"><a href="#cb65-2" aria-hidden="true" tabindex="-1"></a>  df <span class="sc">|&gt;</span></span>
<span id="cb65-3"><a href="#cb65-3" aria-hidden="true" tabindex="-1"></a>    <span class="fu">ggplot</span>(<span class="fu">aes</span>(<span class="at">x =</span> .data[[x]])) <span class="sc">+</span></span>
<span id="cb65-4"><a href="#cb65-4" aria-hidden="true" tabindex="-1"></a>    <span class="fu">geom_freqpoly</span>(<span class="at">bins =</span> bins) <span class="sc">+</span></span>
<span id="cb65-5"><a href="#cb65-5" aria-hidden="true" tabindex="-1"></a>    <span class="fu">theme</span>(<span class="at">axis.text.x =</span> <span class="fu">element_text</span>(<span class="at">size =</span> <span class="dv">11</span>),</span>
<span id="cb65-6"><a href="#cb65-6" aria-hidden="true" tabindex="-1"></a>          <span class="at">axis.text.y =</span> <span class="fu">element_text</span>(<span class="at">size =</span> <span class="dv">11</span>))</span>
<span id="cb65-7"><a href="#cb65-7" aria-hidden="true" tabindex="-1"></a>}</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
</div>
<div class="cell">
<div class="sourceCode cell-code" id="cb66"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb66-1"><a href="#cb66-1" aria-hidden="true" tabindex="-1"></a>data_trn <span class="sc">|&gt;</span> <span class="fu">plot_freqpoly</span>(<span class="st">"sale_price"</span>)</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
<div class="cell-output-display">
<p><img src="002_exploratory_data_analysis_files/figure-html/u2-modeling-11-1.png" class="img-fluid" width="672"></p>
</div>
</div>
</section>
<section id="simple-boxplots" class="level5" data-number="2.4.2.2.3">
<h5 data-number="2.4.2.2.3" class="anchored" data-anchor-id="simple-boxplots"><span class="header-section-number">2.4.2.2.3</span> Simple Boxplots</h5>
<p>Boxplots display</p>
<ul>
<li>Median as line</li>
<li>25%ile and 75%ile as hinges</li>
<li>Highest and lowest points within 1.5 * IQR (interquartile-range: difference between scores at 25% and 75%iles)</li>
<li>Outliers outside of 1.5 * IQR</li>
</ul>
<p>Define a boxplot function and use it (included in <code>fun_plots.r</code>)</p>
<div class="cell">
<div class="sourceCode cell-code" id="cb67"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb67-1"><a href="#cb67-1" aria-hidden="true" tabindex="-1"></a>plot_boxplot <span class="ot">&lt;-</span> <span class="cf">function</span>(df, x){</span>
<span id="cb67-2"><a href="#cb67-2" aria-hidden="true" tabindex="-1"></a>  x_label_size <span class="ot">&lt;-</span> <span class="fu">if_else</span>(skimr<span class="sc">::</span><span class="fu">n_unique</span>(df[[x]]) <span class="sc">&lt;</span> <span class="dv">7</span>, <span class="dv">11</span>, <span class="dv">7</span>)</span>
<span id="cb67-3"><a href="#cb67-3" aria-hidden="true" tabindex="-1"></a>  </span>
<span id="cb67-4"><a href="#cb67-4" aria-hidden="true" tabindex="-1"></a>  df <span class="sc">|&gt;</span></span>
<span id="cb67-5"><a href="#cb67-5" aria-hidden="true" tabindex="-1"></a>    <span class="fu">ggplot</span>(<span class="fu">aes</span>(<span class="at">x =</span> .data[[x]])) <span class="sc">+</span></span>
<span id="cb67-6"><a href="#cb67-6" aria-hidden="true" tabindex="-1"></a>    <span class="fu">geom_boxplot</span>() <span class="sc">+</span></span>
<span id="cb67-7"><a href="#cb67-7" aria-hidden="true" tabindex="-1"></a>    <span class="fu">theme</span>(<span class="at">axis.text.y =</span> <span class="fu">element_blank</span>(),</span>
<span id="cb67-8"><a href="#cb67-8" aria-hidden="true" tabindex="-1"></a>          <span class="at">axis.ticks.y =</span> <span class="fu">element_blank</span>(),</span>
<span id="cb67-9"><a href="#cb67-9" aria-hidden="true" tabindex="-1"></a>          <span class="at">axis.text.x =</span> <span class="fu">element_text</span>(<span class="at">angle =</span> <span class="dv">90</span>, <span class="at">size =</span> x_label_size, <span class="at">vjust =</span> <span class="fl">0.5</span>, <span class="at">hjust =</span> <span class="dv">1</span>))</span>
<span id="cb67-10"><a href="#cb67-10" aria-hidden="true" tabindex="-1"></a>}</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
</div>
<div class="cell">
<div class="sourceCode cell-code" id="cb68"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb68-1"><a href="#cb68-1" aria-hidden="true" tabindex="-1"></a>data_trn <span class="sc">|&gt;</span> <span class="fu">plot_boxplot</span>(<span class="st">"sale_price"</span>)</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
<div class="cell-output-display">
<p><img src="002_exploratory_data_analysis_files/figure-html/u2-modeling-13-1.png" class="img-fluid" width="672"></p>
</div>
</div>
</section>
<section id="combined-boxplot-and-violin-plots" class="level5" data-number="2.4.2.2.4">
<h5 data-number="2.4.2.2.4" class="anchored" data-anchor-id="combined-boxplot-and-violin-plots"><span class="header-section-number">2.4.2.2.4</span> Combined Boxplot and Violin Plots</h5>
<p>The combination of a boxplot and violin plot is particularly useful</p>
<ul>
<li>This is our favorite</li>
<li>Get all the benefits of the boxplot</li>
<li>Can clearly see shape of distribution given the violin plot overlay</li>
<li>Can also clearly see the tails</li>
</ul>
<p>Define a combined plot (included in <code>fun_plots.r</code>)</p>
<div class="cell">
<div class="sourceCode cell-code" id="cb69"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb69-1"><a href="#cb69-1" aria-hidden="true" tabindex="-1"></a>plot_box_violin <span class="ot">&lt;-</span> <span class="cf">function</span>(df, x){</span>
<span id="cb69-2"><a href="#cb69-2" aria-hidden="true" tabindex="-1"></a>  x_label_size <span class="ot">&lt;-</span> <span class="fu">if_else</span>(skimr<span class="sc">::</span><span class="fu">n_unique</span>(df[[x]]) <span class="sc">&lt;</span> <span class="dv">7</span>, <span class="dv">11</span>, <span class="dv">7</span>)</span>
<span id="cb69-3"><a href="#cb69-3" aria-hidden="true" tabindex="-1"></a>  </span>
<span id="cb69-4"><a href="#cb69-4" aria-hidden="true" tabindex="-1"></a>  df <span class="sc">|&gt;</span></span>
<span id="cb69-5"><a href="#cb69-5" aria-hidden="true" tabindex="-1"></a>    <span class="fu">ggplot</span>(<span class="fu">aes</span>(<span class="at">x =</span> .data[[x]])) <span class="sc">+</span></span>
<span id="cb69-6"><a href="#cb69-6" aria-hidden="true" tabindex="-1"></a>    <span class="fu">geom_violin</span>(<span class="fu">aes</span>(<span class="at">y =</span> <span class="dv">0</span>), <span class="at">fill =</span> <span class="st">"green"</span>, <span class="at">color =</span> <span class="cn">NA</span>) <span class="sc">+</span></span>
<span id="cb69-7"><a href="#cb69-7" aria-hidden="true" tabindex="-1"></a>    <span class="fu">geom_boxplot</span>(<span class="at">width =</span> .<span class="dv">1</span>, <span class="at">fill =</span> <span class="cn">NA</span>, <span class="at">lwd =</span> <span class="fl">1.1</span>, <span class="at">fatten =</span> <span class="fl">1.1</span>) <span class="sc">+</span></span>
<span id="cb69-8"><a href="#cb69-8" aria-hidden="true" tabindex="-1"></a>    <span class="fu">theme</span>(<span class="at">axis.text.y =</span> <span class="fu">element_blank</span>(),</span>
<span id="cb69-9"><a href="#cb69-9" aria-hidden="true" tabindex="-1"></a>          <span class="at">axis.ticks.y =</span> <span class="fu">element_blank</span>(),</span>
<span id="cb69-10"><a href="#cb69-10" aria-hidden="true" tabindex="-1"></a>          <span class="at">axis.title.y =</span> <span class="fu">element_blank</span>(),</span>
<span id="cb69-11"><a href="#cb69-11" aria-hidden="true" tabindex="-1"></a>          <span class="at">axis.text.x =</span> <span class="fu">element_text</span>(<span class="at">angle =</span> <span class="dv">90</span>, <span class="at">size =</span> x_label_size, <span class="at">vjust =</span> <span class="fl">0.5</span>, <span class="at">hjust =</span> <span class="dv">1</span>))</span>
<span id="cb69-12"><a href="#cb69-12" aria-hidden="true" tabindex="-1"></a>}</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
</div>
<p>Here is the plot for <code>sale_price</code></p>
<ul>
<li>In this instance, the skew is NOT due to only a few outliers</li>
</ul>
<div class="cell">
<div class="sourceCode cell-code" id="cb70"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb70-1"><a href="#cb70-1" aria-hidden="true" tabindex="-1"></a>data_trn <span class="sc">|&gt;</span> <span class="fu">plot_box_violin</span>(<span class="st">"sale_price"</span>)</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
<div class="cell-output-display">
<p><img src="002_exploratory_data_analysis_files/figure-html/u2-modeling-15-1.png" class="img-fluid" width="672"></p>
</div>
</div>
<hr>
<p><strong>Coding sidebar</strong>:</p>
<ul>
<li>You can make figures for all numeric variables at once using <code>select()</code> and <code>map()</code> as before</li>
</ul>
<div class="cell">
<div class="sourceCode cell-code" id="annotated-cell-56"><pre class="sourceCode r code-annotation-code code-with-copy code-annotated"><code class="sourceCode r"><span id="annotated-cell-56-1"><a href="#annotated-cell-56-1" aria-hidden="true" tabindex="-1"></a>data_trn <span class="sc">|&gt;</span> </span>
<a class="code-annotation-anchor" data-target-cell="annotated-cell-56" data-target-annotation="1" onclick="event.preventDefault();">1</a><span id="annotated-cell-56-2" class="code-annotation-target"><a href="#annotated-cell-56-2" aria-hidden="true" tabindex="-1"></a>  <span class="fu">select</span>(<span class="fu">where</span>(is.numeric)) <span class="sc">|&gt;</span></span>
<span id="annotated-cell-56-3"><a href="#annotated-cell-56-3" aria-hidden="true" tabindex="-1"></a>  <span class="fu">names</span>() <span class="sc">|&gt;</span> </span>
<span id="annotated-cell-56-4"><a href="#annotated-cell-56-4" aria-hidden="true" tabindex="-1"></a>  <span class="fu">map</span>(\(name) <span class="fu">plot_box_violin</span>(<span class="at">df =</span> data_trn, <span class="at">x =</span> name)) <span class="sc">|&gt;</span> </span>
<span id="annotated-cell-56-5"><a href="#annotated-cell-56-5" aria-hidden="true" tabindex="-1"></a>  <span class="fu">plot_grid</span>(<span class="at">plotlist =</span> _, <span class="at">ncol =</span> <span class="dv">2</span>)</span><div class="code-annotation-gutter-bg"></div><div class="code-annotation-gutter"></div></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
<div class="cell-annotation">
<dl class="code-annotation-container-grid">
<dt data-target-cell="annotated-cell-56" data-target-annotation="1">1</dt>
<dd>
<span data-code-annotation="1" data-code-lines="2" data-code-cell="annotated-cell-56">Now select numeric rather than factor but otherwise same as previous example</span>
</dd>
</dl>
</div>
<div class="cell-output-display">
<p><img src="002_exploratory_data_analysis_files/figure-html/u2-modeling-16-1.png" class="img-fluid" width="672"></p>
</div>
</div>
</section>
<section id="summary-statistics" class="level5" data-number="2.4.2.2.5">
<h5 data-number="2.4.2.2.5" class="anchored" data-anchor-id="summary-statistics"><span class="header-section-number">2.4.2.2.5</span> Summary Statistics</h5>
<p><code>skim_all()</code> provided all the summary statistics you likely needed for numeric variables</p>
<ul>
<li>mean &amp; median (p50)</li>
<li>sd &amp; IQR (see difference between p25 and p75)</li>
<li>skew &amp; kurtosis</li>
</ul>
<p>You can get skim of only numeric variables if you like</p>
<div class="cell">
<div class="sourceCode cell-code" id="cb71"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb71-1"><a href="#cb71-1" aria-hidden="true" tabindex="-1"></a>data_trn <span class="sc">|&gt;</span> </span>
<span id="cb71-2"><a href="#cb71-2" aria-hidden="true" tabindex="-1"></a>  <span class="fu">select</span>(<span class="fu">where</span>(is.numeric)) <span class="sc">|&gt;</span> </span>
<span id="cb71-3"><a href="#cb71-3" aria-hidden="true" tabindex="-1"></a>  <span class="fu">skim_all</span>()</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
<div class="cell-output-display">

<table style="width: auto;" class="table table-condensed">
<caption>
Data summary
</caption>
<tbody>
<tr>
<td style="text-align:left;">
Name
</td>
<td style="text-align:left;">
select(data_trn, where(is…
</td>
</tr>
<tr>
<td style="text-align:left;">
Number of rows
</td>
<td style="text-align:left;">
1465
</td>
</tr>
<tr>
<td style="text-align:left;">
Number of columns
</td>
<td style="text-align:left;">
5
</td>
</tr>
<tr>
<td style="text-align:left;">
_______________________
</td>
<td style="text-align:left;">
</td>
</tr>
<tr>
<td style="text-align:left;">
Column type frequency:
</td>
<td style="text-align:left;">
</td>
</tr>
<tr>
<td style="text-align:left;">
numeric
</td>
<td style="text-align:left;">
5
</td>
</tr>
<tr>
<td style="text-align:left;">
________________________
</td>
<td style="text-align:left;">
</td>
</tr>
<tr>
<td style="text-align:left;">
Group variables
</td>
<td style="text-align:left;">
None
</td>
</tr>
</tbody>

</table>
<p><strong>Variable type: numeric</strong></p>

<table>
<thead>
<tr>
<th style="text-align:left;">
skim_variable
</th>
<th style="text-align:right;">
n_missing
</th>
<th style="text-align:right;">
complete_rate
</th>
<th style="text-align:right;">
mean
</th>
<th style="text-align:right;">
sd
</th>
<th style="text-align:right;">
p0
</th>
<th style="text-align:right;">
p25
</th>
<th style="text-align:right;">
p50
</th>
<th style="text-align:right;">
p75
</th>
<th style="text-align:right;">
p100
</th>
<th style="text-align:right;">
skew
</th>
<th style="text-align:right;">
kurtosis
</th>
</tr>
</thead>
<tbody>
<tr>
<td style="text-align:left;">
sale_price
</td>
<td style="text-align:right;">
0
</td>
<td style="text-align:right;">
1
</td>
<td style="text-align:right;">
180696.15
</td>
<td style="text-align:right;">
78836.41
</td>
<td style="text-align:right;">
12789
</td>
<td style="text-align:right;">
129500
</td>
<td style="text-align:right;">
160000
</td>
<td style="text-align:right;">
213500
</td>
<td style="text-align:right;">
745000
</td>
<td style="text-align:right;">
1.64
</td>
<td style="text-align:right;">
4.60
</td>
</tr>
<tr>
<td style="text-align:left;">
gr_liv_area
</td>
<td style="text-align:right;">
0
</td>
<td style="text-align:right;">
1
</td>
<td style="text-align:right;">
1506.84
</td>
<td style="text-align:right;">
511.44
</td>
<td style="text-align:right;">
438
</td>
<td style="text-align:right;">
1128
</td>
<td style="text-align:right;">
1450
</td>
<td style="text-align:right;">
1759
</td>
<td style="text-align:right;">
5642
</td>
<td style="text-align:right;">
1.43
</td>
<td style="text-align:right;">
5.19
</td>
</tr>
<tr>
<td style="text-align:left;">
lot_area
</td>
<td style="text-align:right;">
0
</td>
<td style="text-align:right;">
1
</td>
<td style="text-align:right;">
10144.16
</td>
<td style="text-align:right;">
8177.55
</td>
<td style="text-align:right;">
1476
</td>
<td style="text-align:right;">
7500
</td>
<td style="text-align:right;">
9375
</td>
<td style="text-align:right;">
11362
</td>
<td style="text-align:right;">
164660
</td>
<td style="text-align:right;">
11.20
</td>
<td style="text-align:right;">
182.91
</td>
</tr>
<tr>
<td style="text-align:left;">
year_built
</td>
<td style="text-align:right;">
0
</td>
<td style="text-align:right;">
1
</td>
<td style="text-align:right;">
1971.35
</td>
<td style="text-align:right;">
29.65
</td>
<td style="text-align:right;">
1880
</td>
<td style="text-align:right;">
1953
</td>
<td style="text-align:right;">
1972
</td>
<td style="text-align:right;">
2000
</td>
<td style="text-align:right;">
2010
</td>
<td style="text-align:right;">
-0.54
</td>
<td style="text-align:right;">
-0.62
</td>
</tr>
<tr>
<td style="text-align:left;">
garage_cars
</td>
<td style="text-align:right;">
1
</td>
<td style="text-align:right;">
1
</td>
<td style="text-align:right;">
1.78
</td>
<td style="text-align:right;">
0.76
</td>
<td style="text-align:right;">
0
</td>
<td style="text-align:right;">
1
</td>
<td style="text-align:right;">
2
</td>
<td style="text-align:right;">
2
</td>
<td style="text-align:right;">
4
</td>
<td style="text-align:right;">
-0.26
</td>
<td style="text-align:right;">
0.10
</td>
</tr>
</tbody>

</table>
</div>
</div>
</section>
</section>
</section>
<section id="bivariate-relationships-with-outcome" class="level3" data-number="2.4.3">
<h3 data-number="2.4.3" class="anchored" data-anchor-id="bivariate-relationships-with-outcome"><span class="header-section-number">2.4.3</span> Bivariate Relationships with Outcome</h3>
<p>Bivariate relationships with the outcome are useful to detect</p>
<ul>
<li>Which predictors display some relationship with the outcome</li>
<li>What feature engineering (transformations) might maximize that relationship</li>
<li>Are there any bivariate (model) outliers</li>
</ul>
<p>Again, we prefer visualizations but summary statistics are also available</p>
<section id="both-numeric" class="level4" data-number="2.4.3.1">
<h4 data-number="2.4.3.1" class="anchored" data-anchor-id="both-numeric"><span class="header-section-number">2.4.3.1</span> Both Numeric</h4>
<section id="scatterplots" class="level5" data-number="2.4.3.1.1">
<h5 data-number="2.4.3.1.1" class="anchored" data-anchor-id="scatterplots"><span class="header-section-number">2.4.3.1.1</span> Scatterplots</h5>
<p>Scatterplots are the preferred visualization when both variables are numeric</p>
<p>Define a scatterplot function (included in <code>fun_plots.r</code>)</p>
<ul>
<li>add a simple line</li>
<li>add a LOWESS line (Locally Weighted Scatterplot Smoothing)</li>
<li>These lines are useful for considering shape of relationship</li>
</ul>
<div class="cell">
<div class="sourceCode cell-code" id="cb72"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb72-1"><a href="#cb72-1" aria-hidden="true" tabindex="-1"></a>plot_scatter <span class="ot">&lt;-</span> <span class="cf">function</span>(df, x, y){</span>
<span id="cb72-2"><a href="#cb72-2" aria-hidden="true" tabindex="-1"></a>  df <span class="sc">|&gt;</span></span>
<span id="cb72-3"><a href="#cb72-3" aria-hidden="true" tabindex="-1"></a>    <span class="fu">ggplot</span>(<span class="fu">aes</span>(<span class="at">x =</span> .data[[x]], <span class="at">y =</span> .data[[y]])) <span class="sc">+</span></span>
<span id="cb72-4"><a href="#cb72-4" aria-hidden="true" tabindex="-1"></a>    <span class="fu">geom_point</span>() <span class="sc">+</span></span>
<span id="cb72-5"><a href="#cb72-5" aria-hidden="true" tabindex="-1"></a>    <span class="fu">geom_smooth</span>(<span class="at">method =</span> <span class="st">"lm"</span>, <span class="at">formula =</span> y <span class="sc">~</span> x, <span class="at">col =</span> <span class="st">"red"</span>) <span class="sc">+</span></span>
<span id="cb72-6"><a href="#cb72-6" aria-hidden="true" tabindex="-1"></a>    <span class="fu">geom_smooth</span>(<span class="at">method =</span> <span class="st">"loess"</span>, <span class="at">formula =</span> y <span class="sc">~</span> x, <span class="at">col =</span> <span class="st">"green"</span>) <span class="sc">+</span></span>
<span id="cb72-7"><a href="#cb72-7" aria-hidden="true" tabindex="-1"></a>    <span class="fu">theme</span>(<span class="at">axis.text.x =</span> <span class="fu">element_text</span>(<span class="at">size =</span> <span class="dv">11</span>),</span>
<span id="cb72-8"><a href="#cb72-8" aria-hidden="true" tabindex="-1"></a>          <span class="at">axis.text.y =</span> <span class="fu">element_text</span>(<span class="at">size =</span> <span class="dv">11</span>))</span>
<span id="cb72-9"><a href="#cb72-9" aria-hidden="true" tabindex="-1"></a>}</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
</div>
<hr>
<p>Let’s consider relationship between <code>gr_liv_area</code> and <code>sale_price</code></p>
<ul>
<li>Care most about influential points (both model outlier and leverage)</li>
<li>Can be <em>typically</em> spotted in bivariate plots (but could do more sophisticated assessments)</li>
<li>We might:
<ul>
<li>retain as is</li>
<li>drop</li>
<li>bring to fence</li>
</ul></li>
</ul>
<p>If bivariate outliers are detected, you should return to cleaning mode to verify that they aren’t result of scoring/coding errors. If they are:</p>
<ul>
<li>Fix in full dataset</li>
<li>Use same train/test split after fixing</li>
</ul>
<div class="cell">
<div class="sourceCode cell-code" id="cb73"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb73-1"><a href="#cb73-1" aria-hidden="true" tabindex="-1"></a>data_trn <span class="sc">|&gt;</span> <span class="fu">plot_scatter</span>(<span class="st">"gr_liv_area"</span>, <span class="st">"sale_price"</span>)</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
<div class="cell-output-display">
<p><img src="002_exploratory_data_analysis_files/figure-html/u2-modeling-19-1.png" class="img-fluid" width="672"></p>
</div>
</div>
<hr>
<p>Here is another example where the relationship might be non-linear</p>
<div class="cell">
<div class="sourceCode cell-code" id="cb74"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb74-1"><a href="#cb74-1" aria-hidden="true" tabindex="-1"></a>data_trn <span class="sc">|&gt;</span> <span class="fu">plot_scatter</span>(<span class="st">"year_built"</span>, <span class="st">"sale_price"</span>)</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
<div class="cell-output-display">
<p><img src="002_exploratory_data_analysis_files/figure-html/u2-modeling-21-1.png" class="img-fluid" width="672"></p>
</div>
</div>
<hr>
<p>A transformation of <code>sale_price</code> might help the relationship with <span class="math inline">\(year\_built\)</span> but might hurt <code>gr_liv_area</code></p>
<p>Maybe need to transform both <code>sale_price</code> and <code>gr_liv_area</code> as both were skewed</p>
<p>This might require some more EDA but here is a start</p>
<ul>
<li>Quick and temporary Log (base e) of <code>sale_price</code></li>
<li>This doesn’t seem promising by itself</li>
</ul>
<div class="cell">
<div class="sourceCode cell-code" id="cb75"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb75-1"><a href="#cb75-1" aria-hidden="true" tabindex="-1"></a>data_trn <span class="sc">|&gt;</span> </span>
<span id="cb75-2"><a href="#cb75-2" aria-hidden="true" tabindex="-1"></a>  <span class="fu">mutate</span>(<span class="at">sale_price =</span> <span class="fu">log</span>(sale_price)) <span class="sc">|&gt;</span> </span>
<span id="cb75-3"><a href="#cb75-3" aria-hidden="true" tabindex="-1"></a>  <span class="fu">plot_scatter</span>(<span class="st">"gr_liv_area"</span>, <span class="st">"sale_price"</span>)</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
<div class="cell-output-display">
<p><img src="002_exploratory_data_analysis_files/figure-html/u2-modeling-22-1.png" class="img-fluid" width="672"></p>
</div>
<div class="sourceCode cell-code" id="cb76"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb76-1"><a href="#cb76-1" aria-hidden="true" tabindex="-1"></a>data_trn <span class="sc">|&gt;</span> </span>
<span id="cb76-2"><a href="#cb76-2" aria-hidden="true" tabindex="-1"></a>  <span class="fu">mutate</span>(<span class="at">sale_price =</span> <span class="fu">log</span>(sale_price)) <span class="sc">|&gt;</span></span>
<span id="cb76-3"><a href="#cb76-3" aria-hidden="true" tabindex="-1"></a>  <span class="fu">plot_scatter</span>(<span class="st">"year_built"</span>, <span class="st">"sale_price"</span>)</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
<div class="cell-output-display">
<p><img src="002_exploratory_data_analysis_files/figure-html/u2-modeling-22-2.png" class="img-fluid" width="672"></p>
</div>
</div>
<hr>
<p>Can make scatterplots for ordered factors as well</p>
<ul>
<li>But other (perhaps better) options also exist for this combination of variable classes.</li>
<li>Use <code>as.numeric()</code> to allow for lm and LOWESS lines on otherwise categorical variable</li>
</ul>
<div class="cell">
<div class="sourceCode cell-code" id="cb77"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb77-1"><a href="#cb77-1" aria-hidden="true" tabindex="-1"></a>data_trn <span class="sc">|&gt;</span> </span>
<span id="cb77-2"><a href="#cb77-2" aria-hidden="true" tabindex="-1"></a>  <span class="fu">mutate</span>(<span class="at">overall_qual =</span> <span class="fu">as.numeric</span>(overall_qual)) <span class="sc">|&gt;</span> </span>
<span id="cb77-3"><a href="#cb77-3" aria-hidden="true" tabindex="-1"></a>  <span class="fu">plot_scatter</span>(<span class="st">"overall_qual"</span>, <span class="st">"sale_price"</span>)</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
<div class="cell-output-display">
<p><img src="002_exploratory_data_analysis_files/figure-html/u2-modeling-23-1.png" class="img-fluid" width="672"></p>
</div>
</div>
<hr>
<p><strong>Coding sidebar</strong>: Use <code>jitter()</code> with x to help with overplotting</p>
<div class="cell">
<div class="sourceCode cell-code" id="cb78"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb78-1"><a href="#cb78-1" aria-hidden="true" tabindex="-1"></a>data_trn <span class="sc">|&gt;</span> </span>
<span id="cb78-2"><a href="#cb78-2" aria-hidden="true" tabindex="-1"></a>  <span class="fu">mutate</span>(<span class="at">overall_qual =</span> <span class="fu">jitter</span>(<span class="fu">as.numeric</span>(overall_qual))) <span class="sc">|&gt;</span> </span>
<span id="cb78-3"><a href="#cb78-3" aria-hidden="true" tabindex="-1"></a>  <span class="fu">plot_scatter</span>(<span class="st">"overall_qual"</span>, <span class="st">"sale_price"</span>)</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
<div class="cell-output-display">
<p><img src="002_exploratory_data_analysis_files/figure-html/u2-modeling-24-1.png" class="img-fluid" width="672"></p>
</div>
</div>
<hr>
<p>When the dataset is large, overplotting can even be a problem with true numeric variables</p>
<ul>
<li>You can bin the values to remove this problem</li>
<li>Continue to use lm and LOWESS lines</li>
<li>This dataset doesn’t have much of an overplotting problem but…..</li>
</ul>
<div class="cell">
<div class="sourceCode cell-code" id="cb79"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb79-1"><a href="#cb79-1" aria-hidden="true" tabindex="-1"></a>plot_hexbin <span class="ot">&lt;-</span> <span class="cf">function</span>(df, x, y){</span>
<span id="cb79-2"><a href="#cb79-2" aria-hidden="true" tabindex="-1"></a>  df <span class="sc">|&gt;</span></span>
<span id="cb79-3"><a href="#cb79-3" aria-hidden="true" tabindex="-1"></a>    <span class="fu">ggplot</span>(<span class="fu">aes</span>(<span class="at">x =</span> .data[[x]], <span class="at">y =</span> .data[[y]])) <span class="sc">+</span></span>
<span id="cb79-4"><a href="#cb79-4" aria-hidden="true" tabindex="-1"></a>    <span class="fu">geom_hex</span>() <span class="sc">+</span></span>
<span id="cb79-5"><a href="#cb79-5" aria-hidden="true" tabindex="-1"></a>    <span class="fu">geom_smooth</span>(<span class="at">method =</span> <span class="st">"lm"</span>, <span class="at">col =</span> <span class="st">"red"</span>) <span class="sc">+</span></span>
<span id="cb79-6"><a href="#cb79-6" aria-hidden="true" tabindex="-1"></a>    <span class="fu">geom_smooth</span>(<span class="at">method =</span> <span class="st">"loess"</span>, <span class="at">col =</span> <span class="st">"green"</span>)  <span class="sc">+</span></span>
<span id="cb79-7"><a href="#cb79-7" aria-hidden="true" tabindex="-1"></a>    <span class="fu">theme</span>(<span class="at">axis.text.x =</span> <span class="fu">element_text</span>(<span class="at">size =</span> <span class="dv">11</span>),</span>
<span id="cb79-8"><a href="#cb79-8" aria-hidden="true" tabindex="-1"></a>          <span class="at">axis.text.y =</span> <span class="fu">element_text</span>(<span class="at">size =</span> <span class="dv">11</span>))</span>
<span id="cb79-9"><a href="#cb79-9" aria-hidden="true" tabindex="-1"></a>}</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
</div>
<div class="cell">
<div class="sourceCode cell-code" id="cb80"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb80-1"><a href="#cb80-1" aria-hidden="true" tabindex="-1"></a>data_trn <span class="sc">|&gt;</span> <span class="fu">plot_hexbin</span>(<span class="st">"gr_liv_area"</span>, <span class="st">"sale_price"</span>)</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
<div class="cell-output cell-output-stderr">
<pre><code>`geom_smooth()` using formula = 'y ~ x'
`geom_smooth()` using formula = 'y ~ x'</code></pre>
</div>
<div class="cell-output-display">
<p><img src="002_exploratory_data_analysis_files/figure-html/u2-modeling-26-1.png" class="img-fluid" width="672"></p>
</div>
</div>
<hr>
</section>
<section id="correlations-plots" class="level5" data-number="2.4.3.1.2">
<h5 data-number="2.4.3.1.2" class="anchored" data-anchor-id="correlations-plots"><span class="header-section-number">2.4.3.1.2</span> Correlations &amp; Plots</h5>
<p>Correlations are useful summary statistics for numeric variables</p>
<p>Some statistical algorithms are sensitive to high correlations among features (multi-collinearity)</p>
<p>At best, highly correlated features add unnecessary flexibility and can lead to overfitting</p>
<p>We can visualize correlations among predictors/features using <code>corrplot.mixed()</code> from <code>corrplot</code> package</p>
<ul>
<li>Best for numeric variables</li>
<li>Can include ordered categorical or two level unordered categorical variables if transformed to numeric</li>
<li>Can include unordered categorical variables with &gt; 2 levels if first transformed appropriately (e.g., dummy features, not demonstrated yet)</li>
<li>Works best with relatively small set of variables</li>
<li>Need to consider how to handle missing values</li>
</ul>
<div class="cell">
<div class="sourceCode cell-code" id="cb82"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb82-1"><a href="#cb82-1" aria-hidden="true" tabindex="-1"></a>data_trn <span class="sc">|&gt;</span> </span>
<span id="cb82-2"><a href="#cb82-2" aria-hidden="true" tabindex="-1"></a>  <span class="fu">mutate</span>(<span class="at">overall_qual =</span> <span class="fu">as.numeric</span>(overall_qual),</span>
<span id="cb82-3"><a href="#cb82-3" aria-hidden="true" tabindex="-1"></a>         <span class="at">garage_qual =</span> <span class="fu">as.numeric</span>(garage_qual)) <span class="sc">|&gt;</span> </span>
<span id="cb82-4"><a href="#cb82-4" aria-hidden="true" tabindex="-1"></a>  <span class="fu">select</span>(<span class="fu">where</span>(is.numeric)) <span class="sc">|&gt;</span> </span>
<span id="cb82-5"><a href="#cb82-5" aria-hidden="true" tabindex="-1"></a>  <span class="fu">cor</span>(<span class="at">use =</span> <span class="st">"pairwise.complete.obs"</span>) <span class="sc">|&gt;</span> </span>
<span id="cb82-6"><a href="#cb82-6" aria-hidden="true" tabindex="-1"></a>  corrplot<span class="sc">::</span><span class="fu">corrplot.mixed</span>()</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
<div class="cell-output-display">
<p><img src="002_exploratory_data_analysis_files/figure-html/u2-modeling-27-1.png" class="img-fluid" width="672"></p>
</div>
</div>
<p><strong>coding sidebar</strong> Note use of namespace (<code>corrplot::corrplot.mixed()</code>) to call this function from corrplot</p>
</section>
</section>
<section id="categorical-and-numeric" class="level4" data-number="2.4.3.2">
<h4 data-number="2.4.3.2" class="anchored" data-anchor-id="categorical-and-numeric"><span class="header-section-number">2.4.3.2</span> Categorical and Numeric</h4>
<section id="grouped-box-violin-plots" class="level5" data-number="2.4.3.2.1">
<h5 data-number="2.4.3.2.1" class="anchored" data-anchor-id="grouped-box-violin-plots"><span class="header-section-number">2.4.3.2.1</span> Grouped Box + Violin Plots</h5>
<p>A grouped version of the combined box and violin plot is our preferred visualization for relationship between categorical and numeric variables (included in <code>fun_plots.r</code>)</p>
<ul>
<li>Often best when feature is categorical and outcome is numeric but can reverse</li>
<li>Can use with ordered or unordered categorical variable</li>
<li><span class="citation" data-cites="RDS">Wickham, Çetinkaya-Rundel, and Grolemund (<a href="#ref-RDS" role="doc-biblioref">2023</a>)</span> also describes use of grouped frequency polygons for this combination of variable classes</li>
</ul>
<div class="cell">
<div class="sourceCode cell-code" id="cb83"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb83-1"><a href="#cb83-1" aria-hidden="true" tabindex="-1"></a>plot_grouped_box_violin <span class="ot">&lt;-</span> <span class="cf">function</span>(df, x, y){</span>
<span id="cb83-2"><a href="#cb83-2" aria-hidden="true" tabindex="-1"></a>  x_label_size <span class="ot">&lt;-</span> <span class="fu">if_else</span>(skimr<span class="sc">::</span><span class="fu">n_unique</span>(df[[x]]) <span class="sc">&lt;</span> <span class="dv">7</span>, <span class="dv">11</span>, <span class="dv">7</span>)</span>
<span id="cb83-3"><a href="#cb83-3" aria-hidden="true" tabindex="-1"></a>  </span>
<span id="cb83-4"><a href="#cb83-4" aria-hidden="true" tabindex="-1"></a>  df <span class="sc">|&gt;</span></span>
<span id="cb83-5"><a href="#cb83-5" aria-hidden="true" tabindex="-1"></a>    <span class="fu">ggplot</span>(<span class="fu">aes</span>(<span class="at">x =</span> .data[[x]], <span class="at">y =</span> .data[[y]])) <span class="sc">+</span></span>
<span id="cb83-6"><a href="#cb83-6" aria-hidden="true" tabindex="-1"></a>    <span class="fu">geom_violin</span>(<span class="at">fill =</span> <span class="st">"green"</span>, <span class="at">color =</span> <span class="cn">NA</span>) <span class="sc">+</span></span>
<span id="cb83-7"><a href="#cb83-7" aria-hidden="true" tabindex="-1"></a>    <span class="fu">geom_boxplot</span>(<span class="at">width =</span> .<span class="dv">1</span>, <span class="at">fill =</span> <span class="cn">NA</span>, <span class="at">lwd =</span> <span class="fl">1.1</span>, <span class="at">fatten =</span> <span class="fl">1.1</span>) <span class="sc">+</span></span>
<span id="cb83-8"><a href="#cb83-8" aria-hidden="true" tabindex="-1"></a>    <span class="fu">theme</span>(<span class="at">axis.text.x =</span> <span class="fu">element_text</span>(<span class="at">angle =</span> <span class="dv">90</span>, <span class="at">size =</span> x_label_size, </span>
<span id="cb83-9"><a href="#cb83-9" aria-hidden="true" tabindex="-1"></a>                                     <span class="at">vjust =</span> <span class="fl">0.5</span>, <span class="at">hjust =</span> <span class="dv">1</span>),</span>
<span id="cb83-10"><a href="#cb83-10" aria-hidden="true" tabindex="-1"></a>          <span class="at">axis.text.y =</span> <span class="fu">element_text</span>(<span class="at">size =</span> <span class="dv">11</span>))</span>
<span id="cb83-11"><a href="#cb83-11" aria-hidden="true" tabindex="-1"></a>}</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
</div>
<p>Here is the relationship between <code>overall_qual</code> and <code>sale_price</code></p>
<ul>
<li>Tend to prefer this over the scatterplot (with <code>as.numeric()</code>) for ordered categorical variables</li>
<li>Increasing spread of <code>sale_price</code> at higher levels of <code>overall_qual</code> is clearer in this plot</li>
</ul>
<div class="cell">
<div class="sourceCode cell-code" id="cb84"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb84-1"><a href="#cb84-1" aria-hidden="true" tabindex="-1"></a>data_trn <span class="sc">|&gt;</span> <span class="fu">plot_grouped_box_violin</span>(<span class="st">"overall_qual"</span>, <span class="st">"sale_price"</span>)</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
<div class="cell-output-display">
<p><img src="002_exploratory_data_analysis_files/figure-html/u2-modeling-29-1.png" class="img-fluid" width="672"></p>
</div>
</div>
<hr>
<p>Here is a box + violin with an unordered categorical variable</p>
<ul>
<li>More variation and skew in <code>sale_price</code> for one family homes (additional features, moderators?)</li>
<li>Position of townhouse (interior vs.&nbsp;exterior) seems to matter (don’t collapse?)</li>
</ul>
<div class="cell">
<div class="sourceCode cell-code" id="cb85"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb85-1"><a href="#cb85-1" aria-hidden="true" tabindex="-1"></a>data_trn <span class="sc">|&gt;</span> <span class="fu">plot_grouped_box_violin</span>(<span class="st">"bldg_type"</span>, <span class="st">"sale_price"</span>)</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
<div class="cell-output-display">
<p><img src="002_exploratory_data_analysis_files/figure-html/u2-modeling-30-1.png" class="img-fluid" width="672"></p>
</div>
</div>
<hr>
<p>When we have a categorical predictor (ordered or unordered) and a numeric outcome, we often want to see both the relationship between the variables AND the variability on the categorical variable alone. We like this combined plot enough when doing EDA to provide a specific function (included in <code>fun_plots.r</code>)! It is our go to for understanding the potential effect of a categorical predictor</p>
<div class="cell">
<div class="sourceCode cell-code" id="cb86"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb86-1"><a href="#cb86-1" aria-hidden="true" tabindex="-1"></a>plot_categorical <span class="ot">&lt;-</span> <span class="cf">function</span>(df, x, y, <span class="at">ordered =</span> <span class="cn">FALSE</span>){</span>
<span id="cb86-2"><a href="#cb86-2" aria-hidden="true" tabindex="-1"></a>  <span class="cf">if</span> (ordered) {</span>
<span id="cb86-3"><a href="#cb86-3" aria-hidden="true" tabindex="-1"></a>    df <span class="ot">&lt;-</span> df <span class="sc">|&gt;</span></span>
<span id="cb86-4"><a href="#cb86-4" aria-hidden="true" tabindex="-1"></a>      <span class="fu">mutate</span>(<span class="sc">!!</span><span class="at">x :=</span> <span class="fu">fct_reorder</span>(.data[[x]], .data[[y]]))</span>
<span id="cb86-5"><a href="#cb86-5" aria-hidden="true" tabindex="-1"></a>  }</span>
<span id="cb86-6"><a href="#cb86-6" aria-hidden="true" tabindex="-1"></a>  </span>
<span id="cb86-7"><a href="#cb86-7" aria-hidden="true" tabindex="-1"></a>  x_label_size <span class="ot">&lt;-</span> <span class="fu">if_else</span>(skimr<span class="sc">::</span><span class="fu">n_unique</span>(df[[x]]) <span class="sc">&lt;</span> <span class="dv">7</span>, <span class="dv">11</span>, <span class="dv">7</span>)</span>
<span id="cb86-8"><a href="#cb86-8" aria-hidden="true" tabindex="-1"></a>  </span>
<span id="cb86-9"><a href="#cb86-9" aria-hidden="true" tabindex="-1"></a>  p_bar <span class="ot">&lt;-</span> df <span class="sc">|&gt;</span></span>
<span id="cb86-10"><a href="#cb86-10" aria-hidden="true" tabindex="-1"></a>    <span class="fu">ggplot</span>(<span class="fu">aes</span>(<span class="at">x =</span> .data[[x]])) <span class="sc">+</span></span>
<span id="cb86-11"><a href="#cb86-11" aria-hidden="true" tabindex="-1"></a>    <span class="fu">geom_bar</span>()  <span class="sc">+</span></span>
<span id="cb86-12"><a href="#cb86-12" aria-hidden="true" tabindex="-1"></a>    <span class="fu">theme</span>(<span class="at">axis.text.x =</span> <span class="fu">element_text</span>(<span class="at">angle =</span> <span class="dv">90</span>, <span class="at">size =</span> x_label_size, </span>
<span id="cb86-13"><a href="#cb86-13" aria-hidden="true" tabindex="-1"></a>                                     <span class="at">vjust =</span> <span class="fl">0.5</span>, <span class="at">hjust =</span> <span class="dv">1</span>),</span>
<span id="cb86-14"><a href="#cb86-14" aria-hidden="true" tabindex="-1"></a>          <span class="at">axis.text.y =</span> <span class="fu">element_text</span>(<span class="at">size =</span> <span class="dv">11</span>))</span>
<span id="cb86-15"><a href="#cb86-15" aria-hidden="true" tabindex="-1"></a>  </span>
<span id="cb86-16"><a href="#cb86-16" aria-hidden="true" tabindex="-1"></a>  p_box <span class="ot">&lt;-</span> df <span class="sc">|&gt;</span></span>
<span id="cb86-17"><a href="#cb86-17" aria-hidden="true" tabindex="-1"></a>    <span class="fu">ggplot</span>(<span class="fu">aes</span>(<span class="at">x =</span> .data[[x]], <span class="at">y =</span> .data[[y]])) <span class="sc">+</span></span>
<span id="cb86-18"><a href="#cb86-18" aria-hidden="true" tabindex="-1"></a>    <span class="fu">geom_violin</span>(<span class="at">fill =</span> <span class="st">"green"</span>, <span class="at">color =</span> <span class="cn">NA</span>) <span class="sc">+</span></span>
<span id="cb86-19"><a href="#cb86-19" aria-hidden="true" tabindex="-1"></a>    <span class="fu">geom_boxplot</span>(<span class="at">width =</span> .<span class="dv">1</span>, <span class="at">fill =</span> <span class="cn">NA</span>, <span class="at">lwd =</span> <span class="fl">1.1</span>, <span class="at">fatten =</span> <span class="fl">1.1</span>) <span class="sc">+</span></span>
<span id="cb86-20"><a href="#cb86-20" aria-hidden="true" tabindex="-1"></a>    <span class="fu">theme</span>(<span class="at">axis.text.x =</span> <span class="fu">element_text</span>(<span class="at">angle =</span> <span class="dv">90</span>, <span class="at">size =</span> x_label_size, </span>
<span id="cb86-21"><a href="#cb86-21" aria-hidden="true" tabindex="-1"></a>                                     <span class="at">vjust =</span> <span class="fl">0.5</span>, <span class="at">hjust =</span> <span class="dv">1</span>),</span>
<span id="cb86-22"><a href="#cb86-22" aria-hidden="true" tabindex="-1"></a>          <span class="at">axis.text.y =</span> <span class="fu">element_text</span>(<span class="at">size =</span> <span class="dv">11</span>))</span>
<span id="cb86-23"><a href="#cb86-23" aria-hidden="true" tabindex="-1"></a>  </span>
<span id="cb86-24"><a href="#cb86-24" aria-hidden="true" tabindex="-1"></a>  <span class="fu">return</span>(<span class="fu">list</span>(p_bar, p_box))</span>
<span id="cb86-25"><a href="#cb86-25" aria-hidden="true" tabindex="-1"></a>}</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
</div>
<div class="cell">
<div class="sourceCode cell-code" id="cb87"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb87-1"><a href="#cb87-1" aria-hidden="true" tabindex="-1"></a>data_trn <span class="sc">|&gt;</span> <span class="fu">plot_categorical</span>(<span class="st">"bldg_type"</span>, <span class="st">"sale_price"</span>) <span class="sc">|&gt;</span> </span>
<span id="cb87-2"><a href="#cb87-2" aria-hidden="true" tabindex="-1"></a>  <span class="fu">plot_grid</span>(<span class="at">plotlist =</span> _, <span class="at">ncol =</span> <span class="dv">1</span>)</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
<div class="cell-output-display">
<p><img src="002_exploratory_data_analysis_files/figure-html/unnamed-chunk-17-1.png" class="img-fluid" width="672"></p>
</div>
</div>
</section>
</section>
<section id="both-categorical" class="level4" data-number="2.4.3.3">
<h4 data-number="2.4.3.3" class="anchored" data-anchor-id="both-categorical"><span class="header-section-number">2.4.3.3</span> Both Categorical</h4>
<section id="stacked-barplots" class="level5" data-number="2.4.3.3.1">
<h5 data-number="2.4.3.3.1" class="anchored" data-anchor-id="stacked-barplots"><span class="header-section-number">2.4.3.3.1</span> Stacked Barplots</h5>
<p>Stacked Barplots:</p>
<ul>
<li>Can be useful with both ordered and unordered categorical variables</li>
<li>Can create with either raw counts or percentages.
<ul>
<li>Displays different perspective (particularly with uneven distributions across levels)</li>
<li>Depends on your question</li>
</ul></li>
<li>Often, you will place the outcome on the x-axis and the feature is coded by fill</li>
</ul>
<div class="cell">
<div class="sourceCode cell-code" id="cb88"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb88-1"><a href="#cb88-1" aria-hidden="true" tabindex="-1"></a>plot_grouped_barplot_count <span class="ot">&lt;-</span> <span class="cf">function</span>(df, x, y){</span>
<span id="cb88-2"><a href="#cb88-2" aria-hidden="true" tabindex="-1"></a>  x_label_size <span class="ot">&lt;-</span> <span class="fu">if_else</span>(skimr<span class="sc">::</span><span class="fu">n_unique</span>(df[[x]]) <span class="sc">&lt;</span> <span class="dv">7</span>, <span class="dv">11</span>, <span class="dv">7</span>)</span>
<span id="cb88-3"><a href="#cb88-3" aria-hidden="true" tabindex="-1"></a>  </span>
<span id="cb88-4"><a href="#cb88-4" aria-hidden="true" tabindex="-1"></a>  df <span class="sc">|&gt;</span></span>
<span id="cb88-5"><a href="#cb88-5" aria-hidden="true" tabindex="-1"></a>    <span class="fu">ggplot</span>(<span class="fu">aes</span>(<span class="at">x =</span> .data[[y]], <span class="at">fill =</span> .data[[x]])) <span class="sc">+</span></span>
<span id="cb88-6"><a href="#cb88-6" aria-hidden="true" tabindex="-1"></a>    <span class="fu">geom_bar</span>(<span class="at">position =</span> <span class="st">"stack"</span>) <span class="sc">+</span></span>
<span id="cb88-7"><a href="#cb88-7" aria-hidden="true" tabindex="-1"></a>    <span class="fu">theme</span>(<span class="at">axis.text.x =</span> <span class="fu">element_text</span>(<span class="at">angle =</span> <span class="dv">90</span>, <span class="at">size =</span> x_label_size, </span>
<span id="cb88-8"><a href="#cb88-8" aria-hidden="true" tabindex="-1"></a>                                     <span class="at">vjust =</span> <span class="fl">0.5</span>, <span class="at">hjust =</span> <span class="dv">1</span>),</span>
<span id="cb88-9"><a href="#cb88-9" aria-hidden="true" tabindex="-1"></a>          <span class="at">axis.text.y =</span> <span class="fu">element_text</span>(<span class="at">size =</span> <span class="dv">11</span>))</span>
<span id="cb88-10"><a href="#cb88-10" aria-hidden="true" tabindex="-1"></a>}</span>
<span id="cb88-11"><a href="#cb88-11" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb88-12"><a href="#cb88-12" aria-hidden="true" tabindex="-1"></a>plot_grouped_barplot_percent <span class="ot">&lt;-</span> <span class="cf">function</span>(df, x, y){</span>
<span id="cb88-13"><a href="#cb88-13" aria-hidden="true" tabindex="-1"></a>  x_label_size <span class="ot">&lt;-</span> <span class="fu">if_else</span>(skimr<span class="sc">::</span><span class="fu">n_unique</span>(df[[x]]) <span class="sc">&lt;</span> <span class="dv">7</span>, <span class="dv">11</span>, <span class="dv">7</span>)</span>
<span id="cb88-14"><a href="#cb88-14" aria-hidden="true" tabindex="-1"></a>  </span>
<span id="cb88-15"><a href="#cb88-15" aria-hidden="true" tabindex="-1"></a>  df <span class="sc">|&gt;</span></span>
<span id="cb88-16"><a href="#cb88-16" aria-hidden="true" tabindex="-1"></a>    <span class="fu">ggplot</span>(<span class="fu">aes</span>(<span class="at">x =</span> .data[[y]], <span class="at">fill =</span> .data[[x]])) <span class="sc">+</span></span>
<span id="cb88-17"><a href="#cb88-17" aria-hidden="true" tabindex="-1"></a>    <span class="fu">geom_bar</span>(<span class="at">position =</span> <span class="st">"fill"</span>) <span class="sc">+</span></span>
<span id="cb88-18"><a href="#cb88-18" aria-hidden="true" tabindex="-1"></a>    <span class="fu">labs</span>(<span class="at">y =</span> <span class="st">"Proportion"</span>) <span class="sc">+</span></span>
<span id="cb88-19"><a href="#cb88-19" aria-hidden="true" tabindex="-1"></a>    <span class="fu">theme</span>(<span class="at">axis.text.x =</span> <span class="fu">element_text</span>(<span class="at">angle =</span> <span class="dv">90</span>, <span class="at">size =</span> x_label_size, </span>
<span id="cb88-20"><a href="#cb88-20" aria-hidden="true" tabindex="-1"></a>                                     <span class="at">vjust =</span> <span class="fl">0.5</span>, <span class="at">hjust =</span> <span class="dv">1</span>),</span>
<span id="cb88-21"><a href="#cb88-21" aria-hidden="true" tabindex="-1"></a>          <span class="at">axis.text.y =</span> <span class="fu">element_text</span>(<span class="at">size =</span> <span class="dv">11</span>))</span>
<span id="cb88-22"><a href="#cb88-22" aria-hidden="true" tabindex="-1"></a>}</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
</div>
<hr>
<p>For example, if we wanted to learn about how <code>bldg_type</code> varies by <code>lot_config</code>, see these plots</p>
<div class="cell">
<div class="sourceCode cell-code" id="cb89"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb89-1"><a href="#cb89-1" aria-hidden="true" tabindex="-1"></a>data_trn <span class="sc">|&gt;</span> <span class="fu">plot_grouped_barplot_count</span>(<span class="st">"lot_config"</span>, <span class="st">"bldg_type"</span>)</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
<div class="cell-output-display">
<p><img src="002_exploratory_data_analysis_files/figure-html/u2-modeling-33-1.png" class="img-fluid" width="672"></p>
</div>
</div>
<div class="cell">
<div class="sourceCode cell-code" id="cb90"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb90-1"><a href="#cb90-1" aria-hidden="true" tabindex="-1"></a>data_trn <span class="sc">|&gt;</span> <span class="fu">plot_grouped_barplot_percent</span>(<span class="st">"lot_config"</span>, <span class="st">"bldg_type"</span>)</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
<div class="cell-output-display">
<p><img src="002_exploratory_data_analysis_files/figure-html/u2-modeling-34-1.png" class="img-fluid" width="672"></p>
</div>
</div>
<hr>
<p>May want to plot both ways</p>
<div class="cell">
<div class="sourceCode cell-code" id="cb91"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb91-1"><a href="#cb91-1" aria-hidden="true" tabindex="-1"></a>data_trn <span class="sc">|&gt;</span> <span class="fu">plot_grouped_barplot_percent</span>(<span class="st">"lot_config"</span>, <span class="st">"bldg_type"</span>)</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
<div class="cell-output-display">
<p><img src="002_exploratory_data_analysis_files/figure-html/u2-modeling-35-1.png" class="img-fluid" width="672"></p>
</div>
</div>
<div class="cell">
<div class="sourceCode cell-code" id="cb92"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb92-1"><a href="#cb92-1" aria-hidden="true" tabindex="-1"></a>data_trn <span class="sc">|&gt;</span> <span class="fu">plot_grouped_barplot_percent</span>(<span class="st">"bldg_type"</span>, <span class="st">"lot_config"</span>)</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
<div class="cell-output-display">
<p><img src="002_exploratory_data_analysis_files/figure-html/u2-modeling-36-1.png" class="img-fluid" width="672"></p>
</div>
</div>
</section>
<section id="tile-plot" class="level5" data-number="2.4.3.3.2">
<h5 data-number="2.4.3.3.2" class="anchored" data-anchor-id="tile-plot"><span class="header-section-number">2.4.3.3.2</span> Tile Plot</h5>
<p>Tile plots may be useful if both categorical variables are ordered</p>
<div class="cell">
<div class="sourceCode cell-code" id="cb93"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb93-1"><a href="#cb93-1" aria-hidden="true" tabindex="-1"></a>plot_tile <span class="ot">&lt;-</span> <span class="cf">function</span>(df, x, y){</span>
<span id="cb93-2"><a href="#cb93-2" aria-hidden="true" tabindex="-1"></a>  df <span class="sc">|&gt;</span></span>
<span id="cb93-3"><a href="#cb93-3" aria-hidden="true" tabindex="-1"></a>    <span class="fu">count</span>(.data[[x]], .data[[y]]) <span class="sc">|&gt;</span></span>
<span id="cb93-4"><a href="#cb93-4" aria-hidden="true" tabindex="-1"></a>    <span class="fu">ggplot</span>(<span class="fu">aes</span>(<span class="at">x =</span> .data[[x]], <span class="at">y =</span> .data[[y]])) <span class="sc">+</span></span>
<span id="cb93-5"><a href="#cb93-5" aria-hidden="true" tabindex="-1"></a>    <span class="fu">geom_tile</span>(<span class="at">mapping =</span> <span class="fu">aes</span>(<span class="at">fill =</span> n))</span>
<span id="cb93-6"><a href="#cb93-6" aria-hidden="true" tabindex="-1"></a>}</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
</div>
<div class="cell">
<div class="sourceCode cell-code" id="cb94"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb94-1"><a href="#cb94-1" aria-hidden="true" tabindex="-1"></a>data_trn <span class="sc">|&gt;</span> <span class="fu">plot_tile</span>(<span class="st">"overall_qual"</span>, <span class="st">"garage_qual"</span>)</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
<div class="cell-output-display">
<p><img src="002_exploratory_data_analysis_files/figure-html/u2-modeling-38-1.png" class="img-fluid" width="672"></p>
</div>
</div>
<hr>
<p>You might also consider a scatterplot with jitter in this instance</p>
<div class="cell">
<div class="sourceCode cell-code" id="cb95"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb95-1"><a href="#cb95-1" aria-hidden="true" tabindex="-1"></a>data_trn <span class="sc">|&gt;</span> </span>
<span id="cb95-2"><a href="#cb95-2" aria-hidden="true" tabindex="-1"></a>  <span class="fu">mutate</span>(<span class="at">overall_qual =</span> <span class="fu">jitter</span>(<span class="fu">as.numeric</span>(overall_qual)),</span>
<span id="cb95-3"><a href="#cb95-3" aria-hidden="true" tabindex="-1"></a>         <span class="at">garage_qual =</span> <span class="fu">as.numeric</span>(garage_qual)) <span class="sc">|&gt;</span> </span>
<span id="cb95-4"><a href="#cb95-4" aria-hidden="true" tabindex="-1"></a>  <span class="fu">plot_scatter</span>(<span class="st">"overall_qual"</span>, <span class="st">"garage_qual"</span>)</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
<div class="cell-output-display">
<p><img src="002_exploratory_data_analysis_files/figure-html/u2-modeling-39-1.png" class="img-fluid" width="672"></p>
</div>
</div>
</section>
<section id="two-way-tables" class="level5" data-number="2.4.3.3.3">
<h5 data-number="2.4.3.3.3" class="anchored" data-anchor-id="two-way-tables"><span class="header-section-number">2.4.3.3.3</span> Two-way Tables</h5>
<p>Two-way tables are sometimes a useful summary statistic for two categorical variables. We can use <code>tabyl()</code> from the janitor package for this</p>
<p>For example, the relationship between <code>bldg_type</code> and <code>lot_config</code></p>
<div class="cell">
<div class="sourceCode cell-code" id="cb96"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb96-1"><a href="#cb96-1" aria-hidden="true" tabindex="-1"></a>data_trn <span class="sc">|&gt;</span> janitor<span class="sc">::</span><span class="fu">tabyl</span>(bldg_type, lot_config)</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
<div class="cell-output cell-output-stdout">
<pre><code>   bldg_type corner culdsac fr2 fr3 inside
      duplex     13       0   3   0     47
     one_fam    221      73  29   1    892
    town_end      8       5   3   0     92
 town_inside      0       3   3   0     40
     two_fam      6       0   1   1     24</code></pre>
</div>
</div>
</section>
</section>
</section>
</section>
<section id="working-with-recipes" class="level2" data-number="2.5">
<h2 data-number="2.5" class="anchored" data-anchor-id="working-with-recipes"><span class="header-section-number">2.5</span> Working with Recipes</h2>
<p>Recipes are used for feature engineering in <code>tidymodels</code> using the <a href="https://recipes.tidymodels.org/"><code>recipes</code></a> package</p>
<ul>
<li>Used for transforming raw predictors into features used in our models</li>
<li>Describes all steps to make feature matrix. For example:
<ul>
<li>Transforming factors into “dummy” features if needed</li>
<li>Linear and non-linear transformations (e.g., log, box-cox)</li>
<li>Polynomials and interactions (i.e., <code>x1 * x1</code> or <code>x1 * x2</code>)</li>
<li>Missing value imputations</li>
</ul></li>
<li>Proper use of recipes is an important tool to prevent data leakage between train and either validation or test.</li>
<li>Recipes use only information from the training set in all feature engineering</li>
<li>Consider example of standardizing <code>x1</code> for a feature in train vs.&nbsp;validation and test. Must use mean and sd from TRAIN to standardize <code>x1</code> in train, validate, and test. VERY IMPORTANT.</li>
</ul>
<p>We use recipes in a two step process - <code>prep()</code> and <code>bake()</code></p>
<ul>
<li>“Prepping” a recipe involves calculating any statistics needed for the transformations that will be applied to engineer features (e.g., mean and standard deviation to normalize a numeric variable).
<ul>
<li>Prepping is done with the <code>prep()</code> function.</li>
<li>Prepping is <strong>always</strong> done only with training data. A “prepped” recipe does not derive any statistics from validation or test sets.</li>
</ul></li>
<li>“Baking” is the process of calculating the features
<ul>
<li>Baking is done with the <code>bake()</code> function.</li>
<li>We used our prepped recipe when we bake.</li>
<li>Whereas we only prep a recipe with training data, we can use a prepped recipe to bake features from any dataset (training, validation, or test).</li>
</ul></li>
</ul>
<p>We will work with recipes extensively when model building starting in unit 3</p>
<p>For now, we will only use the recipe to indicate roles as a gentle introduction.</p>
<p>We will expand on this recipe in unit 3</p>
<p>Recipe syntax is very similar to generic <code>tidyverse</code> syntax (created by same group)</p>
<ul>
<li>Actually a subset of <code>tidyverse</code> functions</li>
<li>Less flexible/powerful but focused on our needs and easier to learn</li>
<li>You will eventually know both</li>
</ul>
<hr>
<p>Recipes are used in Modeling scripts (which is a third type of script after cleaning and modeling EDA scripts)</p>
<ul>
<li>Lets reload training again to pretend we are starting a new script</li>
</ul>
<div class="cell">
<div class="sourceCode cell-code" id="annotated-cell-82"><pre class="sourceCode r code-annotation-code code-with-copy code-annotated"><code class="sourceCode r"><span id="annotated-cell-82-1"><a href="#annotated-cell-82-1" aria-hidden="true" tabindex="-1"></a> data_trn <span class="ot">&lt;-</span> <span class="fu">read_csv</span>(<span class="fu">file.path</span>(path_data, <span class="st">"ames_clean_class_trn.csv"</span>), </span>
<span id="annotated-cell-82-2"><a href="#annotated-cell-82-2" aria-hidden="true" tabindex="-1"></a>                      <span class="at">col_types =</span> <span class="fu">cols</span>()) <span class="sc">|&gt;</span> </span>
<a class="code-annotation-anchor" data-target-cell="annotated-cell-82" data-target-annotation="1" onclick="event.preventDefault();">1</a><span id="annotated-cell-82-3" class="code-annotation-target"><a href="#annotated-cell-82-3" aria-hidden="true" tabindex="-1"></a>  <span class="fu">class_ames</span>() <span class="sc">|&gt;</span></span>
<span id="annotated-cell-82-4"><a href="#annotated-cell-82-4" aria-hidden="true" tabindex="-1"></a>  <span class="fu">glimpse</span>()</span><div class="code-annotation-gutter-bg"></div><div class="code-annotation-gutter"></div></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
<div class="cell-annotation">
<dl class="code-annotation-container-grid">
<dt data-target-cell="annotated-cell-82" data-target-annotation="1">1</dt>
<dd>
<span data-code-annotation="1" data-code-lines="3" data-code-cell="annotated-cell-82">Remember our function for classing!</span>
</dd>
</dl>
</div>
<div class="cell-output cell-output-stdout">
<pre><code>Rows: 1,465
Columns: 10
$ sale_price   &lt;dbl&gt; 105000, 126000, 115000, 120000, 99500, 112000, 122000, 12…
$ gr_liv_area  &lt;dbl&gt; 896, 882, 864, 836, 918, 1902, 900, 1225, 1728, 858, 1306…
$ lot_area     &lt;dbl&gt; 11622, 8400, 10500, 2280, 7892, 8930, 9819, 9320, 13260, …
$ year_built   &lt;dbl&gt; 1961, 1970, 1971, 1975, 1979, 1978, 1967, 1959, 1962, 195…
$ overall_qual &lt;fct&gt; 5, 4, 4, 7, 6, 6, 5, 4, 5, 5, 3, 5, 4, 5, 3, 5, 2, 6, 5, …
$ garage_cars  &lt;dbl&gt; 1, 2, 0, 1, 1, 2, 1, 0, 0, 0, 0, 1, 2, 2, 1, 1, 2, 2, 1, …
$ garage_qual  &lt;fct&gt; ta, ta, no_garage, ta, ta, ta, ta, no_garage, no_garage, …
$ ms_zoning    &lt;fct&gt; res_high, res_low, res_low, res_low, res_low, res_med, re…
$ lot_config   &lt;fct&gt; inside, corner, fr2, fr2, inside, inside, inside, inside,…
$ bldg_type    &lt;fct&gt; one_fam, one_fam, one_fam, town_inside, town_end, duplex,…</code></pre>
</div>
</div>
<hr>
<p>Recipes can be used to indicate the outcome and predictors that will be used in the model</p>
<ul>
<li>Can use <code>.</code> to indicate all predictors
<ul>
<li>Currently, our preferred method with some exceptions</li>
<li>We can exclude some predictors later by changing their role, removing them with a later recipe step (<span class="math inline">\(step\_rm()\)</span>), or specifying a more precise formula when we fit the model</li>
<li>See <a href="https://recipes.tidymodels.org/articles/Roles.html">Roles in Recipes</a> for more info</li>
</ul></li>
<li>Can use specific names of predictors along with <span class="math inline">\(+\)</span> if only a few predictors
<ul>
<li>e.g., <code>sale_price ~ lot_area + year_built + overall_qual</code></li>
</ul></li>
<li>Do NOT indicate interactions here
<ul>
<li>All predictors are combined with <code>+</code></li>
<li>Interactions are specified by a later explicit feature engineering step</li>
</ul></li>
</ul>
<div class="cell">
<div class="sourceCode cell-code" id="cb99"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb99-1"><a href="#cb99-1" aria-hidden="true" tabindex="-1"></a>rec <span class="ot">&lt;-</span> <span class="fu">recipe</span>(sale_price <span class="sc">~</span> ., <span class="at">data =</span> data_trn)</span>
<span id="cb99-2"><a href="#cb99-2" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb99-3"><a href="#cb99-3" aria-hidden="true" tabindex="-1"></a>rec</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
<div class="cell-output cell-output-stderr">
<pre><code></code></pre>
</div>
<div class="cell-output cell-output-stderr">
<pre><code>── Recipe ──────────────────────────────────────────────────────────────────────</code></pre>
</div>
<div class="cell-output cell-output-stderr">
<pre><code></code></pre>
</div>
<div class="cell-output cell-output-stderr">
<pre><code>── Inputs </code></pre>
</div>
<div class="cell-output cell-output-stderr">
<pre><code>Number of variables by role</code></pre>
</div>
<div class="cell-output cell-output-stderr">
<pre><code>outcome:   1
predictor: 9</code></pre>
</div>
<div class="sourceCode cell-code" id="cb106"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb106-1"><a href="#cb106-1" aria-hidden="true" tabindex="-1"></a><span class="fu">summary</span>(rec)</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
<div class="cell-output cell-output-stdout">
<pre><code># A tibble: 10 × 4
   variable     type      role      source  
   &lt;chr&gt;        &lt;list&gt;    &lt;chr&gt;     &lt;chr&gt;   
 1 gr_liv_area  &lt;chr [2]&gt; predictor original
 2 lot_area     &lt;chr [2]&gt; predictor original
 3 year_built   &lt;chr [2]&gt; predictor original
 4 overall_qual &lt;chr [3]&gt; predictor original
 5 garage_cars  &lt;chr [2]&gt; predictor original
 6 garage_qual  &lt;chr [3]&gt; predictor original
 7 ms_zoning    &lt;chr [3]&gt; predictor original
 8 lot_config   &lt;chr [3]&gt; predictor original
 9 bldg_type    &lt;chr [3]&gt; predictor original
10 sale_price   &lt;chr [2]&gt; outcome   original</code></pre>
</div>
</div>
<hr>
<section id="prepping-and-baking-a-recipe" class="level3" data-number="2.5.1">
<h3 data-number="2.5.1" class="anchored" data-anchor-id="prepping-and-baking-a-recipe"><span class="header-section-number">2.5.1</span> Prepping and Baking a Recipe</h3>
<p>Let’s make a feature matrix from the training set</p>
<p>There are two discrete (and important) steps * <code>prep()</code> * <code>bake()</code></p>
<p>First we prep the recipe using the training data</p>
<div class="cell">
<div class="sourceCode cell-code" id="annotated-cell-85"><pre class="sourceCode r code-annotation-code code-with-copy code-annotated"><code class="sourceCode r"><a class="code-annotation-anchor" data-target-cell="annotated-cell-85" data-target-annotation="1" onclick="event.preventDefault();">1</a><span id="annotated-cell-85-1" class="code-annotation-target"><a href="#annotated-cell-85-1" aria-hidden="true" tabindex="-1"></a>rec_prep <span class="ot">&lt;-</span> rec <span class="sc">|&gt;</span></span>
<a class="code-annotation-anchor" data-target-cell="annotated-cell-85" data-target-annotation="2" onclick="event.preventDefault();">2</a><span id="annotated-cell-85-2" class="code-annotation-target"><a href="#annotated-cell-85-2" aria-hidden="true" tabindex="-1"></a>  <span class="fu">prep</span>(<span class="at">training =</span> data_trn)</span><div class="code-annotation-gutter-bg"></div><div class="code-annotation-gutter"></div></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
<div class="cell-annotation">
<dl class="code-annotation-container-grid">
<dt data-target-cell="annotated-cell-85" data-target-annotation="1">1</dt>
<dd>
<span data-code-annotation="1" data-code-lines="1" data-code-cell="annotated-cell-85">We start by prepping our raw/original recipe (<code>rec</code>)</span>
</dd>
<dt data-target-cell="annotated-cell-85" data-target-annotation="2">2</dt>
<dd>
<span data-code-annotation="2" data-code-lines="2" data-code-cell="annotated-cell-85">We use the <code>prep()</code> function on on the training data. Recipes are ALWAYS prepped using training data. This makes sure that are recipes will always only use information from the training set when making features for any subsequent dataset.</span>
</dd>
</dl>
</div>
</div>
<hr>
<p>Second, we bake the training data using this prepped recipe to get a feature matrix from it.</p>
<div class="cell">
<div class="sourceCode cell-code" id="cb108"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb108-1"><a href="#cb108-1" aria-hidden="true" tabindex="-1"></a>feat_trn <span class="ot">&lt;-</span> rec_prep <span class="sc">|&gt;</span> </span>
<span id="cb108-2"><a href="#cb108-2" aria-hidden="true" tabindex="-1"></a>  <span class="fu">bake</span>(<span class="at">new_data =</span> data_trn)</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
</div>
<hr>
<p>Finally, we should generally at least glimpse (and typically do some more EDA) on our features to make sure our recipe is doing what we expect.</p>
<div class="cell">
<div class="sourceCode cell-code" id="cb109"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb109-1"><a href="#cb109-1" aria-hidden="true" tabindex="-1"></a>feat_trn <span class="sc">|&gt;</span> <span class="fu">glimpse</span>()</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
<div class="cell-output cell-output-stdout">
<pre><code>Rows: 1,465
Columns: 10
$ gr_liv_area  &lt;dbl&gt; 896, 882, 864, 836, 918, 1902, 900, 1225, 1728, 858, 1306…
$ lot_area     &lt;dbl&gt; 11622, 8400, 10500, 2280, 7892, 8930, 9819, 9320, 13260, …
$ year_built   &lt;dbl&gt; 1961, 1970, 1971, 1975, 1979, 1978, 1967, 1959, 1962, 195…
$ overall_qual &lt;fct&gt; 5, 4, 4, 7, 6, 6, 5, 4, 5, 5, 3, 5, 4, 5, 3, 5, 2, 6, 5, …
$ garage_cars  &lt;dbl&gt; 1, 2, 0, 1, 1, 2, 1, 0, 0, 0, 0, 1, 2, 2, 1, 1, 2, 2, 1, …
$ garage_qual  &lt;fct&gt; ta, ta, no_garage, ta, ta, ta, ta, no_garage, no_garage, …
$ ms_zoning    &lt;fct&gt; res_high, res_low, res_low, res_low, res_low, res_med, re…
$ lot_config   &lt;fct&gt; inside, corner, fr2, fr2, inside, inside, inside, inside,…
$ bldg_type    &lt;fct&gt; one_fam, one_fam, one_fam, town_inside, town_end, duplex,…
$ sale_price   &lt;dbl&gt; 105000, 126000, 115000, 120000, 99500, 112000, 122000, 12…</code></pre>
</div>
<div class="sourceCode cell-code" id="cb111"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb111-1"><a href="#cb111-1" aria-hidden="true" tabindex="-1"></a>feat_trn <span class="sc">|&gt;</span> <span class="fu">skim_all</span>()</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
<div class="cell-output-display">

<table style="width: auto;" class="table table-condensed">
<caption>
Data summary
</caption>
<tbody>
<tr>
<td style="text-align:left;">
Name
</td>
<td style="text-align:left;">
feat_trn
</td>
</tr>
<tr>
<td style="text-align:left;">
Number of rows
</td>
<td style="text-align:left;">
1465
</td>
</tr>
<tr>
<td style="text-align:left;">
Number of columns
</td>
<td style="text-align:left;">
10
</td>
</tr>
<tr>
<td style="text-align:left;">
_______________________
</td>
<td style="text-align:left;">
</td>
</tr>
<tr>
<td style="text-align:left;">
Column type frequency:
</td>
<td style="text-align:left;">
</td>
</tr>
<tr>
<td style="text-align:left;">
factor
</td>
<td style="text-align:left;">
5
</td>
</tr>
<tr>
<td style="text-align:left;">
numeric
</td>
<td style="text-align:left;">
5
</td>
</tr>
<tr>
<td style="text-align:left;">
________________________
</td>
<td style="text-align:left;">
</td>
</tr>
<tr>
<td style="text-align:left;">
Group variables
</td>
<td style="text-align:left;">
None
</td>
</tr>
</tbody>

</table>
<p><strong>Variable type: factor</strong></p>

<table>
<thead>
<tr>
<th style="text-align:left;">
skim_variable
</th>
<th style="text-align:right;">
n_missing
</th>
<th style="text-align:right;">
complete_rate
</th>
<th style="text-align:right;">
n_unique
</th>
<th style="text-align:left;">
top_counts
</th>
</tr>
</thead>
<tbody>
<tr>
<td style="text-align:left;">
overall_qual
</td>
<td style="text-align:right;">
0
</td>
<td style="text-align:right;">
1
</td>
<td style="text-align:right;">
10
</td>
<td style="text-align:left;">
5: 424, 6: 350, 7: 304, 8: 176
</td>
</tr>
<tr>
<td style="text-align:left;">
garage_qual
</td>
<td style="text-align:right;">
0
</td>
<td style="text-align:right;">
1
</td>
<td style="text-align:right;">
5
</td>
<td style="text-align:left;">
ta: 1312, no_: 81, fa: 57, gd: 13
</td>
</tr>
<tr>
<td style="text-align:left;">
ms_zoning
</td>
<td style="text-align:right;">
0
</td>
<td style="text-align:right;">
1
</td>
<td style="text-align:right;">
7
</td>
<td style="text-align:left;">
res: 1157, res: 217, flo: 66, com: 13
</td>
</tr>
<tr>
<td style="text-align:left;">
lot_config
</td>
<td style="text-align:right;">
0
</td>
<td style="text-align:right;">
1
</td>
<td style="text-align:right;">
5
</td>
<td style="text-align:left;">
ins: 1095, cor: 248, cul: 81, fr2: 39
</td>
</tr>
<tr>
<td style="text-align:left;">
bldg_type
</td>
<td style="text-align:right;">
0
</td>
<td style="text-align:right;">
1
</td>
<td style="text-align:right;">
5
</td>
<td style="text-align:left;">
one: 1216, tow: 108, dup: 63, tow: 46
</td>
</tr>
</tbody>

</table>
<p><strong>Variable type: numeric</strong></p>

<table>
<thead>
<tr>
<th style="text-align:left;">
skim_variable
</th>
<th style="text-align:right;">
n_missing
</th>
<th style="text-align:right;">
complete_rate
</th>
<th style="text-align:right;">
mean
</th>
<th style="text-align:right;">
sd
</th>
<th style="text-align:right;">
p0
</th>
<th style="text-align:right;">
p25
</th>
<th style="text-align:right;">
p50
</th>
<th style="text-align:right;">
p75
</th>
<th style="text-align:right;">
p100
</th>
<th style="text-align:right;">
skew
</th>
<th style="text-align:right;">
kurtosis
</th>
</tr>
</thead>
<tbody>
<tr>
<td style="text-align:left;">
gr_liv_area
</td>
<td style="text-align:right;">
0
</td>
<td style="text-align:right;">
1
</td>
<td style="text-align:right;">
1506.84
</td>
<td style="text-align:right;">
511.44
</td>
<td style="text-align:right;">
438
</td>
<td style="text-align:right;">
1128
</td>
<td style="text-align:right;">
1450
</td>
<td style="text-align:right;">
1759
</td>
<td style="text-align:right;">
5642
</td>
<td style="text-align:right;">
1.43
</td>
<td style="text-align:right;">
5.19
</td>
</tr>
<tr>
<td style="text-align:left;">
lot_area
</td>
<td style="text-align:right;">
0
</td>
<td style="text-align:right;">
1
</td>
<td style="text-align:right;">
10144.16
</td>
<td style="text-align:right;">
8177.55
</td>
<td style="text-align:right;">
1476
</td>
<td style="text-align:right;">
7500
</td>
<td style="text-align:right;">
9375
</td>
<td style="text-align:right;">
11362
</td>
<td style="text-align:right;">
164660
</td>
<td style="text-align:right;">
11.20
</td>
<td style="text-align:right;">
182.91
</td>
</tr>
<tr>
<td style="text-align:left;">
year_built
</td>
<td style="text-align:right;">
0
</td>
<td style="text-align:right;">
1
</td>
<td style="text-align:right;">
1971.35
</td>
<td style="text-align:right;">
29.65
</td>
<td style="text-align:right;">
1880
</td>
<td style="text-align:right;">
1953
</td>
<td style="text-align:right;">
1972
</td>
<td style="text-align:right;">
2000
</td>
<td style="text-align:right;">
2010
</td>
<td style="text-align:right;">
-0.54
</td>
<td style="text-align:right;">
-0.62
</td>
</tr>
<tr>
<td style="text-align:left;">
garage_cars
</td>
<td style="text-align:right;">
1
</td>
<td style="text-align:right;">
1
</td>
<td style="text-align:right;">
1.78
</td>
<td style="text-align:right;">
0.76
</td>
<td style="text-align:right;">
0
</td>
<td style="text-align:right;">
1
</td>
<td style="text-align:right;">
2
</td>
<td style="text-align:right;">
2
</td>
<td style="text-align:right;">
4
</td>
<td style="text-align:right;">
-0.26
</td>
<td style="text-align:right;">
0.10
</td>
</tr>
<tr>
<td style="text-align:left;">
sale_price
</td>
<td style="text-align:right;">
0
</td>
<td style="text-align:right;">
1
</td>
<td style="text-align:right;">
180696.15
</td>
<td style="text-align:right;">
78836.41
</td>
<td style="text-align:right;">
12789
</td>
<td style="text-align:right;">
129500
</td>
<td style="text-align:right;">
160000
</td>
<td style="text-align:right;">
213500
</td>
<td style="text-align:right;">
745000
</td>
<td style="text-align:right;">
1.64
</td>
<td style="text-align:right;">
4.60
</td>
</tr>
</tbody>

</table>
</div>
</div>
<p>We can now use our features from training to train models, but that will take place in the next unit!</p>
<p>We could also use the prepped recipe to bake validation or test data to evaluate trained models. That too will happen in the next unit!</p>
</section>
</section>
<section id="discussion-topics" class="level2" data-number="2.6">
<h2 data-number="2.6" class="anchored" data-anchor-id="discussion-topics"><span class="header-section-number">2.6</span> Discussion Topics</h2>
<ol start="0" type="1">
<li><p>House keeping</p>
<ul>
<li>Unit 2 solutions</li>
<li>Quizzes</li>
<li>Course evals for extra credit (to quiz score)!</li>
<li>Unit 3 homework
<ul>
<li>test set predictions</li>
<li>free lunch!</li>
</ul></li>
</ul></li>
<li><p>Review</p>
<ul>
<li>Goal is to develop model that closely approximates DGP</li>
<li>Goal is to evaluate (estimate) how close our model is to the DGP (how much error) with as little error as possible</li>
<li>Bias, overfitting/variance for any estimate (model and performance of model)</li>
<li>candidate model configurations</li>
<li>fit, select, evaluate</li>
<li>training, validation, test</li>
</ul></li>
<li><p>Review: 2.2.1 Stages of Data Analysis and Model Development</p></li>
<li><p>Best practices (discuss quickly)</p>
<ul>
<li>csv for data sharing, viewing, git (though be careful with data in github or other public repo!)</li>
<li>variable values saved as text when nominal and ordinal (self-documenting)</li>
<li>Create data dictionary - Documentation is critical!!</li>
<li>snake_case for variables and self-documenting names (systematic names too)</li>
</ul></li>
<li><p>Review: 2.3.1 Data Leakage Issues</p>
<ul>
<li>Review section in webbook</li>
<li>Cleaning EDA is done with full dataset (but univariate). Very limited (variable names, values, find errors)</li>
<li>Modeling EDA is only done with a training set (or even “eyeball” sample) - NEVER use validate or test set</li>
<li>Never estimate anything with full data set (e.g., missing values, standardize, etc)</li>
<li>Use recipes, prep (all estimation) with held in data than bake the appropriate set</li>
<li>Put test aside</li>
<li>You work with validation but never explore with validation (will still catch leakage with test but will be mislead to be overly optimistic and spoil test)</li>
</ul></li>
<li><p>Functions sidenote - fun_modeling.R on <a href="https://github.com/jjcurtin/lab_support">github</a></p></li>
<li><p>Review: 2.4.2 Prepping and Baking a Recipe</p>
<ul>
<li>Review section in web book</li>
<li>prep always with held in data, bake with held in &amp; out data.</li>
</ul></li>
<li><p>EDA for modeling</p>
<ul>
<li>limitless, just scratched the surface</li>
<li>Differs some based on dimenstionality of dataset</li>
<li>Learning about DGP
<ul>
<li>understand univariate distributions, frequencies</li>
<li>bivariate relationships</li>
<li>interactions (3 or more variables)</li>
<li>patterns in data</li>
</ul></li>
</ul></li>
<li><p>Extra topics, time permitting</p></li>
</ol>
<p>8.1. Missing data</p>
<pre><code>* Exclude vs. Impute in training data.  Outcomes?
* How to impute
* Missing in validate or test (can't exclude?). Exclude cases with missing outcomes.</code></pre>
<p>8.2. Outliers * Drop or fix errors! * Goal is always to estimate DGP * Exclude * Retain * Bring to fence * Don’t exclude/change outcome in validate/test</p>
<p>8.3. Issues with high dimensionality</p>
<pre><code>* Hard to do predictor level EDA
* Common choices (normality transformations)
* observed vs. predicted plots
* Methods for automated variable selection (glmnet)</code></pre>
<p>8.4. Distributional Shape</p>
<pre><code>* Measurement issues (interval scale)
* Implications for relationships with other variables
* Solutions?</code></pre>
<p>8.5. Linearity vs.&nbsp;More Complex Relationships</p>
<pre><code>* Transformations
* Choice of statistical algorithm
* Do you need a linear model?</code></pre>
<p>8.6. Interactions</p>
<pre><code>* Domain expertise
* Visual options for interactions
* But what do do with high dimensional data?
* Explanatory vs. prediction goals (algorithms that accommodate interactions)</code></pre>
<p>8.7. How to handle all of these decisions in the machine learning framework</p>
<pre><code>* Goal is to develop a model that most closely approximates the DGP
* How does validation and test help this?
* Preregistration?
  * Pre-reg for performance metric, resampling method   
  * Use of resampling for other decisions
  * Use of resampling to find correct model to test explanatory goals</code></pre>
<p>8.8. Model Assumptions</p>
<pre><code>* Why do we make assumptions?
  * Inference
  * Flexibility wrt DGP</code></pre>


<div id="refs" class="references csl-bib-body hanging-indent" role="list">
<div id="ref-AR" class="csl-entry" role="listitem">
Wickham, Hadley. 2019. <em>Advanced r</em>. 2nd ed. <a href="https://adv-r.hadley.nz/">https://adv-r.hadley.nz/</a>.
</div>
<div id="ref-RDS" class="csl-entry" role="listitem">
Wickham, Hadley, Çetinkaya-Rundel Mine, and Garrett Grolemund. 2023. <em>R for Data Science: Visualize, Model, Transform, and Import Data</em>. 2nd ed. <a href="https://r4ds.hadley.nz/">https://r4ds.hadley.nz/</a>.
</div>
</div>
</section>

</main> <!-- /main -->
<script id="quarto-html-after-body" type="application/javascript">
window.document.addEventListener("DOMContentLoaded", function (event) {
  const toggleBodyColorMode = (bsSheetEl) => {
    const mode = bsSheetEl.getAttribute("data-mode");
    const bodyEl = window.document.querySelector("body");
    if (mode === "dark") {
      bodyEl.classList.add("quarto-dark");
      bodyEl.classList.remove("quarto-light");
    } else {
      bodyEl.classList.add("quarto-light");
      bodyEl.classList.remove("quarto-dark");
    }
  }
  const toggleBodyColorPrimary = () => {
    const bsSheetEl = window.document.querySelector("link#quarto-bootstrap");
    if (bsSheetEl) {
      toggleBodyColorMode(bsSheetEl);
    }
  }
  toggleBodyColorPrimary();  
  const icon = "";
  const anchorJS = new window.AnchorJS();
  anchorJS.options = {
    placement: 'right',
    icon: icon
  };
  anchorJS.add('.anchored');
  const isCodeAnnotation = (el) => {
    for (const clz of el.classList) {
      if (clz.startsWith('code-annotation-')) {                     
        return true;
      }
    }
    return false;
  }
  const clipboard = new window.ClipboardJS('.code-copy-button', {
    text: function(trigger) {
      const codeEl = trigger.previousElementSibling.cloneNode(true);
      for (const childEl of codeEl.children) {
        if (isCodeAnnotation(childEl)) {
          childEl.remove();
        }
      }
      return codeEl.innerText;
    }
  });
  clipboard.on('success', function(e) {
    // button target
    const button = e.trigger;
    // don't keep focus
    button.blur();
    // flash "checked"
    button.classList.add('code-copy-button-checked');
    var currentTitle = button.getAttribute("title");
    button.setAttribute("title", "Copied!");
    let tooltip;
    if (window.bootstrap) {
      button.setAttribute("data-bs-toggle", "tooltip");
      button.setAttribute("data-bs-placement", "left");
      button.setAttribute("data-bs-title", "Copied!");
      tooltip = new bootstrap.Tooltip(button, 
        { trigger: "manual", 
          customClass: "code-copy-button-tooltip",
          offset: [0, -8]});
      tooltip.show();    
    }
    setTimeout(function() {
      if (tooltip) {
        tooltip.hide();
        button.removeAttribute("data-bs-title");
        button.removeAttribute("data-bs-toggle");
        button.removeAttribute("data-bs-placement");
      }
      button.setAttribute("title", currentTitle);
      button.classList.remove('code-copy-button-checked');
    }, 1000);
    // clear code selection
    e.clearSelection();
  });
  function tippyHover(el, contentFn) {
    const config = {
      allowHTML: true,
      content: contentFn,
      maxWidth: 500,
      delay: 100,
      arrow: false,
      appendTo: function(el) {
          return el.parentElement;
      },
      interactive: true,
      interactiveBorder: 10,
      theme: 'quarto',
      placement: 'bottom-start'
    };
    window.tippy(el, config); 
  }
  const noterefs = window.document.querySelectorAll('a[role="doc-noteref"]');
  for (var i=0; i<noterefs.length; i++) {
    const ref = noterefs[i];
    tippyHover(ref, function() {
      // use id or data attribute instead here
      let href = ref.getAttribute('data-footnote-href') || ref.getAttribute('href');
      try { href = new URL(href).hash; } catch {}
      const id = href.replace(/^#\/?/, "");
      const note = window.document.getElementById(id);
      return note.innerHTML;
    });
  }
      let selectedAnnoteEl;
      const selectorForAnnotation = ( cell, annotation) => {
        let cellAttr = 'data-code-cell="' + cell + '"';
        let lineAttr = 'data-code-annotation="' +  annotation + '"';
        const selector = 'span[' + cellAttr + '][' + lineAttr + ']';
        return selector;
      }
      const selectCodeLines = (annoteEl) => {
        const doc = window.document;
        const targetCell = annoteEl.getAttribute("data-target-cell");
        const targetAnnotation = annoteEl.getAttribute("data-target-annotation");
        const annoteSpan = window.document.querySelector(selectorForAnnotation(targetCell, targetAnnotation));
        const lines = annoteSpan.getAttribute("data-code-lines").split(",");
        const lineIds = lines.map((line) => {
          return targetCell + "-" + line;
        })
        let top = null;
        let height = null;
        let parent = null;
        if (lineIds.length > 0) {
            //compute the position of the single el (top and bottom and make a div)
            const el = window.document.getElementById(lineIds[0]);
            top = el.offsetTop;
            height = el.offsetHeight;
            parent = el.parentElement.parentElement;
          if (lineIds.length > 1) {
            const lastEl = window.document.getElementById(lineIds[lineIds.length - 1]);
            const bottom = lastEl.offsetTop + lastEl.offsetHeight;
            height = bottom - top;
          }
          if (top !== null && height !== null && parent !== null) {
            // cook up a div (if necessary) and position it 
            let div = window.document.getElementById("code-annotation-line-highlight");
            if (div === null) {
              div = window.document.createElement("div");
              div.setAttribute("id", "code-annotation-line-highlight");
              div.style.position = 'absolute';
              parent.appendChild(div);
            }
            div.style.top = top - 2 + "px";
            div.style.height = height + 4 + "px";
            let gutterDiv = window.document.getElementById("code-annotation-line-highlight-gutter");
            if (gutterDiv === null) {
              gutterDiv = window.document.createElement("div");
              gutterDiv.setAttribute("id", "code-annotation-line-highlight-gutter");
              gutterDiv.style.position = 'absolute';
              const codeCell = window.document.getElementById(targetCell);
              const gutter = codeCell.querySelector('.code-annotation-gutter');
              gutter.appendChild(gutterDiv);
            }
            gutterDiv.style.top = top - 2 + "px";
            gutterDiv.style.height = height + 4 + "px";
          }
          selectedAnnoteEl = annoteEl;
        }
      };
      const unselectCodeLines = () => {
        const elementsIds = ["code-annotation-line-highlight", "code-annotation-line-highlight-gutter"];
        elementsIds.forEach((elId) => {
          const div = window.document.getElementById(elId);
          if (div) {
            div.remove();
          }
        });
        selectedAnnoteEl = undefined;
      };
      // Attach click handler to the DT
      const annoteDls = window.document.querySelectorAll('dt[data-target-cell]');
      for (const annoteDlNode of annoteDls) {
        annoteDlNode.addEventListener('click', (event) => {
          const clickedEl = event.target;
          if (clickedEl !== selectedAnnoteEl) {
            unselectCodeLines();
            const activeEl = window.document.querySelector('dt[data-target-cell].code-annotation-active');
            if (activeEl) {
              activeEl.classList.remove('code-annotation-active');
            }
            selectCodeLines(clickedEl);
            clickedEl.classList.add('code-annotation-active');
          } else {
            // Unselect the line
            unselectCodeLines();
            clickedEl.classList.remove('code-annotation-active');
          }
        });
      }
  const findCites = (el) => {
    const parentEl = el.parentElement;
    if (parentEl) {
      const cites = parentEl.dataset.cites;
      if (cites) {
        return {
          el,
          cites: cites.split(' ')
        };
      } else {
        return findCites(el.parentElement)
      }
    } else {
      return undefined;
    }
  };
  var bibliorefs = window.document.querySelectorAll('a[role="doc-biblioref"]');
  for (var i=0; i<bibliorefs.length; i++) {
    const ref = bibliorefs[i];
    const citeInfo = findCites(ref);
    if (citeInfo) {
      tippyHover(citeInfo.el, function() {
        var popup = window.document.createElement('div');
        citeInfo.cites.forEach(function(cite) {
          var citeDiv = window.document.createElement('div');
          citeDiv.classList.add('hanging-indent');
          citeDiv.classList.add('csl-entry');
          var biblioDiv = window.document.getElementById('ref-' + cite);
          if (biblioDiv) {
            citeDiv.innerHTML = biblioDiv.innerHTML;
          }
          popup.appendChild(citeDiv);
        });
        return popup.innerHTML;
      });
    }
  }
});
</script>
<nav class="page-navigation">
  <div class="nav-page nav-page-previous">
      <a href="./001_overview.html" class="pagination-link">
        <i class="bi bi-arrow-left-short"></i> <span class="nav-page-text"><span class="chapter-number">1</span>&nbsp; <span class="chapter-title">Overview of Machine Learning</span></span>
      </a>          
  </div>
  <div class="nav-page nav-page-next">
      <a href="./003_regression.html" class="pagination-link">
        <span class="nav-page-text"><span class="chapter-number">3</span>&nbsp; <span class="chapter-title">Introduction to Regression Models</span></span> <i class="bi bi-arrow-right-short"></i>
      </a>
  </div>
</nav>
</div> <!-- /content -->



</body></html>